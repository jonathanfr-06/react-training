(self._cf=self._cf||[]).push([[61024,57239,98793],{817240:(e,t,a)=>{var r=a(217567),n=a(948574),s=a(45491);e.exports=function(e){return function(t,a,o){var i=Object(t);if(!n(t)){var c=r(a,3);t=s(t),a=function(e){return c(i[e],e,i)}}var l=e(t,a,o);return l>-1?i[c?t[l]:l]:void 0}}},793164:(e,t,a)=>{var r=a(817240)(a(358219));e.exports=r},358219:(e,t,a)=>{var r=a(343047),n=a(217567),s=a(295606),o=Math.max;e.exports=function(e,t,a){var i=null==e?0:e.length;if(!i)return-1;var c=null==a?0:s(a);return c<0&&(c=o(i+c,0)),r(e,n(t,3),c)}},253594:(e,t,a)=>{"use strict";var r=a(150913);Object.defineProperty(t,"Z",{enumerable:!0,get:function(){return(e=r,e&&e.__esModule?e:{default:e}).default;var e}})},870797:(e,t,a)=>{"use strict";a.d(t,{M:()=>m});var r=a(615919),n=a(840506),s=a(147760),o=a(678213),i=a(54685),c=a(9019),l=a(740223),d=a(229230),u=a(243578);const g=()=>{},p=(0,n.memo)((({customData:e={},metric:t,onComplete:a=g,stopTime:i,timing:c,augmentCustomDataAfterComplete:p})=>{const m=(0,n.useCallback)((()=>{if(t){let n;a(),n=p?p(e):e,s.n.getPageLoadMetric().mark(`${d.T}:${t.key}`),t.stop({customData:(0,r.Z)((0,r.Z)({},n),{},{previousRoute:u.x.previousRoute,previousContentId:u.x.previousContentId,pageLoadInfo:(0,o.aX)()}),stopTime:i})}}),[t,a]);return(0,l.G)(m,c),null})),m=(0,i.m)({attribution:c.x.BACKBONE})(p)},745869:(e,t,a)=>{"use strict";a.d(t,{T:()=>o});var r=a(840506),n=a(740223);const s=()=>{},o=(0,r.memo)((({markName:e,timing:t,metric:a,onComplete:o=s,timestamp:i})=>{const c=(0,r.useCallback)((()=>{a&&(a.mark(e,i),o())}),[a,o]);return(0,n.G)(c,t),null}))},243578:(e,t,a)=>{"use strict";a.d(t,{W:()=>n,x:()=>r});const r={transitionId:0,pageLoadStartTimestamp:0,routeName:null,previousRoute:null,startTimes:{},previousContentId:null,contentId:null},n=()=>0===r.transitionId},389743:(e,t,a)=>{"use strict";a.d(t,{AC:()=>o,PN:()=>i,q_:()=>c,sf:()=>l,zc:()=>s});var r=a(284186),n=a(472446);let s=function(e){return e.WHITEBOARD="whiteboard",e.PAGE="page",e.DATABASE="database",e.EMBED="embed",e}({});const o=[r.DN.name,r.SM.name,r.At.name,r.aY.name],i=[s.WHITEBOARD,s.DATABASE,s.EMBED,s.PAGE],c={[s.WHITEBOARD]:n.E.WHITEBOARD},l=["database","embed"]},165650:(e,t,a)=>{"use strict";a.d(t,{L:()=>r});const r=()=>{const e=Array.from(document.getElementsByClassName("atlaskit-portal")).filter((e=>e.firstChild));return Boolean(e.filter((e=>e.querySelectorAll('[role="dialog"]').length)).length)}},140263:(e,t,a)=>{"use strict";a.d(t,{U:()=>s});var r=a(840506),n=a(132464);class s extends r.Component{constructor(e){super(e),this.markExperienceStart()}markExperienceStart(){const{id:e,name:t,timeout:a,attributes:r,collect:s,onSuccess:o}=this.props;(0,n.OV)().start({attributes:r,name:t,timeout:a,id:e,collect:s,onSuccess:o})}render(){return null}}s.displayName="ExperienceStart"},472446:(e,t,a)=>{"use strict";a.d(t,{E:()=>r});let r=function(e){return e.EDITOR="Editor",e.HELP_PANEL="Help Panel",e.THEME_SELECTOR="Theme Selector",e.WHITEBOARD="Whiteboard",e}({})},229713:(e,t,a)=>{"use strict";a.d(t,{j:()=>r});const r=(0,a(940155).ZR)({__loadable_id__:"RrbfP",name:"LazySpaceHoverPageCard",loader:async()=>(await Promise.all([a.e(12705),a.e(11216),a.e(61769),a.e(90077),a.e(16215),a.e(82995),a.e(63681),a.e(34641),a.e(20011),a.e(38687),a.e(44155),a.e(56515),a.e(29897)]).then(a.bind(a,658782))).SpaceHoverPageCard})},984206:(e,t,a)=>{"use strict";a.d(t,{u:()=>i});var r=a(199009),n=a(443037),s=a.n(n),o=a(822464);class i extends o.W2{constructor(...e){super(...e),(0,r.Z)(this,"state",{highlightPagesIds:[],forceFetchPageId:null,scrollToCurrent:!1})}scrollToCurrentPage(){this.setState({scrollToCurrent:!0})}clearScrollTo(){this.setState({scrollToCurrent:!1})}setHighlightPagesIds(e){s()(this.state.highlightPagesIds,e)||this.setState({highlightPagesIds:e})}clearHighlightedPages(){this.setHighlightPagesIds([])}setForceFetchPageId(e){this.setState({forceFetchPageId:e})}clearForceFetch(){this.setForceFetchPageId(null)}}},898670:(e,t,a)=>{"use strict";a.r(t),a.d(t,{PageTree:()=>ge});var r=a(615919),n=a(872342),s=a(946972),o=a(840506),i=a(822464),c=a(747472),l=a(793164),d=a.n(l),u=a(492516),g=a.n(u),p=a(318122),m=a(486889),T=a(190206),v=a(400318),E=a(140263),h=a(906552),f=a(781872),I=a(219263),S=a(15325),C=a(570489),b=a(897785),P=a(634554),y=a(627521),A=a(234461),O=a(9019),R=a(213064),_=a(487696),k=a(984206),H=a(734233),N=a(229713),D=a(179640),w=a(745869),U=a(870797),M=a(381484),L=a(252926),F=a(649233),B=a(973352),x=a(340536),Z=a(534564),j=a(446251),K=a(95677),$=a(223695),V=a(600591),W=a(352418),G=a(950117),Q=a(770144),X=a(815815);const J=["item","offset"],z=["scrollToItem","onPageHighlighted","onClick","spaceId","showHoverPageCardForItemID","hoverPageCardTriggerRef","openQuickActionsId","focusedQuickActionsId","isEditingTitleId","isHoveringPageCardId","pageTreeWasSSRRendered"];var Y=a(983191),q=a(540827),ee=a(199009);class te{constructor(){(0,ee.Z)(this,"size",1),(0,ee.Z)(this,"stack",[]),(0,ee.Z)(this,"pop",(()=>this.stack.pop())),(0,ee.Z)(this,"peek",(()=>this.stack.slice(-1)[0])),(0,ee.Z)(this,"reset",(()=>{this.stack=[]}))}push({undo:e}){this.stack.push({undo:e}),this.stack=this.stack.slice(-1*this.size)}}var ae=a(431658),re=a(329957),ne=a(361895),se=a(798458),oe=a(601996);const ie=["spaceHomePageId","updateSinglePage","spaceId"];const ce=()=>{},le=(0,s.Z)("div",{target:"e11ab5bd0"})({name:"1mf4y6e",styles:"margin-left:9px;"}),de=(0,p.default)((e=>{var t;return!!d()(null!==(t=null==e?void 0:e.operations)&&void 0!==t?t:[],{targetType:"page",operation:"create"})}),(([e],[t])=>(null==e?void 0:e.id)===(null==t?void 0:t.id))),ue=({isInDrawer:e=!1,onDragDropSuccess:t=ce,onItemClick:a,isPeekingFromBlogs:s,isSuperAdmin:i=!1,pageTreeStateUpdatesContainer:l,flags:d,setIsViewingSpaceHomepage:u,setHasItemsToDisplay:p,setIsPageTreeLoading:A,setPageTreeError:O=ce,hoverPageCardTriggerRef:R={current:null},isHoverPageCardOptedIn:k=!1,showHoverPageCardForItemID:ee=null,closeAllHoverPageCards:ue=ce,isQuickActionsEnabled:ge=!1,isInlineRenameEnabled:pe=!1,startCloseHoverPageCardTimer:me=ce,clearHoverPageCardTimers:Te=ce,onEnterHoverTarget:ve=ce,onLeaveHoverTarget:Ee=ce,onBlurHoverTarget:he=ce,shouldRenderAfterIcon:fe,isSideNavRefreshEnabled:Ie=!1,homepageId:Se})=>{const Ce=(0,o.useContext)(T.F),{createAnalyticsEvent:be}=(0,m._)(),Pe=(0,c.Z)(),{sideNavLearningLoopCohort:ye}=(0,B.LO)(),{push:Ae}=(0,o.useContext)(H.M),{spaceKey:Oe,contentId:Re,contentIdLoading:_e}=(0,o.useContext)(_.z1),ke=Oe,{loadEditor:He}=(0,L.hA)(),[Ne,De]=(0,o.useState)(null),[we,Ue]=(0,o.useState)(null),[Me,Le]=(0,o.useState)(null),[Fe,Be]=(0,o.useState)(null),{setIsDraggingItem:xe,getIsDraggingItem:Ze}=(0,oe.I)(),je=(0,D.T)("confluence.frontend.page-tree.flag-auto-dismiss"),Ke=(0,D.T)("confluence.frontend.page-tree-resumedraft-bypass"),$e=(0,Z.I)(),Ve=(0,j.d)(),We=(0,o.useRef)();(0,o.useEffect)((()=>{We.current=Ve}),[Ve]);const Ge=(0,o.useRef)(!1);(0,$.As)({contentId:null!=Re?Re:"",contentType:"page",eventName:"publish:page",onEvent:()=>$e&&l.setForceFetchPageId(Re)});const{onUndoShortcut:Qe,showUndoFlag:Xe,hideLastUndoFlag:Je,addUndo:ze}=(({spaceKey:e,flags:t,intl:a,createAnalyticsEvent:r,isFlagAutoDismissEnabled:n})=>{const s=(0,o.useRef)(e),i=(0,o.useRef)(new te),c=(0,o.useCallback)((()=>{const e=i.current.pop();if(e){const{undo:t}=e;t&&t()}}),[]),l=(0,o.useCallback)((()=>{r((0,q._Z)(n)).fire(),c()}),[r,c,n]),d=(0,o.useCallback)((e=>{const s=g()();t.showSuccessFlag({id:s,title:e?a.formatMessage(ae.a.flagUndoTitle,{pageTitle:e}):a.formatMessage(ae.a.flagUndoUntitled),actions:[{content:a.formatMessage(ae.a.flagUndoAction),onClick:()=>{r((0,q.hw)(n)).fire(),c(),t.hideFlag(s)}}],isAutoDismiss:n});const o=i.current.peek();o&&(o.flagId=s)}),[t,a,r,c,n]),u=(0,o.useCallback)((()=>{const e=i.current.peek();e&&t.hideFlag(e.flagId)}),[t]),p=(0,o.useCallback)((({undo:e})=>{i.current.push({undo:e})}),[]);return e!==s.current&&(s.current=e,u(),i.current.reset()),{onUndoShortcut:l,showUndoFlag:d,hideLastUndoFlag:u,addUndo:p}})({flags:d,intl:Pe,createAnalyticsEvent:be,spaceKey:ke,isFlagAutoDismissEnabled:je}),{enforceStorageLimit:Ye,shouldBlockCreate:qe}=(0,K.u)({source:"page-tree-page-tree-item"}),et=(0,o.useCallback)(((t,r,n)=>{var s,o,i,c,l;if(null==ue||ue(),be((0,q.aE)("clicked",n,e,ye,null===(s=r.data)||void 0===s?void 0:s.status,Re,M.yo,$e,We.current)).fire(),t.metaKey||t.shiftKey||t.altKey||t.ctrlKey||1===t.button)return;const d=`${C.b}${null===(o=r.data)||void 0===o?void 0:o.webui}`,u=(0,x.v)({url:d,spaceKey:ke,contentType:null==r||null===(i=r.data)||void 0===i?void 0:i.type,editorVersion:null==r||null===(c=r.data)||void 0===c?void 0:c.editorVersion,contentId:r.id,bypassIsEnabled:Ke});"DRAFT"===(null===(l=r.data)||void 0===l?void 0:l.status)?(t.preventDefault(),t.stopPropagation(),He({contentId:r.id,spaceKey:ke,redirectUrl:u})):(t.preventDefault(),Ae(d)),a&&a()}),[Ae,a,ue,be,e,Re,ke,He,ye,Ke,$e,We]),tt=(0,o.useCallback)(((e,t,...a)=>{var r;("DRAFT"===(null===(r=t.data)||void 0===r?void 0:r.status)?Ye(et):et)(e,t,...a)}),[et,Ye]),at=Pe.formatMessage(ae.a.untitledDraftText),rt=(0,o.useCallback)((e=>o.createElement(se.v,{item:e,isSideNavRefreshEnabled:Ie})),[Ie]),nt=(0,o.useRef)(V.Mx),[st]=(({pageTreeStateUpdatesContainer:e})=>{const t=(0,o.useRef)();return[(0,o.useCallback)(((a,r)=>{if(e.state.scrollToCurrent&&a.data.isSelected&&r)return(0,b.F1)(r),void e.clearScrollTo();t.current!==a.id&&(0,b.F1)(r),t.current=a.id}),[e])]})({pageTreeStateUpdatesContainer:l}),[ot]=(({pageTreeStateUpdatesContainer:e})=>{const t=(0,o.useRef)([]);return[(0,o.useCallback)((a=>{t.current.push(a);const r=e.state.highlightPagesIds;t.current.length===r.length&&(e.clearHighlightedPages(),t.current=[])}),[e])]})({pageTreeStateUpdatesContainer:l}),{movePage:it}=(0,Y.p)(),[ct,lt]=(0,o.useState)(null),[dt,ut]=(0,o.useState)(!1),[gt,pt]=(0,o.useState)(0),mt=(0,G.m4)(),Tt=!!(window.__SSR_RENDERED__&&mt&&mt>0)&&gt>mt,vt=Boolean(window.__SSR_RENDERED__&&!Tt);!Ge.current&&vt&&(Ge.current=!0);const Et=(0,o.useCallback)(((...e)=>{Ze()||ve(...e)}),[ve,Ze]),ht=(0,o.useCallback)((e=>{const{spaceHomePageId:t,updateSinglePage:a,spaceId:s}=e;return function(e,t){let{item:a,offset:s}=e,i=(0,n.Z)(e,J);const{scrollToItem:c,onPageHighlighted:l,onClick:d,spaceId:u,showHoverPageCardForItemID:g,hoverPageCardTriggerRef:p=null,openQuickActionsId:m,focusedQuickActionsId:T,isEditingTitleId:v,isHoveringPageCardId:E,pageTreeWasSSRRendered:h}=t,f=(0,n.Z)(t,z),I="DRAFT"===a.data.status,S=a.data.status,C=(()=>{if(!h&&(a.data.isSelected||a.data.isHighlighted))return e=>{c(a,e)}})(),b=m===a.id,P=T===a.id,y=v===a.id,A=E===a.id,O=o.createElement("div",{className:"item","data-testid":"page-tree-item-wrapper",ref:C},o.createElement(X.N_,(0,r.Z)((0,r.Z)((0,r.Z)({},i),f),{},{"data-testid":"page-tree-item",item:a,onHighlight:()=>l(a.id),onClick:e=>d(e,a,u),indent:s||0,hoverPageCardTriggerRef:g===a.id?p:null,isQuickActionsOpen:b,isQuickActionsFocused:P,isEditingTitle:y,isHoveringPageCard:A,isDraft:I,contentStatus:S})));return a.data.isSelected?(R=O,o.createElement(Q.Z,{name:"page-tree-spotlight"},R)):O;var R}((0,n.Z)(e,ie),{draftText:at,isSuperAdmin:i,spaceHomePageId:t,onClick:tt,spaceKey:ke,spaceId:s,scrollToItem:st,onPageHighlighted:ot,hoverPageCardTriggerRef:R,showHoverPageCardForItemID:ee,isHoverPageCardOptedIn:k,isQuickActionsEnabled:ge,isInlineRenameEnabled:pe,startCloseHoverPageCardTimer:me,closeAllHoverPageCards:ue,openQuickActionsId:Ne,setOpenQuickActionsId:De,focusedQuickActionsId:we,setFocusedQuickActionsId:Ue,isEditingTitleId:Fe,setIsEditingTitleId:Be,isHoveringPageCardId:Me,onEnterHoverTarget:Et,onLeaveHoverTarget:Ee,onBlurHoverTarget:he,updateSinglePage:a,pageTreeWasSSRRendered:vt,renderResourcedEmoji:Ge.current,shouldRenderAfterIcon:fe,isSideNavRefreshEnabled:Ie,hideDraftHrefs:qe})}),[at,i,tt,ke,st,ot,R,ee,k,ge,pe,me,ue,Ne,we,Fe,Me,Et,Ee,he,vt,fe,Ie,Ge,qe]);(0,o.useEffect)((()=>{vt&&re.X.markFMP((0,h.es)("CFP-63.ssr-ttr"))}),[vt]);const ft=(0,o.useCallback)(((e,t)=>{d.showErrorFlag({title:Pe.formatMessage(ae.a.flagErrorTitle),description:Pe.formatMessage(ae.a.flagErrorDescription),isAutoDismiss:je}),null!=t&&t.isExpected?Ce.succeed({name:v.lYS}):(O(e),Ce.stopOnError({name:v.lYS,error:e}))}),[d,Pe,Ce,O,je]),It=(0,o.useCallback)(((e,{contentStatus:a,movedPageTitle:r,spaceId:n,source:s,destination:o,revertMove:i})=>{be((0,q.D6)(!0)).fire();const c=(e,r,n,s)=>{be((0,q.Ks)({source:"PageTree",contentStatus:a,pageId:r,previousParentPageId:n,newParentPageId:s,previousSpaceId:e,newSpaceId:e,sideNavLearningLoopCohort:ye,isEditInContextEnabled:$e,isOnEditRoute:We.current})).fire(),Ce.succeed({name:v.J5u}),t(r)},l=e=>{if(!e)return;const t=(0,ne.Gg)(e);void 0!==t?((0,F.Xb)(e),d.showErrorFlag({title:t.title.defaultMessage,description:t.description.defaultMessage,isAutoDismiss:je}),Ce.succeed({name:v.J5u,attributes:{expectedErrorDescription:t.description.defaultMessage}})):(({graphQLErrors:e})=>{if(null==e||!e.length)return!1;for(const t of e)if(Array.isArray(t.path)&&t.path.some((e=>e.includes("movePage")))&&"403"===(0,P.e9)(t))return!0;return!1})(e)?(d.showErrorFlag({title:Pe.formatMessage(ae.a.flagMovePagePermissionErrorTitle),description:Pe.formatMessage(ae.a.flagMovePagePermissionErrorDescription),isAutoDismiss:je}),Ce.abort({name:v.J5u,reason:"User lacks move permissions"})):(d.showErrorFlag({title:Pe.formatMessage(ae.a.flagErrorTitle),description:Pe.formatMessage(ae.a.flagErrorDescription),isAutoDismiss:je}),Ce.stopOnError({name:v.J5u,error:e})),lt(e)};ze({undo:()=>{const t=i();it(t).then((()=>{c(n,e.pageId,o.parentId,s.parentId)})).catch(l)}}),it(e).then((()=>{c(n,e.pageId,s.parentId,o.parentId),Xe(r)})).catch(l)}),[Ce,d,Pe,ze,it,Xe,be,t,je,ye,$e,We]),St=(0,o.useCallback)((()=>{l.clearForceFetch()}),[l]),Ct=(0,o.useCallback)((({reason:e})=>{be((0,q.D6)(!1)).fire();switch(e){case"TREE_TOO_LARGE":d.showWarningFlag({title:Pe.formatMessage(ae.a.flagLargePageTreeTitle),description:Pe.formatMessage(ae.a.flagLargePageTreeDescription),actions:[{content:Pe.formatMessage(ae.a.flagLargePageTreeSettingsAction),onClick:()=>{Ae(`/wiki/pages/reorderpages.action?key=${ke}`)}},{content:Pe.formatMessage(ae.a.flagLargePageTreeRefreshAction),onClick:()=>window.location.reload()}],isAutoDismiss:je}),Ce.abort({name:v.J5u,reason:"Large page tree limit exceeded"});break;case"INVALID_MOVE_LOCATION":Ce.abort({name:v.J5u,reason:"Invalid move location"});break;case"INVALID_MOVE_LOCATION_DRAFT":d.showErrorFlag({title:Pe.formatMessage(ae.a.flagInvalidMoveDraftTitle),description:Pe.formatMessage(ae.a.flagInvalidMoveDraftDescription),isAutoDismiss:je}),Ce.abort({name:v.J5u,reason:"Invalid move location onto draft"})}}),[be,Ce,d,Pe,Ae,ke,je]),bt=(0,o.useCallback)((()=>{ue(),De(null),be((0,q.BQ)()).fire(),Ce.start({name:v.J5u}),Je()}),[be,Ce,Je,ue]),Pt=(0,o.useCallback)(((t,{spaceId:a})=>{var r;be((0,q.aE)("expanded",a,e,ye,null===(r=t.data)||void 0===r?void 0:r.status,Re,M.yo,$e,We.current)).fire()}),[be,e,ye,Re,$e,We]),yt=(0,o.useCallback)(((t,{spaceId:a})=>{var r;be((0,q.aE)("collapsed",a,e,ye,null===(r=t.data)||void 0===r?void 0:r.status,Re,M.yo,$e,We.current)).fire()}),[be,e,ye,Re,$e,We]),At=(0,o.useCallback)(((e,{space:t})=>e.id!==Fe&&de(t)),[Fe]),Ot=(0,o.useCallback)(((e=void 0,t=void 0,a=void 0)=>{be((0,q.ar)(t,e,"containerNavigation",a)).fire()}),[be]),Rt=(0,o.useCallback)((e=>{(0,h._N)({subject:f.uI,subjectId:"NavigationLoading",details:{navigationView:"container",view:"space",navVersion:3,spaceKey:ke}}),(0,h._N)({subject:f.Zn,subjectId:"SpaceViewLoading",details:{navigationView:"container",view:"space",navVersion:3,spaceKey:ke}}),Ce.succeed({name:v.lYS}),e&&e>2&&pt(e-2),ut(!0)}),[Ce,ke]),_t=s?Ie?Se:void 0:l.state.forceFetchPageId||Re;return Boolean(Re)||!_e?o.createElement(o.Fragment,null,o.createElement(E.U,{key:`experience-${ke}`,name:v.lYS,id:ke}),ct&&o.createElement(y.X,{error:ct}),o.createElement(I.E,{accelerator:S.UNDO_SHORTCUT,listener:Qe}),o.createElement(W._,{key:ke,statuses:nt.current,isPeekingFromBlogs:s,onPageMove:It,onDragStart:bt,onMoveInvalid:Ct,onLoadError:ft,onExpand:Pt,onCollapse:yt,onLoadMore:Ot,onInitialLoadComplete:Rt,currentPageId:_t,highlightPages:l.state.highlightPagesIds,forceFetchCurrentPage:Boolean(l.state.forceFetchPageId),forceFetchedCallback:St,spaceKey:ke,renderItem:ht,dragPreview:rt,isDraggable:At,treeWrapperComponent:Ie?void 0:le,setHasItemsToDisplay:p,setIsViewingSpaceHomepage:u,setIsPageTreeLoading:A,isSuperAdmin:i,getIsDraggingItem:Ze,setIsDraggingItem:xe,setOpenQuickActionsId:De,isSideNavRefreshEnabled:Ie,renderResourcedEmoji:Ge.current}),!!dt&&o.createElement(o.Fragment,null,o.createElement(w.T,{markName:"fmp",metric:re.X}),o.createElement(w.T,{markName:"tti",metric:re.X}),o.createElement(U.M,{metric:re.X,customData:{initialPageTreeSize:gt,skipTreeRenderSSR:Tt}})),k&&!Ne&&!Fe&&ee?o.createElement(N.j,{id:ee,trigger:R,closeAllHoverPageCards:ue,setIsHoveringPageCardId:Le,clearHoverPageCardTimers:Te,startCloseHoverPageCardTimer:me,onBlurHoverTarget:he,setFocusedQuickActionsId:Ue,shouldUseAutomationDiscovery:!0}):null):null};ue.displayName="PageTreeInner";const ge=(0,o.memo)((e=>o.createElement(A.S,{attribution:O.x.DISCO},o.createElement(i.xs,{to:[R.Q]},(t=>o.createElement(i.xs,{to:[k.u]},(a=>o.createElement(ue,(0,r.Z)((0,r.Z)({},e),{},{pageTreeStateUpdatesContainer:a,flags:t})))))))));ge.displayName="PageTree"},781872:(e,t,a)=>{"use strict";a.d(t,{BQ:()=>n,Ce:()=>d,KJ:()=>c,Qm:()=>s,TY:()=>g,Zn:()=>l,jN:()=>i,pB:()=>u,t7:()=>p,tI:()=>r,uI:()=>o});const r="link-to-page",n="main-layout",s="manage-watcher-dialog",o="Navigation",i="navigation-fmp",c="side-navigation-fmp",l="NavigationView",d="recent-dropdown",u="resolved-inline-comments-dialog",g="copy-page-tree",p="space-directory"},2730:(e,t,a)=>{"use strict";a.d(t,{eN:()=>l,_t:()=>o,Tk:()=>c});var r=a(199009),n=a(389743);const s=e=>{const{siteId:t,resourceType:a,activationId:r,resourceId:s}=e;return n.sf.includes(a)?`ari:cloud:confluence:${t}:${a}/activation/${r}/${s}`:`ari:cloud:confluence:${t}:${a}/${s}`},o=e=>`avi:confluence:${e}`,i=e=>Array.isArray(e)?e:[e],c=e=>{var t;return null==e||null===(t=e.currentProtocol)||void 0===t?void 0:t.getType()};class l{constructor(e,t,a){(0,r.Z)(this,"client",void 0),(0,r.Z)(this,"cloudId",void 0),(0,r.Z)(this,"activationId",void 0),(0,r.Z)(this,"joinChannel",(async(e,t)=>{const a=i(t).map((t=>s({siteId:this.cloudId,resourceType:e,activationId:this.activationId,resourceId:t})));return this.client.join(a).catch((e=>{throw new Error(`PubSub Web Client (${c(this.client)}) joinChannel\n        ${JSON.stringify(e,Object.getOwnPropertyNames(e))} aris: ${a}`)}))})),(0,r.Z)(this,"leaveChannel",(async(e,t)=>{const a=i(t).map((t=>s({siteId:this.cloudId,resourceType:e,activationId:this.activationId,resourceId:t})));return this.client.leave(a).catch((e=>{throw new Error(`PubSub Web Client (${c(this.client)}) leaveChannel\n        ${JSON.stringify(e,Object.getOwnPropertyNames(e))} aris: ${a}`)}))})),(0,r.Z)(this,"subscribe",(async(e,t)=>this.subscribeSync(e,t))),(0,r.Z)(this,"subscribeSync",((e,t)=>this.client.on(e,t))),(0,r.Z)(this,"unsubscribe",(async(e,t)=>this.unsubscribeSync(e,t))),(0,r.Z)(this,"unsubscribeSync",((e,t)=>this.client.off(e,t))),this.client=e,this.cloudId=t,this.activationId=a}}},120089:(e,t,a)=>{"use strict";a.d(t,{X4:()=>d});var r=a(615919),n=a(419539),s=a(849397),o=a(2730);let i;const c=()=>{if("localhost"===window.location.hostname){const e=window.__backendOriginHost;return new URL("/gateway/wss/fps",`wss://${e}`)}},l=()=>(0,n.g)().then((async({cloudId:e,activationId:t})=>{const n=(({url:e,analyticsClient:t})=>({product:"CONFLUENCE",url:e,apsProtocol:{enabled:!0,url:c()},analyticsClient:t}))({url:"/gateway/api/pubsub",analyticsClient:await(0,s.getAnalyticsWebClient)()});return Promise.all([a.e(31382),a.e(59484)]).then(a.bind(a,139550)).then((a=>{const r=a.default;return new o.eN(new r(n),e,t)})).catch((e=>{throw new Error(`PubSub--Current Web Client ${e}, ${JSON.stringify((0,r.Z)({},n))}`)}))})),d=()=>i||(i=l(),i)},223695:(e,t,a)=>{"use strict";a.d(t,{As:()=>g});var r=a(872342),n=a(840506),s=a(804929),o=a(9019),i=a(849397),c=a(120089),l=a(2730);const d=["analyticsClient"],u=["401","Failed to fetch","Load Failed","Network error"],g=({contentId:e,contentType:t,eventName:a,onEvent:g,attribution:p})=>{const[m,T]=(0,n.useState)(void 0);(0,n.useEffect)((()=>{const a=new Promise((a=>{(0,c.X4)().then((n=>{n.joinChannel(t,e).then((()=>{if(T(n),"pubnub"===(0,l.Tk)(n.client)){var s,o;const a=null===(s=n.client)||void 0===s?void 0:s.config,{analyticsClient:c}=a,l=(0,r.Z)(a,d),u=JSON.parse(JSON.stringify(l));null===(o=u.apsProtocol)||void 0===o||delete o.url,(0,i.getAnalyticsWebClient)().then((a=>{a.sendOperationalEvent({action:"using.pubnub",actionSubject:"client",source:"usePubSubEvent",attributes:{contentId:e,contentType:t,config:u}})}))}a(n)})).catch((e=>{if(!(e=>u.some((t=>null==e?void 0:e.message.includes(t))))(e)){const t=new Error(`PubSub (${(0,l.Tk)(n.client)}) - failed to join channel - ${e}`);(0,s.UJ)().submitError(t,{attribution:p||o.x.CONTENT_EXPERIENCE})}}))}))}));return()=>{a.then((a=>{T(void 0),a.leaveChannel(t,e)}))}}),[t,e,p]),(0,n.useEffect)((()=>{if(!m)return;const e=(0,l._t)(a),t=((e,t)=>(...a)=>{t(...a),(0,i.getAnalyticsWebClient)().then((t=>{t.sendOperationalEvent({action:"received",actionSubject:"pubsub.event",actionSubjectId:e,source:"usePubSubEvent"})}),(()=>{}))})(e,g);try{m.subscribeSync(e,t)}catch(r){const e=new Error(`PubSub (${(0,l.Tk)(m.client)}) - failed to subscribe to ${a} - ${r}`);(0,s.UJ)().submitError(e,{attribution:p||o.x.CONTENT_EXPERIENCE})}return()=>{m.unsubscribeSync(e,t)}}),[m,a,g,p])}},219263:(e,t,a)=>{"use strict";a.d(t,{E:()=>I});var r=a(840506),n=a(167347),s=a(410941),o=a(170560),i=a(634554),c=a(722755),l=a(627521),d=a(582463),u=a(649233),g=a(483647),p=a(446251);const m=a(779076).ZP`query GeneralShortcutsEnabledQuery@experimental{experimentalKeyboardShortcutsStatus{enabled}}`;var T=a(953901),v=a(486889),E=a(381484);const h=(0,r.memo)((({accelerator:e,listener:t})=>{const{createAnalyticsEvent:a}=(0,v._)(),n=(0,r.useCallback)((r=>{const n="string"==typeof e?e:e.find((e=>e.endsWith(r.key)))||e[0];!1!==t(r)&&a({type:"sendUIEvent",data:{action:"pressed",actionSubject:"keyboardShortcut",source:"globalNavigation",attributes:{key:n,navVersion:"3",navdexPointType:E.yo}}}).fire()}),[a,t,e]);return r.createElement(T.S,{accelerator:e,listener:n})}));var f=a(188225);const I=({accelerator:e,listener:t,isAppNavigationShortcut:a=!1,shortcutType:v=T.P.Confluence,allowInDialog:E=!1})=>{var I,S;const[C,b]=(0,r.useState)(!1),{isLoggedIn:P,isLicensed:y}=(0,d.D)(),A=(0,p.d)(),[O]=(0,s.d)(),R=(0,o.k)(),[,_]=(0,f.B)(),k=A||R&&O.isLive,H=!P||!y||C||k,{loading:N,error:D,data:w}=(0,n.aM)(m,{skip:H,onError(e){var t;const a=null==e||null===(t=e.graphQLErrors)||void 0===t?void 0:t.some((e=>(0,i.j6)(e,"401")||(0,c.T)(e)));b(a),(a||(0,g.S)(e))&&(0,u.Xb)(e)}});if((0,r.useEffect)((()=>{var e;const t=null==w||null===(e=w.experimentalKeyboardShortcutsStatus)||void 0===e?void 0:e.enabled;_.setKeyboardShortcutsEnabled(t)}),[null==w||null===(I=w.experimentalKeyboardShortcutsStatus)||void 0===I?void 0:I.enabled,_]),N)return null;if(D)return(0,i.j6)(D,"401")||(0,c.T)(D)||(0,g.S)(D)?((0,u.Xb)(D),null):r.createElement(l.X,{error:D});return(null==w||null===(S=w.experimentalKeyboardShortcutsStatus)||void 0===S?void 0:S.enabled)?a?r.createElement(h,{accelerator:e,listener:t}):r.createElement(T.S,{accelerator:e,listener:t,shortcutType:v,allowInDialog:E}):null}},15325:(e,t,a)=>{"use strict";a.r(t),a.d(t,{AI_MATE_SHORTCUT:()=>A,AUTOMATION_SHORTCUT:()=>U,BLOG_SHORTCUT:()=>i,BROWSER_SAVE_SHORTCUT:()=>n,CLOSE_INLINE_COMMENTS_SHORTCUT:()=>k,COMMENT_EDITOR_SHORTCUT:()=>s,CREATE_COMMENT_SHORTCUT:()=>d,EDITOR2_SHORTCUTS:()=>r,EDIT_SHORTCUT:()=>g,GLOBAL_CREATE_SHORTCUT:()=>c,GO_HOME_SHORTCUT:()=>C,GO_TO_RECENT_SHORTCUT:()=>P,HELP_SHORTCUT:()=>w,INLINE_COMMENTS_SHORTCUT:()=>o,LABELS_SHORTCUT:()=>v,LINK_TO_THIS_PAGE_SHORTCUT:()=>u,NAVIGATION_SHORTCUT:()=>S,NAVIGATION_SLASH_SHORTCUT:()=>O,NEXT_COMMENT_SHORTCUT:()=>h,NEXT_TEMPLATE_SHORTCUT:()=>D,NOTIFICATIONS_SHORTCUT:()=>b,PRESENTATION_MODE_SHORTCUT:()=>p,PREV_COMMENT_SHORTCUT:()=>f,PREV_TEMPLATE_SHORTCUT:()=>N,SHARE_PAGE_SHORTCUT:()=>T,SIDE_NAVIGATION_SHORTCUT:()=>R,SIDE_NAVIGATION_SHORTCUT_IN_EDIT:()=>_,SPACE_OVERVIEW_SHORTCUT:()=>y,STAR_BUTTON_SHORTCUT:()=>l,SUBMIT_FEEDBACK_SHORTCUT:()=>I,UNDO_SHORTCUT:()=>H,VIEW_ATTACHMENTS_SHORTCUT:()=>E,WATCH_PAGE_SHORTCUT:()=>m});const r={PUBLISH:"mod+enter",PUBLISH_WITH_COMMENT:"mod+shift+enter",EDIT:"e",PREVIEW:"mod+shift+e"},n="mod+s",s="command+enter",o="mod+enter",i="b",c="c",l="f",d="m",u="k",g="e",p="r",m="w",T="s",v="l",E="t",h="n",f="p",I="g f",S="g g",C="g d",b="g n",P="g r",y="g s",A="g a",O="/",R="[",_="ctrl+[",k="]",H="mod+z",N="left",D="right",w="?",U="a"},145183:(e,t,a)=>{"use strict";a.d(t,{j3:()=>s,Mm:()=>o,qX:()=>i,fK:()=>c,HU:()=>l});var r=a(15325);const n=(e,t)=>("string"==typeof t?e.push(t):"object"==typeof t&&e.push(...Object.values(t).reduce(n,[])),e),s="shortcuts-are-allowed",o="shortcuts-are-allowed-in-modal",i=["ProseMirror-focused",s],c=[o],l=Object.values(r).reduce(n,[])},188225:(e,t,a)=>{"use strict";a.d(t,{B:()=>o});var r=a(834232),n=a(944547);const s=(0,r.M)({initialState:{areKeyboardShortcutsEnabled:!1},actions:{setKeyboardShortcutsEnabled:e=>({setState:t})=>{t({areKeyboardShortcutsEnabled:e})}},name:"areKeyboardShortcutsEnabled"}),o=(0,n.Bi)(s,{selector:e=>e.areKeyboardShortcutsEnabled})},451843:(e,t,a)=>{"use strict";a.d(t,{BP:()=>n,NG:()=>c,ZC:()=>r,jf:()=>i,n$:()=>s,uF:()=>o});const r="confluence.frontend.storage-enforcement",n="confluence.ssr.storage-enforcement_0msw5",s="confluence.frontend.storage-enforcement.release.two_6ajmv",o="confluence.frontend.storage-enforcement.release.two.exposure_se96j",i="onboarding",c="https://support.atlassian.com/confluence-cloud/docs/manage-your-storage-usage/"},948479:(e,t,a)=>{"use strict";a.d(t,{x:()=>o});var r=a(834232),n=a(944547);const s=(0,r.M)({name:"BLOCK_CREATE_MODAL_STORE",initialState:{isActive:!1,source:""},actions:{showBlockCreateModal:e=>({setState:t})=>{t({isActive:!0,source:e})},onBlockCreateModalClose:()=>({setState:e})=>{e({isActive:!1,source:""})}}}),o=(0,n.Bi)(s)},415138:(e,t,a)=>{"use strict";a.d(t,{T:()=>s});var r=a(167347);const n=a(779076).ZP`query GetCurrentStorageUsageQuery{storage{bytesUsed isStorageEnforcementGracePeriodComplete gracePeriodEndDate}}`,s=({skip:e}={})=>{var t,a,s;const{data:o,loading:i,error:c}=(0,r.aM)(n,{skip:e});return{currentUsage:null==o||null===(t=o.storage)||void 0===t?void 0:t.bytesUsed,isStorageEnforcementGracePeriodComplete:null==o||null===(a=o.storage)||void 0===a?void 0:a.isStorageEnforcementGracePeriodComplete,gracePeriodEndDate:null==o||null===(s=o.storage)||void 0===s?void 0:s.gracePeriodEndDate,loading:i,error:c}}},95677:(e,t,a)=>{"use strict";a.d(t,{u:()=>g});var r=a(840506),n=a(486889),s=a(190206),o=a(400318),i=a(582463),c=a(451843),l=a(415138),d=a(349904),u=a(948479);const g=({source:e})=>{const t=(0,r.useContext)(s.F),{createAnalyticsEvent:a}=(0,n._)(),{isReleaseTwoEligible:g}=(0,d.K)(),{featureFlagClient:p}=(0,i.D)(),{isStorageEnforcementGracePeriodComplete:m}=(0,l.T)({skip:!g}),[,{showBlockCreateModal:T}]=(0,u.x)(),v=g&&Boolean(m)&&p.getBooleanValue(c.uF,{default:!1,shouldTrackExposureEvent:!0}),E=(0,r.useCallback)((r=>(...n)=>{if(v){const r=null==n?void 0:n[0];return r&&"function"==typeof r.preventDefault&&r.preventDefault(),t.start({name:o.tp0}),a({type:"sendOperationalEvent",data:{action:"render",actionSubject:"hardStorageEnforcement",actionSubjectId:"enforceStorageLimit",source:e||"onboarding"}}).fire(),void T(e)}return r.apply(void 0,n)}),[a,t,v,T,e]);return{shouldBlockCreate:v,enforceStorageLimit:E}}},349904:(e,t,a)=>{"use strict";a.d(t,{K:()=>c});var r=a(582463),n=a(179640),s=a(856389),o=a(526771),i=a(451843);const c=({shouldCheckSSRFlag:e}={})=>{const{edition:t,isLicensed:a,isLoggedIn:c}=(0,r.D)(),l=(0,n.T)(i.ZC),d=(0,n.T)(i.n$),u=Boolean(e)&&(0,o.y)(i.BP),g=t===s.m.FREE&&c&&a;return{isEligibleUser:g,isReleaseOneEligible:g&&(l||u),isReleaseTwoEligible:g&&(d||u)}}},770144:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var r=a(840506),n=a(253594),s=a(316612);const o=({children:e,name:t})=>r.createElement(s.l4,null,(a=>a?r.createElement(n.Z,{innerRef:a(t)},r.createElement(r.Fragment,null,e)):e));o.displayName="SpotlightTarget";const i=o}}]);
//# sourceMappingURL=61024.Z0WQYmako_.js.map