"use strict";(self._cf=self._cf||[]).push([[28648,76140],{870797:(e,t,n)=>{n.d(t,{M:()=>p});var o=n(615919),r=n(840506),i=n(147760),s=n(678213),a=n(54685),l=n(9019),c=n(740223),d=n(229230),u=n(243578);const E=()=>{},_=(0,r.memo)((({customData:e={},metric:t,onComplete:n=E,stopTime:a,timing:l,augmentCustomDataAfterComplete:_})=>{const p=(0,r.useCallback)((()=>{if(t){let r;n(),r=_?_(e):e,i.n.getPageLoadMetric().mark(`${d.T}:${t.key}`),t.stop({customData:(0,o.Z)((0,o.Z)({},r),{},{previousRoute:u.x.previousRoute,previousContentId:u.x.previousContentId,pageLoadInfo:(0,s.aX)()}),stopTime:a})}}),[t,n]);return(0,c.G)(p,l),null})),p=(0,a.m)({attribution:l.x.BACKBONE})(_)},904148:(e,t,n)=>{n.d(t,{$u:()=>R,Ci:()=>f,Ck:()=>E,EE:()=>C,Ex:()=>c,GR:()=>S,Ho:()=>_,Ku:()=>g,OX:()=>p,Qf:()=>b,Up:()=>m,cT:()=>u,ck:()=>o,cu:()=>i,fZ:()=>l,gX:()=>N,hM:()=>d,l$:()=>v,lr:()=>T,o2:()=>r,p$:()=>h,qi:()=>A,xl:()=>a,yG:()=>s});const o="SSR_COMMENT_BUTTON",r="SSR_SHARE_BUTTON",i="SSR_REACTIONS_BUTTON",s="SSR_WATCH_BUTTON",a="SSR_FAVORITE_BUTTON",l="SSR_EDIT_BUTTON",c="SSR_RESTRICTIONS_BUTTON",d="SSR_NAV_APP_SWITCHER",u="SSR_NAV_APPS_BUTTON",E="SSR_NAV_CREATE",_="SSR_NAV_CUSTOM_HOMEPAGE_BUTTON",p="SSR_NAV_CUSTOM_HOMEPAGE_BUTTON",S="SSR_NAV_HELP",R="SSR_NAV_HOME_BUTTON",m="SSR_NAV_NOTIFICATIONS",T="SSR_NAV_PAGES_BUTTON",N="SSR_NAV_PEOPLE_BUTTON",C="SSR_NAV_PROFILE",h="SSR_NAV_SETTINGS",g="SSR_NAV_SPACES_BUTTON",b="SSR_NAV_TEMPLATES_BUTTON",A="SSR_PAGE_TREE_NON_LINK",f="SSR_ADMIN_ANNOUNCEMENT_BANNER_DISMISS_BUTTON",v="SSR_ADMIN_ANNOUNCEMENT_BANNER_CONTENT_LINK"},243578:(e,t,n)=>{n.d(t,{W:()=>r,x:()=>o});const o={transitionId:0,pageLoadStartTimestamp:0,routeName:null,previousRoute:null,startTimes:{},previousContentId:null,contentId:null},r=()=>0===o.transitionId},267182:(e,t,n)=>{n.d(t,{M:()=>o});const o=n(779076).ZP`fragment UserPermissionFragment on Query{user(current:true){id confluence{permissionType}}}`},565867:(e,t,n)=>{n.d(t,{S:()=>i});var o=n(779076),r=n(267182);const i=o.ZP`query GlobalOperationsUserPermissionTypeQuery{...UserPermissionFragment}${r.M}`},140576:(e,t,n)=>{n.d(t,{n:()=>o});let o=function(e){return e.ANONYMOUS="ANONYMOUS",e.APP="APP",e.EXTERNAL="EXTERNAL",e.INTERNAL="INTERNAL",e.JSD="JSD",e}({})},980452:(e,t,n)=>{n.d(t,{F:()=>o});const o=e=>{var t;return null==e||null===(t=e.user)||void 0===t||null===(t=t.confluence)||void 0===t?void 0:t.permissionType}},611246:(e,t,n)=>{n.d(t,{KN:()=>r,W4:()=>a,d1:()=>s,pA:()=>o,xu:()=>i});const o="confluence.frontend.enable.external.collab",r="confluence.frontend.enable.external.collab.single.space",i="confluence.frontend.external-collaboration.guest-access.request-to-upgrade.experiment",s="confluence.frontend.external-collaboration.guest-access.request-to-upgrade.no-space-access-page",a="https://support.atlassian.com/confluence-cloud/docs/what-can-guests-see-and-do-on-confluence/"},815037:(e,t,n)=>{n.d(t,{Q:()=>d});var o=n(167347),r=n(179640),i=n(565867),s=n(140576),a=n(611246),l=n(980452);let c;const d=(e=!1)=>{const t=(0,r.T)(a.pA),{data:n,loading:d,error:u}=(0,o.aM)(i.S,{errorPolicy:"all",skip:!t||void 0!==c||e,onCompleted(e){c=c||(0,l.F)(e)===s.n.EXTERNAL}});return{isExternalCollaborator:c||(0,l.F)(n)===s.n.EXTERNAL,loading:d,error:u}}},758370:(e,t,n)=>{n.d(t,{k:()=>o});let o=function(e){return e.SHARE_PAGE="share-page",e.PAGE_RESTRICTIONS="page-restrictions",e.COPY_LINK="copy-link",e.CONTENT_TOOLS="content-tools",e.PAGE_FAVOURITE="page-favourite",e.WATCH_PAGE="watch-page",e.EDIT_PAGE="edit-page",e.PAGE_COMMENTS="page-comments",e.OPEN_EMBEDDED_LINK="open-embedded-link",e}({})},865274:(e,t,n)=>{n.r(t),n.d(t,{RestrictionsButton:()=>G});var o=n(946972),r=n(840506),i=n(822464),s=n(155049),a=n(400318),l=n(758370),c=n(301540),d=n(904148),u=n(870797),E=n(861791),_=n(906552),p=n(734233),S=n(523241),R=n(294537),m=n(95221),T=n(815037),N=n(627521),C=n(722782),h=n(437854),g=n(452077),b=n(872342),A=n(615919),f=n(920839),v=n(767001),I=n(93972),y=n(747472),P=n(142807),x=n(555687),O=n(332072),w=n(749142),B=n(486889),U=n(434022),k=n(930936);const Z=["as","style"];n(48117),n(176853),n(278960),n(598516);const D=(0,I.defineMessages)({noRestrictions:{id:"restrictions.button.no-restrictions.tooltip",defaultMessage:"No restrictions"},editRestrictionsApply:{id:"restrictions.button.edit-restrictions-apply.tooltip",defaultMessage:"Editing restricted"},restrictionsApply:{id:"restrictions.button.restrictions-apply.tooltip",defaultMessage:"Restrictions apply"},experimentRestrictions:{id:"restrictions.button.experiment-restrictions.tooltip",defaultMessage:"Upgrade to restrict page access"}}),M=(0,r.forwardRef)(((e,t)=>{let{as:n=x.Z,style:o}=e,i=(0,b.Z)(e,Z);return r.createElement(n,(0,A.Z)((0,A.Z)({},i),{},{style:(0,A.Z)((0,A.Z)({},o),{},{"--_w9hk2k":(0,f.Z)("var(--ds-background-accent-purple-subtlest, #F3F0FF)"),"--_163a8mr":(0,f.Z)("var(--ds-background-accent-blue-subtlest, #E9F2FF)"),"--_bqqy7e":(0,f.Z)("var(--ds-background-accent-purple-subtlest-hovered, #DFD8FD)"),"--_14y2h0v":(0,f.Z)("var(--ds-background-accent-blue-subtlest-hovered, #CCE0FF)"),"--_2kqn7f":(0,f.Z)("var(--ds-background-accent-purple-subtlest-pressed, #B8ACF6)"),"--_oh3up1":(0,f.Z)("var(--ds-background-accent-blue-subtlest-pressed, #85B8FF)")}),ref:t,className:(0,v.Z)(["_w1apzwfg _nup9id3t _ge1r17g7 _r7sm1psl",i.className])}))}));const L=e=>{(0,r.useEffect)((()=>{e.pageRestrictionsExperimentCohort&&(0,k.n)(!0)}),[e.pageRestrictionsExperimentCohort]);const{content:t,icon:n,ariaLabel:o,ccPageRestrictionsCohort:i}=(e=>{const t=(0,y.Z)();return e.hasDirectViewRestrictions?{content:r.createElement(P.Z,(0,A.Z)({},D.restrictionsApply)),icon:r.createElement(w.default,{primaryColor:"var(--ds-icon-danger, #DE350B)",testId:"locked-icon",label:""}),ariaLabel:t.formatMessage(D.restrictionsApply)}:e.hasInheritedViewRestrictions?{content:r.createElement(P.Z,(0,A.Z)({},D.restrictionsApply)),icon:r.createElement(U._,{primaryColor:"var(--ds-icon-danger, #DE350B)",testId:"unlocked-restricted-icon",label:""}),ariaLabel:t.formatMessage(D.restrictionsApply)}:e.hasRestrictions&&!e.hasDirectViewRestrictions?"test"===e.pageRestrictionsExperimentCohort?{content:r.createElement(P.Z,(0,A.Z)({},D.experimentRestrictions)),icon:r.createElement(U._,{primaryColor:"var(--ds-icon-selected, #0C66E4)",testId:"unlocked-icon",label:""}),ariaLabel:t.formatMessage(D.experimentRestrictions),ccPageRestrictionsCohort:e.pageRestrictionsExperimentCohort}:{content:r.createElement(P.Z,(0,A.Z)({},D.editRestrictionsApply)),icon:r.createElement(U._,{primaryColor:"var(--ds-icon, #42526E)",testId:"unlocked-icon",label:""}),ariaLabel:t.formatMessage(D.editRestrictionsApply),ccPageRestrictionsCohort:e.pageRestrictionsExperimentCohort}:"test"===e.pageRestrictionsExperimentCohort?{content:r.createElement(P.Z,(0,A.Z)({},D.experimentRestrictions)),icon:r.createElement(U._,{primaryColor:"var(--ds-icon-selected, #0C66E4)",testId:"unlocked-icon",label:""}),ariaLabel:t.formatMessage(D.experimentRestrictions),ccPageRestrictionsCohort:e.pageRestrictionsExperimentCohort}:{content:r.createElement(P.Z,(0,A.Z)({},D.noRestrictions)),icon:r.createElement(U._,{primaryColor:"var(--ds-icon, #42526E)",testId:"unlocked-icon",label:""}),ariaLabel:t.formatMessage(D.noRestrictions),ccPageRestrictionsCohort:e.pageRestrictionsExperimentCohort}})(e),{createAnalyticsEvent:s}=(0,B._)(),a="test"===i||"control"===i;(0,r.useEffect)((()=>{a&&s({type:"sendTrackEvent",data:{action:"rendered",actionSubject:"restrictionsButton",source:"pageRestrictionsButton",attributes:{ccPageRestrictionsCohort:i}}}).fire()}),[i,s,a]);const l=(...t)=>{var n;a&&s({type:"sendUIEvent",data:{action:"clicked",actionSubject:"restrictionsButton",source:"pageRestrictionsButton",attributes:{ccPageRestrictionsCohort:i}}}).fire(),null===(n=e.onClick)||void 0===n||n.call(e,...t)};return r.createElement(O.Z,{content:t},"test"===i?r.createElement(M,{"data-test-id":"restrictions.dialog.button",onClick:l,isDisabled:e.isDisabled,iconBefore:n,"aria-label":o,"data-id":"restrictions-button"}):r.createElement(x.Z,{appearance:"subtle","data-test-id":"restrictions.dialog.button",onClick:l,isDisabled:e.isDisabled,iconBefore:n,"aria-label":o,"data-id":"restrictions-button",style:{width:"32px"}}))};L.displayName="RestrictionButtonComponent";const V=(0,o.Z)("span",{target:"eltl3nx0"})({name:"wvzyhw",styles:"button{font-size:14px;}"}),F=(0,o.Z)("div",{target:"eltl3nx1"})("display:",(e=>e.isGuest?"none":"block"),";"),G=e=>{const{className:t,onClick:n,markItemAsLoaded:o,isDisabled:b,shouldHideSpinner:A,resetDialogState:f,restrictionsButtonSSRRendered:v=!1,restrictionsButtonSSRLocation:I="",triggeredFrom:y="",pageRestrictionsExperimentCohort:P}=e,x=(0,R.k)(e.contentId),O=(0,T.Q)(),w=!O.error&&O.isExternalCollaborator;(0,S.Q)("restrictions-button");const B=Boolean(window.__SSR_RENDERED__&&v),U=()=>{var e;return Boolean((null===(e=window.__SSR_EVENTS_CAPTURE__)||void 0===e?void 0:e.restrictionsButton)&&(window.__SSR_RENDERED__||!1)&&B)},k=(0,r.useCallback)((e=>{B&&(window.__SSR_EVENTS_CAPTURE__||(window.__SSR_EVENTS_CAPTURE__={}),window.__SSR_EVENTS_CAPTURE__.restrictionsButton=e),n()}),[window.__SSR_RENDERED__]),{transitionId:Z}=(0,r.useContext)(p.M);(0,r.useEffect)((()=>{var e,t;f&&Z&&(f(),null!==(e=window)&&void 0!==e&&null!==(e=e.__SSR_EVENTS_CAPTURE__)&&void 0!==e&&e.restrictionsButton&&(null===(t=window)||void 0===t||null===(t=t.__SSR_EVENTS_CAPTURE__)||void 0===t||delete t.restrictionsButton))}),[Z]),(0,r.useEffect)((()=>{U()&&n()}),[]),(0,r.useEffect)((()=>{var e,t;A&&window.__SSR_EVENTS_CAPTURE__&&null!==(e=window)&&void 0!==e&&null!==(e=e.__SSR_EVENTS_CAPTURE__)&&void 0!==e&&e.restrictionsButton&&(null===(t=window.__SSR_EVENTS_CAPTURE__)||void 0===t||delete t.restrictionsButton)}),[A]),(0,r.useEffect)((()=>{B&&C.j$.markFMP((0,_.es)("CFP-63.ssr-ttr"))}),[B]);const D=(0,r.useCallback)(((e,n,i)=>(o&&o(l.k.PAGE_RESTRICTIONS),r.createElement(r.Fragment,null,O.error&&r.createElement(N.X,{error:O.error}),!1,r.createElement(c.u,{metricName:d.Ex},r.createElement(V,{className:t||"","data-testid":"restriction-button"},r.createElement(L,{hasDirectViewRestrictions:e,hasInheritedViewRestrictions:n,hasRestrictions:i,onClick:k,isDisabled:b,pageRestrictionsExperimentCohort:P})),r.createElement(s.F,{name:a.esI}),r.createElement(u.M,{key:`end-${x}`,metric:C.j$,customData:{restrictionsButtonSSRRendered:v,restrictionsButtonSSRLocation:I,triggeredFrom:y}}))))),[o,O.error,t,k,b,P,x,v,I,y]),{restrictions:M,loading:G}=(0,m.vd)(),H=!M&&G||O.loading;return x?r.createElement(i.xs,{to:[h.I]},(e=>{if(U()&&!1===A)return r.createElement(E.C,{spinnerId:"restrictions-loading-spinner",actionType:"restrictionsButton"});if(H||w)return r.createElement(F,{isGuest:w,"data-test-id":"restriction-placeholder-container"},r.createElement(g.D,null));const t=Boolean(null==M?void 0:M.hasViewRestrictions),n=Boolean(null==M?void 0:M.hasInheritedRestrictions),o=Boolean(null==M?void 0:M.hasRestrictions);return e.setData({hasRestrictions:o,hasInheritedRestrictions:n,hasDirectViewRestrictions:t}),D(t,n,o)})):null};G.displayName="RestrictionsButton"},437854:(e,t,n)=>{n.d(t,{I:()=>i});var o=n(199009),r=n(822464);class i extends r.W2{constructor({loadUuid:e="",contentId:t=null,userCanEditRestrictions:n=!1,currentUserInfo:r=null,hasInheritedRestrictions:i=!1,hasRestrictions:s=!1,isLoaded:a=!1,restrictionsDetails:l=null,spaceKey:c=null,spaceContainsExternalCollaborators:d=!1,externalCollaboratorCount:u=0,operations:E=null,contentTitle:_=null,edition:p=null,isSiteAdmin:S=!1,contentType:R=null,contentSubType:m=null,isExternalShareEnabledForSite:T=!1,isPageExternallyShared:N=!1,isExternalShareVariation:C=!1,isContentExternallySharable:h=!1,canEditPublicLink:g=!1,ancestors:b=[]}={}){super(),(0,o.Z)(this,"getData",(()=>this.state)),(0,o.Z)(this,"resetData",(()=>{this.setState({loadUuid:"",contentId:null,contentPermissions:null,currentUserInfo:null,hasInheritedRestrictions:!1,hasRestrictions:!1,isLoaded:!1,restrictionsDetails:null,spaceKey:null,spaceContainsExternalCollaborators:!1,externalCollaboratorCount:0,operations:null,contentTitle:null,edition:null,isSiteAdmin:!1,contentType:null,contentSubType:null,contentStatus:void 0,isExternalShareEnabledForSite:!1,isPageExternallyShared:!1,isExternalShareVariation:!1,isContentExternallySharable:!1,canEditPublicLink:!1,ancestors:[]})})),(0,o.Z)(this,"setData",(e=>{Object.keys(e).some((t=>e[t]!==this.state[t]))&&this.setState(e)})),(0,o.Z)(this,"getIsLoaded",(()=>this.state.isLoaded)),(0,o.Z)(this,"getContentId",(()=>this.state.contentId)),(0,o.Z)(this,"getLoadUuid",(()=>this.state.loadUuid)),this.state={loadUuid:e,contentId:t,userCanEditRestrictions:n,currentUserInfo:r,hasInheritedRestrictions:i,hasRestrictions:s,isLoaded:a,restrictionsDetails:l,spaceKey:c,spaceContainsExternalCollaborators:d,externalCollaboratorCount:u,operations:E,contentTitle:_,edition:p,isSiteAdmin:S,contentType:R,contentSubType:m,isExternalShareEnabledForSite:T,isPageExternallyShared:N,isExternalShareVariation:C,isContentExternallySharable:h,canEditPublicLink:g,ancestors:b}}}},434022:(e,t,n)=>{n.d(t,{_:()=>a});var o=n(615919),r=n(840506),i=n(754430);const s=e=>r.createElement("svg",(0,o.Z)((0,o.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24"}),r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{opacity:".5",d:"M0 0h24v24H0z"}),r.createElement("path",{d:"M8 10V8a2 2 0 10-4 0v3H2V8a4 4 0 118 0v2h6a2 2 0 012 2v6a2 2 0 01-2 2H8a2 2 0 01-2-2v-6c0-1.1.9-2 2-2zm4 7a2 2 0 100-4 2 2 0 000 4z",fill:"currentColor",fillRule:"nonzero"})));s.displayName="UnlockedIconGlyph";const a=e=>r.createElement(i.Z,(0,o.Z)({glyph:s},e));a.displayName="UnlockedIcon"},523241:(e,t,n)=>{n.d(t,{Q:()=>i});var o=n(840506),r=n(804929);const i=e=>{(0,o.useEffect)((()=>{if(!window.__SSR_CLIENT_ERRORS__||!window.__SSR_CLIENT_ERRORS__[e])return;window.__SSR_CLIENT_ERRORS__[e].forEach((e=>(0,r.UJ)().submitError(e,{attribution:"backbone"}))),delete window.__SSR_CLIENT_ERRORS__[e]}),[e])}},749142:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r=(o=n(840506))&&o.__esModule?o:{default:o},i=n(340531);const s=e=>r.default.createElement(i.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path fill="currentColor" fill-rule="evenodd" d="M8 10V8.002A4.004 4.004 0 0112 4a4 4 0 014 4.002V10a2 2 0 012 2v6c0 1.105-.902 2-2.009 2H8.01A2 2 0 016 18v-6c0-1.102.897-1.995 2-2zm2 0h4V8.002A2.001 2.001 0 0012 6c-1.102 0-2 .898-2 2.002V10zm2 7a2 2 0 100-4 2 2 0 000 4z"/></svg>'},e));s.displayName="LockFilledIcon";var a=s;t.default=a}}]);
//# sourceMappingURL=28648.ZMBXbfqYjS.js.map