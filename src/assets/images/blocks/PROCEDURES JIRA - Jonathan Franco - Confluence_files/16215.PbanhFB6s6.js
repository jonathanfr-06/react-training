"use strict";(self._cf=self._cf||[]).push([[16215],{963444:(e,r,t)=>{t.d(r,{Z:()=>a});var i=t(615919),s=t(199009),n=t(334806);class a{constructor(e){(0,s.Z)(this,"config",void 0),(0,s.Z)(this,"cache",void 0);this.config=(0,i.Z)((0,i.Z)({},{cacheSize:10,cacheMaxAge:0}),e),this.config.cacheSize=Math.max(this.config.cacheSize||0,0),this.config.cacheMaxAge=Math.max(this.config.cacheMaxAge||0,0),this.config.cacheMaxAge&&(this.config.cacheMaxAge=Math.min(this.config.cacheMaxAge,2592e6)),this.cache=this.config.cacheMaxAge&&this.config.cacheSize?new n.LRUMap(this.config.cacheSize):null}setCachedProfile(e,r){this.cache&&this.cache.set(e,{expire:Date.now()+this.config.cacheMaxAge,profile:r})}getCachedProfile(e){if(!this.cache)return null;const r=this.cache.get(e);return r?r.expire<Date.now()?(this.cache.delete(e),null):(this.setCachedProfile(e,r.profile),r.profile):null}flushCache(){this.cache&&this.cache.clear()}}},116215:(e,r,t)=>{t.d(r,{Z:()=>h});var i=t(615919),s=t(199009),n=t(963444),a=t(638195);let o=new Map;class c extends n.Z{constructor(e){super(e),(0,s.Z)(this,"options",void 0),(0,s.Z)(this,"bypassOnFailure",void 0),(0,s.Z)(this,"featureFlagKeys",void 0),(0,s.Z)(this,"isTCReadyPromise",void 0),this.options=e,this.bypassOnFailure=!1,this.featureFlagKeys=new Map,this.isTCReadyPromise=this.createTcReadyPromise(e)}createTcReadyPromise(e){if(e.cloudId){let r=o.get(e.cloudId);return r||(r=function(e){return e.cloudId?fetch(`/gateway/api/watermelon/organization/containsAnyWorkspace?cloudId=${e.cloudId}`).then((e=>!e||e&&e.ok)):Promise.resolve(!1)}(e),o.set(e.cloudId,r)),r}return Promise.resolve(!0)}async makeFeatureFlagCheckRequest(e,r){if(!this.options.teamCentralUrl)throw new Error("options.teamCentralUrl is a required parameter for retrieving Team Central data");const t=((e,r)=>({query:"\n    query isFeatureKeyEnabled($featureKey: String!, $context: [IsFeatureEnabledContextInput]) {\n      isFeatureEnabled(featureKey: $featureKey, context: $context) {\n        enabled\n      }\n    }\n  ",variables:{featureKey:e,context:r||[]}}))(e,r);return(await(0,a.$)(`${this.options.teamCentralUrl}?operationName=isFeatureKeyEnabled`,t)).isFeatureEnabled.enabled}async makeRequest(e){if(!this.options.teamCentralUrl)throw new Error("options.teamCentralUrl is a required parameter for retrieving Team Central data");const r={query:"\n    fragment ReportingLinesUserPII on UserPII {\n      name\n      picture\n    }\n\n    fragment ReportingLinesUserFragment on ReportingLinesUser {\n      accountIdentifier\n      identifierType\n      pii {\n        ...ReportingLinesUserPII\n      }\n    }\n\n    query ReportingLines($aaid: String) {\n      reportingLines(aaidOrHash: $aaid) {\n        managers {\n          ...ReportingLinesUserFragment\n        }\n        reports {\n          ...ReportingLinesUserFragment\n        }\n      }\n    }\n  ",variables:{aaid:e}};return(await(0,a.$)(`${this.options.teamCentralUrl}?operationName=ReportingLines`,r)).reportingLines}getReportingLines(e){return this.isTCReadyPromise.then((r=>{if(r){if(!e)return Promise.reject(new Error("userId missing"));const r=this.getCachedProfile(e);return r?Promise.resolve(r):this.bypassOnFailure?Promise.resolve({}):new Promise((r=>{this.makeRequest(e).then((t=>{const i={managers:this.filterReportingLinesUser(null==t?void 0:t.managers),reports:this.filterReportingLinesUser(null==t?void 0:t.reports)};this.cache&&this.setCachedProfile(e,i),r(i)})).catch((e=>{401!==(null==e?void 0:e.status)&&403!==(null==e?void 0:e.status)||(this.bypassOnFailure=!0),r({})}))}))}return Promise.resolve({managers:[],reports:[]})}),(()=>Promise.resolve({managers:[],reports:[]})))}getFlagEnabled(e,r){return this.isTCReadyPromise.then((t=>{if(t){if(!e)return Promise.reject(new Error("featureKey missing"));if(this.featureFlagKeys.has(e))return Promise.resolve(this.featureFlagKeys.get(e));if(this.bypassOnFailure)return Promise.resolve(!1);const t=[{key:"productIdentifier",value:r||"unset"}];return new Promise((r=>{this.makeFeatureFlagCheckRequest(e,t).then((t=>{this.featureFlagKeys.set(e,t),r(t)})).catch((e=>{401!==(null==e?void 0:e.status)&&403!==(null==e?void 0:e.status)||(this.bypassOnFailure=!0),r(!1)}))}))}return Promise.resolve(!1)}),(()=>Promise.resolve(!1)))}checkWorkspaceExists(){return this.isTCReadyPromise.then((e=>e?Promise.resolve(!0):Promise.resolve(!1)),(()=>Promise.resolve(!1)))}filterReportingLinesUser(e=[]){return e.filter((e=>"ATLASSIAN_ID"===e.identifierType))}}const l=c;var d=t(951135),u=t(207684);const h=class{constructor(e,r){(0,s.Z)(this,"userClient",void 0),(0,s.Z)(this,"teamClient",void 0),(0,s.Z)(this,"tcClient",void 0),this.userClient=(null==r?void 0:r.userClient)||new u.ZP(e),this.teamClient=(null==r?void 0:r.teamClient)||new d.Z(e),this.tcClient=function(e,r){if(null!=r&&r.teamCentralClient)return r.teamCentralClient;const t=e.teamCentralUrl;return t?new l((0,i.Z)((0,i.Z)({},e),{},{teamCentralUrl:t})):void 0}(e,r)}flushCache(){var e;this.userClient.flushCache(),this.teamClient.flushCache(),null===(e=this.tcClient)||void 0===e||e.flushCache()}getProfile(e,r,t){return this.userClient.getProfile(e,r,t)}getTeamProfile(e,r,t){return this.teamClient.getProfile(e,r,t)}getReportingLines(e){var r;return(null===(r=this.tcClient)||void 0===r?void 0:r.getReportingLines(e))||Promise.resolve({managers:[],reports:[]})}getTeamCentralBaseUrl(){var e;return null===(e=this.tcClient)||void 0===e?void 0:e.options.teamCentralBaseUrl}shouldShowGiveKudos(){return this.tcClient&&this.getTeamCentralBaseUrl()?this.tcClient.checkWorkspaceExists():Promise.resolve(!1)}}},951135:(e,r,t)=>{t.d(r,{Z:()=>p});var i=t(615919),s=t(199009),n=t(892543),a=t(88594),o=t(963444),c=t(28393),l=t(638195);const d=e=>{const r=e.indexOf("/");return e.slice(r+1)},u=e=>`ari:cloud:identity::team/${e}`,h=e=>(e.append("X-ExperimentalApi","teams-beta"),e.append("X-ExperimentalApi","team-members-beta"),e.append("atl-client-name","platform-pkg"),e.append("atl-client-version","0.0.0-use.local"),e);async function m(e,r,t){const s=(({teamId:e,siteId:r})=>({query:'query TeamCard($teamId: ID!, $siteId: String!) {\n  Team: team {\n    team: teamV2(id: $teamId, siteId: $siteId) @optIn(to: "Team-v2") {\n      \n      id\n      displayName\n      description\n      smallHeaderImageUrl\n      largeHeaderImageUrl\n      smallAvatarImageUrl\n      largeAvatarImageUrl\n      members {\n        nodes {\n          member {\n            accountId\n            name\n            picture\n          }\n        }\n      }\n\n    }\n  }\n}',variables:{teamId:u(e),siteId:r||"None"}}))({teamId:r,siteId:t}),{Team:n}=await(0,l.i)(e,s,h);return(e=>{var r;const{team:t}=e;return(0,i.Z)((0,i.Z)({},t),{},{id:d(t.id),members:null===(r=t.members)||void 0===r?void 0:r.nodes.map((({member:e})=>({id:e.accountId,fullName:e.name,avatarUrl:e.picture})))})})(n)}class p extends o.Z{constructor(e){super(e),(0,s.Z)(this,"options",void 0),this.options=e}makeRequest(e,r){if(!this.options.gatewayGraphqlUrl)throw new Error("Trying to fetch via gateway with no specified config.gatewayGraphqlUrl");return m(this.options.gatewayGraphqlUrl,e,this.options.cloudId)}getProfile(e,r,t){if(!e)return Promise.reject(new Error("teamId is missing"));const s=this.getCachedProfile(e);return s?Promise.resolve(s):new Promise(((s,o)=>{const l=(0,a.P)();t&&t((0,n.Mm)("triggered")),this.makeRequest(e,r).then((r=>{this.cache&&this.setCachedProfile(e,r),t&&t((0,n.Mm)("succeeded",{duration:(0,a.P)()-l,gateway:!0})),s(r)})).catch((e=>{t&&t((0,n.Mm)("failed",(0,i.Z)((0,i.Z)({duration:(0,a.P)()-l},(0,c.NJ)(e)),{},{gateway:!0}))),o(e)}))}))}}},207684:(e,r,t)=>{t.d(r,{ZP:()=>d});var i=t(199009),s=t(615919),n=t(892543),a=t(88594),o=t(963444),c=t(28393),l=t(638195);class d extends o.Z{constructor(e){super(e),(0,i.Z)(this,"options",void 0),this.options=e}async makeRequest(e,r){if(!this.options.url)throw new Error("options.url is a required parameter");const t=((e,r)=>({query:'query User($userId: String!, $cloudId: String!) {\n    User: CloudUser(userId: $userId, cloudId: $cloudId) {\n      id\n      isCurrentUser\n      status\n      statusModifiedDate\n      isBot\n      isNotMentionable\n      fullName\n      nickname\n      email\n      meta: title\n      location\n      companyName\n      avatarUrl(size: 192)\n      remoteWeekdayIndex: localTime(format: "d")\n      remoteWeekdayString: localTime(format: "ddd")\n      remoteTimeString: localTime(format: "h:mma")\n    }\n  }',variables:{cloudId:e,userId:r}}))(e,r);return(e=>{const r=(0,s.Z)({},e.User),t=(new Date).getDay().toString();return r.remoteWeekdayIndex&&r.remoteWeekdayIndex!==t&&(r.remoteTimeString=`${r.remoteWeekdayString} ${r.remoteTimeString}`),{isBot:r.isBot,isCurrentUser:r.isCurrentUser,status:r.status,statusModifiedDate:r.statusModifiedDate||void 0,avatarUrl:r.avatarUrl||void 0,email:r.email||void 0,fullName:r.fullName||void 0,location:r.location||void 0,meta:r.meta||void 0,nickname:r.nickname||void 0,companyName:r.companyName||void 0,timestring:r.remoteTimeString||void 0}})(await(0,l.$)(this.options.url,t))}getProfile(e,r,t){if(!r)return Promise.reject(new Error("userId missing"));const i=`${e}/${r}`,o=this.getCachedProfile(i);return o?Promise.resolve(o):new Promise(((o,l)=>{const d=(0,a.P)();t&&t((0,n.Hr)("triggered")),this.makeRequest(e,r).then((e=>{this.cache&&this.setCachedProfile(i,e),t&&t((0,n.Hr)("succeeded",{duration:(0,a.P)()-d})),o(e)})).catch((e=>{t&&t((0,n.Hr)("failed",(0,s.Z)({duration:(0,a.P)()-d},(0,c.NJ)(e)))),l(e)}))}))}}},28393:(e,r,t)=>{t.d(r,{Bd:()=>d,Gp:()=>l,NJ:()=>c});var i=t(228593);const s=["NotPermitted","Gone","IdentityUserNotFoundError"],n=["IdentityUserNotFoundError","TEAMS_FORBIDDEN","TEAMS_TEAM_DELETED"],a=["Gone"];function o(e){return!!e&&(e instanceof i.UU?!!e&&s.includes(e.type):e instanceof i.k7&&(!!e.errorType&&n.includes(e.errorType)||!!e.classification&&a.includes(e.classification)))}const c=e=>{if(e instanceof i.mo)return{errorMessage:e.message,errorCount:e.errors.length,errorDetails:e.errors.map(c),isSLOFailure:!e.errors.every(o),traceId:e.traceId};if(e instanceof i.UU)return{errorMessage:e.message,errorCategory:e.category,errorType:e.type,errorPath:e.path,errorNumber:e.errorNumber,isSLOFailure:!o(e)};if(e instanceof i.nP)return{errorMessage:e.message,errorCount:e.errors.length,errorDetails:e.errors.map(c),isSLOFailure:!e.errors.every(o),traceId:e.traceId};if(e instanceof i.k7)return{errorMessage:e.message,errorType:e.errorType,errorStatusCode:e.statusCode,isSLOFailure:!o(e),errorCategory:e.classification};if(e instanceof Error){if(e.message.startsWith("Unable to fetch user:")){if(e.hasOwnProperty("cause")){const r=e.cause;if(r instanceof i.mo||r instanceof i.nP)return c(r)}return{errorMessage:e.message,isSLOFailure:!1}}return{errorMessage:e.message,isSLOFailure:!0}}return{errorMessage:"Unknown error",isSLOFailure:!0}},l=(e,r)=>{throw new i.mo(e,r)},d=(e,r)=>{throw new i.nP(e,r)}},638195:(e,r,t)=>{t.d(r,{$:()=>o,i:()=>c});var i=t(228593),s=t(28393);const n=()=>{const e=new Headers;return e.append("Content-Type","application/json"),e},a=e=>e;async function o(e,r,t=a){return l(e,r,t,s.Gp)}async function c(e,r,t=a){return l(e,r,t,s.Bd)}async function l(e,r,t=a,s){var o;const c=t(n()),l=await fetch(new Request(e,{method:"POST",credentials:"include",mode:"cors",headers:c,body:JSON.stringify(r)})),d=null==l||null===(o=l.headers)||void 0===o?void 0:o.get("atl-traceid");if(!l.ok)throw new i.oo(l.status,l.statusText,d);const u=await l.json();var h,m;u.errors&&s(u.errors,null!==(h=null===(m=u.extensions)||void 0===m||null===(m=m.gateway)||void 0===m?void 0:m.request_id)&&void 0!==h?h:d);return u.data}},892543:(e,r,t)=>{t.d(r,{BX:()=>n,Hr:()=>u,JJ:()=>g,Mm:()=>d,Q9:()=>f,Ve:()=>p,XO:()=>h,cw:()=>l,o3:()=>y,oM:()=>m,xK:()=>v});var i=t(615919),s=t(88594);const n=(e,r)=>{e&&(e=>{const r=window.requestIdleCallback;"function"==typeof r?r(e):"function"==typeof window.requestAnimationFrame&&window.requestAnimationFrame(e)})((()=>{e(r).fire("peopleTeams")}))},a="teamProfileCard",o="profilecard",c=(e,r,t,n,a={})=>({eventType:e,action:r,actionSubject:t,actionSubjectId:n,attributes:(0,i.Z)((0,i.Z)({packageName:"platform-pkg",packageVersion:"0.0.0-use.local"},a),{},{firedAt:Math.round((0,s.P)())})}),l=(e,r)=>c("ui","triggered","user"===e?o:a,void 0,{method:r}),d=(e,r)=>c("operational",e,a,"request",r),u=(e,r)=>c("operational",e,o,"request",r),h=(e,r,t)=>c("ui","rendered","user"===e?o:a,r,t),m=(e,r)=>c("ui","clicked","user"===e?o:a,"action",r),p=e=>c("ui","clicked",o,"reportingLines",e),g=(e,r)=>c("ui","clicked","user"===e?o:a,"moreActions",r),f=e=>c("ui","clicked",a,"avatar",e),v=e=>c("ui","clicked",a,"moreMembers",e),y=e=>c("ui","clicked",a,"errorRetry",e)},228593:(e,r,t)=>{t.d(r,{UU:()=>c,k7:()=>d,mo:()=>l,nP:()=>u,oo:()=>o});var i=t(872342),s=t(199009);const n=["errorNumber"],a=["statusCode","errorType","classification"];class o extends Error{constructor(e,r,t){super(r),(0,s.Z)(this,"code",void 0),(0,s.Z)(this,"traceId",void 0),this.code=e,this.traceId=t}}class c extends Error{constructor(e,r,t,a={},o=[]){super(e),(0,s.Z)(this,"category",void 0),(0,s.Z)(this,"type",void 0),(0,s.Z)(this,"path",void 0),(0,s.Z)(this,"errorNumber",void 0),(0,s.Z)(this,"extensions",void 0),this.category=r,this.type=t,this.path=o.join(".");const{errorNumber:c}=a,l=(0,i.Z)(a,n);this.errorNumber=a.errorNumber,this.extensions=l}}class l extends Error{constructor(e,r){super("DirectoryGraphQLErrors"),(0,s.Z)(this,"errors",void 0),(0,s.Z)(this,"traceId",void 0),this.traceId=r,Array.isArray(e)?this.errors=e.map((e=>new c(e.message,e.category,e.type,e.extensions,e.path))):this.errors=[]}}class d extends Error{constructor(e,r,t=[]){super(e),(0,s.Z)(this,"path",void 0),(0,s.Z)(this,"extensions",void 0),(0,s.Z)(this,"statusCode",void 0),(0,s.Z)(this,"errorType",void 0),(0,s.Z)(this,"classification",void 0),this.path=null==t?void 0:t.join(".");const{statusCode:n,errorType:o,classification:c}=r,l=(0,i.Z)(r,a);this.statusCode=n,this.errorType=o,this.classification=c,this.extensions=l}}class u extends Error{constructor(e,r){super("AGGErrors"),(0,s.Z)(this,"errors",void 0),(0,s.Z)(this,"traceId",void 0),this.traceId=r,Array.isArray(e)?this.errors=e.map((e=>new d(e.message,e.extensions,e.path))):this.errors=[]}}},88594:(e,r,t)=>{t.d(r,{P:()=>n});const i="undefined"!=typeof window&&"performance"in window&&!!performance.now,s=Date.now(),n=()=>i?performance.now():Date.now()-s}}]);
//# sourceMappingURL=16215.PbanhFB6s6.js.map