/*! License: query-preloader.Uc9XevDjas.js.LICENSE.txt */
(()=>{var e,t,n,r,o={1955:(e,t,n)=>{"use strict";var r=n(6360);function o(e,t){return void 0===t&&(t=!0),e&&"object"==typeof e?function(e,t){return Object.keys(e).forEach((function(n){e[n]=o(e[n],t)})),e}(e,t):Array.isArray(e)?function(e,t){return e.forEach((function(n,r){e[r]=o(n,t)})),e}(e,t):r.is(e,t)?r.parse(e):e}e.exports=o},6360:(e,t)=>{"use strict";var n=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;t.parse=function(e){var t=[1,5,6,7,11,12],r=n.exec(e),o=0;if(!r)return new Date(e);for(var s,i=0;s=t[i];i++)r[s]=parseInt(r[s],10)||0;r[2]=parseInt(r[2],10)||1,r[3]=parseInt(r[3],10)||1,r[2]--,r[8]=r[8]?(r[8]+"00").substring(0,3):0," "===r[4]?o=(new Date).getTimezoneOffset():"Z"!==r[9]&&r[10]&&(o=60*r[11]+r[12],"+"===r[10]&&(o=0-o));var a=Date.UTC(r[1],r[2],r[3],r[5],r[6]+o,r[7],r[8]);return new Date(a)},t.is=function(e,t){return"string"==typeof e&&((!t||!1!==/^\d{4}-\d{2}-\d{2}/.test(e))&&n.test(e))}},4115:e=>{"use strict";var t="%[a-f0-9]{2}",n=new RegExp("("+t+")|([^%]+?)","gi"),r=new RegExp("("+t+")+","gi");function o(e,t){try{return[decodeURIComponent(e.join(""))]}catch(s){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],o(n),o(r))}function s(e){try{return decodeURIComponent(e)}catch(s){for(var t=e.match(n)||[],r=1;r<t.length;r++)t=(e=o(t,r).join("")).match(n)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var n={"%FE%FF":"��","%FF%FE":"��"},o=r.exec(e);o;){try{n[o[0]]=decodeURIComponent(o[0])}catch(t){var i=s(o[0]);i!==o[0]&&(n[o[0]]=i)}o=r.exec(e)}n["%C2"]="�";for(var a=Object.keys(n),c=0;c<a.length;c++){var u=a[c];e=e.replace(new RegExp(u,"g"),n[u])}return e}(e)}}},1492:e=>{"use strict";e.exports=function(e,t){for(var n={},r=Object.keys(e),o=Array.isArray(t),s=0;s<r.length;s++){var i=r[s],a=e[i];(o?-1!==t.indexOf(i):t(i,a,e))&&(n[i]=a)}return n}},3778:e=>{"use strict";e.exports=function(){}},4756:(e,t,n)=>{"use strict";var r=n(4439),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function c(e){return r.isMemo(e)?i:a[e.$$typeof]||o}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=i;var u=Object.defineProperty,l=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,m=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(m){var o=h(n);o&&o!==m&&e(t,o,r)}var i=l(n);d&&(i=i.concat(d(n)));for(var a=c(t),f=c(n),y=0;y<i.length;++y){var g=i[y];if(!(s[g]||r&&r[g]||f&&f[g]||a&&a[g])){var _=p(n,g);try{u(t,g,_)}catch(v){}}}}return t}},1317:e=>{"use strict";e.exports=function(e,t,n,r,o,s,i,a){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,o,s,i,a],l=0;(c=new Error(t.replace(/%s/g,(function(){return u[l++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}},5446:(e,t,n)=>{var r,o;!function(s){if(void 0===(o="function"==typeof(r=s)?r.call(t,n,t,e):r)||(e.exports=o),!0,e.exports=s(),!!0){var i=window.Cookies,a=window.Cookies=s();a.noConflict=function(){return window.Cookies=i,a}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function o(){}function s(t,n,s){if("undefined"!=typeof document){"number"==typeof(s=e({path:"/"},o.defaults,s)).expires&&(s.expires=new Date(1*new Date+864e5*s.expires)),s.expires=s.expires?s.expires.toUTCString():"";try{var i=JSON.stringify(n);/^[\{\[]/.test(i)&&(n=i)}catch(u){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var c in s)s[c]&&(a+="; "+c,!0!==s[c]&&(a+="="+s[c].split(";")[0]));return document.cookie=t+"="+n+a}}function i(e,n){if("undefined"!=typeof document){for(var o={},s=document.cookie?document.cookie.split("; "):[],i=0;i<s.length;i++){var a=s[i].split("="),c=a.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(a[0]);if(c=(r.read||r)(c,u)||t(c),n)try{c=JSON.parse(c)}catch(l){}if(o[u]=c,e===u)break}catch(l){}}return e?o[e]:o}}return o.set=s,o.get=function(e){return i(e,!1)},o.getJSON=function(e){return i(e,!0)},o.remove=function(t,n){s(t,"",e(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}((function(){}))}))},6977:(e,t,n)=>{var r=n(4164)(n(7457),"DataView");e.exports=r},3651:(e,t,n)=>{var r=n(8394),o=n(1467),s=n(7968),i=n(4567),a=n(6565);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=s,c.prototype.has=i,c.prototype.set=a,e.exports=c},5489:(e,t,n)=>{var r=n(5865),o=n(1526),s=n(1290),i=n(6873),a=n(1547);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=s,c.prototype.has=i,c.prototype.set=a,e.exports=c},5294:(e,t,n)=>{var r=n(4164)(n(7457),"Map");e.exports=r},7229:(e,t,n)=>{var r=n(1883),o=n(8482),s=n(8623),i=n(1157),a=n(9023);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=s,c.prototype.has=i,c.prototype.set=a,e.exports=c},3440:(e,t,n)=>{var r=n(4164)(n(7457),"Promise");e.exports=r},4005:(e,t,n)=>{var r=n(4164)(n(7457),"Set");e.exports=r},9126:(e,t,n)=>{var r=n(7229),o=n(585),s=n(7962);function i(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}i.prototype.add=i.prototype.push=o,i.prototype.has=s,e.exports=i},4490:(e,t,n)=>{var r=n(5489),o=n(6125),s=n(9617),i=n(191),a=n(9168),c=n(9210);function u(e){var t=this.__data__=new r(e);this.size=t.size}u.prototype.clear=o,u.prototype.delete=s,u.prototype.get=i,u.prototype.has=a,u.prototype.set=c,e.exports=u},5499:(e,t,n)=>{var r=n(7457).Symbol;e.exports=r},2215:(e,t,n)=>{var r=n(7457).Uint8Array;e.exports=r},7368:(e,t,n)=>{var r=n(4164)(n(7457),"WeakMap");e.exports=r},875:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,s=[];++n<r;){var i=e[n];t(i,n,e)&&(s[o++]=i)}return s}},9742:(e,t,n)=>{var r=n(1301),o=n(1293),s=n(5045),i=n(323),a=n(902),c=n(7495),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=s(e),l=!n&&o(e),d=!n&&!l&&i(e),p=!n&&!l&&!d&&c(e),h=n||l||d||p,m=h?r(e.length,String):[],f=m.length;for(var y in e)!t&&!u.call(e,y)||h&&("length"==y||d&&("offset"==y||"parent"==y)||p&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||a(y,f))||m.push(y);return m}},8760:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},2147:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},4143:(e,t,n)=>{var r=n(7970);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},7247:(e,t,n)=>{var r=n(8760),o=n(5045);e.exports=function(e,t,n){var s=t(e);return o(e)?s:r(s,n(e))}},4851:(e,t,n)=>{var r=n(5499),o=n(1252),s=n(2653),i=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?o(e):s(e)}},8106:(e,t,n)=>{var r=n(4851),o=n(487);e.exports=function(e){return o(e)&&"[object Arguments]"==r(e)}},7588:(e,t,n)=>{var r=n(6421),o=n(487);e.exports=function e(t,n,s,i,a){return t===n||(null==t||null==n||!o(t)&&!o(n)?t!=t&&n!=n:r(t,n,s,i,e,a))}},6421:(e,t,n)=>{var r=n(4490),o=n(6739),s=n(7373),i=n(6864),a=n(8360),c=n(5045),u=n(323),l=n(7495),d="[object Arguments]",p="[object Array]",h="[object Object]",m=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,f,y,g){var _=c(e),v=c(t),b=_?p:a(e),I=v?p:a(t),E=(b=b==d?h:b)==h,w=(I=I==d?h:I)==h,S=b==I;if(S&&u(e)){if(!u(t))return!1;_=!0,E=!1}if(S&&!E)return g||(g=new r),_||l(e)?o(e,t,n,f,y,g):s(e,t,b,n,f,y,g);if(!(1&n)){var T=E&&m.call(e,"__wrapped__"),k=w&&m.call(t,"__wrapped__");if(T||k){var A=T?e.value():e,O=k?t.value():t;return g||(g=new r),y(A,O,n,f,g)}}return!!S&&(g||(g=new r),i(e,t,n,f,y,g))}},4129:(e,t,n)=>{var r=n(6890),o=n(6377),s=n(575),i=n(6362),a=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,l=c.toString,d=u.hasOwnProperty,p=RegExp("^"+l.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!s(e)||o(e))&&(r(e)?p:a).test(i(e))}},6927:(e,t,n)=>{var r=n(4851),o=n(8729),s=n(487),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function(e){return s(e)&&o(e.length)&&!!i[r(e)]}},8409:(e,t,n)=>{var r=n(1621),o=n(6708),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t}},1301:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},2009:e=>{e.exports=function(e){return function(t){return e(t)}}},978:e=>{e.exports=function(e,t){return e.has(t)}},4674:(e,t,n)=>{var r=n(7457)["__core-js_shared__"];e.exports=r},6739:(e,t,n)=>{var r=n(9126),o=n(2147),s=n(978);e.exports=function(e,t,n,i,a,c){var u=1&n,l=e.length,d=t.length;if(l!=d&&!(u&&d>l))return!1;var p=c.get(e),h=c.get(t);if(p&&h)return p==t&&h==e;var m=-1,f=!0,y=2&n?new r:void 0;for(c.set(e,t),c.set(t,e);++m<l;){var g=e[m],_=t[m];if(i)var v=u?i(_,g,m,t,e,c):i(g,_,m,e,t,c);if(void 0!==v){if(v)continue;f=!1;break}if(y){if(!o(t,(function(e,t){if(!s(y,t)&&(g===e||a(g,e,n,i,c)))return y.push(t)}))){f=!1;break}}else if(g!==_&&!a(g,_,n,i,c)){f=!1;break}}return c.delete(e),c.delete(t),f}},7373:(e,t,n)=>{var r=n(5499),o=n(2215),s=n(7970),i=n(6739),a=n(6485),c=n(5265),u=r?r.prototype:void 0,l=u?u.valueOf:void 0;e.exports=function(e,t,n,r,u,d,p){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new o(e),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return s(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var h=a;case"[object Set]":var m=1&r;if(h||(h=c),e.size!=t.size&&!m)return!1;var f=p.get(e);if(f)return f==t;r|=2,p.set(e,t);var y=i(h(e),h(t),r,u,d,p);return p.delete(e),y;case"[object Symbol]":if(l)return l.call(e)==l.call(t)}return!1}},6864:(e,t,n)=>{var r=n(800),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,s,i,a){var c=1&n,u=r(e),l=u.length;if(l!=r(t).length&&!c)return!1;for(var d=l;d--;){var p=u[d];if(!(c?p in t:o.call(t,p)))return!1}var h=a.get(e),m=a.get(t);if(h&&m)return h==t&&m==e;var f=!0;a.set(e,t),a.set(t,e);for(var y=c;++d<l;){var g=e[p=u[d]],_=t[p];if(s)var v=c?s(_,g,p,t,e,a):s(g,_,p,e,t,a);if(!(void 0===v?g===_||i(g,_,n,s,a):v)){f=!1;break}y||(y="constructor"==p)}if(f&&!y){var b=e.constructor,I=t.constructor;b==I||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof I&&I instanceof I||(f=!1)}return a.delete(e),a.delete(t),f}},8128:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},800:(e,t,n)=>{var r=n(7247),o=n(9611),s=n(5491);e.exports=function(e){return r(e,s,o)}},9949:(e,t,n)=>{var r=n(8108);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},4164:(e,t,n)=>{var r=n(4129),o=n(3300);e.exports=function(e,t){var n=o(e,t);return r(n)?n:void 0}},1252:(e,t,n)=>{var r=n(5499),o=Object.prototype,s=o.hasOwnProperty,i=o.toString,a=r?r.toStringTag:void 0;e.exports=function(e){var t=s.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(c){}var o=i.call(e);return r&&(t?e[a]=n:delete e[a]),o}},9611:(e,t,n)=>{var r=n(875),o=n(8826),s=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(e){return null==e?[]:(e=Object(e),r(i(e),(function(t){return s.call(e,t)})))}:o;e.exports=a},8360:(e,t,n)=>{var r=n(6977),o=n(5294),s=n(3440),i=n(4005),a=n(7368),c=n(4851),u=n(6362),l="[object Map]",d="[object Promise]",p="[object Set]",h="[object WeakMap]",m="[object DataView]",f=u(r),y=u(o),g=u(s),_=u(i),v=u(a),b=c;(r&&b(new r(new ArrayBuffer(1)))!=m||o&&b(new o)!=l||s&&b(s.resolve())!=d||i&&b(new i)!=p||a&&b(new a)!=h)&&(b=function(e){var t=c(e),n="[object Object]"==t?e.constructor:void 0,r=n?u(n):"";if(r)switch(r){case f:return m;case y:return l;case g:return d;case _:return p;case v:return h}return t}),e.exports=b},3300:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},8394:(e,t,n)=>{var r=n(3092);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},1467:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},7968:(e,t,n)=>{var r=n(3092),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(t,e)?t[e]:void 0}},4567:(e,t,n)=>{var r=n(3092),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:o.call(t,e)}},6565:(e,t,n)=>{var r=n(3092);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},902:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},8108:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},6377:(e,t,n)=>{var r,o=n(4674),s=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!s&&s in e}},1621:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},5865:e=>{e.exports=function(){this.__data__=[],this.size=0}},1526:(e,t,n)=>{var r=n(4143),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():o.call(t,n,1),--this.size,!0)}},1290:(e,t,n)=>{var r=n(4143);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},6873:(e,t,n)=>{var r=n(4143);e.exports=function(e){return r(this.__data__,e)>-1}},1547:(e,t,n)=>{var r=n(4143);e.exports=function(e,t){var n=this.__data__,o=r(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},1883:(e,t,n)=>{var r=n(3651),o=n(5489),s=n(5294);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(s||o),string:new r}}},8482:(e,t,n)=>{var r=n(9949);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},8623:(e,t,n)=>{var r=n(9949);e.exports=function(e){return r(this,e).get(e)}},1157:(e,t,n)=>{var r=n(9949);e.exports=function(e){return r(this,e).has(e)}},9023:(e,t,n)=>{var r=n(9949);e.exports=function(e,t){var n=r(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}},6485:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},3092:(e,t,n)=>{var r=n(4164)(Object,"create");e.exports=r},6708:(e,t,n)=>{var r=n(988)(Object.keys,Object);e.exports=r},9421:(e,t,n)=>{e=n.nmd(e);var r=n(8128),o=t&&!t.nodeType&&t,s=o&&e&&!e.nodeType&&e,i=s&&s.exports===o&&r.process,a=function(){try{var e=s&&s.require&&s.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(t){}}();e.exports=a},2653:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},988:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},7457:(e,t,n)=>{var r=n(8128),o="object"==typeof self&&self&&self.Object===Object&&self,s=r||o||Function("return this")();e.exports=s},585:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},7962:e=>{e.exports=function(e){return this.__data__.has(e)}},5265:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},6125:(e,t,n)=>{var r=n(5489);e.exports=function(){this.__data__=new r,this.size=0}},9617:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},191:e=>{e.exports=function(e){return this.__data__.get(e)}},9168:e=>{e.exports=function(e){return this.__data__.has(e)}},9210:(e,t,n)=>{var r=n(5489),o=n(5294),s=n(7229);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var i=n.__data__;if(!o||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new s(i)}return n.set(e,t),this.size=n.size,this}},6362:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(n){}try{return e+""}catch(n){}}return""}},7970:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},1293:(e,t,n)=>{var r=n(8106),o=n(487),s=Object.prototype,i=s.hasOwnProperty,a=s.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return o(e)&&i.call(e,"callee")&&!a.call(e,"callee")};e.exports=c},5045:e=>{var t=Array.isArray;e.exports=t},8574:(e,t,n)=>{var r=n(6890),o=n(8729);e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},323:(e,t,n)=>{e=n.nmd(e);var r=n(7457),o=n(1555),s=t&&!t.nodeType&&t,i=s&&e&&!e.nodeType&&e,a=i&&i.exports===s?r.Buffer:void 0,c=(a?a.isBuffer:void 0)||o;e.exports=c},3037:(e,t,n)=>{var r=n(7588);e.exports=function(e,t){return r(e,t)}},6890:(e,t,n)=>{var r=n(4851),o=n(575);e.exports=function(e){if(!o(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},8729:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},575:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},487:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},7495:(e,t,n)=>{var r=n(6927),o=n(2009),s=n(9421),i=s&&s.isTypedArray,a=i?o(i):r;e.exports=a},5491:(e,t,n)=>{var r=n(9742),o=n(8409),s=n(8574);e.exports=function(e){return s(e)?r(e):o(e)}},8826:e=>{e.exports=function(){return[]}},1555:e=>{e.exports=function(){return!1}},8122:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function o(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(o=e[n],s=t[n],!(o===s||r(o)&&r(s)))return!1;var o,s;return!0}const s=function(e,t){var n;void 0===t&&(t=o);var r,s=[],i=!1;return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return i&&n===this&&t(o,s)||(r=e.apply(this,o),i=!0,n=this,s=o),r}}},5444:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(o){return!1}}()?Object.assign:function(e,o){for(var s,i,a=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var u in s=Object(arguments[c]))n.call(s,u)&&(a[u]=s[u]);if(t){i=t(s);for(var l=0;l<i.length;l++)r.call(s,i[l])&&(a[i[l]]=s[i[l]])}}return a}},7189:(e,t,n)=>{"use strict";var r=n(3439);function o(){}function s(){}s.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,s,i){if(i!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:o};return n.PropTypes=n,n}},9687:(e,t,n)=>{e.exports=n(7189)()},3439:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4341:e=>{"use strict";function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,n,r,o){n=n||"&",r=r||"=";var s={};if("string"!=typeof e||0===e.length)return s;var i=/\+/g;e=e.split(n);var a=1e3;o&&"number"==typeof o.maxKeys&&(a=o.maxKeys);var c=e.length;a>0&&c>a&&(c=a);for(var u=0;u<c;++u){var l,d,p,h,m=e[u].replace(i,"%20"),f=m.indexOf(r);f>=0?(l=m.substr(0,f),d=m.substr(f+1)):(l=m,d=""),p=decodeURIComponent(l),h=decodeURIComponent(d),t(s,p)?Array.isArray(s[p])?s[p].push(h):s[p]=[s[p],h]:s[p]=h}return s}},3115:e=>{"use strict";var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,n,r,o){return n=n||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(o){var s=encodeURIComponent(t(o))+r;return Array.isArray(e[o])?e[o].map((function(e){return s+encodeURIComponent(t(e))})).join(n):s+encodeURIComponent(t(e[o]))})).join(n):o?encodeURIComponent(t(o))+r+encodeURIComponent(t(e)):""}},8375:(e,t,n)=>{"use strict";t.decode=t.parse=n(4341),t.encode=t.stringify=n(3115)},6849:(e,t)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,p=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,m=n?Symbol.for("react.suspense_list"):60120,f=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,_=n?Symbol.for("react.fundamental"):60117,v=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function I(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case d:case s:case a:case i:case h:return e;default:switch(e=e&&e.$$typeof){case u:case p:case y:case f:case c:return e;default:return t}}case o:return t}}}function E(e){return I(e)===d}t.AsyncMode=l,t.ConcurrentMode=d,t.ContextConsumer=u,t.ContextProvider=c,t.Element=r,t.ForwardRef=p,t.Fragment=s,t.Lazy=y,t.Memo=f,t.Portal=o,t.Profiler=a,t.StrictMode=i,t.Suspense=h,t.isAsyncMode=function(e){return E(e)||I(e)===l},t.isConcurrentMode=E,t.isContextConsumer=function(e){return I(e)===u},t.isContextProvider=function(e){return I(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return I(e)===p},t.isFragment=function(e){return I(e)===s},t.isLazy=function(e){return I(e)===y},t.isMemo=function(e){return I(e)===f},t.isPortal=function(e){return I(e)===o},t.isProfiler=function(e){return I(e)===a},t.isStrictMode=function(e){return I(e)===i},t.isSuspense=function(e){return I(e)===h},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===d||e===a||e===i||e===h||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===f||e.$$typeof===c||e.$$typeof===u||e.$$typeof===p||e.$$typeof===_||e.$$typeof===v||e.$$typeof===b||e.$$typeof===g)},t.typeOf=I},4439:(e,t,n)=>{"use strict";e.exports=n(6849)},698:(e,t,n)=>{"use strict";var r=n(5444),o="function"==typeof Symbol&&Symbol.for,s=o?Symbol.for("react.element"):60103,i=o?Symbol.for("react.portal"):60106,a=o?Symbol.for("react.fragment"):60107,c=o?Symbol.for("react.strict_mode"):60108,u=o?Symbol.for("react.profiler"):60114,l=o?Symbol.for("react.provider"):60109,d=o?Symbol.for("react.context"):60110,p=o?Symbol.for("react.forward_ref"):60112,h=o?Symbol.for("react.suspense"):60113,m=o?Symbol.for("react.memo"):60115,f=o?Symbol.for("react.lazy"):60116,y="function"==typeof Symbol&&Symbol.iterator;function g(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function b(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||_}function I(){}function E(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||_}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(g(85));this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},I.prototype=b.prototype;var w=E.prototype=new I;w.constructor=E,r(w,b.prototype),w.isPureReactComponent=!0;var S={current:null},T=Object.prototype.hasOwnProperty,k={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,n){var r,o={},i=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(i=""+t.key),t)T.call(t,r)&&!k.hasOwnProperty(r)&&(o[r]=t[r]);var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){for(var u=Array(c),l=0;l<c;l++)u[l]=arguments[l+2];o.children=u}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===o[r]&&(o[r]=c[r]);return{$$typeof:s,type:e,key:i,ref:a,props:o,_owner:S.current}}function O(e){return"object"==typeof e&&null!==e&&e.$$typeof===s}var C=/\/+/g,x=[];function P(e,t,n,r){if(x.length){var o=x.pop();return o.result=e,o.keyPrefix=t,o.func=n,o.context=r,o.count=0,o}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function R(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>x.length&&x.push(e)}function N(e,t,n,r){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var a=!1;if(null===e)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case s:case i:a=!0}}if(a)return n(r,e,""===t?"."+$(e,0):t),1;if(a=0,t=""===t?".":t+":",Array.isArray(e))for(var c=0;c<e.length;c++){var u=t+$(o=e[c],c);a+=N(o,u,n,r)}else if(null===e||"object"!=typeof e?u=null:u="function"==typeof(u=y&&e[y]||e["@@iterator"])?u:null,"function"==typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)a+=N(o=o.value,u=t+$(o,c++),n,r);else if("object"===o)throw n=""+e,Error(g(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return a}function D(e,t,n){return null==e?0:N(e,"",t,n)}function $(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function L(e,t){e.func.call(e.context,t,e.count++)}function F(e,t,n){var r=e.result,o=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?Z(e,r,n,(function(e){return e})):null!=e&&(O(e)&&(e=function(e,t){return{$$typeof:s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,o+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(C,"$&/")+"/")+n)),r.push(e))}function Z(e,t,n,r,o){var s="";null!=n&&(s=(""+n).replace(C,"$&/")+"/"),D(e,F,t=P(t,s,r,o)),R(t)}var j={current:null};function M(){var e=j.current;if(null===e)throw Error(g(321));return e}var U={ReactCurrentDispatcher:j,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:S,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return Z(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;D(e,L,t=P(null,null,t,n)),R(t)},count:function(e){return D(e,(function(){return null}),null)},toArray:function(e){var t=[];return Z(e,t,null,(function(e){return e})),t},only:function(e){if(!O(e))throw Error(g(143));return e}},t.Component=b,t.Fragment=a,t.Profiler=u,t.PureComponent=E,t.StrictMode=c,t.Suspense=h,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,t.cloneElement=function(e,t,n){if(null==e)throw Error(g(267,e));var o=r({},e.props),i=e.key,a=e.ref,c=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,c=S.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)T.call(t,l)&&!k.hasOwnProperty(l)&&(o[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){u=Array(l);for(var d=0;d<l;d++)u[d]=arguments[d+2];o.children=u}return{$$typeof:s,type:e.type,key:i,ref:a,props:o,_owner:c}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:d,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=A,t.createFactory=function(e){var t=A.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:p,render:e}},t.isValidElement=O,t.lazy=function(e){return{$$typeof:f,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:m,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return M().useCallback(e,t)},t.useContext=function(e,t){return M().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return M().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return M().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return M().useLayoutEffect(e,t)},t.useMemo=function(e,t){return M().useMemo(e,t)},t.useReducer=function(e,t,n){return M().useReducer(e,t,n)},t.useRef=function(e){return M().useRef(e)},t.useState=function(e){return M().useState(e)},t.version="16.14.0"},506:(e,t,n)=>{"use strict";e.exports=n(698)},9482:e=>{"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},8665:e=>{"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},1156:function(e,t,n){var r;e=n.nmd(e),function(o){t&&t.nodeType,e&&e.nodeType;var s="object"==typeof n.g&&n.g;s.global!==s&&s.window!==s&&s.self;var i,a=2147483647,c=36,u=1,l=26,d=38,p=700,h=72,m=128,f="-",y=/^xn--/,g=/[^\x20-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,v={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},b=c-u,I=Math.floor,E=String.fromCharCode;function w(e){throw RangeError(v[e])}function S(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function T(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+S((e=e.replace(_,".")).split("."),t).join(".")}function k(e){for(var t,n,r=[],o=0,s=e.length;o<s;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<s?56320==(64512&(n=e.charCodeAt(o++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--):r.push(t);return r}function A(e){return S(e,(function(e){var t="";return e>65535&&(t+=E((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=E(e)})).join("")}function O(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function C(e,t,n){var r=0;for(e=n?I(e/p):e>>1,e+=I(e/t);e>b*l>>1;r+=c)e=I(e/b);return I(r+(b+1)*e/(e+d))}function x(e){var t,n,r,o,s,i,d,p,y,g,_,v=[],b=e.length,E=0,S=m,T=h;for((n=e.lastIndexOf(f))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&w("not-basic"),v.push(e.charCodeAt(r));for(o=n>0?n+1:0;o<b;){for(s=E,i=1,d=c;o>=b&&w("invalid-input"),((p=(_=e.charCodeAt(o++))-48<10?_-22:_-65<26?_-65:_-97<26?_-97:c)>=c||p>I((a-E)/i))&&w("overflow"),E+=p*i,!(p<(y=d<=T?u:d>=T+l?l:d-T));d+=c)i>I(a/(g=c-y))&&w("overflow"),i*=g;T=C(E-s,t=v.length+1,0==s),I(E/t)>a-S&&w("overflow"),S+=I(E/t),E%=t,v.splice(E++,0,S)}return A(v)}function P(e){var t,n,r,o,s,i,d,p,y,g,_,v,b,S,T,A=[];for(v=(e=k(e)).length,t=m,n=0,s=h,i=0;i<v;++i)(_=e[i])<128&&A.push(E(_));for(r=o=A.length,o&&A.push(f);r<v;){for(d=a,i=0;i<v;++i)(_=e[i])>=t&&_<d&&(d=_);for(d-t>I((a-n)/(b=r+1))&&w("overflow"),n+=(d-t)*b,t=d,i=0;i<v;++i)if((_=e[i])<t&&++n>a&&w("overflow"),_==t){for(p=n,y=c;!(p<(g=y<=s?u:y>=s+l?l:y-s));y+=c)T=p-g,S=c-g,A.push(E(O(g+T%S,0))),p=I(T/S);A.push(E(O(p,0))),s=C(n,b,r==o),n=0,++r}++n,++t}return A.join("")}i={version:"1.3.2",ucs2:{decode:k,encode:A},decode:x,encode:P,toASCII:function(e){return T(e,(function(e){return g.test(e)?"xn--"+P(e):e}))},toUnicode:function(e){return T(e,(function(e){return y.test(e)?x(e.slice(4).toLowerCase()):e}))}},void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)}()},3330:(e,t,n)=>{"use strict";var r=n(1156),o=n(2939);function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.Qc=v,t.WU=function(e){o.isString(e)&&(e=v(e));return e instanceof s?e.format():s.prototype.format.call(e)};var i=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(u),d=["%","/","?",";","#"].concat(l),p=["/","?","#"],h=/^[+a-z0-9A-Z_-]{0,63}$/,m=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,f={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},_=n(8375);function v(e,t,n){if(e&&o.isObject(e)&&e instanceof s)return e;var r=new s;return r.parse(e,t,n),r}s.prototype.parse=function(e,t,n){if(!o.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var s=e.indexOf("?"),a=-1!==s&&s<e.indexOf("#")?"?":"#",u=e.split(a);u[0]=u[0].replace(/\\/g,"/");var v=e=u.join(a);if(v=v.trim(),!n&&1===e.split("#").length){var b=c.exec(v);if(b)return this.path=v,this.href=v,this.pathname=b[1],b[2]?(this.search=b[2],this.query=t?_.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var I=i.exec(v);if(I){var E=(I=I[0]).toLowerCase();this.protocol=E,v=v.substr(I.length)}if(n||I||v.match(/^\/\/[^@\/]+@[^@\/]+/)){var w="//"===v.substr(0,2);!w||I&&y[I]||(v=v.substr(2),this.slashes=!0)}if(!y[I]&&(w||I&&!g[I])){for(var S,T,k=-1,A=0;A<p.length;A++){-1!==(O=v.indexOf(p[A]))&&(-1===k||O<k)&&(k=O)}-1!==(T=-1===k?v.lastIndexOf("@"):v.lastIndexOf("@",k))&&(S=v.slice(0,T),v=v.slice(T+1),this.auth=decodeURIComponent(S)),k=-1;for(A=0;A<d.length;A++){var O;-1!==(O=v.indexOf(d[A]))&&(-1===k||O<k)&&(k=O)}-1===k&&(k=v.length),this.host=v.slice(0,k),v=v.slice(k),this.parseHost(),this.hostname=this.hostname||"";var C="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!C)for(var x=this.hostname.split(/\./),P=(A=0,x.length);A<P;A++){var R=x[A];if(R&&!R.match(h)){for(var N="",D=0,$=R.length;D<$;D++)R.charCodeAt(D)>127?N+="x":N+=R[D];if(!N.match(h)){var L=x.slice(0,A),F=x.slice(A+1),Z=R.match(m);Z&&(L.push(Z[1]),F.unshift(Z[2])),F.length&&(v="/"+F.join(".")+v),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),C||(this.hostname=r.toASCII(this.hostname));var j=this.port?":"+this.port:"",M=this.hostname||"";this.host=M+j,this.href+=this.host,C&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!f[E])for(A=0,P=l.length;A<P;A++){var U=l[A];if(-1!==v.indexOf(U)){var B=encodeURIComponent(U);B===U&&(B=escape(U)),v=v.split(U).join(B)}}var K=v.indexOf("#");-1!==K&&(this.hash=v.substr(K),v=v.slice(0,K));var q=v.indexOf("?");if(-1!==q?(this.search=v.substr(q),this.query=v.substr(q+1),t&&(this.query=_.parse(this.query)),v=v.slice(0,q)):t&&(this.search="",this.query={}),v&&(this.pathname=v),g[E]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){j=this.pathname||"";var W=this.search||"";this.path=j+W}return this.href=this.format(),this},s.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",s=!1,i="";this.host?s=e+this.host:this.hostname&&(s=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(i=_.stringify(this.query));var a=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||g[t])&&!1!==s?(s="//"+(s||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):s||(s=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),t+s+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(a=a.replace("#","%23"))+r},s.prototype.resolve=function(e){return this.resolveObject(v(e,!1,!0)).format()},s.prototype.resolveObject=function(e){if(o.isString(e)){var t=new s;t.parse(e,!1,!0),e=t}for(var n=new s,r=Object.keys(this),i=0;i<r.length;i++){var a=r[i];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),u=0;u<c.length;u++){var l=c[u];"protocol"!==l&&(n[l]=e[l])}return g[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!g[e.protocol]){for(var d=Object.keys(e),p=0;p<d.length;p++){var h=d[p];n[h]=e[h]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||y[e.protocol])n.pathname=e.pathname;else{for(var m=(e.pathname||"").split("/");m.length&&!(e.host=m.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==m[0]&&m.unshift(""),m.length<2&&m.unshift(""),n.pathname=m.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var f=n.pathname||"",_=n.search||"";n.path=f+_}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var v=n.pathname&&"/"===n.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),I=b||v||n.host&&e.pathname,E=I,w=n.pathname&&n.pathname.split("/")||[],S=(m=e.pathname&&e.pathname.split("/")||[],n.protocol&&!g[n.protocol]);if(S&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===m[0]?m[0]=e.host:m.unshift(e.host)),e.host=null),I=I&&(""===m[0]||""===w[0])),b)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,w=m;else if(m.length)w||(w=[]),w.pop(),w=w.concat(m),n.search=e.search,n.query=e.query;else if(!o.isNullOrUndefined(e.search)){if(S)n.hostname=n.host=w.shift(),(C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=C.shift(),n.host=n.hostname=C.shift());return n.search=e.search,n.query=e.query,o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!w.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var T=w.slice(-1)[0],k=(n.host||e.host||w.length>1)&&("."===T||".."===T)||""===T,A=0,O=w.length;O>=0;O--)"."===(T=w[O])?w.splice(O,1):".."===T?(w.splice(O,1),A++):A&&(w.splice(O,1),A--);if(!I&&!E)for(;A--;A)w.unshift("..");!I||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),k&&"/"!==w.join("/").substr(-1)&&w.push("");var C,x=""===w[0]||w[0]&&"/"===w[0].charAt(0);S&&(n.hostname=n.host=x?"":w.length?w.shift():"",(C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=C.shift(),n.host=n.hostname=C.shift()));return(I=I||n.host&&w.length)&&!x&&w.unshift(""),w.length?n.pathname=w.join("/"):(n.pathname=null,n.path=null),o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},s.prototype.parseHost=function(){var e=this.host,t=a.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},2939:e=>{"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},1081:e=>{for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var r=n||0,o=t;return[o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]]].join("")}},5554:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},2516:(e,t,n)=>{var r=n(5554),o=n(1081);e.exports=function(e,t,n){var s=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||r)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var a=0;a<16;++a)t[s+a]=i[a];return t||o(i)}},3553:(e,t,n)=>{"use strict";n.d(t,{LW:()=>s,NA:()=>a,wp:()=>i});const r=Symbol.for("PromiseStatus"),o=Symbol.for("PromiseValue"),s=e=>{const t=e.then((e=>(t[r]="resolved",t[o]=e,e)),(e=>{throw t[r]="rejected",t[o]=e,e}));return t[r]="pending",t},i=e=>"resolved"===e[r],a=e=>e[o]},1408:(e,t,n)=>{"use strict";n.d(t,{tH:()=>re,km:()=>ie,DN:()=>ve,tz:()=>ce,N4:()=>ue,uV:()=>ae,aY:()=>be,LH:()=>_e,Ch:()=>se,$R:()=>ye,RI:()=>le,y4:()=>de,dd:()=>fe,S1:()=>he,nM:()=>ge,SM:()=>pe,At:()=>me,ts:()=>oe});var r=n(5919),o=n(7304),s=n(3330),i=n(6187);function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,i.Z)(e,t)}var c=n(506),u=n(9687),l=n.n(u),d=n(3778),p=n.n(d);n(1317);function h(e){return"/"===e.charAt(0)}function m(e,t){for(var n=t,r=n+1,o=e.length;r<o;n+=1,r+=1)e[n]=e[r];e.pop()}const f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e&&e.split("/")||[],r=t&&t.split("/")||[],o=e&&h(e),s=t&&h(t),i=o||s;if(e&&h(e)?r=n:n.length&&(r.pop(),r=r.concat(n)),!r.length)return"/";var a=void 0;if(r.length){var c=r[r.length-1];a="."===c||".."===c||""===c}else a=!1;for(var u=0,l=r.length;l>=0;l--){var d=r[l];"."===d?m(r,l):".."===d?(m(r,l),u++):u&&(m(r,l),u--)}if(!i)for(;u--;u)r.unshift("..");!i||""===r[0]||r[0]&&h(r[0])||r.unshift("");var p=r.join("/");return a&&"/"!==p.substr(-1)&&(p+="/"),p};"function"==typeof Symbol&&Symbol.iterator;var y=function(e){var t=e.pathname,n=e.search,r=e.hash,o=t||"/";return n&&"?"!==n&&(o+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(o+="#"===r.charAt(0)?r:"#"+r),o},g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_=function(e,t,n,r){var o=void 0;"string"==typeof e?(o=function(e){var t=e||"/",n="",r="",o=t.indexOf("#");-1!==o&&(r=t.substr(o),t=t.substr(0,o));var s=t.indexOf("?");return-1!==s&&(n=t.substr(s),t=t.substr(0,s)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),o.state=t):(void 0===(o=g({},e)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==t&&void 0===o.state&&(o.state=t));try{o.pathname=decodeURI(o.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return n&&(o.key=n),r?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=f(o.pathname,r.pathname)):o.pathname=r.pathname:o.pathname||(o.pathname="/"),o};const v=function(){var e=null,t=[];return{setPrompt:function(t){return p()(null==e,"A history supports only one prompt at a time"),e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,o){if(null!=e){var s="function"==typeof e?e(t,n):e;"string"==typeof s?"function"==typeof r?r(s,o):(p()(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),o(!0)):o(!1!==s)}else o(!0)},appendListener:function(e){var n=!0,r=function(){n&&e.apply(void 0,arguments)};return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}};"undefined"==typeof window||!window.document||window.document.createElement,"function"==typeof Symbol&&Symbol.iterator,Object.assign;Object.assign;var b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E=function(e,t,n){return Math.min(Math.max(e,t),n)};const w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getUserConfirmation,n=e.initialEntries,r=void 0===n?["/"]:n,o=e.initialIndex,s=void 0===o?0:o,i=e.keyLength,a=void 0===i?6:i,c=v(),u=function(e){I(g,e),g.length=g.entries.length,c.notifyListeners(g.location,g.action)},l=function(){return Math.random().toString(36).substr(2,a)},d=E(s,0,r.length-1),h=r.map((function(e){return _(e,void 0,"string"==typeof e?l():e.key||l())})),m=y,f=function(e){var n=E(g.index+e,0,g.entries.length-1),r=g.entries[n];c.confirmTransitionTo(r,"POP",t,(function(e){e?u({action:"POP",location:r,index:n}):u()}))},g={length:h.length,action:"POP",location:h[d],index:d,entries:h,createHref:m,push:function(e,n){p()(!("object"===(void 0===e?"undefined":b(e))&&void 0!==e.state&&void 0!==n),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var r="PUSH",o=_(e,n,l(),g.location);c.confirmTransitionTo(o,r,t,(function(e){if(e){var t=g.index+1,n=g.entries.slice(0);n.length>t?n.splice(t,n.length-t,o):n.push(o),u({action:r,location:o,index:t,entries:n})}}))},replace:function(e,n){p()(!("object"===(void 0===e?"undefined":b(e))&&void 0!==e.state&&void 0!==n),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var r="REPLACE",o=_(e,n,l(),g.location);c.confirmTransitionTo(o,r,t,(function(e){e&&(g.entries[g.index]=o,u({action:r,location:o}))}))},go:f,goBack:function(){return f(-1)},goForward:function(){return f(1)},canGo:function(e){var t=g.index+e;return t>=0&&t<g.entries.length},block:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return c.setPrompt(e)},listen:function(e){return c.appendListener(e)}};return g};var S=!0,T="Invariant failed";function k(e,t){if(!e){if(S)throw new Error(T);var n="function"==typeof t?t():t,r=n?"".concat(T,": ").concat(n):T;throw new Error(r)}}function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A.apply(this,arguments)}var O=n(5915),C=n.n(O),x=(n(4439),n(4549)),P=(n(4756),1073741823),R="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:{};var N=c.createContext||function(e,t){var n,r,o="__create-react-context-"+function(){var e="__global_unique_id__";return R[e]=(R[e]||0)+1}()+"__",s=function(e){function n(){for(var t,n,r,o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))||this).emitter=(n=t.props.value,r=[],{on:function(e){r.push(e)},off:function(e){r=r.filter((function(t){return t!==e}))},get:function(){return n},set:function(e,t){n=e,r.forEach((function(e){return e(n,t)}))}}),t}a(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return(e={})[o]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,o=e.value;((s=r)===(i=o)?0!==s||1/s==1/i:s!=s&&i!=i)?n=0:(n="function"==typeof t?t(r,o):P,0!==(n|=0)&&this.emitter.set(e.value,n))}var s,i},r.render=function(){return this.props.children},n}(c.Component);s.childContextTypes=((n={})[o]=l().object.isRequired,n);var i=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).observedBits=void 0,e.state={value:e.getValue()},e.onUpdate=function(t,n){0!=((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}a(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=null==t?P:t},r.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?P:e},r.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},r.getValue=function(){return this.context[o]?this.context[o].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(c.Component);return i.contextTypes=((r={})[o]=l().object,r),{Provider:s,Consumer:i}},D=function(e){var t=N();return t.displayName=e,t},$=D("Router-History"),L=D("Router"),F=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._pendingLocation=e}))),n}a(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen((function(t){e._isMounted&&e.setState({location:t})}))),this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return c.createElement(L.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},c.createElement($.Provider,{children:this.props.children||null,value:this.props.history}))},t}(c.Component);c.Component;c.Component;var Z={},j=1e4,M=0;function U(e,t){void 0===t&&(t={}),("string"==typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,o=n.exact,s=void 0!==o&&o,i=n.strict,a=void 0!==i&&i,c=n.sensitive,u=void 0!==c&&c;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=Z[n]||(Z[n]={});if(r[e])return r[e];var o=[],s={regexp:C()(e,o,t),keys:o};return M<j&&(r[e]=s,M++),s}(n,{end:s,strict:a,sensitive:u}),o=r.regexp,i=r.keys,c=o.exec(e);if(!c)return null;var l=c[0],d=c.slice(1),p=e===l;return s&&!p?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:p,params:i.reduce((function(e,t,n){return e[t.name]=d[n],e}),{})}}),null)}c.Component;function B(e){return"/"===e.charAt(0)?e:"/"+e}function K(e,t){if(!e)return t;var n=B(e);return 0!==t.pathname.indexOf(n)?t:A({},t,{pathname:t.pathname.substr(n.length)})}function q(e){return"string"==typeof e?e:y(e)}function W(e){return function(){k(!1)}}function G(){}c.Component;c.Component;c.useContext;var V="/";function H(e,t,n,r){for(var o=0,s=r;s<n.length;)if("\\"!==n[s]){if(n[s]===t&&0===--o)return s+1;n[s]===e&&o++,s++}else s+=2;return-1}function Q(e,t){var n,r;void 0===t&&(t={});for(var o=[],s=null!=(n=t.delimiter)?n:V,i=null!=(r=t.whitelist)?r:void 0,a=0,c=0,u="",l=!1;a<e.length;){var d="",p="",h="";if("\\"!==e[a]){if(":"===e[a]){for(;++a<e.length;){var m=e.charCodeAt(a);if(!(m>=48&&m<=57||m>=65&&m<=90||m>=97&&m<=122||95===m))break;p+=e[a]}p||a--}if("("===e[a]){var f=H("(",")",e,a);if(f>-1){if(h=e.slice(a+1,f-1),a=f,"?"===h[0])throw new TypeError("Path pattern must be a capturing group");if(/\((?=[^?])/.test(h)){var y=h.replace(/\((?=[^?])/,"(?:");throw new TypeError("Capturing groups are not allowed in pattern, use a non-capturing group: ("+y+")")}}}if(""!==p||""!==h){if(u.length&&!l){var g=u[u.length-1];(!i||i.indexOf(g)>-1)&&(d=g,u=u.slice(0,-1))}u.length&&(o.push(u),u="");var _="+"===e[a]||"*"===e[a],v="?"===e[a]||"*"===e[a],b=d||s;(_||v)&&a++,o.push({name:p||c++,prefix:d,delimiter:b,optional:v,repeat:_,pattern:h||"[^"+Y(b===s?b:b+s)+"]+?"})}else u+=e[a++],l=!1}else a++,u+=e[a++],l=!0}return u.length&&o.push(u),o}function z(e,t){return function(e,t){void 0===t&&(t={});var n=J(t),r=t.encode,o=void 0===r?encodeURIComponent:r,s=t.validate,i=void 0===s||s,a=e.map((function(e){if("object"==typeof e)return new RegExp("^(?:"+e.pattern+")$",n)}));return function(t){for(var n="",r=0;r<e.length;r++){var s=e[r];if("string"!=typeof s){var c=t?t[s.name]:void 0;if(Array.isArray(c)){if(!s.repeat)throw new TypeError('Expected "'+s.name+'" to not repeat, but got an array');if(0===c.length){if(s.optional)continue;throw new TypeError('Expected "'+s.name+'" to not be empty')}for(var u=0;u<c.length;u++){var l=o(c[u],s);if(i&&!a[r].test(l))throw new TypeError('Expected all "'+s.name+'" to match "'+s.pattern+'", but got "'+l+'"');n+=(0===u?s.prefix:s.delimiter)+l}}else if("string"!=typeof c&&"number"!=typeof c){if(!s.optional){var d=s.repeat?"an array":"a string";throw new TypeError('Expected "'+s.name+'" to be '+d)}}else{l=o(String(c),s);if(i&&!a[r].test(l))throw new TypeError('Expected "'+s.name+'" to match "'+s.pattern+'", but got "'+l+'"');n+=s.prefix+l}}else n+=s}return n}}(Q(e,t),t)}function Y(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function J(e){return e&&e.sensitive?"":"i"}class X{static matchFirst(e,t){for(const n of e){if(!(n instanceof X))continue;const e=n.match(t);if(e)return e}return null}constructor(e){(0,o.Z)(this,"name",void 0),(0,o.Z)(this,"pattern",void 0),(0,o.Z)(this,"condition",void 0),(0,o.Z)(this,"isTransition",void 0),this.name=e.name,this.pattern=e.pattern,this.condition=e.condition?e.condition:()=>!0,this.isTransition=(t,n)=>!t||(e.isTransition?t.name!==n.name||e.isTransition(t,n):t.pathname!==n.pathname)}match(e){const t=function(e,t){const n=(0,s.Qc)(t,!0),r=n.pathname||"";let o=U(r,{path:e,exact:!0});if(o||(o=U(`${r}${n.search}`,{path:e,exact:!0})),!o)return null;const i={};if(o.params)for(const[s,c]of Object.entries(o.params)){let e=c;try{e=decodeURIComponent(c)}catch(a){}i[s]=e}return{url:t,pathname:r,search:n.search||"",hash:n.hash||"",pattern:e,params:i,query:n.query||""}}(this.pattern,e);return t?this.condition&&!this.condition(t)?null:(0,r.Z)((0,r.Z)({},t),{},{name:this.name}):null}toUrl(e,t){return((e,t={},n={})=>{const o=z(e,{encode:decodeURIComponent})(t),i=(0,s.Qc)(o,!0);return(0,s.WU)({pathname:i.pathname,query:(0,r.Z)((0,r.Z)({},i.query),n.query||{}),hash:n.hash})})(this.pattern,e,t)}}const ee="/wiki",te=(e,t)=>e.params.contentId!==t.params.contentId,ne=(e,t)=>e.params.spaceKey!==t.params.spaceKey,re=new X({name:"BASE",pattern:"/"}),oe=new X({name:"WIKI",pattern:ee}),se=new X({name:"HOME",pattern:ee+"/home/:view?"}),ie=new X({name:"CONTENT_HISTORY",pattern:ee+"/spaces/:spaceKey/history/:contentId(\\d+)/:contentSlug?"}),ae=new X({name:"EDIT_PAGE_V2",pattern:ee+"/spaces/:spaceKey/:contentType(pages)/edit-v2/:contentId(\\d+)",isTransition:te}),ce=new X({name:"EDIT_BLOG_V2",pattern:ee+"/spaces/:spaceKey/:contentType(blog)/edit-v2/:contentId(\\d+)",isTransition:te}),ue=new X({name:"EDIT_PAGE_EMBED",pattern:ee+"/spaces/:spaceKey/:contentType(pages)/edit-embed/:contentId(\\d+)"}),le=Object.assign(new X({name:"SPACE_INDEX",pattern:ee+"/spaces/:spaceKey",condition:({params:e})=>Boolean(e.spaceKey&&!e.spaceKey.endsWith(".action")),isTransition:ne}),{HOMEPAGE_ID_QUERY_KEY:"homepageId"}),de=Object.assign(new X({name:"SPACE_OVERVIEW",pattern:ee+"/spaces/:spaceKey/overview",isTransition:ne}),{HOMEPAGE_ID_QUERY_KEY:"homepageId"}),pe=new X({name:"VIEW_PAGE",pattern:ee+"/spaces/:spaceKey/pages/:contentId(\\d+)/:contentSlug?",isTransition:te}),he=new X({name:"VIEW_BLOG",pattern:ee+"/spaces/:spaceKey/blog/:contentId(\\d+)/:contentSlug?",isTransition:te}),me=new X({name:"WHITEBOARD_BOARD",pattern:ee+"/spaces/:spaceKey/whiteboard/:contentId"}),fe=new X({name:"SPACE_PAGES",pattern:ee+"/spaces/:spaceKey/pages"}),ye=new X({name:"SPACE_BLOGS",pattern:ee+"/spaces/:spaceKey/blogs",isTransition:te}),ge=new X({name:"VIEW_BLOG_DATE_LEGACY",pattern:ee+"/spaces/:spaceKey/blog/:year(\\d+)/:month(\\d+)/:day(\\d+)/:contentId(\\d+)/:contentSlug?",isTransition:te}),_e=new X({name:"EXTERNAL_SHARE",pattern:ee+"/external/:contentId?/:externalToken"}),ve=(new X({name:"INSTANCE_ANALYTICS_PERMISSIONS",pattern:ee+"/plugins/servlet/ac/com.addonengine.analytics/analytics-permissions-instance-admin-page?user.isExternalCollaborator=false"}),new X({name:"DATABASE_VIEW",pattern:ee+"/spaces/:spaceKey/database/:contentId"})),be=new X({name:"EMBED_VIEW",pattern:ee+"/spaces/:spaceKey/embed/:contentId"})},5457:(e,t,n)=>{"use strict";n.d(t,{I:()=>s});var r=n(2342);const o=["referrerPolicy"];function s(e){if(e&&"referrerPolicy"in e){const{referrerPolicy:n}=e,s=(0,r.Z)(e,o);try{new Request("/",{referrerPolicy:n})}catch(t){e=s}}return e}},8450:(e,t,n)=>{"use strict";n.d(t,{E:()=>a});var r=n(7304),o=n(3553);class s{constructor(e={}){(0,r.Z)(this,"store",void 0),this.store=e}serialize(e){if(Array.isArray(e))return`[${e.map(this.serialize,this).join(",")}]`;if("object"==typeof e){return`{${Object.entries(null!=e?e:{}).filter((e=>void 0!==e[1])).sort(((e,t)=>e[0]<t[0]?-1:e[0]>t[0]?1:0)).map((([e,t])=>`${e}:${this.serialize(t)}`)).join(",")}}`}return String(e)}toHashKey({name:e,variables:t}){return`${e}:${this.serialize(null!=t?t:{})}`}load(e,t,{refetchIfNotClaimed:n=!0}={}){const r=this.toHashKey(e);return(!this.store[r]||n&&(0,o.wp)(this.store[r]))&&(this.store[r]=(0,o.LW)(t())),this.store[r]}claim(e,t){const n=this.toHashKey(e),r=this.store[n];return r?r.catch((()=>(delete this.store[n],null))).then((e=>(delete this.store[n],t?t(e):e&&e.data?e:null))):Promise.resolve(null)}}let i=null;function a(){return null===i&&(window.QUERY_PRELOADER_RESULTS||(window.QUERY_PRELOADER_RESULTS={}),i=new s(window.QUERY_PRELOADER_RESULTS)),i}},210:(e,t,n)=>{"use strict";n.d(t,{I:()=>a});var r=n(5919),o=n(5457),s=n(8450),i=n(5904);function a({query:e,variables:t,fetchPolicy:n="cache-first",errorPolicy:a="all",context:c}){const u=(0,i.r)(e),l=window.GLOBAL_APOLLO_CLIENT;let d;if(window.GLOBAL_GQL&&"string"==typeof e&&(e=window.GLOBAL_GQL(e)),"string"==typeof e){if(!u)return Promise.resolve(i.i)}else{if(!l)return Promise.resolve(i.i);let o=!0;if(d={query:e,variables:t,errorPolicy:a,fetchPolicy:n,context:(0,r.Z)({single:o},c)},!u)return l.query(d)}return(0,s.E)().load({name:u,variables:t},(()=>d?l.query(d):fetch(`/cgraphql?q=QueryPreloader_${u}`,(0,o.I)({method:"POST",credentials:"include",referrerPolicy:"same-origin",headers:(0,r.Z)({"X-APOLLO-OPERATION-NAME":u,"Content-Type":"application/json"},c&&c.headers),body:JSON.stringify({query:e,variables:t})})).then((e=>e.ok?e.json():i.i)).catch((()=>i.i))))}},5904:(e,t,n)=>{"use strict";n.d(t,{i:()=>o,r:()=>i});const r=/query\s+(\w+).*?\{/,o={data:null};function s(e){return"OperationDefinition"===e.kind}function i(e){var t;if("string"!=typeof e)return null===(t=(e.definitions||[]).filter(s).map((e=>e.name)).filter((e=>null!=e))[0])||void 0===t?void 0:t.value;{const t=e.match(r);if(t)return t[1]}}},1100:(e,t,n)=>{"use strict";const r=n(8665),o=n(4115),s=n(9482),i=n(1492),a=Symbol("encodeFragmentIdentifier");function c(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function u(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}function l(e,t){return t.decode?o(e):e}function d(e){return Array.isArray(e)?e.sort():"object"==typeof e?d(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function p(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function h(e){const t=(e=p(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function m(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function f(e,t){c((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,r)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return(e,n,r)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"colon-list-separator":return(e,n,r)=>{t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return(t,n,r)=>{const o="string"==typeof n&&n.includes(e.arrayFormatSeparator),s="string"==typeof n&&!o&&l(n,e).includes(e.arrayFormatSeparator);n=s?l(n,e):n;const i=o||s?n.split(e.arrayFormatSeparator).map((t=>l(t,e))):null===n?n:l(n,e);r[t]=i};case"bracket-separator":return(t,n,r)=>{const o=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!o)return void(r[t]=n?l(n,e):n);const s=null===n?[]:n.split(e.arrayFormatSeparator).map((t=>l(t,e)));void 0!==r[t]?r[t]=[].concat(r[t],s):r[t]=s};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),r=Object.create(null);if("string"!=typeof e)return r;if(!(e=e.trim().replace(/^[?#&]/,"")))return r;for(const o of e.split("&")){if(""===o)continue;let[e,i]=s(t.decode?o.replace(/\+/g," "):o,"=");i=void 0===i?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?i:l(i,t),n(l(e,t),i,r)}for(const o of Object.keys(r)){const e=r[o];if("object"==typeof e&&null!==e)for(const n of Object.keys(e))e[n]=m(e[n],t);else r[o]=m(e,t)}return!1===t.sort?r:(!0===t.sort?Object.keys(r).sort():Object.keys(r).sort(t.sort)).reduce(((e,t)=>{const n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=d(n):e[t]=n,e}),Object.create(null))}t.extract=h,t.parse=f,t.stringify=(e,t)=>{if(!e)return"";c((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n],r=function(e){switch(e.arrayFormat){case"index":return t=>(n,r)=>{const o=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[u(t,e),"[",o,"]"].join("")]:[...n,[u(t,e),"[",u(o,e),"]=",u(r,e)].join("")]};case"bracket":return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[u(t,e),"[]"].join("")]:[...n,[u(t,e),"[]=",u(r,e)].join("")];case"colon-list-separator":return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[u(t,e),":list="].join("")]:[...n,[u(t,e),":list=",u(r,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t="bracket-separator"===e.arrayFormat?"[]=":"=";return n=>(r,o)=>void 0===o||e.skipNull&&null===o||e.skipEmptyString&&""===o?r:(o=null===o?"":o,0===r.length?[[u(n,e),t,u(o,e)].join("")]:[[r,u(o,e)].join(e.arrayFormatSeparator)])}default:return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,u(t,e)]:[...n,[u(t,e),"=",u(r,e)].join("")]}}(t),o={};for(const i of Object.keys(e))n(i)||(o[i]=e[i]);const s=Object.keys(o);return!1!==t.sort&&s.sort(t.sort),s.map((n=>{const o=e[n];return void 0===o?"":null===o?u(n,t):Array.isArray(o)?0===o.length&&"bracket-separator"===t.arrayFormat?u(n,t)+"[]":o.reduce(r(n),[]).join("&"):u(n,t)+"="+u(o,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,r]=s(e,"#");return Object.assign({url:n.split("?")[0]||"",query:f(h(e),t)},t&&t.parseFragmentIdentifier&&r?{fragmentIdentifier:l(r,t)}:{})},t.stringifyUrl=(e,n)=>{n=Object.assign({encode:!0,strict:!0,[a]:!0},n);const r=p(e.url).split("?")[0]||"",o=t.extract(e.url),s=t.parse(o,{sort:!1}),i=Object.assign(s,e.query);let c=t.stringify(i,n);c&&(c=`?${c}`);let l=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(l=`#${n[a]?u(e.fragmentIdentifier,n):e.fragmentIdentifier}`),`${r}${c}${l}`},t.pick=(e,n,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[a]:!1},r);const{url:o,query:s,fragmentIdentifier:c}=t.parseUrl(e,r);return t.stringifyUrl({url:o,query:i(s,n),fragmentIdentifier:c},r)},t.exclude=(e,n,r)=>{const o=Array.isArray(n)?e=>!n.includes(e):(e,t)=>!n(e,t);return t.pick(e,o,r)}},7614:e=>{e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},5915:(e,t,n)=>{var r=n(7614);e.exports=h,e.exports.parse=s,e.exports.compile=function(e,t){return a(s(e,t),t)},e.exports.tokensToFunction=a,e.exports.tokensToRegExp=p;var o=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function s(e,t){for(var n,r=[],s=0,i=0,a="",l=t&&t.delimiter||"/";null!=(n=o.exec(e));){var d=n[0],p=n[1],h=n.index;if(a+=e.slice(i,h),i=h+d.length,p)a+=p[1];else{var m=e[i],f=n[2],y=n[3],g=n[4],_=n[5],v=n[6],b=n[7];a&&(r.push(a),a="");var I=null!=f&&null!=m&&m!==f,E="+"===v||"*"===v,w="?"===v||"*"===v,S=n[2]||l,T=g||_;r.push({name:y||s++,prefix:f||"",delimiter:S,optional:w,repeat:E,partial:I,asterisk:!!b,pattern:T?u(T):b?".*":"[^"+c(S)+"]+?"})}}return i<e.length&&(a+=e.substr(i)),a&&r.push(a),r}function i(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function a(e,t){for(var n=new Array(e.length),o=0;o<e.length;o++)"object"==typeof e[o]&&(n[o]=new RegExp("^(?:"+e[o].pattern+")$",d(t)));return function(t,o){for(var s="",a=t||{},c=(o||{}).pretty?i:encodeURIComponent,u=0;u<e.length;u++){var l=e[u];if("string"!=typeof l){var d,p=a[l.name];if(null==p){if(l.optional){l.partial&&(s+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(p)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(p)+"`");if(0===p.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var h=0;h<p.length;h++){if(d=c(p[h]),!n[u].test(d))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(d)+"`");s+=(0===h?l.prefix:l.delimiter)+d}}else{if(d=l.asterisk?encodeURI(p).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):c(p),!n[u].test(d))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+d+'"');s+=l.prefix+d}}else s+=l}return s}}function c(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function u(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function d(e){return e&&e.sensitive?"":"i"}function p(e,t,n){r(t)||(n=t||n,t=[]);for(var o=(n=n||{}).strict,s=!1!==n.end,i="",a=0;a<e.length;a++){var u=e[a];if("string"==typeof u)i+=c(u);else{var p=c(u.prefix),h="(?:"+u.pattern+")";t.push(u),u.repeat&&(h+="(?:"+p+h+")*"),i+=h=u.optional?u.partial?p+"("+h+")?":"(?:"+p+"("+h+"))?":p+"("+h+")"}}var m=c(n.delimiter||"/"),f=i.slice(-m.length)===m;return o||(i=(f?i.slice(0,-m.length):i)+"(?:"+m+"(?=$))?"),i+=s?"$":o&&f?"":"(?="+m+"|$)",l(new RegExp("^"+i,d(n)),t)}function h(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],o=0;o<e.length;o++)r.push(h(e[o],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",d(n)),t)}(e,t,n):function(e,t,n){return p(s(e,n),t,n)}(e,t,n)}},9692:(e,t,n)=>{"use strict";n.d(t,{T:()=>an,Z:()=>un});var r=n(5919),o=n(7304),s=n(2516),i=n.n(s),a=n(3089);class c{constructor(){(0,o.Z)(this,"_callbacks",void 0),(0,o.Z)(this,"_hidden",void 0),(0,o.Z)(this,"_isHidden",void 0),(0,o.Z)(this,"_visibilityChange",void 0),(0,o.Z)(this,"_bindEventListeners",(()=>{document.addEventListener(this._visibilityChange,this._handleVisibilityChange,!1)})),(0,o.Z)(this,"_handleVisibilityChange",(()=>{const e=document[this._hidden];this._isHidden=e,this._callbacks.forEach((t=>t(e)))})),this._isHidden=!1,this._callbacks=new Map,this._hidden=void 0,this._visibilityChange=void 0,"undefined"!=typeof document&&(void 0!==document.hidden?(this._isHidden=document.hidden,this._hidden="hidden",this._visibilityChange="visibilitychange"):void 0!==document.msHidden?(this._isHidden=document.msHidden,this._hidden="msHidden",this._visibilityChange="msvisibilitychange"):void 0!==document.webkitHidden&&(this._isHidden=document.webkitHidden,this._hidden="webkitHidden",this._visibilityChange="webkitvisibilitychange"),void 0!==document.addEventListener&&void 0!==this._hidden&&this._bindEventListeners())}addCallback(e,t){if("string"!=typeof e)throw new Error("Invalid name, must be string");if("function"!=typeof t)throw new Error("Invalid callback, must be function");this._callbacks.set(e,t)}removeCallback(e){this._callbacks.has(e)&&this._callbacks.delete(e)}getIsHidden(){return this._isHidden}}class u{constructor(){(0,o.Z)(this,"_performance",void 0),this._performance=window.performance}clearMarks(...e){this._performance&&this._performance.clearMarks&&this._performance.clearMarks(...e)}mark(...e){this._performance&&this._performance.mark&&this._performance.mark(...e)}getEntriesByName(...e){return this._performance&&this._performance.getEntriesByName?this._performance.getEntriesByName(...e):[]}getTimeOrigin(){return this._performance&&(this._performance.timeOrigin||this._performance.timing)?this._performance.timeOrigin||this._performance.timing.navigationStart:0}now(){return this._performance&&this._performance.now?this._performance.now():Date.now?Date.now():+new Date}isAvailable(){return!!(this._performance&&this._performance.clearMarks&&this._performance.mark&&this._performance.getEntriesByName&&this._performance.timing)}}class l{constructor(e,t){if((0,o.Z)(this,"_isActiveEvents",void 0),(0,o.Z)(this,"_onEvent",void 0),(0,o.Z)(this,"_pageVisibility",void 0),(0,o.Z)(this,"_performance",void 0),(0,o.Z)(this,"_startedEvents",void 0),(0,o.Z)(this,"_threshold",void 0),(0,o.Z)(this,"_wasPreviouslyHidden",void 0),(0,o.Z)(this,"_getEventKey",(({task:e,taskId:t})=>t?`${e}.${t}`:e)),(0,o.Z)(this,"_getEventTimingByName",(e=>{const t=this._performance.getEntriesByName(e);return t[t.length-1]})),(0,o.Z)(this,"_getApdexFields",(e=>{const t=this._getApdexTimings(e),n=this._calculateApdex({duration:t.duration,threshold:e.threshold});return(0,r.Z)((0,r.Z)({},t),{},{apdex:n})})),(0,o.Z)(this,"_getApdexTimings",(e=>{const t=this._getEventKey(e),n=`${t}-start`,r=e.startTime||this._getStartTime(e,n),o=e.stopTime||this._getStopTime();return this._cleanApdexState(t),{startTime:r,stopTime:o,duration:o-r}})),(0,o.Z)(this,"_getStartTime",((e,t)=>{let n;const r=this._performance.getTimeOrigin();if(e.type===a.jM.INITIAL_LOAD)n=r;else{n=r+this._getEventTimingByName(t).startTime}return n})),(0,o.Z)(this,"_getStopTime",(()=>this._performance.getTimeOrigin()+this._performance.now())),(0,o.Z)(this,"_cleanApdexState",(e=>{this._performance.clearMarks(`${e}-start`),this._performance.clearMarks(`${e}-stop`),this._startedEvents.delete(e)})),(0,o.Z)(this,"_getVisibilityFields",(e=>{let t;if(e.type===a.jM.INITIAL_LOAD)t=!this._wasPreviouslyHidden;else if(e.type===a.jM.TRANSITION){const n=this._getEventKey(e);t=this._isActiveEvents.get(n)}return(e.startTime||e.stopTime)&&(t=!this._pageVisibility.getIsHidden()),{isActiveTab:t}})),(0,o.Z)(this,"_calculateApdex",(({duration:e,threshold:t=this._threshold})=>{let n;return n=e<=t?1:e<=4*t?.5:0,n})),(0,o.Z)(this,"_validateStartEvent",(e=>{if(!e)throw new Error('Missing "event" in Apdex start event');if(!e.task)throw new Error('Missing "task" in Apdex start event');if("string"!=typeof e.task)throw new Error('Invalid "task" in Apdex start event');if(e.taskId&&"string"!=typeof e.taskId)throw new Error('Invalid "taskId" in Apdex start event')})),(0,o.Z)(this,"_validateStopEvent",(e=>{if(!e)throw new Error('Missing "event" in Apdex stop event');if(!e.task)throw new Error('Missing "task" in Apdex stop event');if("string"!=typeof e.task)throw new Error('Invalid "task" in Apdex stop event');if(e.taskId&&"string"!=typeof e.taskId)throw new Error('Invalid "taskId" in Apdex stop event');if(!e.type)throw new Error('Missing "type" in Apdex stop event');if(e.type&&!(0,a.P9)(a.jM,e.type))throw new Error('Invalid "type" in Apdex stop event');if(e.threshold&&"number"!=typeof e.threshold)throw new Error('Invalid "threshold" in Apdex stop event');if(!e.startTime&&e.type===a.jM.TRANSITION){const t=this._getEventKey(e);if(!this._startedEvents.has(t))throw new Error(`Apdex event transition "${t}" was not started`)}if(e.startTime&&!("number"==typeof e.startTime&&e.startTime>=0))throw new Error('Invalid "startTime" in Apdex stop event');if(e.stopTime&&"number"!=typeof e.stopTime)throw new Error('Invalid "stopTime" in Apdex stop event');if(e.stopTime<=e.startTime)throw new Error('"stopTime" should be greater than "startTime" in Apdex stop event')})),(0,o.Z)(this,"_shouldSendEvent",(e=>!!e&&"number"==typeof e.apdex)),(0,o.Z)(this,"_sendEvent",((e,t)=>{this._shouldSendEvent(e)&&this._onEvent({source:"ui",action:"readyForUser",actionSubject:"ui",attributes:(0,r.Z)((0,r.Z)({},e.additionalAttributes),{},{task:e.task,taskId:e.taskId,type:e.type,threshold:e.threshold||this._threshold,apdex:e.apdex,startTime:e.startTime,stopTime:e.stopTime,duration:e.duration,isActiveTab:e.isActiveTab})},t)})),!e)throw new Error("Missing onEvent callback");if("function"!=typeof e)throw new Error("Invalid onEvent, must be function");if(!(t instanceof c))throw new Error("Invalid pageVisibility, must be PageVisibility class");this._startedEvents=new Map,this._performance=new u,this._onEvent=e,this._threshold=1e3,this._wasPreviouslyHidden=t.getIsHidden(),this._isActiveEvents=new Map,this._pageVisibility=t,this._pageVisibility.addCallback("apdexEvent",(e=>{this.onVisibilityChange(!e)}))}start(e){if(this._validateStartEvent(e),!this._performance.isAvailable())return;const t=this._getEventKey(e),n=`${t}-start`;this._startedEvents.set(t,!0),this._isActiveEvents.set(t,!this._pageVisibility.getIsHidden()),this._performance.clearMarks(n),this._performance.mark(n)}getStart(e){if(this._validateStartEvent(e),!this._performance.isAvailable())return;const t=`${this._getEventKey(e)}-start`;return this._getEventTimingByName(t)}stop(e,t){if(this._validateStopEvent(e),!this._performance.isAvailable())return;const n=this._getApdexFields(e),o=this._getVisibilityFields(e);this._sendEvent((0,r.Z)((0,r.Z)((0,r.Z)({},e),n),o),t)}onVisibilityChange(e){e||(this._wasPreviouslyHidden=!0,Array.from(this._isActiveEvents.keys()).forEach((e=>this._isActiveEvents.set(e,!1))))}}const d=(e,t)=>()=>{if((e=>"function"==typeof e)(e))try{return e()}catch(n){return void console.error(`${t} - ${n instanceof Error?n.message:String(n)}`)}return e};var p=n(7572);function h(e){return{tenantIdType:e.tenantIdType,tenantId:e.tenantId}}function m(e){return{userIdType:e.userIdType}}function f(e){return{orgId:e.orgId}}function y(e){return{workspaceId:e.workspaceId}}function g(e){if(E(e))return{aliases:e}}function _(e){if(E(e))return{groups:e}}function v(e){return e.anonymousId?{anonymousId:e.anonymousId}:{}}function b(e,t){return void 0===t?e:t}function I(e,t){const n=t||{};return{env:b(e.env,n.env),product:b(e.product,n.product),subproduct:b(e.subproduct(),n.subproduct),version:b(e.version,n.version),origin:b(e.origin,n.origin),platform:b(e.platform,n.platform)}}function E(e){return(0,p.P)(e)&&Object.keys(e).length>0}function w(e,t){return E(t)?{[e]:t}:void 0}function S(e){if(E(e)){const t=function(e){const t={};return Object.keys(e).forEach((n=>{const r=e[n];t[n]={id:r.id,type:r.type}})),t}(e);return w("containers",t)}}function T(e,t){return(0,r.Z)({containerType:e.containerType,containerId:e.containerId,source:e.source,objectType:e.objectType,objectId:e.objectId,actionSubject:e.actionSubject,action:e.action,actionSubjectId:e.actionSubjectId,attributes:e.attributes,nonPrivacySafeAttributes:e.nonPrivacySafeAttributes,tags:e.tags,highPriority:e.highPriority,eventType:t},S(e.containers))}function k(e,t,n,o,s,i,c,u,l,d,p,b,E,T,k,A){const O=I(e),C=h(t),x=m(n),P=f(d),R=y(b),N={title:"",path:"",url:"",referrer:"",search:"",eventType:a.a7.SCREEN};return(0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({},O),C),x),P),N),function(e){return w("attributes",e)}(o)),function(e){return w("nonPrivacySafeAttributes",e)}(s)),S(T)),v(E)),{},{tags:i,tabId:c,sessionId:u,taskSessions:l,pageLoadId:p},R),g(k)),_(A))}function A(e){return`${e.actionSubject} ${e.action}`}function O(e,t,n,o,s,i,a,c,u,l,d,p,b){const E=I(e,function(e){const{env:t,product:n,subproduct:r,version:o,origin:s,platform:i}=e;return{env:t,product:n,subproduct:r,version:o,origin:s,platform:i}}(o)),w=h(t),S=f(u),k=y(d),A=m(n),O=T(o,s);return(0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({},E),w),S),A),O),v(o)),{},{tabId:i,sessionId:a,taskSessions:c,pageLoadId:l},k),g(p)),_(b))}var C=n(188),x=n(3354);class P{constructor(e=[]){if((0,o.Z)(this,"compressionRules",void 0),(0,o.Z)(this,"canCompress",(e=>this.compressionRules.some((t=>t.canCompress(e))))),(0,o.Z)(this,"compress",(e=>this.createGroups(e).reduce(((e,t)=>{const n=this.compressGroup(t);return e.concat(n)}),[]))),(0,o.Z)(this,"createGroups",(e=>e.reduce(((e,t)=>{const n=this.compressionRules.find((e=>e.canCompress(t)));let r;if(n){const e=T(t,t.eventType);r=(0,C.CE)(t,Object.keys(e))}const o=e.find((e=>n===e.compressor&&(0,C.fS)(r,e.contextFields)));return o?o.events.push(t):e.push({contextFields:r,compressor:n,events:[t]}),e}),[]))),(0,o.Z)(this,"compressGroup",(e=>{if(!e.compressor)return e.events;try{return e.compressor.compress(e.events).map((t=>(0,r.Z)((0,r.Z)({},t),e.contextFields)))}catch(t){return console.warn(`Failed to compress some analytics events. Error: ${t.message}. Sending ${e.events.length} uncompressed events instead`),e.events}})),!Array.isArray(e))throw new Error("Event compressors must be constructed with an array of CompressionRules");if(!e.every((e=>e instanceof x.B)))throw new Error("Event compressors can only be constructed with instances of CompressionRule");this.compressionRules=e}}class R{constructor(e,t){(0,o.Z)(this,"compressor",void 0),(0,o.Z)(this,"eventArgs",void 0),(0,o.Z)(this,"flushBatchTimeout",void 0),(0,o.Z)(this,"processFn",void 0),(0,o.Z)(this,"push",((e,t,n,r)=>{this.eventArgs.push({identifier:e,builtEvent:t,context:n,userInfo:r})})),(0,o.Z)(this,"size",(()=>this.eventArgs.length)),(0,o.Z)(this,"startFlush",(()=>{try{this.eventArgs=this.compressEventArgs(this.eventArgs)}catch(e){console.warn(`Failed to perform compression on the delayed analytics events. Error: ${e.message}. Sending ${this.eventArgs.length} uncompressed events instead`)}this.flushNextBatch()})),(0,o.Z)(this,"cancelFlush",(()=>{this.flushBatchTimeout&&(clearTimeout(this.flushBatchTimeout),this.flushBatchTimeout=null)})),(0,o.Z)(this,"flushNextBatch",(()=>{this.eventArgs.splice(0,7).forEach((e=>this.processFn(e.identifier,e.builtEvent,e.context,e.userInfo))),this.eventArgs.length>0?this.flushBatchTimeout=setTimeout((()=>this.flushNextBatch()),100):this.flushBatchTimeout=null})),(0,o.Z)(this,"compressEventArgs",(e=>{const[t,n]=(0,C.uK)(e,(e=>this.compressor.canCompress(e.builtEvent))),r=t.reduce(((e,t)=>{const n=e.find((e=>(0,C.fS)(e.userInfo,t.userInfo)&&(0,C.fS)(e.context,t.context)));return n?n.eventArgs.push(t):e.push({userInfo:t.userInfo,context:t.context,eventArgs:[t]}),e}),[]).reduce(((e,t)=>{try{const n=t.eventArgs.map((e=>e.builtEvent)),r=this.compressor.compress(n).map((e=>({identifier:A(e),builtEvent:e,userInfo:t.userInfo,context:t.context})));return e.concat(r)}catch(n){return console.warn(`Failed to compress some analytics events. Error: ${n.message}. Sending ${t.eventArgs.length} uncompressed events instead`),t.eventArgs}}),[]);return n.forEach((e=>r.push(e))),r})),this.processFn=e,this.flushBatchTimeout=null,this.eventArgs=[],this.compressor=new P(t)}}var N=n(7744);class D{constructor(e,t){(0,o.Z)(this,"delayQueue",void 0),(0,o.Z)(this,"delayTimeout",void 0),(0,o.Z)(this,"delayCallback",void 0),(0,o.Z)(this,"isDelaying",void 0),(0,o.Z)(this,"push",((e,t,n,r)=>{this.delayQueue.push(e,t,n,r)})),(0,o.Z)(this,"startLowPriorityEventDelay",((e=1e4,t)=>{if(Number.isNaN(e)||e<=0)throw new Error(`Invalid timeout period: ${e}, must be a number greater than 0`);this.delayTimeout&&clearTimeout(this.delayTimeout);const n=e?Math.min(e,3e4):3e4;this.delayCallback=t,this.delayTimeout=setTimeout((()=>this.stopLowPriorityEventDelay(N.e.TIMEOUT)),n),this.delayQueue.cancelFlush(),this.isDelaying=!0})),(0,o.Z)(this,"stopLowPriorityEventDelay",((e=N.e.MANUAL)=>{var t;this.delayTimeout&&(clearTimeout(this.delayTimeout),this.delayTimeout=void 0),this.delayQueue.startFlush(),this.isDelaying=!1,null===(t=this.delayCallback)||void 0===t||t.call(this,e),this.delayCallback=void 0})),(0,o.Z)(this,"isDelayingLowPriorityEvents",(()=>this.isDelaying)),this.isDelaying=!1,this.delayQueue=new R(e,t)}}var $=n(6598);let L=function(e){return e.IN_PROGRESS="inProgress",e.QUEUE="queue",e.RECLAIM_START="reclaimStart",e.RECLAIM_END="reclaimEnd",e.ACK="ack",e}({}),F=function(e){return e[e.RECLAIM_TIMEOUT=1e4]="RECLAIM_TIMEOUT",e[e.RECLAIM_WAIT=500]="RECLAIM_WAIT",e[e.RECLAIM_WAIT_THRESHOLD=2e3]="RECLAIM_WAIT_THRESHOLD",e}({});const Z=(e,t)=>({[L.ACK]:`${e}.${t}.${L.ACK}`,[L.QUEUE]:`${e}.${t}.${L.QUEUE}`,[L.IN_PROGRESS]:`${e}.${t}.${L.IN_PROGRESS}`,[L.RECLAIM_START]:`${e}.${t}.${L.RECLAIM_START}`,[L.RECLAIM_END]:`${e}.${t}.${L.RECLAIM_END}`}),j=Object.values(L),M=e=>new Promise((t=>{setTimeout(t,e)})),U=async(e,t)=>{const{queue:n,inProgress:o}=e.storageKeys,s=JSON.parse(localStorage.getItem(n)||"[]"),i=JSON.parse(localStorage.getItem(o)||"{}"),a=[...s,...Object.entries(i).map((([e,t])=>(0,r.Z)((0,r.Z)({},t),{},{attemptNumber:t.attemptNumber+1,id:e})))];if(a.length>0){const r=await t(a);if("successful"===r.status)B(e.storageKeys);else if("partial"===r.status){const e=a.filter((e=>!r.acceptedItemIds.includes(e.id)));return localStorage.removeItem(o),localStorage.setItem(n,JSON.stringify(e)),{fullReclaim:!1}}}else B(e.storageKeys);return{fullReclaim:!0}},B=e=>{localStorage.removeItem(e.queue),localStorage.removeItem(e.inProgress),localStorage.removeItem(e.reclaimEnd),localStorage.removeItem(e.reclaimStart),localStorage.removeItem(e.ack)},K=async(e,t)=>{if("string"!=typeof e||0===e.length)return{fullReclaims:0,partialReclaims:0,failedReclaims:0};const n=i()(),r=(e=>{try{return Object.keys(localStorage).filter((t=>t.startsWith(e))).map((e=>e.split("."))).filter((t=>{if(3===t.length&&t[0]===e&&t[2]===L.ACK)try{const e=localStorage.getItem(t.join("."));if(e){const t=parseInt(e);return F.RECLAIM_TIMEOUT+t<Date.now()}}catch(n){}return!1})).map((e=>e[1]))}catch(t){}return[]})(e),o=r.map((r=>(async(e,t)=>{const{ack:n,reclaimStart:r,reclaimEnd:o}=e.storageKeys,s=Date.now();if(localStorage.setItem(r,e.reclaimProcessId),localStorage.setItem(n,s.toString()),await M(F.RECLAIM_WAIT),Date.now()>s+F.RECLAIM_WAIT_THRESHOLD||localStorage.getItem(r)!==e.reclaimProcessId)throw new Error("Took to long to callback, reclaim abandonded. After reclaimStart.");if(localStorage.setItem(o,e.reclaimProcessId),await M(F.RECLAIM_WAIT),Date.now()>s+F.RECLAIM_WAIT_THRESHOLD||localStorage.getItem(r)!==e.reclaimProcessId||localStorage.getItem(o)!==e.reclaimProcessId)throw new Error("Took to long to callback, reclaim abandonded. After reclaimEnd.");return U(e,t)})({queuePrefix:e,reclaimProcessId:n,storageKeys:Z(e,r)},t))),s=await Promise.allSettled(o),a=s.filter((e=>"rejected"===e.status)),c=s.filter((e=>"fulfilled"===e.status)).map((e=>e.value)),u=c.filter((e=>e.fullReclaim)),l=c.filter((e=>!e.fullReclaim));return{failedReclaims:a.length,partialReclaims:l.length,fullReclaims:u.length}},q="namespace-timeAdded",W="analytics-resilience",G="timeToBeProcessedAfter",V="timeAdded",H="retryAttempts";let Q=function(e){return e.INDEXEDDB="indexeddb",e.MEMORY="memory",e}({}),z=function(e){return e.IGNORE="ignore",e.ABANDON="abandon",e.EVICT="evict",e}({});class Y extends Error{constructor(){super("window.indexeddb is undefined."),Object.setPrototypeOf(this,Y.prototype),this.name="NoIndexedDbError"}}const J="AbandonWriteError";class X extends Error{constructor(e){super(`Event Limit reached. Abandoning write to: ${e}`),Object.setPrototypeOf(this,X.prototype),this.name=J}}const ee="CallbackProcessingError";class te extends Error{constructor(e){super(`Error thrown while processing events in callback: ${e&&"object"==typeof e&&"toString"in e&&"function"==typeof e.toString&&e.toString()||"string"==typeof e&&e||"Argument passed to CallbackProcessingError was not an Error or string."}`),Object.setPrototypeOf(this,te.prototype),this.name=ee}}const ne="InvalidPolicyError";class re extends Error{constructor(e,t){super(`Method '${t}' cannot be called with policy '${e}'.`),this.name=ne}}const oe=e=>{if(e&&"object"==typeof e&&"name"in e){const t=e;return"string"==typeof t.name&&(t.name===J||t.name===ee||t.name===ne)}return!1};var se=n(2342);const ie=(e,t,{id:n,retryAttempts:r,timeToProcessOffset:o})=>({item:e,id:n||i()(),retryAttempts:r||0,timeToBeProcessedAfter:Date.now()+(o||0),namespace:t,timeAdded:Date.now()}),ae=e=>({logger:e.logger||console,useMemory:e.useMemory||!1,maxAttempts:e.maxAttempts||10,maxEventLimit:e.maxEventLimit||5e3}),ce=e=>new Promise(((t,n)=>{e.onsuccess=e=>{t(e)},e.onerror=e=>{n(e)}})),ue=(e,t)=>{try{"function"==typeof e.commit&&e.commit()}catch(n){throw t.error("Failed to force commit transaction:",n),n}return(e=>new Promise(((t,n)=>{e.oncomplete=()=>{t()},e.onerror=e=>{n(e)},e.onabort=e=>{n(e)}})))(e)},le=(e,t)=>{e.onerror=e=>{t.warn("Error thrown from request:",e)}};class de{constructor(e,t,n,r){if((0,o.Z)(this,"eventLimit",void 0),(0,o.Z)(this,"namespace",void 0),(0,o.Z)(this,"logger",void 0),(0,o.Z)(this,"deleteItemHandler",void 0),(0,o.Z)(this,"deleteOldestNEvents",(async(e,t)=>{var n;const r=e.index(q),o=IDBKeyRange.bound([this.namespace,0],[this.namespace,Date.now()]),s=r.getAllKeys(o,t),i=await ce(s),a=null==i||null===(n=i.target)||void 0===n?void 0:n.result;if(a&&Array.isArray(a)&&a.length>0)try{const t=a.map((t=>this.deleteItemHandler(e,t)));await Promise.all(t)}catch(c){throw this.logger.warn("Failed to delete items from indexeddb.",c),c}})),!(e>0))throw Error("Event Limit has to be set higher than 1");this.eventLimit=e,this.namespace=t,this.logger=n,this.deleteItemHandler=r}async insertItems(e,t,n=z.ABANDON){const r=[...t];let o=0;switch(n){case z.ABANDON:await this.throwIfNotEnoughSpace(e,t.length);break;case z.EVICT:o=await this.evictIfNotEnoughSpace(e,t.length);break;case z.IGNORE:await this.calculateHowManyEventsWeCanAdd(e,r)}const s=r.map((t=>ce(e.add(t))));return await Promise.all(s),await ue(e.transaction,this.logger),{items:r,numberOfEvictedItems:o}}async throwIfNotEnoughSpace(e,t){const n=await this.calculateFreeSpace(e);if(n<t)throw new X(`Not enough space in IndexedDb. Needed ${t} but only had ${n}`)}async evictIfNotEnoughSpace(e,t){const n=await this.calculateFreeSpace(e);if(n<t){const r=t-n;return await this.deleteOldestNEvents(e,r),r}return 0}async calculateHowManyEventsWeCanAdd(e,t){const n=await this.calculateFreeSpace(e);if(n<t.length){const e=t.length-n,r=t.length-e;t.splice(r,e)}}async calculateFreeSpace(e){const t=await this.getCountofEventsInObjectStore(e);return this.eventLimit-t}async getCountofEventsInObjectStore(e){const t=e.index(q),n=IDBKeyRange.bound([this.namespace,0],[this.namespace,Date.now()]),r=t.count(n);return(await ce(r)).target.result}}const pe=["item"],he=["items"];class me{constructor(e,t={}){if((0,o.Z)(this,"db",void 0),(0,o.Z)(this,"logger",void 0),(0,o.Z)(this,"globalEventLimitGuard",void 0),(0,o.Z)(this,"options",void 0),(0,o.Z)(this,"namespace",void 0),(0,o.Z)(this,"startDB",(async()=>new Promise((async(e,t)=>{if("undefined"!=typeof window){window.setTimeout((()=>{this.logger.warn("IndexedDB timed out."),t(new Y)}),15e3);const r=window.indexedDB.open("analytics-web-client",1);r.onupgradeneeded=e=>{if(0!==e.oldVersion)throw new Error("We cannot upgrade the database. Do not do this.");const t=r.result.createObjectStore(W,{keyPath:"id"});t.createIndex(G,G,{unique:!1}),t.createIndex(H,H,{unique:!1}),t.createIndex(V,V,{unique:!1}),t.createIndex(q,["namespace","timeAdded"],{unique:!1})};try{return await ce(r),e(r.result)}catch(n){this.logger.warn("IndexedDB failed to initialise.",n),t(new Y)}}})))),(0,o.Z)(this,"addItem",(async(e,t={},n=z.ABANDON)=>{const{logger:r,namespace:o}=this,s=ie(e,o,t),{objectStore:i}=await this.getObjectStoreAndTransaction("readwrite");if(n===z.IGNORE)throw new re(n,"IndexedDbConnector#addItem");try{if(!s.namespace||0===s.namespace.length||"string"!=typeof s.namespace)throw new Error("Namespace not specified");const e=await this.globalEventLimitGuard.insertItems(i,[s],n);if(1===e.items.length)return{item:e.items[0],numberOfEvictedItems:e.numberOfEvictedItems};throw new Error(`Incorrect number of items added. Expected: 1, got: ${e.items.length}`)}catch(a){if(oe(a))throw a;throw r.log("Failed to add item to table",a),new Error("Request to add item to table failed")}})),(0,o.Z)(this,"bulkAddItem",(async(e,t=z.ABANDON)=>{const{logger:n,namespace:r}=this,o=e.map((e=>{let{item:t}=e,n=(0,se.Z)(e,pe);return ie(t,r,n)})),{objectStore:s}=await this.getObjectStoreAndTransaction("readwrite");try{return await this.globalEventLimitGuard.insertItems(s,o,t)}catch(i){if(oe(i))throw i;throw n.log("Failed to add item to table",i),new Error("Request to add item to table failed")}})),(0,o.Z)(this,"getItems",(async(e=7)=>{const t=e>0?e:7,{logger:n}=this,o=this.options.maxAttempts,{transaction:s,objectStore:i}=await this.getObjectStoreAndTransaction("readwrite"),a=i.index(G),c=IDBKeyRange.upperBound(Date.now()),u=a.openCursor(c),l=await new Promise((async(e,s)=>{const i=[];let a=0;u.onerror=e=>{n.error("Failed to open cursor:",e),s("Failed to open cursor")},u.onsuccess=s=>{const c=s.target.result;if(c){const s=(0,r.Z)({},c.value);i.push(s);const u=c.value;if(u.retryAttempts+=1,u.timeToBeProcessedAfter=Date.now()+6e4,u.retryAttempts>=o){++a;const e=c.delete();le(e,n)}else{const e=c.update(u);le(e,n)}i.length<t?c.continue():e({items:i,numberOfDeletedItems:a})}else e({items:i,numberOfDeletedItems:a})}}));return await ue(s,this.logger),l})),(0,o.Z)(this,"deleteItems",(async e=>{const{transaction:t,objectStore:n}=await this.getObjectStoreAndTransaction("readwrite");try{const r=e.map((e=>this.deleteItem(n,e)));await ue(t,this.logger),await Promise.all(r)}catch(r){throw this.logger.warn("Failed to delete items from indexeddb.",r),r}})),(0,o.Z)(this,"getItemCount",(async()=>{const{transaction:e,objectStore:t}=await this.getObjectStoreAndTransaction("readonly"),n=t.index(G),r=IDBKeyRange.upperBound(Date.now()),o=n.count(r),s=await ce(o);return await ue(e,this.logger),s.target.result})),(0,o.Z)(this,"processItems",(async(e,t=7)=>{const n=await this.getItems(t),{items:r}=n,o=(0,se.Z)(n,he);try{const t=await e(r,o),n=r.map((e=>e.id));return await this.deleteItems(n),t}catch(s){throw new te(s)}})),(0,o.Z)(this,"deleteItem",(async(e,t)=>{const{logger:n}=this;try{await ce(e.delete(t))}catch(r){throw n.error("Failed to delete item:",t,r),r}})),(0,o.Z)(this,"getObjectStoreAndTransaction",(async e=>{const t=(await this.db).transaction(W,e),n=t.objectStore(W);return{transaction:t,objectStore:n}})),this.options=ae(t),this.namespace=e,this.logger=this.options.logger,!window.indexedDB)throw new Y;this.db=this.startDB(),this.db.catch((()=>{})),this.globalEventLimitGuard=new de(this.options.maxEventLimit,this.namespace,this.logger,this.deleteItem)}storeType(){return Q.INDEXEDDB}}class fe{constructor(e,t){if((0,o.Z)(this,"eventLimit",void 0),(0,o.Z)(this,"memoryItemHandlers",void 0),(0,o.Z)(this,"insertItemsToMemoryStore",((e,t)=>{switch(t){case z.ABANDON:return this.handleAbandonIfLimitWillExceedPolicy(e);case z.EVICT:return Promise.resolve(this.handleEvictOldestIfLimitExceededPolicy(e));case z.IGNORE:return this.handleAddAsManyAsPossible(e)}})),!(e>0))throw Error("Event Limit has to be set higher than 1");this.eventLimit=e,this.memoryItemHandlers=t}async handleAbandonIfLimitWillExceedPolicy(e){if(await this.memoryItemHandlers.getItemCount()+e.length>this.eventLimit)throw new X(Q.MEMORY);return this.memoryItemHandlers.addItems(e),{items:e,numberOfEvictedItems:0}}handleEvictOldestIfLimitExceededPolicy(e){this.memoryItemHandlers.addItems(e);return{items:e,numberOfEvictedItems:this.memoryItemHandlers.evictEventsIfNeeded(this.eventLimit)}}async handleAddAsManyAsPossible(e){const t=this.eventLimit-await this.memoryItemHandlers.getItemCount(),n=t>e.length?e:e.slice(0,t);return this.memoryItemHandlers.addItems(n),{items:n,numberOfEvictedItems:0}}}const ye=["item"],ge=["items"];class _e{constructor(e,t={}){(0,o.Z)(this,"memoryStore",void 0),(0,o.Z)(this,"options",void 0),(0,o.Z)(this,"globalEventLimitGuard",void 0),(0,o.Z)(this,"namespace",void 0),this.namespace=e,this.memoryStore=[],this.options=ae(t),this.globalEventLimitGuard=new fe(this.options.maxEventLimit,{addItems:this.addItems.bind(this),getItemCount:this.getItemCount.bind(this),evictEventsIfNeeded:this.evictEventsIfNeeded.bind(this)})}async addItem(e,t={},n=z.ABANDON){if(n===z.IGNORE)throw new re(n,"IndexedDbConnector#addItem");const r=ie(e,this.namespace,t),o=await this.globalEventLimitGuard.insertItemsToMemoryStore([r],n);return Promise.resolve({item:o.items[0],numberOfEvictedItems:o.numberOfEvictedItems})}bulkAddItem(e,t=z.ABANDON){const n=e.map((e=>{let{item:t}=e,n=(0,se.Z)(e,ye);return ie(t,this.namespace,n)}));return this.bulkAddItemWrapperType(n,t)}bulkAddItemWrapperType(e,t=z.ABANDON){return Promise.resolve(this.globalEventLimitGuard.insertItemsToMemoryStore(e,t))}getItems(e=7){return Promise.resolve(this.synchronousGetItems(e))}synchronousGetItems(e=7){const t=e>0?e:7,n=Date.now(),o=[],s=[];for(let i of this.memoryStore)if(i.timeToBeProcessedAfter<=n&&(o.push((0,r.Z)({},i)),i.timeToBeProcessedAfter+=6e4,i.retryAttempts+=1,i.retryAttempts>=this.options.maxAttempts&&s.push(i)),o.length>=t)break;return s.forEach((e=>{const t=this.memoryStore.indexOf(e);this.memoryStore.splice(t,1)})),{items:o,numberOfDeletedItems:s.length}}deleteItems(e){return this.memoryStore=this.memoryStore.filter((t=>!e.includes(t.id))),Promise.resolve(void 0)}getItemCount(){const e=Date.now(),t=this.memoryStore.filter((t=>t.timeToBeProcessedAfter<=e)).length;return Promise.resolve(t)}async processItems(e,t){const n=this.synchronousGetItems(t),{items:r}=n,o=(0,se.Z)(n,ge),s=r.map((e=>e.id));try{const t=await e(r,o);return await this.deleteItems(s),t}catch(i){throw new te(i)}}storeType(){return Q.MEMORY}addItems(e){this.memoryStore.push(...e),this.memoryStore.sort((function(e,t){return e.timeAdded-t.timeAdded}))}evictEventsIfNeeded(e){const t=this.memoryStore.length;if(t>e){const n=t-e;return this.memoryStore.splice(0,n),n}return 0}}const ve=class{constructor(e,t={}){if((0,o.Z)(this,"resilience",void 0),(0,o.Z)(this,"options",void 0),(0,o.Z)(this,"namespace",void 0),this.namespace=e,this.options=ae(t),!e||0===e.length||"string"!=typeof e)throw new Error("Invalid namespace provided");this.resilience=this.getResilienceMechanism(e,t)}getResilienceMechanism(e,t){if(!t.useMemory)try{return new me(e,t)}catch(r){var n;if(!(r instanceof Y))null===(n=t.logger)||void 0===n||n.warn("Attempted to create IndexedDbResilience but failed. Using memory instead.")}return new _e(this.namespace,t)}addItem(e,t,n=z.ABANDON){return this.runOrFailOver((()=>this.resilience.addItem(e,t,n)))}bulkAddItem(e,t=z.ABANDON){return this.runOrFailOver((()=>this.resilience.bulkAddItem(e,t)))}getItems(e){return this.runOrFailOver((()=>this.resilience.getItems(e)))}deleteItems(e){return this.runOrFailOver((()=>this.resilience.deleteItems(e)))}getItemCount(){return this.runOrFailOver((()=>this.resilience.getItemCount()))}processItems(e,t){return this.runOrFailOver((()=>this.resilience.processItems(e,t)))}storeType(){return this.resilience.storeType()}async runOrFailOver(e){try{return await e()}catch(t){if(oe(t))throw t;return this.resilience.storeType()===Q.INDEXEDDB&&await this.failOver(),e()}}async failOver(){const e=this.resilience,t=new _e(this.namespace,this.options);this.resilience=t;try{const{items:n}=await e.getItems(this.options.maxEventLimit);if(n.length>0){const r=(await t.bulkAddItemWrapperType(n,z.IGNORE)).items.map((e=>e.id));await e.deleteItems(r)}}catch(n){this.options.logger.warn("Unexpected error from ResilienceDb, switching to MemoryDb")}}};var be=n(5596);class Ie{constructor(){(0,o.Z)(this,"itemsDiscardedByRetry",0),(0,o.Z)(this,"eventCount",0),(0,o.Z)(this,"itemsDiscardedByOverflow",0),(0,o.Z)(this,"resilienceMechanism",be.b.INDEXEDDB),(0,o.Z)(this,"localstorageNumberOfQueuesPurged",0),(0,o.Z)(this,"localstorageNumberOfFullReclaims",0),(0,o.Z)(this,"localstorageNumberOfPartialReclaims",0),(0,o.Z)(this,"localstorageNumberOfFailedReclaims",0)}addToItemsDiscardedByRetryCounter(e=1){this.itemsDiscardedByRetry+=e}addToEventCount(){this.eventCount++}addToItemsDiscardedByOverflowCounter(e=1){this.itemsDiscardedByOverflow+=e}setResilienceMechanism(e){this.resilienceMechanism=e}addToReclaimMetrics(e){this.localstorageNumberOfFullReclaims+=e.fullReclaims,this.localstorageNumberOfPartialReclaims+=e.partialReclaims,this.localstorageNumberOfFailedReclaims+=e.failedReclaims}addToPurgedQueuesMetrics(e){this.localstorageNumberOfQueuesPurged+=e}subtractFromMetrics(e){this.itemsDiscardedByRetry=this.subtractFromCount(this.itemsDiscardedByRetry,e.itemsDiscardedByRetry),this.eventCount=this.subtractFromCount(this.eventCount,e.eventCount),this.itemsDiscardedByOverflow=this.subtractFromCount(this.itemsDiscardedByOverflow,e.itemsDiscardedByOverflow),this.localstorageNumberOfFullReclaims=this.subtractFromCount(this.localstorageNumberOfFullReclaims,e.fullReclaims),this.localstorageNumberOfPartialReclaims=this.subtractFromCount(this.localstorageNumberOfPartialReclaims,e.partialReclaims),this.localstorageNumberOfFailedReclaims=this.subtractFromCount(this.localstorageNumberOfFailedReclaims,e.failedReclaims),this.localstorageNumberOfQueuesPurged=this.subtractFromCount(this.localstorageNumberOfQueuesPurged,e.localstorageQueuesPurged)}subtractFromCount(e,t){return Math.max(e-(t||0),0)}getMetricsPayload(){return{itemsDiscardedByRetry:this.itemsDiscardedByRetry,eventCount:this.eventCount,itemsDiscardedByOverflow:this.itemsDiscardedByOverflow,resilienceMechanism:this.resilienceMechanism,localstorageQueuesPurged:this.localstorageNumberOfQueuesPurged,fullReclaims:this.localstorageNumberOfFullReclaims,partialReclaims:this.localstorageNumberOfPartialReclaims,failedReclaims:this.localstorageNumberOfFailedReclaims}}}let Ee=null;const we=()=>(Ee||(Ee=new Ie),Ee);class Se{constructor(e){"undefined"!=typeof window&&(window.addEventListener("offline",(()=>e(be.y.OFFLINE))),window.addEventListener("online",(()=>e(be.y.ONLINE))))}getNetworkStatus(){return window.navigator.onLine?be.y.ONLINE:be.y.OFFLINE}}let Te=function(e){return e.IDLE="idle",e.RUNNING="running",e.COMPLETED="completed",e.TIMED_OUT="timedOut",e}({}),ke=function(e){return e.EXECUTE="execute",e.COMPLETE="complete",e.TIMEOUT="timeout",e}({});class Ae{constructor(e){if((0,o.Z)(this,"timeoutPeriod",void 0),(0,o.Z)(this,"timeoutHandle",void 0),(0,o.Z)(this,"callbackStatus",Te.IDLE),!(e>0))throw new Error("CallbackWithTimeout requires timeout period higher than 0");this.timeoutPeriod=e}transitionCallbackStatus(e,t){switch(e){case Te.IDLE:case Te.TIMED_OUT:case Te.COMPLETED:t===ke.EXECUTE&&(this.callbackStatus=Te.RUNNING);break;case Te.RUNNING:switch(t){case ke.COMPLETE:this.callbackStatus=Te.COMPLETED;break;case ke.TIMEOUT:this.callbackStatus=Te.TIMED_OUT}break;default:this.callbackStatus=e}}executeCallbackWithTimeout(e,t,n){"undefined"!=typeof window&&(this.transitionCallbackStatus(this.callbackStatus,ke.EXECUTE),this.timeoutHandle=window.setTimeout((()=>{this.transitionCallbackStatus(this.callbackStatus,ke.TIMEOUT),n()}),this.timeoutPeriod),e((e=>{this.cancelTimeout(),this.getCallbackStatus()!==Te.TIMED_OUT&&(this.transitionCallbackStatus(this.callbackStatus,ke.COMPLETE),t(e))})))}getCallbackStatus(){return this.callbackStatus}cancelTimeout(){"undefined"!=typeof window&&this.timeoutPeriod>0&&this.timeoutHandle&&(window.clearTimeout(this.timeoutHandle),this.timeoutHandle=void 0)}}let Oe=function(e){return e[e.NOOP=0]="NOOP",e[e.SUCCESS=1]="SUCCESS",e[e.ERROR=2]="ERROR",e}({});const Ce=1e3,xe=3e4,Pe=2,Re=0,Ne=500,De=5e3;let $e=function(e){return e[e.NONE=0]="NONE",e[e.IMMEDIATE=1]="IMMEDIATE",e[e.WAIT=2]="WAIT",e}({});class Le{constructor(e,t){(0,o.Z)(this,"callback",void 0),(0,o.Z)(this,"failureCount",void 0),(0,o.Z)(this,"operationInFlight",void 0),(0,o.Z)(this,"options",void 0),(0,o.Z)(this,"queuedSchedule",void 0),(0,o.Z)(this,"scheduledTimeout",void 0),(0,o.Z)(this,"callbackTimer",void 0),(0,o.Z)(this,"schedule",(({immediate:e}={immediate:!1})=>{"undefined"!=typeof window&&(this.operationInFlight?e?this.queuedSchedule=$e.IMMEDIATE:this.queuedSchedule!==$e.IMMEDIATE&&(this.queuedSchedule=$e.WAIT):(e||this.options.waitInterval<=0)&&0===this.failureCount?(this.clearTimeout(),this.run()):this.failureCount>0&&null===this.scheduledTimeout?this.scheduledTimeout=window.setTimeout(this.run,this.calculateBackoff()):null===this.scheduledTimeout&&(this.scheduledTimeout=window.setTimeout(this.run,this.options.waitInterval)))})),(0,o.Z)(this,"stop",(()=>{this.clearTimeout(),this.queuedSchedule=$e.NONE})),(0,o.Z)(this,"getFailureCount",(()=>this.failureCount)),(0,o.Z)(this,"getCallbackStatus",(()=>this.callbackTimer.getCallbackStatus())),(0,o.Z)(this,"clearTimeout",(()=>{"undefined"!=typeof window&&null!==this.scheduledTimeout&&(window.clearTimeout(this.scheduledTimeout),this.scheduledTimeout=null)})),(0,o.Z)(this,"run",(()=>{this.operationInFlight=!0,this.clearTimeout();try{this.callbackTimer.executeCallbackWithTimeout(this.callback,this.done,(()=>this.done(Oe.ERROR)))}catch(e){this.done(e)}})),(0,o.Z)(this,"done",(e=>{this.operationInFlight=!1,e===Oe.ERROR||this.callbackTimer.getCallbackStatus()===Te.TIMED_OUT?(this.failureCount++,this.clearTimeout()):e===Oe.SUCCESS&&(this.failureCount=0),this.processQueuedSchedule()})),(0,o.Z)(this,"processQueuedSchedule",(()=>{if(this.queuedSchedule!==$e.NONE){const e=this.queuedSchedule===$e.IMMEDIATE;this.queuedSchedule=$e.NONE,this.schedule({immediate:e})}else this.failureCount>0&&this.schedule()})),(0,o.Z)(this,"calculateBackoff",(()=>{const{minRetryDelay:e,maxRetryDelay:t,backoffFactor:n,backoffJitterPercentage:r}=this.options;let o=e*n**this.failureCount;if(r){const e=Math.random(),t=Math.floor(e*r*o);Math.floor(10*e)<5?o-=t:o+=t}return Number(Math.min(o,t).toPrecision(1))})),this.options={minRetryDelay:e.minRetryDelay||Ce,maxRetryDelay:e.maxRetryDelay||xe,backoffFactor:e.backoffFactor||Pe,backoffJitterPercentage:e.backoffJitterPercentage||Re,waitInterval:void 0!==e.waitInterval?e.waitInterval:Ne,callbackTimeoutPeriod:e.callbackTimeoutPeriod||De},this.scheduledTimeout=null,this.failureCount=0,this.callback=t,this.operationInFlight=!1,this.queuedSchedule=$e.NONE,this.callbackTimer=new Ae(this.options.callbackTimeoutPeriod)}}const Fe=6e4,Ze={backoffFactor:0,backoffJitterPercentage:0,flushWaitMs:Fe,minRetryDelay:Fe,maxRetryDelay:Fe},je=2,Me=.2,Ue=7,Be=!1,Ke=500,qe=10,We=1e3,Ge=3e4,Ve=1e3;class He{constructor(e,t,n,s){(0,o.Z)(this,"queuePrefix",void 0),(0,o.Z)(this,"resilience",void 0),(0,o.Z)(this,"batchFlushCallback",void 0),(0,o.Z)(this,"options",void 0),(0,o.Z)(this,"scheduler",void 0),(0,o.Z)(this,"longPollingScheduler",void 0),(0,o.Z)(this,"metricsCollector",void 0),(0,o.Z)(this,"networkStatus",void 0),this.queuePrefix=e,this.resilience=new ve(t,{logger:s,maxAttempts:null==n?void 0:n.maxAttempts,maxEventLimit:null==n?void 0:n.maxItems}),this.options=this.buildOptions(n),this.scheduler=new Le((0,r.Z)((0,r.Z)({},this.options),{},{waitInterval:null!=n&&n.flushBeforeUnload?0:this.options.flushWaitMs}),this.scheduleCallback.bind(this)),this.longPollingScheduler=new Le((0,r.Z)((0,r.Z)({},Ze),{},{waitInterval:Ze.flushWaitMs}),this.scheduleLongCallBack.bind(this)),this.metricsCollector=we(),this.networkStatus=new Se((e=>{e===be.y.OFFLINE?this.scheduler.stop():this.checkEventCountAndReschedule()}))}start(e){this.batchFlushCallback=e,this.longPollingScheduler.schedule()}stop(){this.scheduler.stop(),this.longPollingScheduler.stop()}async addItem(e){const t=JSON.parse(JSON.stringify(e)),{numberOfEvictedItems:n}=await this.resilience.addItem(t,{},z.EVICT);this.scheduler.schedule(),this.metricsCollector.addToEventCount(),n>0&&this.metricsCollector.addToItemsDiscardedByOverflowCounter(n)}getGlobalRetryCount(){return this.scheduler.getFailureCount()}async scheduleCallback(e){if(this.networkStatus.getNetworkStatus()!==be.y.OFFLINE)try{e(await this.resilience.processItems(this.flush.bind(this),this.options.batchFlushSize))}catch(t){if(t.name===ee)return void e(Oe.ERROR)}finally{await this.checkEventCountAndReschedule()}else e(Oe.NOOP)}async checkEventCountAndReschedule(){const e=await this.resilience.getItemCount();e>0&&this.scheduler.schedule({immediate:e>=this.options.batchFlushSize})}async scheduleLongCallBack(e){const t=(e=>{if("string"!=typeof e||0===e.length)return 0;try{const t=Object.keys(localStorage).filter((t=>t&&t.startsWith(`${e}.`)||!1)).map((e=>e.split("."))).filter((e=>3===e.length&&j.includes(e[2]))).reduce(((e,t)=>{const[,n,r]=t;return void 0===e[n]&&(e[n]={}),e[n][r]=!0,e}),{}),n=Object.keys(t).filter((e=>!0!==t[e][L.ACK]));return n.forEach((t=>{const{queue:n,inProgress:r,reclaimStart:o,reclaimEnd:s}=Z(e,t);localStorage.removeItem(r),localStorage.removeItem(n),localStorage.removeItem(o),localStorage.removeItem(s)})),n.length}catch(t){}return 0})(this.queuePrefix);this.metricsCollector.addToPurgedQueuesMetrics(t);const n=await K(this.queuePrefix,(async e=>{const t=e.map((e=>({item:e.item,retryAttempts:e.attemptNumber,id:e.id}))),{items:n}=await this.resilience.bulkAddItem(t,z.IGNORE);return n.length===t.length?{status:"successful"}:{status:"partial",acceptedItemIds:n.map((e=>e.id))}}));this.metricsCollector.addToReclaimMetrics(n),await this.checkEventCountAndReschedule(),e(Oe.SUCCESS),this.longPollingScheduler.schedule()}flush(e,t){this.metricsCollector.setResilienceMechanism(this.resilience.storeType());const{batchFlushCallback:n}=this;if(!n)throw new Error("batchFlushCallback has not been set. Call PullBatchableQueue#start first.");return new Promise(((r,o)=>{if(e.length<=0)return void r(Oe.NOOP);const s=e.map((e=>{const t=e.item;return e.retryAttempts>0&&t.msg&&(t.msg._metadata||(t.msg._metadata={}),t.msg._metadata.failedAttempts=e.retryAttempts),t}));n(s,(e=>{e?(t.numberOfDeletedItems>0&&this.metricsCollector.addToItemsDiscardedByRetryCounter(t.numberOfDeletedItems),o(e)):r(Oe.SUCCESS)}))}))}buildOptions(e){return{backoffFactor:(null==e?void 0:e.backoffFactor)||je,backoffJitterPercentage:void 0!==(null==e?void 0:e.backoffJitterPercentage)?e.backoffJitterPercentage:Me,batchFlushSize:(null==e?void 0:e.batchFlushSize)||Ue,flushBeforeUnload:(null==e?void 0:e.flushBeforeUnload)||Be,flushWaitMs:(null==e?void 0:e.flushWaitMs)||Ke,maxItems:(null==e?void 0:e.maxItems)||We,maxAttempts:(null==e?void 0:e.maxAttempts)||qe,maxRetryDelay:(null==e?void 0:e.maxRetryDelay)||Ge,minRetryDelay:(null==e?void 0:e.minRetryDelay)||Ve}}}let Qe=function(e){return e.IDENTIFY="identify",e.PAGE="page",e.TRACK="track",e}({});async function ze(e,t){try{const n=await t;return e.map((e=>function(e,t){if(!(t&&t instanceof Function))return e;if(e.msg.type===Qe.PAGE||e.msg.type===Qe.TRACK){const n=t();n&&Array.isArray(n)&&(e.msg.properties=(0,r.Z)((0,r.Z)({},e.msg.properties),{},{xid:n}))}else if(e.msg.traits&&e.msg.type===Qe.IDENTIFY){const n=t();n&&Array.isArray(n)&&(e.msg.traits=(0,r.Z)((0,r.Z)({},e.msg.traits),{},{xid:n}))}return e}(e,n)))}catch(n){return e}}var Ye=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function Je(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(r=e[n],o=t[n],!(r===o||Ye(r)&&Ye(o)))return!1;var r,o;return!0}function Xe(e,t){void 0===t&&(t=Je);var n=null;function r(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];if(n&&n.lastThis===this&&t(r,n.lastArgs))return n.lastResult;var s=e.apply(this,r);return n={lastResult:s,lastArgs:r,lastThis:this},s}return r.clear=function(){n=null},r}const et=e=>{if(e.abortController)return e.abortController;if(e.timeout){const t=new AbortController;return setTimeout((()=>{t.abort()}),e.timeout),t}},tt=Xe((e=>new URL(e).origin===location.origin?{}:{mode:"cors",credentials:"include"}));var nt=n(2);function rt(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function ot(e){rt(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===(0,nt.Z)(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function st(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function it(e){rt(1,arguments);var t=ot(e);return t.setHours(0,0,0,0),t}var at=864e5;function ct(e,t){var n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function ut(e,t){rt(2,arguments);var n=ot(e),r=ot(t),o=ct(n,r),s=Math.abs(function(e,t){rt(2,arguments);var n=it(e),r=it(t),o=n.getTime()-st(n),s=r.getTime()-st(r);return Math.round((o-s)/at)}(n,r));n.setDate(n.getDate()-o*s);var i=o*(s-Number(ct(n,r)===-o));return 0===i?0:i}var lt=n(5446),dt=n.n(lt);let pt=function(e){return e.AWC_TLD_TEST="AWC_TLD_TEST",e.AWC_ANALYTICS_DEBUG="AWC_ANALYTICS_DEBUG",e.AJS_ANONYMOUS_ID="AJS_ANONYMOUS_ID",e}({});class ht{constructor(e,t){(0,o.Z)(this,"key",void 0),(0,o.Z)(this,"options",void 0),this.key=e,this.options=t}getAttributes(){return this.options}getKey(){return this.key}}const mt={[pt.AWC_TLD_TEST]:new ht("__awc_tld_test__",{expires:365,secure:"https:"===window.location.protocol,path:"/"}),[pt.AWC_ANALYTICS_DEBUG]:new ht("atlassian_analytics_debug",{expires:365,secure:"https:"===window.location.protocol,path:"/"}),[pt.AJS_ANONYMOUS_ID]:new ht("ajs_anonymous_id",{expires:365,secure:"https:"===window.location.protocol,path:"/"})};const ft=new class{constructor(){(0,o.Z)(this,"_data",{}),(0,o.Z)(this,"length",0),(0,o.Z)(this,"setItem",((e,t)=>(this._data[e]=t,this.length=Object.keys(this._data).length,t))),(0,o.Z)(this,"getItem",(e=>e in this._data?this._data[e]:null)),(0,o.Z)(this,"removeItem",(e=>(e in this._data&&delete this._data[e],this.length=Object.keys(this._data).length,null))),(0,o.Z)(this,"clear",(()=>{this._data={},this.length=0})),(0,o.Z)(this,"key",(e=>Object.keys(this._data)[e]))}},yt="awcInMemoryStorageFallback";function gt(e){const t="test_value";if(!e)return!1;try{const n="awc.storage.support";e.setItem(n,t);const r=e.getItem(n);return e.removeItem(n),r===t}catch(n){return!1}}class _t{constructor(e,t={}){(0,o.Z)(this,"_prefix",void 0),(0,o.Z)(this,"_store",void 0),(0,o.Z)(this,"options",void 0),(0,o.Z)(this,"getStore",(()=>this._store)),(0,o.Z)(this,"getItem",(e=>this._store.getItem(this.createKey(e)))),(0,o.Z)(this,"removeItem",(e=>this._store.removeItem(this.createKey(e)))),(0,o.Z)(this,"setItem",((e,t)=>{try{this._store.setItem(this.createKey(e),t)}catch(n){(function(e){let t=!1;if(e.code)switch(e.code){case 22:t=!0;break;case 1014:"NS_ERROR_DOM_QUOTA_REACHED"===e.name&&(t=!0)}else-2147024882===e.number&&(t=!0);return t})(n)&&(this.swapToInMemory(),this._store.setItem(this.createKey(e),t))}})),(0,o.Z)(this,"swapToInMemory",(()=>{if(this._store===ft||"undefined"==typeof window)return;const e=Object.keys(this._store||{});let t;gt(window[yt])?t=window[yt]:(t=ft,window[yt]||(window[yt]=ft)),e.forEach((e=>{if(0===e.indexOf(this.getPrefix())){const n=this._store.getItem(e);n&&t.setItem(e,n)}})),this._store=t})),(0,o.Z)(this,"clear",(()=>this._store.clear())),(0,o.Z)(this,"key",(e=>this._store.key(e))),(0,o.Z)(this,"getPrefix",(()=>this._prefix)),(0,o.Z)(this,"createKey",(e=>this._prefix?`${this.getPrefix()}.${e}`:e)),this.options=t;const n=[];(void 0===t.useStoragePrefix||t.useStoragePrefix)&&n.push("awc"),t.envPrefix&&t.envPrefix!==a.gq.PROD&&n.push(t.envPrefix),this._prefix=n.join("-"),gt(e)?this._store=e:this.swapToInMemory()}}const vt=class extends _t{constructor(e){let t;try{t=window.localStorage||ft}catch(n){t=ft}super(t,e)}};class bt{constructor(){(0,o.Z)(this,"safeStorage",void 0),this.safeStorage=new vt({useStoragePrefix:!1})}set(e,t){return this.safeStorage.setItem(e,t),t}get(e){return this.safeStorage.getItem(e)||void 0}remove(e){this.safeStorage.removeItem(e)}}const It=mt.AWC_TLD_TEST.getKey(),Et="tld_test",wt=Xe((()=>{if("undefined"==typeof location)return"";const{hostname:e}=location,t=e.split(".");for(let n=1;n<=t.length;n++){const e=`.${t.slice(-1*n).join(".")}`;if(dt().set(It,Et,{domain:e}),dt().get(It)===Et)return dt().remove(It,{domain:e}),e}return e}));class St{constructor(e){(0,o.Z)(this,"cookieLike",void 0),this.cookieLike=((e=!1)=>!e&&!("file:"===location.protocol||"chrome-extension:"===location.protocol))(e)?dt():new bt}set(e,t,n){if(mt[e])return this.cookieLike.set(mt[e].getKey(),t,(0,r.Z)((0,r.Z)({},mt[e].getAttributes()),{},{domain:wt()},n));console.warn(`Unknown cookie key ${e} provided, not set.`)}get(e){if(mt[e])return this.cookieLike.get(mt[e].getKey());console.warn(`Unknown cookie key ${e} provided, not fetched.`)}remove(e,t){mt[e]?this.cookieLike.remove(mt[e].getKey(),(0,r.Z)({},t)):console.warn(`Unknown cookie key ${e} provided, not removed.`)}}const Tt="SAFE",kt="UNSAFE",At="NOT_FOUND",Ot="LOCAL_STORAGE";class Ct{constructor(e){(0,o.Z)(this,"store",void 0),(0,o.Z)(this,"cookie",void 0),(0,o.Z)(this,"userId",void 0),(0,o.Z)(this,"lastAnonymousIdCookieUpdate",void 0),this.store=new vt({useStoragePrefix:!1}),this.cookie=new St(e)}getUserId(){return this.userId||null}setUserId(e){this.userId=e}getAnonymousId(e){return this.getAnonymousIdFromLocalStorageAndUpdateCookieIfStale()||this.getAnonymousIdFromCookieAndUpdateLocalStorage()||this.generateNewAnonymousId(e)}setAnonymousId(e){const t=JSON.stringify(e);return this.cookie.set(pt.AJS_ANONYMOUS_ID,t),this.lastAnonymousIdCookieUpdate=Date.now(),this.store.setItem(mt.AJS_ANONYMOUS_ID.getKey(),t)}getAnonymousIdFromStorage(e){const t=e===Ot?this.store.getItem(mt.AJS_ANONYMOUS_ID.getKey()):this.cookie.get(pt.AJS_ANONYMOUS_ID);if(t){const e={type:kt,anonymousId:t};try{const n=JSON.parse(t);return n&&"string"==typeof n?{type:Tt,anonymousId:n}:e}catch(n){return e}}return{type:At}}getAnonymousIdFromLocalStorageAndUpdateCookieIfStale(){const e=this.getAnonymousIdFromStorage(Ot);let t=!1;switch((!this.lastAnonymousIdCookieUpdate||ut(new Date,new Date(this.lastAnonymousIdCookieUpdate))>=7)&&(t=!0),e.type){case Tt:return t&&this.setAnonymousId(e.anonymousId),e.anonymousId;case kt:return e.anonymousId;default:return null}}getAnonymousIdFromCookieAndUpdateLocalStorage(){const e=this.getAnonymousIdFromStorage("COOKIE");switch(e.type){case Tt:case kt:return this.store.setItem(mt.AJS_ANONYMOUS_ID.getKey(),JSON.stringify(e.anonymousId)),e.anonymousId;default:return null}}generateNewAnonymousId(e=i()){const t=e();return this.setAnonymousId(t),t}}var xt=n(1955),Pt=n.n(xt);const Rt=e=>{const t=Nt(e);return Pt()(t)},Nt=e=>{if(null===e||"object"!=typeof e)return e;const t={};return Object.keys(e).forEach((n=>{const r=Dt(e,n);void 0!==r&&(Array.isArray(r)?t[n]=r.map((e=>Nt(e))):t[n]="object"==typeof r&&null!==r?Nt(r):r)})),t},Dt=(e,t)=>e[t];class $t{constructor(e){var t;(0,o.Z)(this,"user",void 0),(0,o.Z)(this,"options",void 0),(0,o.Z)(this,"resilienceQueue",void 0),(0,o.Z)(this,"gasv3BatchUrl",void 0),(0,o.Z)(this,"metrics",void 0),(0,o.Z)(this,"xidPromiseCallback",void 0),(0,o.Z)(this,"sendEvents",(async(e,t)=>{const n=this.resilienceQueue.getGlobalRetryCount(),o=this.metrics.getMetricsPayload(),s=(0,r.Z)((0,r.Z)({},o),{},{httpRetryCount:n});for(let r in s)0===s[r]&&delete s[r];const i=await this.attachXIDs(e),a=(new Date).toISOString(),c={batch:i.map((e=>(e.msg.sentAt=a,e.msg))),sentAt:a,metadata:s};try{const e=await(async e=>{var t;const n=null===(t=et(e))||void 0===t?void 0:t.signal,o=tt(e.url),s=await fetch(e.url,(0,r.Z)({method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(e.batch),signal:n},o));if(429===s.status||s.status>=500&&s.status<600)throw new Error(`HTTP Error ${s.status} (${s.statusText})`);return s})({url:this.gasv3BatchUrl,batch:c,timeout:this.options.requestTimeout});this.metrics.subtractFromMetrics(o),t(null,e)}catch(u){t(u,null)}})),this.options=(0,r.Z)((0,r.Z)({},e),{},{requestTimeout:e.requestTimeout||1e4,retryQueueOptions:e.retryQueueOptions||{},logger:e.logger||console,disableCookiePersistence:e.disableCookiePersistence||!1}),this.user=new Ct(null===(t=this.options)||void 0===t?void 0:t.disableCookiePersistence),this.xidPromiseCallback=e.xidPromiseGetter(),this.gasv3BatchUrl=`${e.apiHostProtocol}://${e.apiHost}/batch`,this.metrics=we(),this.resilienceQueue=((e,t,n,r)=>new He(e,t,n||{},r))(e.retryQueuePrefix,e.product,this.options.retryQueueOptions,this.options.logger),this.resilienceQueue.start(this.sendEvents)}getUser(){return this.user}async track(e,t,n,o){const s=this.buildBaseEvent(n,Qe.TRACK,t),i=(0,r.Z)((0,r.Z)({},s),{},{type:Qe.TRACK,properties:Rt(t),event:e}),a=(0,r.Z)((0,r.Z)({},i),{},{messageId:this.createMessageId()}),c=this.packageEvent(a);await this.resilienceQueue.addItem(c),o&&o()}async page(e,t,n,o){const s=this.buildBaseEvent(n,Qe.PAGE,t),i=(0,r.Z)((0,r.Z)({},s),{},{type:Qe.PAGE,properties:Rt(t),name:e}),a=(0,r.Z)((0,r.Z)({},i),{},{messageId:this.createMessageId()}),c=this.packageEvent(a);await this.resilienceQueue.addItem(c),o&&o()}async identify(e,t,n,o){const s=this.buildBaseEvent(n,Qe.IDENTIFY,t),i=(0,r.Z)((0,r.Z)({},s),{},{type:Qe.IDENTIFY,traits:Rt(t)}),a=(0,r.Z)((0,r.Z)({},i),{},{messageId:this.createMessageId()}),c=this.packageEvent(a);await this.resilienceQueue.addItem(c),o&&o()}buildBaseEvent(e,t,n){const o=(e=>(0,r.Z)((0,r.Z)({},e.context),{},{userAgent:navigator.userAgent}))(Rt(e));return{context:o,timestamp:(new Date).toISOString(),type:t,userId:this.user.getUserId(),anonymousId:n.anonymousId||this.user.getAnonymousId()}}createMessageId(){return`ajs-${i()()}`}packageEvent(e){const{apiHost:t,apiHostProtocol:n}=this.options;return{headers:{"Content-Type":"text/plain"},msg:e,url:`${n}://${t}/${e.type.charAt(0)}`}}async attachXIDs(e){return this.xidPromiseCallback?ze(e,this.xidPromiseCallback):Promise.resolve(e)}}var Lt=n(1100);const Ft=e=>window.history.replaceState({},"",e),Zt=(e,t=Ft)=>{const n=window.location.href,r=window.location.hash,o=""!==r?n.replace(r,""):n,{url:s,query:i}=(0,Lt.parseUrl)(o),a=(0,C.D9)(i,e);if(Object.keys(a).length>0){const n=(0,C.GM)(i,e);if(Object.keys(n).length>0){t(`${s}?${(0,Lt.stringify)(n)}${r}`)}else t(`${s}${r}`)}return a};class jt{constructor(){(0,o.Z)(this,"_originStore",void 0),(0,o.Z)(this,"handleOriginParameters",((e,t)=>{const n=Object.keys(e);if(!(n.length>0))throw new Error("Empty parameter mapping provided");const r=n.filter((e=>Object.values(a.W5).indexOf(e)<0));if(r.length>0)throw new Error(`Invalid Origin Tracing Parameter(s) supplied: ${r.join()}!`);const o=Zt(((e,t)=>n.indexOf(t)>=0),t);return Object.keys(o).map((t=>({[t]:e[t](o[t])}))).reduce(((e,t)=>Object.assign(e,t)),{})})),this._originStore={}}}const Mt="session.id",Ut="session.expiry",Bt=/^\d+$/,Kt=()=>{};class qt{constructor(e={}){(0,o.Z)(this,"_safeLocalStorage",void 0),(0,o.Z)(this,"_sessionExpiryTime",void 0),(0,o.Z)(this,"_sessionExpiryDebounce",void 0),(0,o.Z)(this,"_sessionExpiryDebounceThresholdPercentage",void 0),(0,o.Z)(this,"_sessionExpiryDebounceTimer",void 0),(0,o.Z)(this,"_onNewSessionStarted",void 0),(0,o.Z)(this,"_generateNewSessionId",(()=>{const e=Date.now().toString();return this._safeLocalStorage.setItem(Mt,e),this._onNewSessionStarted&&this._onNewSessionStarted(),e})),(0,o.Z)(this,"_updateSessionExpiry",(()=>{const e=Date.now()+this._sessionExpiryTime;return this._safeLocalStorage.setItem(Ut,e.toString()),e})),(0,o.Z)(this,"_debouncedUpdateSessionExpiry",(e=>{const{_updateSessionExpiry:t}=this;if(e<Date.now()+this._sessionExpiryDebounceThresholdPercentage*this._sessionExpiryTime)return t();this._sessionExpiryDebounceTimer&&clearTimeout(this._sessionExpiryDebounceTimer),this._sessionExpiryDebounceTimer=setTimeout((()=>{t()}),this._sessionExpiryDebounce)})),this._sessionExpiryTime=e.sessionExpiryTime||18e5,this._sessionExpiryDebounce=e.sessionExpiryDebounce||5e3,this._sessionExpiryDebounceThresholdPercentage=e.sessionExpiryDebounceThresholdPercentage||.9,this._onNewSessionStarted=e.onNewSessionStarted?e.onNewSessionStarted:Kt,this._safeLocalStorage=new vt}getCurrentSessionId(){const e=this._safeLocalStorage.getItem(Mt),t=parseInt(this._safeLocalStorage.getItem(Ut)||"0",10)||0;return this._debouncedUpdateSessionExpiry(t),!e||t<=Date.now()||Number.isNaN(t)?this._generateNewSessionId():Bt.test(e)?e:this._generateNewSessionId()}}const Wt=class extends _t{constructor(e){let t;try{t=window.sessionStorage||ft}catch(n){t=ft}super(t,e)}},Gt="tab.id";class Vt{constructor(){(0,o.Z)(this,"_safeSessionStorage",void 0),(0,o.Z)(this,"_generateNewTabId",(()=>{const e=i()();return this._safeSessionStorage.setItem(Gt,e),e})),this._safeSessionStorage=new Wt}getCurrentTabId(){let e=this._safeSessionStorage.getItem(Gt);return e||(e=this._generateNewTabId()),e}}const Ht="taskSessions",Qt="taskSessionsInit",zt="awc.";class Yt{constructor(){(0,o.Z)(this,"_safeSessionStorage",void 0),(0,o.Z)(this,"_taskSessionsNotRecentlyInitialised",(e=>null===this._safeSessionStorage.getItem(Ht)||null===this._safeSessionStorage.getItem(Qt)||parseInt(this._safeSessionStorage.getItem(Qt)||"0",10)<e-3e3)),(0,o.Z)(this,"_removeTaskSessionPrefix",((e,t)=>t.split(zt)[1])),(0,o.Z)(this,"_isTaskSessionQueryParam",((e,t)=>t.startsWith(zt))),(0,o.Z)(this,"getAllTaskSessions",(()=>{try{return JSON.parse(this._safeSessionStorage.getItem(Ht)||"")}catch(e){return{}}})),(0,o.Z)(this,"_writeToSessionStorage",(e=>{try{this._safeSessionStorage.setItem(Ht,JSON.stringify(e))}catch(t){}})),(0,o.Z)(this,"_appendTaskSessions",(e=>{const t=this.getAllTaskSessions(),n=null===t?e:Object.assign(t,e);this._writeToSessionStorage(n)})),(0,o.Z)(this,"_safelyRemoveKey",((e,t)=>null===e?{}:(delete e[t],e))),(0,o.Z)(this,"createTaskSession",(e=>{const t=i()(),n={};return n[e]=t,this._appendTaskSessions(n),t})),(0,o.Z)(this,"createTaskSessionWithProvidedId",((e,t)=>{if("string"!=typeof t)throw new TypeError("invalid taskSessionId, must be string");const n={};n[e]=t,this._appendTaskSessions(n)})),(0,o.Z)(this,"completeTaskSession",(e=>{const t=this.getAllTaskSessions(),n=this._safelyRemoveKey(t,e);this._writeToSessionStorage(n)})),(0,o.Z)(this,"formatTaskSessionQueryString",(({uri:e,includedTaskSessions:t})=>{const{url:n,query:o}=(0,Lt.parseUrl)(e),s=this.getAllTaskSessions(),i=t?(0,C.ei)(s,t):(0,C.CE)(s,Object.values(a.W5));if(0===Object.keys(i).length)return e;const c=(0,r.Z)((0,r.Z)({},(0,C.Cw)(i,((e,t)=>zt+t))),o);return`${n}?${(0,Lt.stringify)(c)}`})),(0,o.Z)(this,"stripQueryParameters",(()=>{const e=(0,C.Cw)(Zt(this._isTaskSessionQueryParam),this._removeTaskSessionPrefix);this._appendTaskSessions(e)}));const e=Date.now();this._safeSessionStorage=new Wt;try{this._taskSessionsNotRecentlyInitialised(e)&&(this._writeToSessionStorage({}),this._safeSessionStorage.setItem(Qt,e.toString()))}catch(t){}}}const Jt=mt.AWC_ANALYTICS_DEBUG.getKey(),Xt="synthetic";const en=class{constructor(){(0,o.Z)(this,"_isDebugCookieEnabled",void 0),(0,o.Z)(this,"_bind",(()=>{"undefined"==typeof window||window.testAnalytics||(window.testAnalytics={eventCache:[],events:()=>window.testAnalytics.eventCache,clear:()=>{window.testAnalytics.eventCache=[];try{localStorage.removeItem("awc.ui.viewed.last.sent"),localStorage.removeItem("awc-staging.ui.viewed.last.sent"),localStorage.removeItem("awc-dev.ui.viewed.last.sent"),localStorage.removeItem("awc-local.ui.viewed.last.sent")}catch(e){}}})})),(0,o.Z)(this,"_cache",(e=>{"undefined"!=typeof window&&(window.testAnalytics.eventCache.length>=100&&(window.testAnalytics.eventCache=window.testAnalytics.eventCache.slice(1,window.testAnalytics.eventCache.length)),window.testAnalytics.eventCache.push(e))})),(0,o.Z)(this,"_shouldCacheEvent",(()=>this._isDebugCookieEnabled)),(0,o.Z)(this,"saveEvent",(e=>{e&&this._shouldCacheEvent()&&(window.testAnalytics||this._bind(),e.tags instanceof Array?e.tags.push(Xt):e.tags=[Xt],this._cache(e))})),this._isDebugCookieEnabled=(()=>{try{return JSON.parse(dt().get(Jt)||"false")}catch(e){dt().remove(Jt)}return!1})(),this._isDebugCookieEnabled&&this._bind()}},tn=["embeddedProduct"];class nn{constructor(e,t,n,s={}){if((0,o.Z)(this,"_blurListener",void 0),(0,o.Z)(this,"_delay",void 0),(0,o.Z)(this,"_focusListener",void 0),(0,o.Z)(this,"_getContext",void 0),(0,o.Z)(this,"_intervalId",void 0),(0,o.Z)(this,"_onEvent",void 0),(0,o.Z)(this,"_product",void 0),(0,o.Z)(this,"_productInfo",void 0),(0,o.Z)(this,"_safeLocalStorage",void 0),(0,o.Z)(this,"_storageKey",void 0),(0,o.Z)(this,"_throttle",void 0),(0,o.Z)(this,"start",(()=>{this._startInterval(),this._bindEventListeners()})),(0,o.Z)(this,"stop",(()=>{this._stopInterval(),this._unbindEventListeners()})),(0,o.Z)(this,"resetTimers",(()=>{this._intervalId&&(this.stop(),this.start())})),(0,o.Z)(this,"_bindEventListeners",(()=>{"undefined"!=typeof window&&(window.addEventListener("focus",this._focusListener),window.addEventListener("blur",this._blurListener))})),(0,o.Z)(this,"_unbindEventListeners",(()=>{"undefined"!=typeof window&&(window.removeEventListener("focus",this._focusListener),window.removeEventListener("blur",this._blurListener))})),(0,o.Z)(this,"_startInterval",(()=>{clearInterval(this._intervalId),this._intervalId=setInterval(this._handleInterval,this._delay)})),(0,o.Z)(this,"_stopInterval",(()=>{this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null)})),(0,o.Z)(this,"_getProductKey",((e,t)=>{let n=e;return t&&(n+=`-${t}`),n})),(0,o.Z)(this,"_getLastSentTimestamp",((e,t,n)=>(((this._parseLocalStorageData()||{})[n]||{})[t]||{})[e]||null)),(0,o.Z)(this,"_parseLocalStorageData",(()=>{const e=this._safeLocalStorage.getItem(this._storageKey);try{return JSON.parse(e||"")}catch(t){return this._safeLocalStorage.removeItem(this._storageKey),null}})),(0,o.Z)(this,"_setLastSentTimestamp",((e,t,n)=>{const r=this._parseLocalStorageData()||{},o=r[n]||{},s=o[t]||{};s[e]=Date.now(),o[t]=s,r[n]=o,this._safeLocalStorage.setItem(this._storageKey,JSON.stringify(r))})),(0,o.Z)(this,"_shouldSendEvent",((e,t,n,r)=>{if(!document.hasFocus())return!1;if(t!==a.ox.NONE&&!n||!r)return!1;return Date.now()-this._getLastSentTimestamp(e,n,r)>this._throttle})),(0,o.Z)(this,"_handleInterval",(()=>{const e=this._getContext(),{embeddedProduct:t}=e,n=(0,se.Z)(e,tn);this._sendEvent(this._product,n),t&&this._sendEvent(t,n,!0)})),(0,o.Z)(this,"_sendEvent",((e,t,n=!1)=>{const{subproduct:r,tenantIdType:o,tenantId:s,userId:i,lastScreenEvent:a,attributes:c}=t,u=this._getProductKey(e,r);if(this._shouldSendEvent(u,o,s,i)){this._setLastSentTimestamp(u,s,i);const t=this._createEvent(e,r,n,a,c);this._onEvent(t)}})),(0,o.Z)(this,"_createEvent",((e,t,n,o,s)=>{const i={product:e,source:"ui",action:"viewed",actionSubject:"ui",attributes:s};return n&&(i.subproduct=null,i.version=null,i.attributes=(0,r.Z)((0,r.Z)({},i.attributes),{},{embeddedInEnv:this._productInfo.env,embeddedInProduct:this._productInfo.product,embeddedInSubproduct:t,embeddedInVersion:this._productInfo.version,embeddedInOrigin:this._productInfo.origin,embeddedInPlatform:this._productInfo.platform})),o&&(i.attributes=(0,r.Z)((0,r.Z)({},i.attributes),{},{lastScreenEvent:{name:o.name,attributes:o.attributes}})),i})),!e)throw new Error("Missing productInfo");if(!e.product)throw new Error("Missing productInfo.product");if(!t)throw new Error("Missing getContext callback");if("function"!=typeof t)throw new Error("Invalid getContext, must be function");if(!n)throw new Error("Missing onEvent callback");if("function"!=typeof n)throw new Error("Invalid onEvent, must be function");this._productInfo=e,this._product=e.product,this._getContext=t,this._onEvent=n,this._delay=s.delay||2e3,this._throttle=s.throttle||36e5,this._storageKey=s.storageKey||"ui.viewed.last.sent",this._safeLocalStorage=new vt({envPrefix:this._productInfo.env}),this._focusListener=()=>{this._startInterval()},this._blurListener=()=>{this._stopInterval()}}}function rn(e,t){return e&&"function"==typeof e?()=>{e(t)}:null}let on=function(e){return e.XC="xc",e.UID="uid",e}({});const sn=(e,t)=>{if(e&&t&&"function"==typeof t){const e=()=>new Promise((e=>{setTimeout((()=>e((()=>[{type:on.XC,state:"TIMEOUT"},{type:on.UID,state:"TIMEOUT"}]))),5e3)})),n=()=>t().catch((()=>()=>[{type:on.XC,state:"UNKNOWN"},{type:on.UID,state:"UNKNOWN"}]));return Promise.race([n(),e()])}},an="/gateway/api/gasv3/api/v1",cn="last.screen.event";class un{constructor(e,t={}){if((0,o.Z)(this,"_apdexEvent",void 0),(0,o.Z)(this,"_context",void 0),(0,o.Z)(this,"eventDelayQueue",void 0),(0,o.Z)(this,"_historyReplaceFn",void 0),(0,o.Z)(this,"_orgInfo",void 0),(0,o.Z)(this,"_pageVisibility",void 0),(0,o.Z)(this,"_productInfo",void 0),(0,o.Z)(this,"_safeSessionStorage",void 0),(0,o.Z)(this,"_sessionTracking",void 0),(0,o.Z)(this,"_tabTracking",void 0),(0,o.Z)(this,"_tenantInfo",void 0),(0,o.Z)(this,"_testingCache",void 0),(0,o.Z)(this,"_uiViewedAttributes",void 0),(0,o.Z)(this,"_uiViewedEvent",void 0),(0,o.Z)(this,"_userInfo",void 0),(0,o.Z)(this,"originTracing",void 0),(0,o.Z)(this,"task",void 0),(0,o.Z)(this,"_pageLoadId",void 0),(0,o.Z)(this,"_workspaceInfo",void 0),(0,o.Z)(this,"_aliases",void 0),(0,o.Z)(this,"_groups",void 0),(0,o.Z)(this,"eventProcessor",void 0),(0,o.Z)(this,"logger",void 0),(0,o.Z)(this,"_useStargate",(e=>null==e||e)),(0,o.Z)(this,"_selectHost",(({useStargate:e,env:t,useLegacyUrl:n,perimeter:r})=>e?n?r===a.T_.FEDRAMP_MODERATE&&t===a.gq.STAGING?"api-private.atlassian-fex.com/gasv3/api/v1":t===a.gq.PROD?"api-private.atlassian.com/gasv3/api/v1":"api-private.stg.atlassian.com/gasv3/api/v1":window.location.host+an:r===a.T_.FEDRAMP_MODERATE&&t===a.gq.STAGING?"as.atlassian-fex.com/api/v1":t===a.gq.PROD?"as.atlassian.com/api/v1":"as.staging.atl-paas.net/api/v1")),(0,o.Z)(this,"_endsWith",((e,t)=>-1!==e.indexOf(t,e.length-t.length))),(0,o.Z)(this,"_changeInternalUserId",((e,t)=>{this.eventProcessor.getUser().setUserId(e),t&&t!==this.eventProcessor.getUser().getAnonymousId()&&this.eventProcessor.getUser().setAnonymousId(t)})),(0,o.Z)(this,"_createSubproductGetter",(e=>d(e,"Cannot get subproduct from the callback. Proceeding without it."))),(0,o.Z)(this,"_createEmbeddedProductGetter",(e=>d(e,"Cannot get embeddedProduct from the callback. Proceeding without it."))),(0,o.Z)(this,"_getLastScreenEvent",(()=>{try{return JSON.parse(this._safeSessionStorage.getItem(cn)||"")}catch(e){return this._safeSessionStorage.removeItem(cn),null}})),(0,o.Z)(this,"_setLastScreenEvent",(e=>{this._safeSessionStorage.setItem(cn,JSON.stringify({name:e.name,attributes:e.attributes}))})),(0,o.Z)(this,"_shouldEventBeDelayed",(e=>{if(!e.tags||-1===e.tags.indexOf("measurement"))return!1;const t=!1!==e.highPriority;return this.eventDelayQueue.isDelayingLowPriorityEvents()&&!t})),(0,o.Z)(this,"_fireEvent",((e,t,n,r)=>{switch(t.eventType){case a.a7.UI:case a.a7.OPERATIONAL:case a.a7.TRACK:return this.eventProcessor.track(e,t,n,r);case a.a7.SCREEN:return this.eventProcessor.page(e,t,n,r);case a.a7.IDENTIFY:return this.eventProcessor.identify(e,t,n,r);default:throw new Error(`No handler has been defined for events of type ${t.eventType}`)}})),(0,o.Z)(this,"_fireDelayedEvent",((e,t,n,r)=>{try{this._changeInternalUserId(r.userId,r.anonymousId),t.tags=[...t.tags||[],"sentWithDelay"],this._fireEvent(e,t,n,void 0)}finally{this._changeInternalUserId(this._userInfo.userId,this._userInfo.anonymousId)}})),(0,o.Z)(this,"_delayEvent",((e,t,n,r,o)=>{this.eventDelayQueue.push(e,t,n,r),o&&o()})),(0,o.Z)(this,"_processEvent",((e,t,n,r)=>(this._testingCache.saveEvent(t),this._shouldEventBeDelayed(t)?(this._delayEvent(e,t,n,this._userInfo,r),Promise.resolve()):this._fireEvent(e,t,n,r)))),(0,o.Z)(this,"setEmbeddedProduct",(e=>{this._productInfo.embeddedProduct=this._createEmbeddedProductGetter(e),this.resetUIViewedTimers()})),(0,o.Z)(this,"clearEmbeddedProduct",(()=>{this._productInfo.embeddedProduct=this._createEmbeddedProductGetter(null)})),(0,o.Z)(this,"setSubproduct",(e=>{this._productInfo.subproduct=this._createSubproductGetter(e),this.resetUIViewedTimers()})),(0,o.Z)(this,"setOriginTracingHandlers",(e=>{const t=this.originTracing.handleOriginParameters(e,this._historyReplaceFn);Object.keys(t).forEach((e=>{void 0!==t[e].taskSessionId&&this.task.createTaskSessionWithProvidedId(e,t[e].taskSessionId)}));const n={};return Object.keys(t).forEach((e=>{t[e].originTracingAttributes?n[e]=t[e].originTracingAttributes:console.warn(`Handling method for origin parameter ${e} has not returned any attributes`)})),Object.keys(t).length>0?this.sendOperationalEvent({action:"landed",actionSubject:"origin",source:"webClient",attributes:{originTracesLanded:n}},(()=>{})):Promise.resolve()})),(0,o.Z)(this,"setTenantInfo",((e,t)=>{if(!e)throw new Error("Missing tenantIdType");if(e!==a.ox.NONE&&!t)throw new Error("Missing tenantId");if(!(0,a.P9)(a.ox,e))throw new Error(`Invalid tenantIdType '${e}', must be an tenantType: [${(0,a.TT)(a.ox)}]`);this._tenantInfo={tenantIdType:e,tenantId:t}})),(0,o.Z)(this,"clearTenantInfo",(()=>{this._tenantInfo={}})),(0,o.Z)(this,"setOrgInfo",(e=>{if(!e)throw new Error("Missing orgId");this._orgInfo={orgId:e}})),(0,o.Z)(this,"clearOrgInfo",(()=>{this._orgInfo={}})),(0,o.Z)(this,"setWorkspaceInfo",(e=>{if(!e)throw new Error("Missing workspaceId");this._workspaceInfo={workspaceId:e}})),(0,o.Z)(this,"clearWorkspaceInfo",(()=>{this._workspaceInfo={}})),(0,o.Z)(this,"setUserInfo",((e,t)=>{(0,$.wT)(e,t),this._changeInternalUserId(t),this._userInfo={userIdType:e,userId:t,anonymousId:this.eventProcessor.getUser().getAnonymousId()}})),(0,o.Z)(this,"clearUserInfo",(()=>{this._changeInternalUserId(void 0),this._userInfo={anonymousId:this.eventProcessor.getUser().getAnonymousId()}})),(0,o.Z)(this,"setAlias",((e,t)=>{if(!e)throw new Error("Missing aliasType");if(!(0,a.P9)(a.kB,e))throw new Error(`Invalid aliasType '${e}', must be an aliasType: [${(0,a.TT)(a.kB)}]`);this._aliases[e]=t})),(0,o.Z)(this,"clearAlias",(()=>{this._aliases={}})),(0,o.Z)(this,"setGroup",((e,t)=>{if(!e)throw new Error("Missing groupType");if(!(0,a.P9)(a.kW,e))throw new Error(`Invalid groupType '${e}', must be an groupType: [${(0,a.TT)(a.kW)}]`);this._groups[e]=t})),(0,o.Z)(this,"clearGroup",(()=>{this._groups={}})),(0,o.Z)(this,"getAnonymousId",(()=>this._userInfo.anonymousId)),(0,o.Z)(this,"setUIViewedAttributes",(e=>{if(!e)throw new Error("Missing uiViewedAttributes");if("object"!=typeof e||Array.isArray(e))throw new Error("Invalid uiViewedAttributes type, should be a non array object");this._uiViewedAttributes=(0,r.Z)({},e)})),(0,o.Z)(this,"getUIViewedAttributes",(()=>this._uiViewedAttributes)),(0,o.Z)(this,"clearUIViewedAttributes",(()=>{this._uiViewedAttributes={}})),(0,o.Z)(this,"sendIdentifyEvent",((e,t,n)=>{this.setUserInfo(e,t);const r={userIdType:e,eventType:a.a7.IDENTIFY};return this._processEvent(t,r,this._context,n)})),(0,o.Z)(this,"sendPageEvent",((e,t)=>this.sendScreenEvent(e,t))),(0,o.Z)(this,"sendScreenEvent",((e,t,n)=>{let o,s,i,a;"object"==typeof e?(o=e.name,s=e.attributes,i=e.containers,a=e.tags):(o=e,s=n),(0,$.iO)(o),(0,$.OW)(i);const c=k(this._productInfo,this._tenantInfo,this._userInfo,s,e.nonPrivacySafeAttributes,a,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,e,i,this._aliases,this._groups),u=(0,r.Z)({name:o},c);return this._setLastScreenEvent(u),this._processEvent(o,u,this._context,rn(t,u))})),(0,o.Z)(this,"sendTrackEvent",((e,t)=>{(0,$.TE)(e);const n=O(this._productInfo,this._tenantInfo,this._userInfo,e,a.a7.TRACK,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,this._aliases,this._groups);return this._processEvent(A(e),n,this._context,rn(t,n))})),(0,o.Z)(this,"sendUIEvent",((e,t)=>{(0,$.M0)(e);const n=O(this._productInfo,this._tenantInfo,this._userInfo,e,a.a7.UI,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,this._aliases,this._groups);return this._processEvent(A(e),n,this._context,rn(t,n))})),(0,o.Z)(this,"sendOperationalEvent",((e,t)=>{(0,$.AE)(e);const n=O(this._productInfo,this._tenantInfo,this._userInfo,e,a.a7.OPERATIONAL,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,this._aliases,this._groups);return this._processEvent(A(e),n,this._context,rn(t,n))})),(0,o.Z)(this,"startUIViewedEvent",(e=>{this.stopUIViewedEvent(),this._uiViewedEvent=new nn(this._productInfo,(()=>({embeddedProduct:this._productInfo.embeddedProduct(),subproduct:this._productInfo.subproduct(),tenantIdType:this._tenantInfo.tenantIdType,tenantId:this._tenantInfo.tenantId,userId:this._userInfo.userId,lastScreenEvent:this._getLastScreenEvent(),attributes:this._uiViewedAttributes})),(t=>this.sendUIEvent(t,e))),this._uiViewedEvent.start()})),(0,o.Z)(this,"stopUIViewedEvent",(()=>{this._uiViewedEvent&&(this._uiViewedEvent.stop(),this._uiViewedEvent=null)})),(0,o.Z)(this,"resetUIViewedTimers",(()=>{this._uiViewedEvent&&this._uiViewedEvent.resetTimers()})),(0,o.Z)(this,"startApdexEvent",(e=>{this._apdexEvent.start(e)})),(0,o.Z)(this,"getApdexStart",(e=>this._apdexEvent.getStart(e))),(0,o.Z)(this,"stopApdexEvent",((e,t)=>{this._apdexEvent.stop(e,t)})),(0,o.Z)(this,"startLowPriorityEventDelay",((e,t)=>{this.eventDelayQueue.startLowPriorityEventDelay(e,t)})),(0,o.Z)(this,"stopLowPriorityEventDelay",(()=>{this.eventDelayQueue.stopLowPriorityEventDelay()})),(0,o.Z)(this,"onEvent",((e,t)=>{if(!t)throw new Error("Missing analyticsData");if(!t.eventType)throw new Error("Missing analyticsData.eventType");if(t.eventType===a.a7.TRACK)return this.sendTrackEvent(t);if(t.eventType===a.a7.UI)return this.sendUIEvent(t);if(t.eventType===a.a7.OPERATIONAL)return this.sendOperationalEvent(t);if(t.eventType===a.a7.SCREEN)return this.sendScreenEvent(t.name,null,t.attributes);if(t.eventType===a.a7.IDENTIFY)return this.sendIdentifyEvent(t.userIdType,t.userId);throw new Error(`Invalid analyticsData.eventType '${t.eventType}', must be an eventType: [${(0,a.TT)(a.a7)}]`)})),!e)throw new Error("Missing productInfo");if(!e.env)throw new Error("Missing productInfo.env");if(!e.product)throw new Error("Missing productInfo.product");if(!(0,a.P9)(a.gq,e.env))throw new Error(`Invalid productInfo.env '${e.env}', must be an envType: [${(0,a.TT)(a.gq)}]`);if(e.perimeter&&!(0,a.P9)(a.T_,e.perimeter))throw new Error(`Invalid productInfo.perimeter '${e.perimeter}', must be an perimeterType: [${(0,a.TT)(a.T_)}]`);if(e.origin){if(!(0,a.P9)(a.mO,e.origin))throw new Error(`Invalid productInfo.origin '${e.origin}', must be an originType: [${(0,a.TT)(a.mO)}]`)}else e.origin=a.mO.WEB;e.platform?(0,$.Ct)(e):e.platform=e.origin===a.mO.WEB?a.qZ.WEB:a.qZ.DESKTOP,this.logger=t.logger||console,this._productInfo=(0,r.Z)((0,r.Z)({},e),{},{subproduct:this._createSubproductGetter(e.subproduct),embeddedProduct:this._createEmbeddedProductGetter(e.embeddedProduct)}),this._tenantInfo={},this._orgInfo={},this._uiViewedAttributes={},this._context=function(e){const t=window.screen||{};return{context:{locale:e.locale,screen:{width:t.width,height:t.height,density:window.devicePixelRatio},library:{name:"analytics.js",version:"0.0.0-use.local"}}}}(this._productInfo),this._safeSessionStorage=new Wt;const n=this._useStargate(t.useStargate),s=t.apiHost||this._selectHost({useStargate:n,env:e.env,useLegacyUrl:t.useLegacyUrl,perimeter:e.perimeter}),u=t.apiHostProtocol||"https",p={maxRetryDelay:6e4,minRetryDelay:t.minRetryDelay||1e3,backoffFactor:2,flushWaitMs:t.flushWaitInterval,flushBeforeUnload:t.flushBeforeUnload},h=`awc-${e.env}`,m=t.disableCookiePersistence||!1;this.eventProcessor=new $t({apiHost:s,apiHostProtocol:u,product:e.product,retryQueuePrefix:h,retryQueueOptions:p,xidPromiseGetter:()=>sn(t.xidConsent,t.xidPromiseFn),logger:this.logger,disableCookiePersistence:m}),this._userInfo={anonymousId:this.eventProcessor.getUser().getAnonymousId(null==t?void 0:t.customAnonymousIdGenerator)},this._pageVisibility=new c,this._tabTracking=new Vt,this._sessionTracking=new qt({sessionExpiryTime:t.sessionExpiryTime,onNewSessionStarted:t.onNewSessionStarted}),this.task=new Yt,this.originTracing=new jt,this._apdexEvent=new l(this.sendOperationalEvent,this._pageVisibility),this._historyReplaceFn="function"==typeof t.historyReplaceFn?t.historyReplaceFn:Ft,this.eventDelayQueue=new D(this._fireDelayedEvent,t.delayQueueCompressors||[]),this._testingCache=new en,this._pageLoadId=i()(),this._workspaceInfo={},this._aliases={},this._groups={}}}},3089:(e,t,n)=>{"use strict";n.d(t,{AW:()=>c,Nw:()=>l,P9:()=>m,TT:()=>h,T_:()=>f,W5:()=>p,a7:()=>o,gq:()=>r,jM:()=>u,kB:()=>y,kW:()=>g,mO:()=>i,ox:()=>a,qZ:()=>s,uB:()=>d});let r=function(e){return e.LOCAL="local",e.DEV="dev",e.STAGING="staging",e.PROD="prod",e}({}),o=function(e){return e.TRACK="track",e.UI="ui",e.OPERATIONAL="operational",e.SCREEN="screen",e.IDENTIFY="identify",e}({}),s=function(e){return e.MAC="mac",e.LINUX="linux",e.WINDOWS="windows",e.DESKTOP="desktop",e.WEB="web",e.MOBILE_WEB="mobileWeb",e}({}),i=function(e){return e.DESKTOP="desktop",e.WEB="web",e}({}),a=function(e){return e.CLOUD_ID="cloudId",e.ORG_ID="orgId",e.OPSGENIE_CUSTOMER_ID="opsgenieCustomerId",e.HALP_TEAM_ID="halpTeamId",e.TRANSACTION_ACCOUNT_ID="transactionAccountId",e.TRELLO_WORKSPACE_ID="trelloWorkspaceId",e.NONE="none",e}({}),c=function(e){return e.ATLASSIAN_ACCOUNT="atlassianAccount",e.HASHED_EMAIL="hashedEmail",e.TRELLO="trello",e.OPSGENIE="opsgenie",e.HALP="halp",e}({}),u=function(e){return e.TRANSITION="transition",e.INITIAL_LOAD="initialLoad",e}({});const l=Object.freeze([s.DESKTOP,s.MAC,s.LINUX,s.WINDOWS]),d=Object.freeze([s.WEB,s.MOBILE_WEB]);let p=function(e){return e.ATL_ORIGIN="atlOrigin",e}({});function h(e){return Object.values(e)}function m(e,t){return Object.values(e).indexOf(t)>-1}let f=function(e){return e.C5="c5",e.COMMERCIAL="commercial",e.FEDRAMP_MODERATE="fedramp-moderate",e.FEDRAMP_HIGH="fedramp-high",e}({}),y=function(e){return{}}(),g=function(e){return e.TRANSACTION_ACCOUNT_ID="transactionAccountId",e}({})},3354:(e,t,n)=>{"use strict";n.d(t,{B:()=>i});var r=n(7304),o=n(6598),s=n(188);class i{constructor(e,t){if((0,r.Z)(this,"compressFn",void 0),(0,r.Z)(this,"predicate",void 0),(0,r.Z)(this,"canCompress",(e=>{try{return e&&(0,o.v7)(e.eventType)&&this.predicate(e)}catch(t){return!1}})),(0,r.Z)(this,"compress",(e=>{const[t,n]=(0,s.uK)(e,(e=>this.canCompress(e))),r=this.compressFn(t);if(!r)throw new Error("No events were returned from the compression function");return r.forEach((e=>{(0,o.WS)(e.eventType),(0,o.wC)(e)})),r.concat(n)})),"function"!=typeof e)throw new Error("Invalid predicate, must be a function that accepts an event and returns a boolean");if("function"!=typeof t)throw new Error("Invalid compressFn, must be a function that both accepts and returns an array of events");this.predicate=e,this.compressFn=t}}},7744:(e,t,n)=>{"use strict";n.d(t,{e:()=>r});let r=function(e){return e.TIMEOUT="timeout",e.MANUAL="manual",e}({})},6598:(e,t,n)=>{"use strict";n.d(t,{AE:()=>m,Ct:()=>y,M0:()=>h,OW:()=>i,TE:()=>d,WS:()=>c,iO:()=>l,v7:()=>a,wC:()=>u,wT:()=>f,xL:()=>p});var r=n(3089),o=n(7572);const s=Object.freeze([r.a7.OPERATIONAL,r.a7.TRACK,r.a7.UI]);function i(e){if(e){if(e&&e.constructor!==Object)throw new Error("properties.containers must be an Object");Object.values(e).forEach((e=>function(e){if(!(0,o.P)(e))throw new Error("properties.containers must be an Object");if(!("id"in e))throw new Error("properties.containers is missing field 'id'");if("string"!=typeof e.id)throw new Error("properties.containers.id must be of type String");if("type"in e&&"string"!=typeof e.type)throw new Error("properties.containers.type must be of type String")}(e)))}}function a(e){switch(e){case r.a7.OPERATIONAL:case r.a7.TRACK:case r.a7.UI:return!0;default:return!1}}function c(e){if(!a(e))throw new Error(`Invalid action event type: ${e}, must be one of: [${s}]`);return!0}function u(e){if(!e)throw new Error("Missing event");if(!e.source)throw new Error("Missing event.source");if(!e.actionSubject)throw new Error("Missing event.actionSubject");if(!e.action)throw new Error("Missing event.action");i(e.containers)}function l(e){if(!e)throw new Error("Missing name")}function d(e){u(e)}function p(e){if(!e)throw new Error("Missing event");if(!e.source)throw new Error("Missing event.source");if(!e.actionSubject)throw new Error("Missing event.actionSubject")}function h(e){u(e)}function m(e){u(e)}function f(e,t){if(!e)throw new Error("Missing userIdType");if(!t)throw new Error("Missing userId");if(!(0,r.P9)(r.AW,e))throw new Error(`Invalid userIdType '${e}', must be an userType: [${(0,r.TT)(r.AW)}]`)}function y(e){if(!(0,r.P9)(r.qZ,e.platform))throw new Error(`Invalid productInfo.platform '${e.platform}', must be a platformType: [${(0,r.TT)(r.qZ)}]`);if(e.origin===r.mO.DESKTOP&&!(0,r.P9)(r.Nw,e.platform))throw new Error(`Invalid productInfo.platform '${e.platform}', must be one of [mac, linux, windows]`);if(e.origin===r.mO.WEB&&!(0,r.P9)(r.uB,e.platform))throw new Error(`Invalid productInfo.platform '${e.platform}', must be one of [web, mobileWeb]`)}},188:(e,t,n)=>{"use strict";n.d(t,{CE:()=>a,Cw:()=>r,D9:()=>i,GM:()=>s,ei:()=>o,fS:()=>c,uK:()=>u});const r=(e,t)=>Object.keys(e).reduce(((n,r)=>(n[t(e[r],r,e)]=e[r],n)),{}),o=(e,t)=>t.reduce(((t,n)=>(n in e&&(t[n]=e[n]),t)),{}),s=(e,t)=>Object.keys(e).filter((n=>!t(e[n],n))).reduce(((t,n)=>(t[n]=e[n],t)),{}),i=(e,t)=>Object.keys(e).filter((n=>t(e[n],n))).reduce(((t,n)=>(t[n]=e[n],t)),{}),a=(e,t)=>Object.keys(e).filter((e=>t.indexOf(e)<0)).reduce(((t,n)=>(t[n]=e[n],t)),{}),c=(e,t)=>{if(e===t)return!0;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(!e||!t||"object"!=typeof e&&"object"!=typeof t)return e===t;if(e.prototype!==t.prototype)return!1;const n=Object.keys(e);return n.length===Object.keys(t).length&&n.every((n=>c(e[n],t[n])))},u=(e,t)=>e.reduce(((e,n,r,o)=>(e[t(n,r,o)?0:1].push(n),e)),[[],[]])},5596:(e,t,n)=>{"use strict";n.d(t,{b:()=>r,y:()=>o});let r=function(e){return e.INDEXEDDB="indexeddb",e.MEMORY="memory",e}({}),o=function(e){return e[e.ONLINE=0]="ONLINE",e[e.OFFLINE=1]="OFFLINE",e}({})},7572:(e,t,n)=>{"use strict";function r(e){return!0==(null!==(t=e)&&"object"==typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);var t}function o(e){if(!1===r(e))return!1;const t=e.constructor;if("function"!=typeof t)return!1;const n=t.prototype;return!1!==r(n)&&"isPrototypeOf"in n}n.d(t,{P:()=>o})},7690:(e,t,n)=>{"use strict";n.d(t,{Fs:()=>r,cF:()=>i,mw:()=>o,qN:()=>s});const r="data-theme",o="data-color-mode",s="data-contrast-mode",i="data-custom-theme"},9551:(e,t,n)=>{"use strict";n.d(t,{KR:()=>s,ZI:()=>o,ZP:()=>i,hB:()=>r});const r=["light-increased-contrast","light","light-future","dark","dark-future","dark-increased-contrast","legacy-light","legacy-dark","spacing","shape","typography-adg3","typography-minor3"],o=[...r,"light-new-input-border","dark-new-input-border"],s={colorMode:"auto",contrastMode:"auto",dark:"dark",light:"light",shape:void 0,spacing:"spacing",typography:void 0,UNSAFE_themeOptions:void 0},i={"atlassian-light":{id:"light",displayName:"Light Theme",palette:"defaultPalette",attributes:{type:"color",mode:"light"}},"atlassian-light-future":{id:"light-future",displayName:"Future Light Theme",palette:"defaultPalette",attributes:{type:"color",mode:"light"},override:"light"},"atlassian-light-increased-contrast":{id:"light-increased-contrast",displayName:"Light Theme (increased contrast)",palette:"defaultPalette",attributes:{type:"color",mode:"light"},extends:"light",increasesContrastFor:"light"},"atlassian-dark":{id:"dark",displayName:"Dark Theme",palette:"defaultPalette",attributes:{type:"color",mode:"dark"}},"atlassian-dark-future":{id:"dark-future",displayName:"Future Dark Theme",palette:"defaultPalette",attributes:{type:"color",mode:"dark"},override:"light"},"atlassian-dark-increased-contrast":{id:"dark-increased-contrast",displayName:"Dark Theme (increased contrast)",palette:"defaultPalette",attributes:{type:"color",mode:"dark"},extends:"dark",increasesContrastFor:"dark"},"atlassian-legacy-light":{id:"legacy-light",displayName:"Light Theme (legacy)",palette:"legacyPalette",attributes:{type:"color",mode:"light"}},"atlassian-legacy-dark":{id:"legacy-dark",displayName:"Dark Theme (legacy)",palette:"legacyPalette",attributes:{type:"color",mode:"dark"}},"atlassian-spacing":{id:"spacing",displayName:"Atlassian Spacing",palette:"spacingScale",attributes:{type:"spacing"}},"atlassian-typography-adg3":{id:"typography-adg3",displayName:"ADG3 Typography",palette:"typographyPalette",attributes:{type:"typography"}},"atlassian-shape":{id:"shape",displayName:"Atlassian Shape",palette:"shapePalette",attributes:{type:"shape"}},"atlassian-light-new-input-border":{id:"light-new-input-border",displayName:"Light Theme New Input Border",palette:"defaultPalette",override:"light",attributes:{type:"color",mode:"light"}},"atlassian-dark-new-input-border":{id:"dark-new-input-border",displayName:"Dark Theme New Input Border",palette:"defaultPalette",override:"dark",attributes:{type:"color",mode:"dark"}},"atlassian-typography-minor3":{id:"typography-minor3",displayName:"Atlassian Typography (Minor Third)",palette:"typographyPalette",attributes:{type:"typography"}}}},9668:(e,t,n)=>{"use strict";n.d(t,{Rc:()=>d,YM:()=>u,aP:()=>r,aw:()=>l,mR:()=>a,mi:()=>p,oo:()=>c,vq:()=>s,wC:()=>h});const r=e=>/^#[0-9A-F]{6}$/i.test(e),o=e=>/^#([A-Fa-f0-9]{3,4}){1,2}$/.test(e);function s(e,t,n){return"#"+((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)}function i(e){if(9===e.length){const t=parseInt(e.slice(7,9),16)/255;return Number(parseFloat(t.toString()).toFixed(2))}return 1}function a(e){if(!o(e))throw new Error("Invalid HEX");let t;return t=e.substring(1).split(""),3===t.length&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]]),t="0x"+t.join(""),[t>>16&255,t>>8&255,255&t,i(e)]}function c(e){if(!o(e))throw new Error("Invalid HEX");let t;return t=e.substring(1).split(""),3===t.length&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]]),t="0x"+t.join(""),[t>>16&255,t>>8&255,255&t]}function u(e){if(!o(e))throw new Error("Invalid HEX");let t=0,n=0,r=0;4===e.length?(t="0x"+e[1]+e[1],n="0x"+e[2]+e[2],r="0x"+e[3]+e[3]):7===e.length&&(t="0x"+e[1]+e[2],n="0x"+e[3]+e[4],r="0x"+e[5]+e[6]),t/=255,n/=255,r/=255;let s=Math.min(t,n,r),i=Math.max(t,n,r),a=i-s,c=0,u=0,l=0;return c=0===a?0:i===t?(n-r)/a%6:i===n?(r-t)/a+2:(t-n)/a+4,c=Math.round(60*c),c<0&&(c+=360),l=(i+s)/2,u=0===a?0:a/(1-Math.abs(2*l-1)),u=+(100*u).toFixed(1),l=+(100*l).toFixed(1),[c,u,l]}function l(e,t,n){n/=100;const r=t=>(t+e/30)%12,o=(t/=100)*Math.min(n,1-n),s=e=>n-o*Math.max(-1,Math.min(r(e)-3,Math.min(9-r(e),1)));return[255*s(0),255*s(8),255*s(4)]}function d(e,t,n){const r=e/255,o=t/255,s=n/255;return.2126*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.7152*(o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4))+.0722*(s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4))}function p(e,t){if(!o(e)||!o(t))throw new Error("Invalid HEX");const n=c(e),r=c(t),s=d(n[0],n[1],n[2]),i=d(r[0],r[1],r[2]);return(Math.max(s,i)+.05)/(Math.min(s,i)+.05)}function h(e,t){let n=m(e),r=m(t),o=n[0]-r[0],s=n[1]-r[1],i=n[2]-r[2],a=Math.sqrt(n[1]*n[1]+n[2]*n[2]),c=a-Math.sqrt(r[1]*r[1]+r[2]*r[2]),u=s*s+i*i-c*c;u=u<0?0:Math.sqrt(u);let l=o/1,d=c/(1+.045*a),p=u/(1+.015*a),h=l*l+d*d+p*p;return h<0?0:Math.sqrt(h)}function m(e){let t,n,r,o=e[0]/255,s=e[1]/255,i=e[2]/255;return o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92,s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,t=(.4124*o+.3576*s+.1805*i)/.95047,n=(.2126*o+.7152*s+.0722*i)/1,r=(.0193*o+.1192*s+.9505*i)/1.08883,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,[116*n-16,500*(t-n),200*(n-r)]}},1014:(e,t,n)=>{"use strict";n.d(t,{v:()=>r});const r=e=>{let t=0;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return new Uint32Array([t])[0].toString(36)}},7304:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(2);function o(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==(0,r.Z)(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,r.Z)(t)?t:String(t)}function s(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},5919:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(7304);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},2342:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(4549);function o(e,t){if(null==e)return{};var n,o,s=(0,r.Z)(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}},4549:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n,r,o={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}n.d(t,{Z:()=>r})},6187:(e,t,n)=>{"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:()=>r})},2:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:()=>r})}},s={};function i(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={id:e,loaded:!1,exports:{}};return o[e].call(n.exports,n,n.exports,i),n.loaded=!0,n.exports}i.m=o,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var o=Object.create(null);i.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&n;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>n[e]));return s.default=()=>n,i.d(o,s),o},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,n)=>(i.f[n](e,t),t)),[])),i.u=e=>({2:"loadable-confluencehomeentry-pointspreloadHome",25:"@atlaskit-internal_atlassian-legacy-light",85:"@atlaskit-internal_atlassian-light-new-input-border",129:"loadable-sentrybrowser",210:"@atlaskit-internal_atlassian-shape",214:"@atlaskit-internal_atlassian-legacy-dark",261:"@atlaskit-internal_atlassian-typography-adg3",311:"loadable-atlassiansoxanalytics-web-client",334:"@atlaskit-internal_atlassian-light",338:"@atlaskit-internal_atlassian-light-future",375:"loadable-url-search-params-polyfill",389:"@atlaskit-internal_atlassian-custom-theme",436:"@atlaskit-internal_atlassian-spacing",555:"@atlaskit-internal_atlassian-dark-increased-contrast",621:"loadable-atlassianexposure-events-compressor",631:"@atlaskit-internal_atlassian-light-increased-contrast",663:"loadable-confluenceembedded-confluenceentry-pointshttpInterceptor",682:"@atlaskit-internal_atlassian-typography-minor3",866:"loadable-confluencefiltered-awc",903:"@atlaskit-internal_atlassian-dark",942:"@atlaskit-internal_atlassian-dark-new-input-border",983:"@atlaskit-internal_atlassian-dark-future"}[e]+"."+{2:"v5Ydji-EAA",25:"04xnrtT-uW",85:"1l67yyI28f",129:"2QxOIvs080",210:"2N5zeG5gLX",214:"FWNl9gxQuc",261:"PU015lhdIK",311:"u1gETuwO6j",334:"m5ms0v5O6K",338:"_DYQ-bgYeJ",375:"S4kidsyfg7",389:"rXdHnFSfNg",436:"swwZyY2Qg8",555:"DbKETRE6zu",621:"JEoDWTyaTT",631:"gu_k5nF2xX",663:"zm6vaa37H4",682:"qAuay-ZNug",866:"VwCjUSmVkw",903:"UZ03S0RiBm",942:"Kp7SE1JZSR",983:"5DiWtstBZ0"}[e]+".js"),i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},r="@confluence-classic/confluence-frontend-server:",i.l=(e,t,o,s)=>{if(n[e])n[e].push(t);else{var a,c;if(void 0!==o)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var d=u[l];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==r+o){a=d;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,i.nc&&a.setAttribute("nonce",i.nc),a.setAttribute("data-webpack",r+o),a.src=e),n[e]=[t];var p=(t,r)=>{a.onerror=a.onload=null,clearTimeout(h);var o=n[e];if(delete n[e],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((e=>e(r))),t)return t(r)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=p.bind(null,a.onerror),a.onload=p.bind(null,a.onload),c&&document.head.appendChild(a)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),i.p="https://confluence-v1.prod.atl-paas.net/master/",i.gca="function"==typeof __GET_CC_ASSET_URL?__GET_CC_ASSET_URL:function(e,t){return e+t},(()=>{var e={786:0};i.f.j=(t,n)=>{var r=i.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise(((n,o)=>r=e[t]=[n,o]));n.push(r[2]=o);var s=i.gca(i.p,i.u(t)),a=new Error;i.l(s,(n=>{if(i.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,r[1](a)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,o,[s,a,c]=n,u=0;if(s.some((t=>0!==e[t]))){for(r in a)i.o(a,r)&&(i.m[r]=a[r]);if(c)c(i)}for(t&&t(n);u<s.length;u++)o=s[u],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0},n=self._qp=self._qp||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{"use strict";var e=i(5919);const t="edit-page",n="view-page",r="space-overview",o="whiteboard-page",s="database-page",a="embed-page",c="home",u="space-pages",l="space-blogs",d="external-share",p="content-history";var h,m,f,y=i(1408),g=i(7304),_=i(5446),v=i.n(_),b=i(9692);const I=!(null!==(h=void 0!==(null===globalThis||void 0===globalThis||null===(m=globalThis.process)||void 0===m||null===(m=m.env)||void 0===m?void 0:m.JEST_WORKER_ID))&&void 0!==h&&h)&&"production"!==(null===globalThis||void 0===globalThis||null===(f=globalThis.process)||void 0===f||null===(f=f.env)||void 0===f?void 0:f.NODE_ENV),E=(...e)=>{I&&console.debug(...e)},w="@atlaskit/platform-feature-flags",S="__PLATFORM_FEATURE_FLAGS__",T="undefined"!=typeof process&&void 0!==process.env,k=!!T&&"true"===process.env.ENABLE_PLATFORM_FF,A=!!T&&"true"===process.env.STORYBOOK_ENABLE_PLATFORM_FF,O=k||A,C={earlyResolvedFlags:new Map,booleanResolver:function(e){return!1}},x="undefined"!=typeof window?window:globalThis;function P(e){var t;t=e,x[S].booleanResolver=t}function R(e){return function(e){if(O)return E('[%s]: The feature flags were enabled while running tests. The flag "%s" will be always enabled.',w,e),!0;try{var t;const n=null===(t=x[S])||void 0===t?void 0:t.booleanResolver(e);return"boolean"!=typeof n?(console.warn(`${e} resolved to a non-boolean value, returning false for safety`),!1):n}catch(n){return!1}}(e)}x[S]=x[S]||C;var N=i(3089);const D=()=>{const{hostname:e}=window.location;return e.includes(".dev.")||e.includes(".stg.")?N.gq.STAGING:e.includes("localhost")||e.includes("ngrok")||e.includes("atlastunnel")?N.gq.DEV:N.gq.PROD},$=()=>{const{origin:e,pathname:t}=window.location,n=(e=>{let t="";if(!e)return t;const n=t=>new RegExp(`^${t}(/|$)`).test(String(e));return n("/wiki")&&(t="/wiki"),n("/jira")&&(t="/jira"),n("/compass")&&(t="/compass"),n("/canvas")&&(t="/canvas"),(n("/servicedesk")||n("/jira/servicedesk"))&&(t="/servicedesk"),t})(t);return{domain:`${e}${n}`,product:n.slice(1)}},L=t=>(0,e.Z)((0,e.Z)({featureFlagOn:R("platform.moonjelly.browser-storage-controls")},$()),t&&t),F=(()=>{let e;return()=>(e||(e=new b.Z({env:D(),product:"atlassianCookies"},{useLegacyUrl:!1,disableCookiePersistence:!0})),e)})();function Z(e,t){F().sendOperationalEvent({source:"package",actionSubject:"package",action:e,attributes:L(t)})}const j="[browser-storage-controls]";const M=new class{info(e,t){console.log(`${j}: ${e}`,t?JSON.stringify(t):"")}error(e,t){console.error(`${j}: ${e}`,t?JSON.stringify(t):"")}errorWithOperationalEvent({action:e,attributes:t={},message:n,metadata:r}){try{Z(e,t)}catch(o){this.error(`Failed to send operational event on error: ${e}. ${o.message||""}`)}this.error(n,r?JSON.stringify(r):"")}warn(e,t){console.warn(`${j}: ${e}`,t?JSON.stringify(t):"")}},U=3e5,B=async(e=2e3,t=0)=>{if(t>U)return Promise.resolve(!1);if(!R("platform.moonjelly.browser-storage-controls")){const n=2*e,r=Math.min(n,U);return new Promise((e=>{setTimeout((async()=>{const n=t+r,o=await B(r,n);e(o)}),r)}))}return Promise.resolve(!0)},K=async()=>{try{await(async()=>{const e=!("undefined"!=typeof document&&"undefined"!=typeof window&&Document&&Document.prototype&&Object&&Object.defineProperty),t=!R||!b.Z;if(e||t)return void M.warn("Browser context is not available.");if(!(await B()))return;const n=Object.getOwnPropertyDescriptor(Document.prototype,"cookie"),r=null==n?void 0:n.set,o=null==n?void 0:n.get;r&&o?(F(),Object.defineProperty(document,"cookie",{get:o,set:function(e){try{Z("usedDocumentCookie",{cookieKey:e.slice(0,e.indexOf("="))||""})}catch(t){M.errorWithOperationalEvent({action:"usedDocumentCookieError",message:`Failed to send document.cookie setter event. ${t.message||""}`,attributes:{cookieKey:e}})}return r.apply(document,[e])},configurable:!0})):M.warn("No document.cookie capabilities found")})()}catch(e){M.errorWithOperationalEvent({action:"initializeControlsError",message:`Failed to initialize browser storage controls. ${e.message||""}`})}};let q=function(e){return e.StrictlyNecessary="STRICTLY_NECESSARY",e.Functional="FUNCTIONAL",e.Marketing="MARKETING",e.Analytics="ANALYTICS",e.Unknown="UNKNOWN",e}({});function W(e){try{return R("platform.moonjelly.browser-storage-controls")&&Z("usedGetCookie",{cookieKey:e}),e?v().get(e):v().get()}catch(t){M.errorWithOperationalEvent({action:"usedGetCookieError",attributes:{cookieKey:e},message:`Failed to use get cookie. ${t.message||""}`})}}async function G(){const e=W("atl-gdpr-consent");if(e)return function(e){if(e.length<3)return;return"001"===e[0]+e[1]+e[2]&&7===e.length?{STRICTLY_NECESSARY:!0,FUNCTIONAL:"1"===e[3],ANALYTICS:"1"===e[4],MARKETING:"1"===e[5],UNKNOWN:"1"===e[6]}:void 0}(e)}const V=async()=>{try{const e=await fetch("https://atlassian-cookies--categories.us-east-1.prod.public.atl-paas.net/categories.json");if(!e.ok)throw new Error(`Failed to fetch Cookies Cache! status: ${e.status}`);return await e.json()}catch(e){M.errorWithOperationalEvent({action:"loadStorageControlsError",message:e.message||""})}};let H=function(e){return e.SUCCESS="SUCCESS",e.BLOCKED="BLOCKED",e.FAILED="FAILED",e}({});const Q=async(e,t,n)=>{if(!R("platform.moonjelly.browser-storage-controls")){const r={wasRejected:!1,cookieKey:e};try{return v().set(e,t,n),H.SUCCESS}catch(i){return M.errorWithOperationalEvent({action:"usedSetCookieError",attributes:r,message:`Failed to use set cookie. ${i.message||""}`}),H.FAILED}}let r=!1;const o=await(async e=>{const t=await V();if(!t)return null;let n=null;const{keys:r,categories:o,patterns:s}=t;n=e in Object(r)?r[e]:((e,{startsWith:t})=>{let n=t,r=0;for(;r<e.length;){const t=n[e[r]];if(void 0===t)return null;if("number"==typeof t)return t;n=t,r++}return null})(e,s);const i={[o.STRICTLY_NECESSARY]:q.StrictlyNecessary,[o.FUNCTIONAL]:q.Functional,[o.ANALYTICS]:q.Analytics,[o.MARKETING]:q.Marketing,[o.UNKNOWN]:q.Unknown};return null!==n?i[n]:null})(e);if(o===q.StrictlyNecessary)r=!0;else{const e=await G();let t=!1;e&&o&&(t=e[o]),r=t}const s={wasRejected:!r,cookieKey:e};try{return Z("usedSetCookie",s),r?(v().set(e,t,n),H.SUCCESS):H.BLOCKED}catch(i){return M.errorWithOperationalEvent({action:"usedSetCookieError",attributes:s,message:`Failed to use set cookie. ${i.message||""}`}),H.BLOCKED}},z=async(e,t,n)=>{try{const r=await(async e=>{if(!R("platform.moonjelly.browser-storage-controls"))return Promise.resolve(!0);const t=await G();if(!t)return Promise.resolve(!1);let n=!1;const r=await V();if(r){const{thirdPartyKeys:o,categories:s}=r,i=o[e],a={[s.STRICTLY_NECESSARY]:q.StrictlyNecessary,[s.FUNCTIONAL]:q.Functional,[s.ANALYTICS]:q.Analytics,[s.MARKETING]:q.Marketing,[s.UNKNOWN]:q.Unknown},c=null!==i?a[i]:null;let u=!1;c&&(u=t[c]),n=u}return Promise.resolve(n)})(e);return Z("usedCheckThirdParty",{wasRejected:!r,thirdParty:e}),r?t():null==n?void 0:n()}catch(r){M.errorWithOperationalEvent({action:"checkThirdPartyError",attributes:{wasRejected:!0,thirdParty:e},message:`Failed to use check third party. ${r.message||""}`})}};var Y=i(506),J=i(3553),X=i(8122),ee=i(3037),te=i.n(ee);let ne=function(e){return e.OptIn="optInExposure",e.Manual="manualExposure",e.Default="defaultExposure",e.AutoExposure="autoExposure",e.hasCustomAttributes="hasCustomAttributes",e}({});const re=e=>"object"==typeof e,oe=e=>!e||0===Object.keys(e).length,se=(e,t,n)=>{t.forEach((t=>{if(!(t in e)){throw new Error(`${n?`${n}: `:""}Missing ${t}`)}}))},ie={kind:"ERROR",errorKind:"FLAG_NOT_FOUND"};class ae{constructor(e,t){(0,g.Z)(this,"evaluationCount",void 0),(0,g.Z)(this,"flagKey",void 0),(0,g.Z)(this,"sendAutomaticExposure",void 0),this.flagKey=e,this.sendAutomaticExposure=t,this.evaluationCount=0}evaluate(e){return null!=this.sendAutomaticExposure&&this.sendAutomaticExposure(this.flagKey,e,ie),this.evaluationCount++,e}getBooleanValue(e){return this.evaluate(e.default)}getVariantValue(e){return this.evaluate(e.default)}getJSONValue(){return this.evaluate({})}getRawValue(e){return this.evaluate(e.default)}getFlagEvaluation(e){return{value:this.evaluate(e.default),explanation:ie}}}class ce{constructor(e,t,n,r,o){(0,g.Z)(this,"evaluationCount",void 0),(0,g.Z)(this,"flagKey",void 0),(0,g.Z)(this,"flag",void 0),(0,g.Z)(this,"trackExposure",void 0),(0,g.Z)(this,"sendAutomaticExposure",void 0),(0,g.Z)(this,"ignoreTypes",void 0),(0,g.Z)(this,"evaluationResult",void 0),this.flagKey=e,this.flag=t,this.evaluationCount=0,this.trackExposure=n,this.sendAutomaticExposure=r,this.ignoreTypes=o}getCachedResultOrCompute(e,{shouldTrackExposureEvent:t,exposureData:n,oneOf:r,ignoreTypes:o}){let s=ne.OptIn;void 0===t&&(t=!0,s=ne.Default),void 0===this.evaluationResult&&(this.evaluationResult=this.computeWithValidation(e,{oneOf:r,ignoreTypes:o}));let i=this.evaluationResult.value;return this.evaluationResult.didFallbackToDefaultValue?i=e:t&&this.trackExposure(this.flagKey,this.flag,s,n),this.sendAutomaticExposure(this.flagKey,i,this.evaluationResult.explanation),this.evaluationCount++,{value:i,explanation:this.evaluationResult.explanation}}computeWithValidation(t,{oneOf:n,ignoreTypes:r}){let o={value:this.flag.value,explanation:this.flag.explanation,didFallbackToDefaultValue:!1};return r||typeof this.flag.value==typeof t?void 0===n||n.includes(this.flag.value)||(o.value=t,o.didFallbackToDefaultValue=!0,o.explanation=(0,e.Z)((0,e.Z)({},o.explanation||{}),{},{kind:"ERROR",errorKind:"VALIDATION_ERROR"})):(o.value=t,o.didFallbackToDefaultValue=!0,o.explanation=(0,e.Z)((0,e.Z)({},o.explanation||{}),{},{kind:"ERROR",errorKind:"WRONG_TYPE"})),o}getBooleanValue(e){return this.getCachedResultOrCompute(e.default,{exposureData:e.exposureData,shouldTrackExposureEvent:e.shouldTrackExposureEvent,oneOf:void 0,ignoreTypes:this.ignoreTypes||!1}).value}getVariantValue(e){return this.getCachedResultOrCompute(e.default,{exposureData:e.exposureData,shouldTrackExposureEvent:e.shouldTrackExposureEvent,oneOf:e.oneOf,ignoreTypes:this.ignoreTypes||!1}).value}getJSONValue(){return this.getCachedResultOrCompute({},{shouldTrackExposureEvent:!1,ignoreTypes:this.ignoreTypes}).value}getRawValue(e){return this.getCachedResultOrCompute(e.default,{shouldTrackExposureEvent:e.shouldTrackExposureEvent,exposureData:e.exposureData,oneOf:void 0,ignoreTypes:!0}).value}getFlagEvaluation(e){return this.getCachedResultOrCompute(e.default,{shouldTrackExposureEvent:e.shouldTrackExposureEvent,exposureData:e.exposureData,ignoreTypes:this.ignoreTypes||!1})}}class ue{constructor(e){(0,g.Z)(this,"flags",void 0),(0,g.Z)(this,"flagWrapperCache",void 0),(0,g.Z)(this,"analyticsHandler",void 0),(0,g.Z)(this,"isAutomaticExposuresEnabled",void 0),(0,g.Z)(this,"isMissingFlagEventsDisabled",void 0),(0,g.Z)(this,"trackedFlags",void 0),(0,g.Z)(this,"customAttributesExposuresCache",void 0),(0,g.Z)(this,"ignoreTypes",void 0),se(e,["analyticsHandler"],"Feature Flag Client");const{flags:t,analyticsHandler:n,isAutomaticExposuresEnabled:r,isMissingFlagEventsDisabled:o,ignoreTypes:s}=e;this.flags=new Map,this.flagWrapperCache=new Map,this.customAttributesExposuresCache=new Set,this.trackedFlags=new Set,this.isAutomaticExposuresEnabled=r||!1,this.isMissingFlagEventsDisabled=null!=o&&o,this.ignoreTypes=s||!1,this.setFlags(t||{}),this.setAnalyticsHandler(n)}setFlags(e){if(re(e)){0,Object.entries(e).forEach((([e,t])=>{this.flags.set(e,t)}));for(const t of this.flagWrapperCache.keys())e.hasOwnProperty(t)&&this.flagWrapperCache.delete(t)}}setAnalyticsHandler(e){this.analyticsHandler=e}setIsAutomaticExposuresEnabled(e){this.isAutomaticExposuresEnabled=e}getFlagWrapper(e){let t=this.flagWrapperCache.get(e);if(void 0!==t)return t;const n=this.flags.get(e);return t=n?new ce(e,n,this._trackExposure.bind(this),this.sendAutomaticExposure.bind(this),this.ignoreTypes):new ae(e,this.shouldSendMissingFlagAutomaticExposure(e)?this.sendAutomaticExposure.bind(this):null),this.flagWrapperCache.set(e,t),t}shouldSendMissingFlagAutomaticExposure(e){const t=e.startsWith("platform.");return!this.isMissingFlagEventsDisabled&&!t}clear(){this.flags.clear(),this.flagWrapperCache.clear(),this.trackedFlags.clear()}getBooleanValue(e,t){se(t,["default"],"getBooleanValue");return this.getFlagWrapper(e).getBooleanValue(t)}getVariantValue(e,t){se(t,["default","oneOf"],"getVariantValue");return this.getFlagWrapper(e).getVariantValue(t)}getJSONValue(e){return this.getFlagWrapper(e).getJSONValue()}getRawValue(e,t){se(t,["default"],"getRawValue");return this.getFlagWrapper(e).getRawValue(t)}getFlagEvaluation(e,t){se(t,["default"],"getRawValue");return this.getFlagWrapper(e).getFlagEvaluation(t)}trackFeatureFlag(e,t={}){var n,r;const o=null!=t&&t.triggerReason?t.triggerReason:ne.Manual;if(!(this.flags.has(e)||"value"in t))return void console.warn(`No value associated with the flagKey: ${e} with an exposure trigger reason of: ${o}`);const s="value"in t?t.value:null===(n=this.flags.get(e))||void 0===n?void 0:n.value,i=null!=t&&t.explanation?t.explanation:null===(r=this.flags.get(e))||void 0===r?void 0:r.explanation;o===ne.AutoExposure?this.sendAutomaticExposure(e,s,i):this._trackExposure(e,{value:s,explanation:i},o)}trackExposure(e,t,n={}){return this._trackExposure(e,t,ne.Manual,n)}_trackExposure(e,t,n,r){if(!(t&&t.explanation&&this.shouldSendEvent(e,r)))return;(e=>{const t=["flagKey","ruleId","reason","value","errorKind"],n=e?Object.keys(e):[];if(t.some((e=>n.includes(e))))throw new TypeError(`exposureData contains a reserved attribute. Reserved attributes are: ${t.join(", ")}`)})(r);const o={flagKey:e,reason:t.explanation.kind,ruleId:t.explanation.ruleId,value:t.value};this.sendExposureEvent(o,n,r)}shouldSendEvent(e,t){return void 0!==this.analyticsHandler&&(!this.trackedFlags.has(e)||!oe(t)&&!this.customAttributesExposuresCache.has(e))}sendAutomaticExposure(e,t,n){if(!(n&&this.isAutomaticExposuresEnabled&&this.shouldSendEvent(e)))return;const r={flagKey:e,value:t,reason:n.kind||"SIMPLE_EVAL",ruleId:n.ruleId,errorKind:n.errorKind};this.sendExposureEvent(r,ne.AutoExposure)}sendExposureEvent(e,t,n){if(!this.trackedFlags.has(e.flagKey)){var r;const n={action:"exposed",actionSubject:"feature",attributes:e,tags:["measurement",t],highPriority:!1,source:"@atlaskit/feature-flag-client"};null===(r=this.analyticsHandler)||void 0===r||r.sendOperationalEvent(n),this.trackedFlags.add(e.flagKey)}if(!oe(n)){var o;const r={action:"exposed",actionSubject:"feature",attributes:Object.assign({},e,n),tags:["measurement",ne.hasCustomAttributes,t],highPriority:!0,source:"@atlaskit/feature-flag-client"};null===(o=this.analyticsHandler)||void 0===o||o.sendOperationalEvent(r),this.customAttributesExposuresCache.add(e.flagKey)}}getFlagStats(){const e={};for(const[t,n]of this.flagWrapperCache){const{evaluationCount:r}=n;e[t]={evaluationCount:r}}return e}}let le;var de;let pe;de?le=de:i.g.window&&i.g.window.navigator&&(le=i.g.window.navigator.userAgent);const he=(0,J.LW)(new Promise((e=>{pe=e})));let me;(0,J.LW)(new Promise((e=>{me=e})));const fe=()=>he,ye={sendOperationalEvent:e=>fe().then((t=>{t.sendOperationalEvent(e)}))},ge=(0,X.Z)(((e={})=>new ue({flags:e,analyticsHandler:ye})),te());const _e=(e,t)=>{const n=(e=>{if(!e&&!window.location.href)return{};const t=new URL(e||window.location.href);return new URLSearchParams(t.search)})(t);if(null==n||!n.get||!n.get("ff"))return{};return n.get("ff").split(",").reduce(((t,n)=>{const[r,o]=function(e){const[t,n]=e.split(":"),r=t.startsWith("confluence.")?t:`confluence.frontend.${t}`;let o=null!=n?n:"true";return"true"===o.toLowerCase()?o=!0:"false"===o.toLowerCase()&&(o=!1),[r,o]}(n);return void 0===e[r]||(t[r]=o),t}),{})},ve="confluence-frontend-next.featureFlagLocalOverrides",be=(()=>{try{const e="__random__local__storage__test__key__";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){return!1}})(),Ie=(e,t)=>{if(!(be?null!=window.localStorage.getItem(ve):null!=window.sessionStorage.getItem(ve)))return e;const n=(()=>{let e;e=be?window.localStorage.getItem(ve):window.sessionStorage.getItem(ve);try{return e?JSON.parse(e):{}}catch(t){return{}}})();return Object.keys(e).reduce(((r,o)=>(r[o]=t(o,n,e),r)),{})};class Ee{constructor(e){(0,g.Z)(this,"name",void 0),this.name=function(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}(e)}log(e,...t){this.logAnyLevel(1,console.log,e,t)}debug(e,...t){this.logAnyLevel(2,console.debug,e,t)}info(e,...t){this.logAnyLevel(3,console.info,e,t)}warn(e,...t){this.logAnyLevel(4,console.warn,e,t)}error(e,...t){this.logAnyLevel(5,console.error,e,t)}logAnyLevel(e,t,n,r){try{if("undefined"==typeof sessionStorage||"true"===sessionStorage.getItem("confluence.enable-logging")){const o="undefined"!=typeof sessionStorage&&sessionStorage.getItem("confluence.log-level");if((parseInt(o||"",10)||1)>e)return;const s=[`[@${Math.round(performance.now())} ${this.name}]`];t(...n.reduce(((e,t,o)=>{const s=r[o],i=t.trim().replace(/\n\s+/g,"\n");return i&&e.push(i),o!==n.length-1&&e.push("string"==typeof s?JSON.stringify(s):s),e}),s))}}catch(o){console.error(o)}}}const we=e=>new Ee(e);function Se(){try{if(sessionStorage.getItem("confluence.telemetry-dev-track-override"))return"dev"}catch(e){}return"prod"}function Te(){const e=window.__buildInfo||{};let{FRONTEND_VERSION:t}=e;t||(t="");const n=/^([^-]+)-(.+)-(\d+)$/.exec(t);return{FRONTEND_VERSION:n?t:"UNKNOWN-unknown-0",BRANCH_NAME:n?n[2]:"unknown",BUILD_NUMBER:n?parseInt(n[3],10):0,BUILD_DATE:e.BUILD_DATE||0,PUBLIC_PATH:e.PUBLIC_PATH||"unknown",RELEASE_TRACK:Se()}}var ke=i(2342);class Ae extends Error{constructor({message:e,method:t,url:n,"status-code":r},{route:o,traceId:s}={}){super(e.length?e:`Failed to ${t} ${o||n}`),(0,g.Z)(this,"url",void 0),(0,g.Z)(this,"method",void 0),(0,g.Z)(this,"statusCode",void 0),(0,g.Z)(this,"route",void 0),(0,g.Z)(this,"traceId",void 0),this.url=n,this.route=o,this.method=t,this.statusCode=r,this.traceId=s}}const Oe=e=>{var t,n;return(null==e||null===(t=e.headers)||void 0===t?void 0:t.get("x-b3-traceid"))||(null==e||null===(n=e.headers)||void 0===n?void 0:n.get("atl-traceid"))||null};class Ce extends Error{}class xe extends Ce{constructor(e,t){super(e),(0,g.Z)(this,"response",void 0),(0,g.Z)(this,"name","BadStatusError"),this.response=t}get traceId(){return Oe(this.response)}static isBadStatusError(e){return e instanceof xe}}const Pe=Symbol("React error context");const Re=Symbol("Graphql error context");function Ne(e){if("object"==typeof e&&null!==e)return e[Re]?e[Re]:function(e){if(!function(e){return"object"==typeof e&&null!==e&&("graphQLErrors"in e||"networkError"in e)}(e))return;const t=e.graphQLErrors;if(t&&t.length>0&&t[0][Re])return t[0][Re];if(e.networkError)return e.networkError[Re];return}(e)}const De=Symbol("SLA error context");function $e(t){return t&&"object"==typeof t?(0,e.Z)((0,e.Z)((0,e.Z)((0,e.Z)((0,e.Z)({},function(e){if("object"==typeof e&&null!==e)return e[Pe]}(t)),Ne(t)),function(e){if("object"==typeof e&&null!==e)return e[De]}(t)),function(e){if(e instanceof Ae)return{statusCode:e.statusCode,restMethod:e.method,restRoute:e.route,traceId:e.traceId}}(t)),function(e){if(e instanceof xe)return{statusCode:e.response.status,traceId:Oe(e.response)}}(t)):{}}const Le=["componentStack","failedSlaExperience"],Fe=/(https?):\/\/[a-z0-9]+\.cloudfront\.net\//g,Ze=/(https?):\/\/[a-z0-9]+\.cloudfront\.net\/download\//g,je=/s\/[^_]+_\/download\//g;function Me(e){try{return JSON.parse(e).message||e}catch(t){return e}}const Ue=function(t,n){var r;let o=!1,s=!1;if(null!==(r=t.exception)&&void 0!==r&&r.values&&(t.exception.values=t.exception.values.map((e=>(e.stacktrace&&e.stacktrace.frames&&(e.stacktrace.frames=e.stacktrace.frames.map((e=>{var t;return e.filename&&(o=Boolean(e.filename.match(je)),s=Boolean(e.filename.match(Ze)),e.filename=(t=e.filename).match(je)?t.replace(je,"download/").replace(Fe,"$1://"):t),e}))),e)))),"object"==typeof(null==n?void 0:n.originalException)&&null!==(null==n?void 0:n.originalException)){t.fingerprint=function(e){if(e.message.startsWith("Quota exceeded on key")||e.message.startsWith("QuotaExceededError"))return["storage-quota-error"];if(e.message.startsWith("Maximum call stack size exceeded")||e.message.startsWith("too much recursion"))return["maximum-call-stack"];if(e.message.startsWith("Invalid position"))return["invalid-position"];if(e.message.match(/Loading chunk .+? failed/))return["chunk-load-error"];if(e.message.startsWith("Error creating blueprint content:"))return["blueprint-creation-error",e.message.substr(0,100)];if(e.message.startsWith("Error from synchrony plugin"))return["error-from-synchrony-plugin"];if(e.message.includes("Error fetching data from identity - Error has been logged with execution ID:"))return["identity-fetching-error"];if(e.message.includes("java.net.SocketTimeoutException"))return["socket-timeout"];if(e instanceof URIError)return["malformed-uri-error"];if(e instanceof Ae&&e.route)return[`rest-api-${e.route}-${e.statusCode}`];const t=$e(e);return t.failedSlaExperience?t.operationName||t.statusCode?[`experience-${t.failedSlaExperience}`,Me(e.message).substr(0,100)]:["{{ default }}",`experience-${t.failedSlaExperience}`]:void 0}(n.originalException);const r=$e(n.originalException),{componentStack:o,failedSlaExperience:s}=r,i=(0,ke.Z)(r,Le);t.extra=(0,e.Z)((0,e.Z)({},t.extra),i)}return t.logger=o?"wrm":s?"react":"javascript",t.request&&delete t.request.url,delete t.breadcrumbs,t.transaction="",t};function Be(t){const n={};return(0,e.Z)({release:Te().FRONTEND_VERSION,dsn:t,environment:"CONFLUENCE",beforeSend:(e,t)=>Ue(e,t),ignoreErrors:["Transport destroyed","Worker was destroyed","Failed to connect on any of the ADC ports","Cannot read property 'postMessage' of undefined","Cannot read property 'postMessage' of null","d.hide is not a function",/^network error/i,/^network failure/i,"TypeError: Failed to fetch","ResizeObserver loop limit exceeded",/ResizeObserver loop completed with undelivered notifications/],autoSessionTracking:!1},n)}const Ke=(0,X.Z)((async()=>{return(0,J.LW)(i.e(129).then(i.bind(i,7108)).then((({BrowserClient:e,Hub:t})=>new t(new e(Be("https://2d329ea4a8a04cf0b19117b4675b336f@o55978.ingest.sentry.io/5988900"))))).catch((()=>null)))}));class qe{constructor(e,t){this.flushIntervalMs=e,this.batchMaxSize=t,(0,g.Z)(this,"flushIntervalId",void 0),(0,g.Z)(this,"onFlushCallbacks",new Set),(0,g.Z)(this,"currentBatch",[]),(0,g.Z)(this,"flush",(()=>{const e=this.renewBatch();this.unscheduleFlush(),0!==e.length&&this.onFlushCallbacks.forEach((t=>{try{t(e)}catch(n){setTimeout((()=>{throw console.error('"onFlush" callback threw the below error. Please make sure your callbacks have proper error handling'),n}),0)}}))}))}add(e){this.scheduleFlush(),this.currentBatch.push(e),this.currentBatch.length>=this.batchMaxSize&&this.flush()}onFlush(e){if(!(e instanceof Function))throw new Error(`"onFlush" callback is supposed to be a function; saw ${typeof e} instead`);return this.onFlushCallbacks.add(e),{unsubscribe:()=>{this.onFlushCallbacks.delete(e)}}}forceFlush(){this.flush()}renewBatch(){const e=this.currentBatch;return this.currentBatch=[],e}scheduleFlush(){this.flushIntervalId||(this.flushIntervalId=window.setInterval(this.flush,this.flushIntervalMs))}unscheduleFlush(){this.flushIntervalId&&(window.clearInterval(this.flushIntervalId),this.flushIntervalId=void 0)}}const We=we("CustomMonitoringClient");class Ge{constructor({errorsPerTransitionLimit:e=1e3,metricBatchMaxSize:t=50,metricBatchFlushIntervalMs:n=1e4,errorBatchFlushIntervalMs:r=1e4,errorBatchMaxSize:o=10,errorBatchMsgTrimLength:s=7168}={}){(0,g.Z)(this,"batcher",void 0),(0,g.Z)(this,"errorBatcher",void 0),(0,g.Z)(this,"isWindowUnloading",!1),(0,g.Z)(this,"context",{}),(0,g.Z)(this,"firstErrorInSession",!0),(0,g.Z)(this,"newSentryEnabled",!1),(0,g.Z)(this,"sendErrorsToTelemetryService",!1),(0,g.Z)(this,"errorsPerTransitionLimit",void 0),(0,g.Z)(this,"errorsPerCurrentTransition",0),(0,g.Z)(this,"errorBatchMsgTrimLength",void 0),this.errorsPerTransitionLimit=e,this.errorBatchMsgTrimLength=s,this.batcher=new qe(n,t),this.errorBatcher=new qe(r,o),this.batcher.onFlush((e=>{this.onBatch(e)})),this.errorBatcher.onFlush((e=>{this.onErrorBatch(e)}));window.addEventListener("pagehide",(()=>{this.isWindowUnloading=!0,this.batcher.forceFlush(),this.errorBatcher.forceFlush()}))}enableNewSentry(){this.newSentryEnabled=!0}enableSendErrorsToTelemetryService(){this.sendErrorsToTelemetryService=!0}submitError(t,n){if(this.errorsPerCurrentTransition===this.errorsPerTransitionLimit)return;this.errorsPerCurrentTransition++;const r=$e(t),{attribution:o}=n,s=this.firstErrorInSession;this.incrementCounter("jsErrors",[`attribution:${o}`,`firstInSession:${s}`,...r.operationName?[`queryName:${r.operationName}`]:[]]),this.firstErrorInSession=!1;const i=t&&t.stack&&t.message?t:new Error(t&&t.message||String(t)),a={attribution:o};this.context.slaExperience&&(a.slaExperience=this.context.slaExperience),this.context.pageName&&(a.pageName=this.context.pageName),r.failedSlaExperience&&(a.failedSlaExperience=r.failedSlaExperience),r.operationName&&(a.operationName=r.operationName),a.ssrRendered=Boolean(window.__SSR_RENDERED__).toString(),r.failedSlaExperience?this.logSlaErrorToSentry(i,a).catch((e=>{this.logError(e,{attribution:"backbone"})})):this.newSentryEnabled&&this.logErrorToSentry(i,a),this.logError(i,(0,e.Z)((0,e.Z)((0,e.Z)({},n),r),{},{firstInSession:s}))}updateContext(e){void 0===e.transitionId||0!==e.transitionId&&this.context.transitionId===e.transitionId||(this.incrementCounter("session",["type:"+(0===e.transitionId?"initial":"transition")]),this.firstErrorInSession=!0,this.errorsPerCurrentTransition=0),e.pageName&&this.context.pageName!==e.pageName&&void 0!==this.context.pageName&&this.batcher.forceFlush(),Object.assign(this.context,e)}incrementCounter(e,t){this.batcher.add(this.createMetric({type:"increment",name:e,value:1,tags:t}))}logErrorToSentry(e,t){i.e(129).then(i.bind(i,7108)).then((({withScope:n,captureException:r})=>{n((n=>{n.setTags(t),r(e)}))})).catch((e=>{this.logError(e,{attribution:"backbone"})}))}async logSlaErrorToSentry(e,t){let n=null;const r=Ke();n=(0,J.wp)(r)?(0,J.NA)(r):await r,n&&n.withScope((r=>{r.setTags(t),n.captureException(e)}))}async logError(t,n){try{var r;const o=fe();let s;s=(0,J.wp)(o)?(0,J.NA)(o):await o;const i=(0,e.Z)({error:t.message||String(t),stack:t.stack,browserInfo:window.navigator.userAgent,ssrRendered:Boolean(window.__SSR_RENDERED__),releaseId:Te().FRONTEND_VERSION,track:Te().RELEASE_TRACK,pageName:this.context.pageName,shard:this.context.shard,edition:this.context.edition,jqVer:null===(r=window.jQuery)||void 0===r||null===(r=r.fn)||void 0===r?void 0:r.jquery},n);if(s.sendOperationalEvent({source:"ui",action:"unhandledError",actionSubject:"ui",attributes:i}),this.sendErrorsToTelemetryService){["error","stack","componentStack"].forEach((e=>{i[e]&&(i[e]=this.trimTextLength(i[e],this.errorBatchMsgTrimLength))})),this.errorBatcher.add({event:i})}}catch(o){}}formatContextAsTags(){const e=[];this.context.pageName&&e.push(`page:${this.context.pageName}`),this.context.tenantId&&e.push(`cloudId:${this.context.tenantId}`),this.context.shard&&e.push(`shard:${this.context.shard}`),this.context.product&&e.push(`product:${this.context.product}`);const{FRONTEND_VERSION:t,RELEASE_TRACK:n}=Te();return t&&e.push(`version:${t}`),n&&e.push(`track:${n}`),e}onBatch(e){const t={type:"metric",meta:{globalTags:this.formatContextAsTags()},data:e};this.send(t)}onErrorBatch(e){const t={type:"error",meta:{globalTags:this.formatContextAsTags()},data:e};this.send(t)}send(e){try{We.info`Sending monitoring events: ${e}`;const t="/gateway/api/telemetry",n=JSON.stringify(e);let r=!1;if(navigator.sendBeacon&&(r=navigator.sendBeacon(t,n)),!r){const e=new XMLHttpRequest,r=this.isWindowUnloading;e.open("POST",t,!r),e.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),e.send(n)}}catch(t){We.error`Sending monitoring data failed: ${t}`}}createMetric({type:e,name:t,value:n,tags:r=[]}){return{type:e,name:t,value:n,sampleRate:1,tags:r,timestamp:(new Date).toISOString()}}trimTextLength(e,t){return e&&t&&e.length>t?`${e.substring(0,t)}...`:e}}class Ve{submitError(){}updateContext(){}incrementCounter(){}}let He;const Qe=()=>(He||(He=/bot/i.test(window.navigator.userAgent)?new Ve:new Ge),He);let ze={};function Ye(e){return"true"===e||"false"!==e&&("object"==typeof e?JSON.stringify(e):e)}function Je(e,t){return e.reduce(((e,n)=>(e[n.id]=t(n),e)),{})}const Xe=e=>{const t=Je(e,(e=>Ye(e.value))),n=Ie(t,((e,t,n)=>t.hasOwnProperty(e)?t[e]:n[e]));return{original:t,withOverrides:n}},et=(t,n,r)=>n.hasOwnProperty(t)?(0,e.Z)((0,e.Z)({},r[t]),{},{value:n[t]}):r[t];function tt(t){return"object"==typeof t&&"value"in t?(0,e.Z)((0,e.Z)({},t.explanation?{explanation:(0,e.Z)({},t.explanation)}:{}),{},{value:Ye(t.value)}):{value:Ye(t),explanation:void 0}}const nt=(0,X.Z)(((t,n,r)=>{const o=t?Je(t,tt):{},s=null!=n?Je(n,tt):{},i=Ie(Object.assign(o,s),et),a=ge();a.setFlags(i),P((e=>a.getBooleanValue(e,{default:!1,shouldTrackExposureEvent:!0})));const c=t.concat(n),{original:u,withOverrides:l}=Xe(c);((e,t)=>{for(const o in ze){const s=e[ze[o].rolloutFF];if("string"==typeof s)try{const r=JSON.parse(s);var n;e[o]=t?e[o]&&(r.enabledLastDigits.includes(t.charAt(t.length-1))||(null===(n=r.enabledUserIds)||void 0===n?void 0:n.includes(t))):e[o]&&r.includeAnonUsers}catch(r){Qe().submitError(r,{attribution:"backbone"})}}})(l,r);const d=_e(l);return{originalFeatureFlags:u,featureFlagsWithOverrides:(0,e.Z)((0,e.Z)({},l),d),featureFlagClient:a}}));function rt(e){return null!==e}const ot=e=>{var t,n,r,o,s,i,a,c,u,l,d,p,h,m,f,y,g,_,v;const{originalFeatureFlags:b,featureFlagsWithOverrides:I,featureFlagClient:E}=nt((null==e||null===(t=e.featureFlags)||void 0===t||null===(t=t.nodes)||void 0===t?void 0:t.filter(rt))||[],(null==e||null===(n=e.platformFeatureFlags)||void 0===n||null===(n=n.nodes)||void 0===n?void 0:n.filter(rt))||[],null==e||null===(r=e.user)||void 0===r?void 0:r.id),w=null==e||null===(o=e.user)||void 0===o||null===(o=o.confluence)||void 0===o||null===(o=o.locale)||void 0===o?void 0:o.replace("_","-");return{shard:(null==e||null===(s=e.tenant)||void 0===s?void 0:s.shard)||"",cloudId:(null==e||null===(i=e.tenant)||void 0===i?void 0:i.cloudId)||"",activationId:(null==e||null===(a=e.tenant)||void 0===a?void 0:a.activationId)||"",orgId:(null==e||null===(c=e.organization)||void 0===c?void 0:c.orgId)||void 0,environment:(null==e||null===(u=e.tenant)||void 0===u?void 0:u.environment)||"",edition:(null==e||null===(l=e.tenant)||void 0===l||null===(l=l.editions)||void 0===l?void 0:l.edition)||null,userId:(null==e||null===(d=e.user)||void 0===d?void 0:d.id)||null,displayName:(null==e||null===(p=e.user)||void 0===p?void 0:p.displayName)||null,isLoggedIn:Boolean(null==e||null===(h=e.user)||void 0===h?void 0:h.id),isLicensed:Boolean((null==e||null===(m=e.user)||void 0===m||null===(m=m.confluence)||void 0===m?void 0:m.accountId)&&(null==e||null===(f=e.user)||void 0===f||null===(f=f.confluence)||void 0===f?void 0:f.userKey)),accessStatus:(null==e||null===(y=e.user)||void 0===y||null===(y=y.confluence)||void 0===y?void 0:y.accessStatus)||null,userIdForAnalytics:(null==e||null===(g=e.userForAnalytics)||void 0===g?void 0:g.id)||null,featureFlags:I,featureFlagClient:E,_originalFeatureFlags:b,locale:w||"en-US",timeZone:(null==e||null===(_=e.user)||void 0===_?void 0:_.timeZone)||null,isAdminHubAIEnabled:Boolean(null==e||null===(v=e.getAIConfig)||void 0===v?void 0:v.isEnabled)}};var st=i(5457);class it{constructor(){(0,g.Z)(this,"measures",{})}run(e,t){const n=Array.isArray(e)?e:[e];n.forEach((e=>this.markMeasureStart(e)));const r=t();return"function"==typeof(null==r?void 0:r.then)?r.finally((()=>{n.forEach((e=>this.markMeasureEnd(e)))})):n.forEach((e=>this.markMeasureEnd(e))),r}markMeasureStart(e,t){var n;null!==(n=this.measures[e])&&void 0!==n&&n.startTime||(this.measures[e]={startTime:Math.floor(t||performance.now()),duration:0})}markMeasureEnd(e,t,n=!1){const r=this.measures[e];null!=r&&r.duration||null==r||!r.startTime?!r&&n&&(this.measures[e]={startTime:0,duration:t||performance.now()}):r.duration=Math.floor((t||performance.now())-r.startTime)}getMeasures(){return this.measures}clearMeasures(){this.measures={}}}const at=new class extends it{constructor(...e){super(...e),(0,g.Z)(this,"startTimeOffset",0),(0,g.Z)(this,"startTime",0),(0,g.Z)(this,"fetchCount",0)}fetchCountIncr(){this.fetchCount++}getFetchCount(){return this.fetchCount}setStartTime(e=0){this.startTimeOffset=e,this.startTime||(this.startTime=Math.floor(performance.now()))}markMeasureStart(e){this.measures[e]={startTime:Math.floor(performance.now())-this.startTime,duration:0}}markMeasureEnd(e){const t=this.measures[e];t&&(t.duration=Math.floor(performance.now())-this.startTime-t.startTime,t.startTime+=this.startTimeOffset)}clearMeasures(){this.startTimeOffset=0,this.startTime=0,this.fetchCount=0,this.measures={}}};class ct extends Ce{constructor(...e){super(...e),(0,g.Z)(this,"ignore",void 0)}}class ut extends xe{constructor(e,t){super(`${e} rate limit exceeded`,t)}}const lt=["ignoreNoNetworkError"],dt=async(t,n)=>{let r,{ignoreNoNetworkError:o,requestInit:s}=function(e={}){const{ignoreNoNetworkError:t}=e,n=(0,ke.Z)(e,lt);return{ignoreNoNetworkError:t,requestInit:Object.getOwnPropertyNames(n).length?(0,st.I)(n):void 0}}(n);t&&"string"!=typeof t&&t.credentials||(s=(0,e.Z)({credentials:"include"},s));try{0,r=await fetch(t,s)}catch(i){0;const e=new ct(`Network failure: ${i}`);throw e.ignore=o,e.ignore||mt(void 0,e),e}if(!r.ok){let e;throw e=429===r.status?new ut(t.toString(),r):new xe(`Received status ${r.status}`,r),mt(r,e),e}return mt(r,void 0),r};const pt=we(dt);let ht=[];function mt(e,t){ht.forEach((n=>{try{n(e,t)}catch(r){pt.error`Error occurred in a cfetch subscriber: ${r}`}}))}dt.subscribe=e=>{if("function"!=typeof e)throw new Error("Subscriber must be a function");return ht.push(e),()=>{ht=ht.filter((t=>t!==e))}};const ft="\nquery SessionDataQuery @SLA {\n  tenant {\n    shard\n    cloudId\n    environment\n    activationId\n    editions {\n      edition\n    }\n  }\n  organization {\n    orgId\n  }\n  userForAnalytics: user {\n    id\n  }\n  user(current: true) {\n    id\n    displayName\n    confluence {\n      accessStatus\n      accountId\n      userKey\n      locale\n    }\n    timeZone\n  }\n  featureFlags(extraTargeting: true, first: 800) {\n    nodes {\n      id\n      value\n      explanation {\n        ruleIndex\n        ruleId\n        kind\n      }\n    }\n  }\n  platformFeatureFlags: featureFlags(prefix: PLATFORM, extraTargeting: true, first: 500) {\n    nodes {\n      id\n      value\n      explanation {\n        ruleIndex\n        ruleId\n        kind\n      }\n    }\n  }\n\n  getAIConfig(product: CONFLUENCE) {\n    isEnabled\n  }\n}\n";async function yt(t={}){return window.USE_MOCKED_SESSION_DATA?new Promise((e=>{window.MOCK_SESSION_DATA_RESOLVE=e})):window.__SESSION_DATA__?window.__SESSION_DATA__:window.__SESSION_DATA__=await at.run("ssr-app/prepare/preloadQuery/fetch:SessionDataQuery",(async()=>{try{const n=window.GLOBAL_APOLLO_CLIENT_URI||"/cgraphql",r=await dt(`${n}?q=SessionDataQuery`,(0,st.I)({method:"POST",credentials:"include",referrerPolicy:"same-origin",headers:(0,e.Z)({"X-APOLLO-OPERATION-NAME":"SessionDataQuery","Content-Type":"application/json"},t.headers),body:JSON.stringify({query:ft})}));if(!r.ok)throw new Error(`Cannot load session data: ${r.statusText}`);return(await r.json()).data}catch(n){return Qe().submitError(n,{attribution:"FATAL"}),null}}))}const gt=()=>window.__SESSION_DATA_PROMISE__?window.__SESSION_DATA_PROMISE__:window.__SESSION_DATA_PROMISE__=(0,J.LW)(yt().then(ot));class _t extends Y.Component{constructor(e){super(e),(0,g.Z)(this,"_mount",void 0),(0,g.Z)(this,"state",{});const t=gt();this._mount=!0,(0,J.wp)(t)?this.state={sessionData:(0,J.NA)(t)}:t.then((e=>{this._mount&&this.setState({sessionData:e})}))}componentWillUnmount(){this._mount=!1}render(){const{sessionData:e}=this.state;return e?this.props.children(e):!0===this.props.renderChildrenWhenLoading?this.props.children({loading:!0}):null}}_t.displayName="SessionData";let vt=function(e){return e.USE_PREFERENCES="USE_PREFERENCES",e.NECESSARY="NECESSARY",e}({});class bt{static initialize(){K()}static async set(e,t,n,r=vt.USE_PREFERENCES){if(r===vt.NECESSARY)return((e,t,n)=>{try{R("platform.moonjelly.browser-storage-controls")&&Z("usedSetStrictlyNecessaryCookie",{cookieKey:e}),v().set(e,t,n)}catch(r){M.errorWithOperationalEvent({action:"usedSetStrictlyNecessaryCookieError",attributes:{cookieKey:e},message:`Failed to use set strictly necessary cookie. ${r.message||""}`})}})(e,t,n),Promise.resolve(!0);if(null===this.useJSCookie){const{featureFlagClient:e}=await gt(),t=e.getBooleanValue("confluence.frontend.use-browser-storage-controls",{default:!1});this.useJSCookie=!t}return this.useJSCookie?(v().set(e,t,n),Promise.resolve(!0)):"SUCCESS"===await Q(e,t,n)}static get(e){return this.useJSCookie?e?v().get(e):v().get():e?W(e):W()}static remove(e,t){this.useJSCookie?v().remove(e,t):((e,t)=>{try{R("platform.moonjelly.browser-storage-controls")&&Z("usedDeleteCookie",{cookieKey:e}),v().remove(e,t)}catch(n){M.errorWithOperationalEvent({action:"usedDeleteCookieError",attributes:{cookieKey:e},message:`Failed to use delete cookie. ${n.message||""}`})}})(e,t)}static async checkThirdParty(e,t,n){this.useJSCookie?await t():await z(e,t,n)}}(0,g.Z)(bt,"useJSCookie",null);const It="confluence.asSuperAdmin";async function Et(e){return yt(e)}var wt=i(210);const St="query WebItemLocationQuery($location:String$locations:[String]$contentId:ID$spaceKey:String$version:Int){webItemSections(location:$location locations:$locations contentId:$contentId key:$spaceKey version:$version){__typename id label cacheKey styleClass items{__typename accessKey completeKey hasCondition id icon{__typename height width path}params{__typename key value}label moduleKey section styleClass tooltip url urlWithoutContextPath weight}}}";function Tt({location:e=null,contentId:t=null,spaceKey:n=null,version:r=null}={}){const o={location:Array.isArray(e)?null:e,locations:Array.isArray(e)?e:[],contentId:t,spaceKey:n,version:r};return(0,wt.I)({query:St,variables:o})}function kt(){const e=[(0,wt.I)({query:"query AppNavigationUnifiedQuery{lookAndFeel{__typename custom{__typename horizontalHeader{__typename backgroundColor primaryNavigation{__typename highlightColor}}}}siteConfiguration{__typename customSiteLogo siteLogoUrl siteTitle showFrontCover showSiteTitle}user(current:true){__typename id displayName photos{__typename value isPrimary}}...UserPermissionFragment}fragment UserPermissionFragment on Query{__typename user(current:true){__typename id confluence{__typename permissionType}}}"}),Tt({location:"system.header/left"})];return Promise.all(e)}const At='query ContentBlogUnifiedQuery($contentId:ID!$spaceKey:String=null$versionOverride:Int$isSSR:Boolean=false)@SLA{content(id:$contentId version:$versionOverride){__typename nodes{__typename id type subType title space{__typename id key}version{__typename confRev}properties(keys:["cover-picture-id-published" "editor"]){__typename nodes{__typename id key value version{__typename number}}}metadata{__typename lastModifiedDate frontend{__typename fabricEditorSupported macroNamesNotSpaFriendly spaFriendly embedUrl}}macroRenderedOutput@include(if:$isSSR){__typename key value{__typename value representation webresource{__typename tags{__typename js css}}}}body{__typename dynamic{__typename representation value webresource{__typename superbatch{__typename tags{__typename js css}}tags{__typename js css}}}}...contentAppearancePublishedFragment}}space(key:$spaceKey){__typename id theme{__typename name themeKey}lookAndFeel{__typename content{__typename screen{__typename background backgroundColor backgroundImage backgroundPosition backgroundSize backgroundRepeat backgroundOrigin backgroundClip backgroundAttachment backgroundBlendMode layer{__typename background backgroundColor backgroundImage backgroundPosition backgroundSize backgroundRepeat backgroundOrigin backgroundClip backgroundAttachment backgroundBlendMode width height}gutterTop gutterRight gutterBottom gutterLeft}container{__typename background backgroundColor backgroundImage backgroundPosition backgroundSize backgroundRepeat backgroundOrigin backgroundClip backgroundAttachment backgroundBlendMode padding borderRadius}}}settings{__typename routeOverrideEnabled}}}fragment contentAppearancePublishedFragment on Content{__typename appearancePublished:properties(key:"content-appearance-published"){__typename ...contentAppearanceInnerFragment}}fragment contentAppearanceInnerFragment on PaginatedJsonContentPropertyList{__typename nodes{__typename id key value version{__typename number}}}',Ot='query ContentUnifiedQuery($contentId:ID!$spaceKey:String=null$versionOverride:Int$isSSR:Boolean=false)@SLA{content(id:$contentId version:$versionOverride){__typename nodes{__typename id type subType title space{__typename id key}version{__typename confRev}properties(keys:["cover-picture-id-published" "editor"]){__typename nodes{__typename id key value version{__typename number}}}metadata{__typename lastModifiedDate frontend{__typename fabricEditorSupported macroNamesNotSpaFriendly spaFriendly embedUrl}}macroRenderedOutput@include(if:$isSSR){__typename key value{__typename value representation webresource{__typename tags{__typename js css}}}}body{__typename dynamic{__typename representation value webresource{__typename superbatch{__typename tags{__typename js css}}tags{__typename js css}}}}...contentAppearancePublishedFragment}}space(key:$spaceKey){__typename id theme{__typename name themeKey}lookAndFeel{__typename content{__typename screen{__typename background backgroundColor backgroundImage backgroundPosition backgroundSize backgroundRepeat backgroundOrigin backgroundClip backgroundAttachment backgroundBlendMode layer{__typename background backgroundColor backgroundImage backgroundPosition backgroundSize backgroundRepeat backgroundOrigin backgroundClip backgroundAttachment backgroundBlendMode width height}gutterTop gutterRight gutterBottom gutterLeft}container{__typename background backgroundColor backgroundImage backgroundPosition backgroundSize backgroundRepeat backgroundOrigin backgroundClip backgroundAttachment backgroundBlendMode padding borderRadius}}}settings{__typename routeOverrideEnabled}}}fragment contentAppearancePublishedFragment on Content{__typename appearancePublished:properties(key:"content-appearance-published"){__typename ...contentAppearanceInnerFragment}}fragment contentAppearanceInnerFragment on PaginatedJsonContentPropertyList{__typename nodes{__typename id key value version{__typename number}}}',Ct=e=>{var t;return null===(t=e.message)||void 0===t?void 0:t.includes("Cannot find space")},xt=e=>{var t,n;return 403===(null==e||null===(t=e.extensions)||void 0===t?void 0:t.statusCode)||!1===(null===(n=e.extensions)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.authorized)};function Pt({contentId:e,isBlog:t,context:n,spaceKey:r}){if(!e)return Promise.resolve({hasErrors:!1});window.performance.mark("CFP-63.preloadContent.start");const o=Boolean(!1);return(0,wt.I)({query:t?At:Ot,variables:{contentId:e,spaceKey:r,versionOverride:null,isSSR:o},context:n,errorPolicy:"all"}).then((e=>{var t,n;const r=window.__GRAPHQL_ERROR_PROCESSOR__,o=(null==e||null===(t=e.errors)||void 0===t?void 0:t.length)>0;return null==e||null===(n=e.errors)||void 0===n||n.forEach((e=>{(xt(e)||Ct(e))&&(null==r||r.markErrorAsHandled(e))})),window.performance.mark("CFP-63.preloadContent.end"),window.performance.mark("CFP-63.preloadContentEnd"),{result:e,hasErrors:o}}))}const Rt='query BreadcrumbsQuery($spaceKey:String!$contentId:ID$skipContent:Boolean!){spaces(spaceKey:$spaceKey first:10){__typename nodes{__typename id name homepage{__typename id}}}content(id:$contentId status:["current" "draft" "archived"])@skip(if:$skipContent){__typename nodes{__typename id type status title ancestors{__typename id type title status}}}}';function Nt(e,t,n=!1){return(0,wt.I)({query:Rt,variables:{spaceKey:e,contentId:t,skipContent:n}})}const Dt=["current","draft","archived"],$t="query PageRestrictionsQuery($contentId:ID!$status:[String]$includeAncestors:Boolean!){singleContent(id:$contentId status:$status){__typename id hasInheritedRestrictions hasViewRestrictions hasRestrictions ancestors@include(if:$includeAncestors){__typename id title hasRestrictions links{__typename webui}}}}";const Lt="query GrantAccessDialogLoaderQuery($contentId:ID!$accountId:ID!){content(id:$contentId){__typename nodes{__typename id title}}user(id:$accountId){__typename id displayName photos{__typename value isPrimary}}}";const Ft="query RendererContentState($contentId:ID!$isDraft:Boolean!$format:GraphQLDateFormat){singleContent(id:$contentId){__typename id contentState(isDraft:$isDraft){__typename id name color}contentStateLastUpdated(format:$format){__typename value}}}";let Zt=function(e){return e.GLOBAL="GLOBAL",e.MILLIS="MILLIS",e.USER="USER",e.USER_FRIENDLY="USER_FRIENDLY",e}({});function jt(e){return(0,wt.I)({query:Ft,variables:{contentId:e,isDraft:!1,format:Zt.USER_FRIENDLY}})}const Mt="query FavouriteButtonQuery($contentId:ID!){singleContent(id:$contentId){__typename id type metadata{__typename currentuser{__typename favourited{__typename isFavourite}}}operations{__typename operation targetType}}}";const Ut="query WatchDialogQuery($contentId:ID!){singleContent(id:$contentId){__typename id ...WatchDialogContentFragment}}fragment WatchDialogContentFragment on Content{__typename id currentUserIsWatching type space{__typename id key currentUser{__typename isWatched isWatchingBlogs}operations{__typename operation targetType}}}";const Bt="FREE",Kt=e=>{var t;const n=window.__GRAPHQL_ERROR_PROCESSOR__;return null==e||null===(t=e.errors)||void 0===t||t.forEach((e=>{xt(e)&&(null==n||n.markErrorAsHandled(e))})),e};function qt({spaceKey:e,contentId:t,bestEffortTask:n,isLicensed:r,userId:o,username:s,edition:i,isLinkInTreeEnabled:a=!1}){const c=[Nt(e,t).then(Kt),jt(t).then(Kt),(0,wt.I)({query:'query ContentHeaderUnifiedQuery($contentId:ID!$spaceKey:String$versionOverride:Int=null$embeddedContentRender:String=null$limit:Int=4){content(id:$contentId version:$versionOverride embeddedContentRender:$embeddedContentRender){__typename nodes{__typename id type subType title ...contentAppearancePublishedFragment history{__typename createdDate createdBy{__typename ...byLineUserFragment}ownedBy{__typename ...byLineUserFragment}lastOwnedBy{__typename ...byLineUserFragment}}emojiTitlePublished:properties(key:"emoji-title-published"){__typename nodes{__typename id key value version{__typename number}}}properties(key:"editor"){__typename nodes{__typename id key value}}space{__typename id name}version{__typename message by{__typename ...byLineUserFragment}friendlyWhen number contentTypeModified}metadata{__typename sourceTemplateEntityId lastModifiedDate}}}contentContributors(id:$contentId limit:$limit){__typename count isCurrentUserContributor nodes{__typename ...byLineUserFragment}}space(key:$spaceKey){__typename id theme{__typename themeKey}lookAndFeel{__typename headings{__typename key value}content{__typename header{__typename background backgroundAttachment backgroundBlendMode backgroundClip backgroundColor backgroundImage backgroundOrigin backgroundPosition backgroundRepeat backgroundSize borderRadius padding}}}}}fragment byLineUserFragment on Person{__typename type displayName ...on KnownUser{accountId}...on User{accountId}profilePicture{__typename path}}fragment contentAppearancePublishedFragment on Content{__typename appearancePublished:properties(key:"content-appearance-published"){__typename ...contentAppearanceInnerFragment}}fragment contentAppearanceInnerFragment on PaginatedJsonContentPropertyList{__typename nodes{__typename id key value version{__typename number}}}',variables:{contentId:t,spaceKey:e,limit:4,embeddedContentRender:null,versionOverride:null}}).then(Kt)];c.push(function(e,t){return Boolean(t)?(0,wt.I)({query:Mt,variables:{contentId:e}}):Promise.resolve({})}(t,o)),t&&s&&c.push(function(e,t){return(0,wt.I)({query:Lt,variables:{contentId:e,accountId:t}})}(t,s));const u=i===Bt;return c.push(function(e,t){return(0,wt.I)({query:$t,variables:{contentId:e,status:Dt,includeAncestors:t}})}(t,u)),n("WatchDialogQuery",(()=>function(e,t,n){return t&&n?(0,wt.I)({query:Ut,variables:{contentId:e}}):Promise.resolve({})}(t,r,o))),Promise.all(c)}const Wt="query spaceForBaseSpaceQuery($spaceKey:String){spaces(spaceKey:$spaceKey){__typename nodes{__typename id key name homepage{__typename id}icon{__typename ...iconDetails}type settings{__typename routeOverrideEnabled}theme{__typename themeKey}lookAndFeel{__typename headings{__typename key value}menus{__typename hoverOrFocus{__typename key value}color}header{__typename backgroundColor button{__typename backgroundColor color}primaryNavigation{__typename color hoverOrFocus{__typename key value}}secondaryNavigation{__typename color hoverOrFocus{__typename key value}}search{__typename backgroundColor color}}content{__typename screen{__typename background backgroundColor backgroundImage backgroundPosition backgroundSize backgroundRepeat backgroundOrigin backgroundClip backgroundAttachment backgroundBlendMode layer{__typename background backgroundColor backgroundImage backgroundPosition backgroundSize backgroundRepeat backgroundOrigin backgroundClip backgroundAttachment backgroundBlendMode width height}gutterTop gutterRight gutterBottom gutterLeft}container{__typename background backgroundColor backgroundImage backgroundPosition backgroundSize backgroundRepeat backgroundOrigin backgroundClip backgroundAttachment backgroundBlendMode padding borderRadius}header{__typename background backgroundColor backgroundImage backgroundPosition backgroundSize backgroundRepeat backgroundOrigin backgroundClip backgroundAttachment backgroundBlendMode padding borderRadius}body{__typename background backgroundColor backgroundImage backgroundPosition backgroundSize backgroundRepeat backgroundOrigin backgroundClip backgroundAttachment backgroundBlendMode padding borderRadius}}}metadata{__typename labels{__typename nodes{__typename prefix name id}}}operations{__typename operation targetType}}}}fragment iconDetails on Icon{__typename path width height isDefault}";function Gt(e){return(0,wt.I)({query:Wt,variables:{spaceKey:e}})}const Vt="query InlineCommentsQuery($pageId:ID!$isPoweredByConfluenceMobileEnabled:Boolean=false$isUnreadCommentsEnabled:Boolean=false){content(id:$pageId){__typename nodes{__typename id type space{__typename id}operations{__typename operation targetType}}}comments(pageId:$pageId type:UNRESOLVED depth:ROOT first:1000){__typename nodes{__typename ...inlineCommentFragment replies{__typename ...inlineCommentFragment commentSource@include(if:$isPoweredByConfluenceMobileEnabled)readStatus@include(if:$isUnreadCommentsEnabled)}commentSource@include(if:$isPoweredByConfluenceMobileEnabled)readStatus@include(if:$isUnreadCommentsEnabled)}}}fragment inlineCommentFragment on Comment{__typename id body(representation:ATLAS_DOC_FORMAT){__typename value}contentStatus links{__typename webui}location{__typename ...on InlineComment{type inlineMarkerRef inlineResolveProperties{__typename resolvedTime resolvedUser}}}parentId permissions{__typename isEditable isRemovable isResolvable}version{__typename when number}author{__typename displayName profilePicture{__typename path}permissionType ...on KnownUser{accountId}...on User{accountId}}}";const Ht="query ScreenQuery($spaceKey:String!){space(key:$spaceKey){__typename id homepage{__typename id}}}";function Qt(e){return(0,wt.I)({query:Ht,variables:{spaceKey:e}})}const zt=(e,t,n)=>(0,wt.I)({query:"query ContentPrerequisitesQuery($contentId:ID!$missingSpaceKey:Boolean=false$spaceKey:String){content(id:$contentId){__typename nodes{__typename id type space{__typename id key}}}space(key:$spaceKey)@skip(if:$missingSpaceKey){__typename id name}}",context:n,errorPolicy:"all",variables:{contentId:e,missingSpaceKey:!t,spaceKey:t}}),Yt=(e,t)=>(0,wt.I)({query:"query ContentRedirectQuery($contentId:ID){content(id:$contentId){__typename nodes{__typename id title space{__typename id homepageId key}history{__typename createdDate}}}}",context:t,errorPolicy:"all",variables:{contentId:e}}),Jt=(e,t,n)=>Promise.all([zt(e,t,n),Yt(e,n)]),Xt="query EditButtonQuery($contentId:ID!){content(id:$contentId){__typename nodes{__typename ...ContentOperationsFragment metadata{__typename frontend{__typename fabricEditorSupported embedded collabService}}subType type space{__typename id key}}}}fragment ContentOperationsFragment on Content{__typename id type operations{__typename operation targetType}}";function en(e){return(0,wt.I)({query:Xt,variables:{contentId:e}})}const tn=e=>(0,wt.I)({query:'query SpaceOverviewQuery($spaceKey:String!){space(key:$spaceKey){__typename id name theme{__typename themeKey}icon{__typename path}homepage{__typename id properties(keys:["emoji-title-published"]){__typename nodes{__typename id key value}}}}}',variables:{spaceKey:e}});function nn({spaceKey:e,homepageId:t,context:n,userId:r,isLicensed:o,preloadContentDependencies:s,isDirectionalPaginationEnabled:i=!1}){const a=t=>{const r=[];var o,i;return r.push(Pt({contentId:t,isBlog:!1,context:n,spaceKey:e}).then((({result:r,hasErrors:o})=>o?Jt(t,e,n):s(t,r)))),r.push((o=t,at.run("ssr-app/prepare/preloadQuery/fetch:pageButtons",(async()=>{const e=[en(o),Tt({location:"system.content.button",contentId:o})];return Promise.all(e)})))),r.push((i=t,(0,wt.I)({query:Vt,variables:{pageId:i}}))),Promise.all(r)},c=[tn(e).then((e=>{var n;const r=null==e||null===(n=e.data)||void 0===n||null===(n=n.space)||void 0===n||null===(n=n.homepage)||void 0===n?void 0:n.id;if(r&&r!==t)return a(r)})),Qt(e),Gt(e)];return t&&c.push(a(t)),Promise.all(c)}const rn='query CoverPictureQuery($contentId:ID$status:[String]$draftShareId:String){content(id:$contentId draftShareId:$draftShareId status:$status){__typename nodes{__typename id properties(keys:["cover-picture-id-draft" "cover-picture-id-published"]){__typename nodes{__typename id key value version{__typename number}}}}}}';const on="query EditorContentStateQuery($contentId:ID!$isDraft:Boolean!){singleContent(id:$contentId){__typename id contentState(isDraft:$isDraft){__typename id name color}}availableContentStates(contentId:$contentId){__typename customContentStates{__typename name color id}spaceContentStates{__typename name color id}}}";const sn=(t,n=!0)=>(0,wt.I)({query:'query getDraftContentAppearanceProperty($contentId:ID$status:[String]){content(id:$contentId status:$status){__typename nodes{__typename id ...contentAppearanceDraftFragment}}}fragment contentAppearanceDraftFragment on Content{__typename appearanceDraft:properties(key:"content-appearance-draft"){__typename ...contentAppearanceInnerFragment}}fragment contentAppearanceInnerFragment on PaginatedJsonContentPropertyList{__typename nodes{__typename id key value version{__typename number}}}',variables:(0,e.Z)({contentId:t,status:["current","draft"]},n?{}:{cacheBuster:Date.now()}),fetchPolicy:n?"cache-first":"network-only"}),an="query featureDiscovery{featureDiscovery{__typename pluginKey featureKey userKey date}}",cn='query ConfluenceDraftQuery($contentId:ID!$status:[String]!)@SLA{content(id:$contentId status:$status){__typename nodes{__typename ...contentAppearanceDraftFragment id type status title body{__typename atlas_doc_format{__typename value}}}}}fragment contentAppearanceDraftFragment on Content{__typename appearanceDraft:properties(key:"content-appearance-draft"){__typename ...contentAppearanceInnerFragment}}fragment contentAppearanceInnerFragment on PaginatedJsonContentPropertyList{__typename nodes{__typename id key value version{__typename number}}}',un='query getCollabServiceWithMigrationQuery($contentId:ID$draftShareId:String)@SLA{content(id:$contentId status:["current" "draft"]draftShareId:$draftShareId){__typename nodes{__typename id metadata{__typename frontend{__typename collabServiceWithMigration}}}}}',ln="query NativeCollabQuery($contentId:ID$draftShareId:String$status:[String])@SLA{content(id:$contentId draftShareId:$draftShareId status:$status){__typename nodes{__typename id type status version{__typename number ncsStepVersion by{__typename type ...on KnownUser{accountId}...on User{accountId}}}history{__typename createdBy{__typename displayName}}space{__typename id name}labels{__typename nodes{__typename id name}}}}}",dn="query NativeCollabProviderQuery($accountId:ID){user(id:$accountId){__typename id displayName photos{__typename value isPrimary}}}";const pn=we("load-edit-page");async function hn({userId:t,contentId:n,preloadNativeCollabData:r=!1,shouldPreloadNativeEditorData:o=!1,catchFn:s,isCustomSitesPageTitleFFOn:i=!1}){pn.debug`Calling preloadEditorData ${performance.now()/1e3} for ${{preloadNativeCollabData:r}}`;const a=new URLSearchParams(window.location.search.substring(1)).get("draftShareId")||"",c=[(0,wt.I)({query:an}),sn(n,o)];r&&n&&c.push(function(e,t){return(0,wt.I)({query:cn,variables:{contentId:e,status:["draft"]},fetchPolicy:t?"cache-first":"network-only"})}(n,o),function(t,n,r){return(0,wt.I)({query:un,variables:(0,e.Z)({contentId:t},n&&{draftShareId:n}),fetchPolicy:r?"cache-first":"network-only",context:{single:"true"}})}(n,a,o),function(t,n,r,o){return(0,wt.I)({query:ln,variables:(0,e.Z)((0,e.Z)({contentId:t},n&&{draftShareId:n}),{},{status:null!=o?o:["draft","current"]}),fetchPolicy:r?"cache-first":"network-only",context:{single:"true"}})}(n,a,o),function(e,t){return(0,wt.I)({query:dn,variables:{accountId:e},fetchPolicy:t?"cache-first":"network-only",context:{single:"true"}})}(t,o)),c.push(((e,t,n)=>(0,wt.I)({query:'query getEmojiTitleProperty($contentId:ID$status:[String]$draftShareId:String$skipPublishedFragment:Boolean!){content(id:$contentId draftShareId:$draftShareId status:$status){__typename nodes{__typename id emojiTitlePublished:properties(key:"emoji-title-published")@skip(if:$skipPublishedFragment){__typename ...emojiTitleInnerFragment}emojiTitleDraft:properties(key:"emoji-title-draft"){__typename ...emojiTitleInnerFragment}}}}fragment emojiTitleInnerFragment on PaginatedJsonContentPropertyList{__typename nodes{__typename id key value version{__typename number}}}',variables:{contentId:e,draftShareId:t,status:["current","draft"],skipPublishedFragment:!1},fetchPolicy:n?"cache-first":"network-only"}))(n,a,o),function(e,t,n){return(0,wt.I)({query:rn,variables:{contentId:e,status:["current","draft"],draftShareId:t},fetchPolicy:n?"cache-first":"network-only"})}(n,a,o),function(e,t){return(0,wt.I)({query:on,variables:{contentId:e,isDraft:!0},fetchPolicy:t?"cache-first":"network-only"})}(n,o)),i&&c.push((async({contentId:e,draftShareId:t})=>{const n={contentId:e,status:["current","draft"],draftShareId:t};return Promise.all([(0,wt.I)({query:'query TitleContentPropertyEditorQuery($contentId:ID$status:[String]$draftShareId:String){content(id:$contentId status:$status draftShareId:$draftShareId){__typename nodes{__typename id pageTitleDraft:properties(key:"page-title-property-draft"){__typename ...pageTitleInnerFragment}}}}fragment pageTitleInnerFragment on PaginatedJsonContentPropertyList{__typename nodes{__typename id key value version{__typename number}}}',variables:n})])})({contentId:n,draftShareId:a})),await Promise.all(c.map((e=>s?null==e?void 0:e.catch(s):e))),pn.debug`preloadEditorData complete ${performance.now()/1e3}`}const mn={EDITOR_ONBOARDING_ELIGIBLE_NEW:"editor-state:editorOnboardingEligiblity",EDITOR_VISITED:"editor-state:editorVisited",WAS_DRAFT_BANNER_SEEN:"editor-state:wasDraftBannerSeen",IS_DRAFT_BANNER_VISIBLE:"editor-state:isDraftBannerVisible",WAS_TEMPLATE_BANNER_SEEN:"editor-state:wasTemplateBannerSeen",IS_TEMPLATE_BANNER_VISIBLE:"editor-state:isTemplateBannerVisible",HAS_USER_PUBLISHED:"editor-state:hasUserPublished",SUCCESS_FLAG_SEEN:"editor-state:successFlagCompleted",RECENT_SPOTLIGHT_OPEN:"editor-state:recentSpotlightOpen",RECENT_SPOTLIGHT_SEEN:"editor-state:recentSpotlightCompleted",EDITOR_TUTORIAL_SUCCESS_FLAG_SEEN:"editor-state:editorTutorialSuccessFlagCompleted",IMPORT_RELEVANCE_ELIGIBLE_USER:"editor-state:importRelevanceEligibleNewUser",IMPORT_RELEVANCE_ACCORDION_STATE:"editor-state:importRelevanceAccordionState",WAS_EDITOR_CONVERSION_DIALOG_SEEN:"editor-state:wasEditorConversionModalSeen"},fn="query GetOnboardingState($key:[String]){onboardingState(key:$key){__typename key value}}";let yn="undefined"!=typeof window&&window.__SSR_FEATURE_FLAGS__||{};function gn(e){return e in yn?yn[e]:null}const _n={PERSISTED_LEFT_SIDEBAR_WIDTH:"persisted.left.sidebar.width",PERSISTED_LEFT_SIDEBAR_COLLAPSED:"persisted.left.sidebar.collapsed",PERSISTED_GROWTH_PERSISTENT_UPGRADE_PRETRIAL_BANNER:"persisted.growth.persistent.upgrade.preTrial.banner",PERSISTED_WHITEBOARD_EAP_BANNER_CLOSED:"persisted.whiteboard-eap-banner.closed",PERSISTED_WHITEBOARD_GA_BANNER_CLOSED:"persisted.whiteboard-ga-banner.closed",PERSISTED_GUEST_SURVEY_NEXT_TIME_TO_SHOW:"persisted.guest.survey.next.time.to.show",PERSISTED_OVERRIDE_FEATURE_FLAGS:"persisted.enterprise-experience.override.feature.flags",PERSISTED_ADMIN_ANNOUNCEMENT_BANNER:"persisted.admin.announcement.banner",PERSISTED_STORAGE_ENFORCEMENT_BANNER:"persisted.storage.enforcement.banner",PERSISTED_RESTRICTIONS_DIALOG_PUBLIC_LINKS_MODAL:"persisted.restrictions.dialog.public.links.modal",PERSISTED_SHARE_DIALOG_PUBLIC_LINKS_TOGGLE_ON_MODAL:"persisted.share.dialog.public.links.toggle.on.modal",PERSISTED_SHARE_DIALOG_PUBLIC_LINKS_TOGGLE_OFF_MODAL:"persisted.share.dialog.public.links.toggle.off.modal",PERSISTED_USER_THEME_PREFERENCE:"persisted.ecosystem.user.theme.preference",PERSISTED_PREMIUM_FEATURE_HIGHLIGHT:"persisted.premium.feature.highlight"},vn=/[^A-Za-z0-9\-._\/]/g,bn=e=>{const t=[];let n=`localStorage/atlassian.${e}.frontend`;return n=n.replace(vn,"_"),Object.keys(_n).forEach((e=>t.push(`${n}.${_n[e]}`))),t},In="query LocalStorageQuery($stringKeys:[String]!$booleanKeys:[String]!){localStorage{__typename stringValues(keys:$stringKeys){__typename key value}booleanValues(keys:$booleanKeys){__typename key value}}}";const En="\n  query LocalStorageQuery($stringKeys: [String]!, $booleanKeys: [String]!) {\n    localStorage {\n      stringValues(keys: $stringKeys) {\n        key\n        value\n      }\n      booleanValues(keys: $booleanKeys) {\n        key\n        value\n      }\n    }\n  }\n";async function wn(e,t){return async function(e,t){if(window.__REMOTE_LOCAL_STORAGE__)return window.__REMOTE_LOCAL_STORAGE__;let n=null;try{if(t&&e){const t={stringKeys:bn(e),booleanKeys:[]},o=window.GLOBAL_APOLLO_CLIENT_URI||"/cgraphql",s=await dt(`${o}?q=LocalStorageQuery`,{method:"POST",credentials:"include",headers:{"X-APOLLO-OPERATION-NAME":"LocalStorageQuery","Content-Type":"application/json"},body:JSON.stringify({query:En,variables:t})});if(s.ok){var r;const{data:e}=await s.json();n=null==e||null===(r=e.localStorage)||void 0===r?void 0:r.stringValues}}}catch(o){}return window.__REMOTE_LOCAL_STORAGE__=n}(e,t)}async function Sn(e,t){return gn("confluence.ssr.local.storage.fetch")?wn(e,t):async function(e){if(!e)return;const t={stringKeys:bn(e),booleanKeys:[]};try{return await(0,wt.I)({query:In,variables:t,context:{single:!0}})}catch(n){return}}(e)}let Tn=function(e){return e.ATTACHMENT="ATTACHMENT",e.BLOGPOST="BLOGPOST",e.DATABASE="DATABASE",e.PAGE="PAGE",e.SPACE="SPACE",e.WHITEBOARD="WHITEBOARD",e}({}),kn=function(e){return e.LAST_MODIFIED_DATE="LAST_MODIFIED_DATE",e.TITLE="TITLE",e}({}),An=function(e){return e.ARCHIVED="ARCHIVED",e.CURRENT="CURRENT",e.DRAFT="DRAFT",e}({}),On=function(e){return e.ASC="ASC",e.DESC="DESC",e}({});const Cn=(e,t)=>{if(!e)return;const n=e[t];return Array.isArray(n)?n[0]:n};const xn="InlineHighlightsQuery";function Pn(e){return(0,wt.I)({query:"query InlineHighlightsQuery($pageId:ID!){comments(pageId:$pageId type:UNRESOLVED depth:ROOT first:1000){__typename nodes{__typename id location{__typename ...on InlineComment{type inlineMarkerRef}}replies{__typename id}}}}",variables:{pageId:e}})}function Rn(e,t){const n=[(0,wt.I)({query:"query SpaceViewsSpaceRootQuery($spaceKey:String!){space(key:$spaceKey){__typename id homepage{__typename id}operations{__typename operation targetType}}}",variables:{spaceKey:e}})];return t&&n.push((0,wt.I)({query:"query SpaceViewsPersistenceQuery($spaceKey:String!){userPreferences{__typename spaceViewsPersistence(spaceKey:$spaceKey)}}",variables:{spaceKey:e}})),Promise.all(n)}const Nn="query WhiteboardUnifiedQuery($contentId:ID!$spaceKey:String$includeWhiteboardToken:Boolean!){content(id:$contentId){__typename nodes{__typename id referenceId title operations{__typename operation targetType}hasRestrictions hasViewRestrictions hasInheritedRestrictions space{__typename id name key type}type status ancestors{__typename id type title status}metadata{__typename currentuser{__typename favourited{__typename isFavourite}}}}}spaces(spaceKey:$spaceKey first:10){__typename nodes{__typename id name homepage{__typename id}}}user(current:true){__typename id confluence{__typename space{__typename id}}}paywallStatus(id:$contentId)...WhiteboardTokenFragment@include(if:$includeWhiteboardToken)}fragment WhiteboardTokenFragment on Query{__typename canvasToken(contentId:$contentId){__typename token}contentMediaSession(contentId:$contentId){__typename token{__typename value}configuration{__typename fileStoreUrl}}entitlements{__typename whiteboardFeatures{__typename smartConnectors{__typename isEntitled}smartSections{__typename isEntitled}}}}",Dn="query SpaceQueryWhiteboards($spaceKey:String){space(key:$spaceKey){__typename id name icon{__typename path}homepage{__typename id}}}",$n="query ContentIdByReferenceIdQueryWhiteboards($id:String!){contentIdByReferenceId(referenceId:$id)}";async function Ln(e,t,n){/[-]/.test(e)?await(0,wt.I)({query:$n,variables:{id:e}}):await(0,wt.I)({query:Nn,variables:{contentId:e,spaceKey:t,includeWhiteboardToken:n}})}async function Fn(e){await(0,wt.I)({query:Dn,variables:{spaceKey:e}})}const Zn="query DatabaseUnifiedQuery($contentId:ID$spaceKey:String){content(id:$contentId){__typename nodes{__typename id referenceId title operations{__typename operation targetType}hasRestrictions hasViewRestrictions hasInheritedRestrictions space{__typename id name key type}type status ancestors{__typename id type title status}}}spaces(spaceKey:$spaceKey first:10){__typename nodes{__typename id name homepage{__typename id}}}user(current:true){__typename id confluence{__typename space{__typename id}}}}";async function jn(e,t){await(0,wt.I)({query:Zn,variables:{contentId:e,spaceKey:t}})}async function Mn(e,t,n){0}const Un="query EmbedUnifiedQuery($contentId:ID!$spaceKey:String!){content(id:$contentId){__typename nodes{__typename id title metadata{__typename frontend{__typename embedUrl}}body{__typename dynamic{__typename value}}operations{__typename operation targetType}hasRestrictions hasViewRestrictions hasInheritedRestrictions space{__typename id name key type}type status ancestors{__typename id type title status}}}spaces(spaceKey:$spaceKey first:10){__typename nodes{__typename id name homepage{__typename id}}}user(current:true){__typename id confluence{__typename space{__typename id}}}}";async function Bn(e,t){await(0,wt.I)({query:Un,variables:{contentId:e,spaceKey:t}})}async function Kn(e,t,n){0}async function qn({spaceKey:e}={spaceKey:void 0}){if(e){var t;const n=(t=window).__EXTENSION_MANIFEST_SPACEAWARE__||(t.__EXTENSION_MANIFEST_SPACEAWARE__={});return n[e]||(n[e]=Wn(e)),n[e]}return window.__EXTENSION_MANIFEST__||(window.__EXTENSION_MANIFEST__=Wn()),window.__EXTENSION_MANIFEST__}function Wn(e){return fetch("/wiki/plugins/macrobrowser/browse-macros.action?detailed=true&origin=extension-provider"+(e?`&spaceKey=${e}`:""),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}).then((e=>e.json()))}const Gn=["isMacroContentAndBody"];function Vn(){const e=window.__LEGACY_MACRO_PARAMS__||[];return window.__LEGACY_MACRO_PARAMS__=[],Promise.all(e.map((e=>{let{isMacroContentAndBody:t}=e,n=(0,ke.Z)(e,Gn);const r=t?"query MacroBodyRendererQueryWithTags($adf:String!$containedRender:Boolean=false$contentId:ID$mode:ContentRendererMode=RENDERER){macroBodyRenderer(adf:$adf containedRender:$containedRender contentId:$contentId mode:$mode){__typename value representation mediaToken{__typename token}webResourceDependencies{__typename contexts keys tags{__typename js css}}}}":"query MacroContentRendererQueryWithTags($adf:String!$containedRender:Boolean=false$contentId:ID!$mode:ContentRendererMode=RENDERER){contentRenderer(adf:$adf containedRender:$containedRender contentId:$contentId mode:$mode){__typename html webResourceDependencies{__typename contexts keys tags{__typename js css}}}}";return(0,wt.I)({query:r,variables:n})})))}async function Hn(){return window.__SUPERBATCH_REQUESTED__?Promise.resolve():await(0,wt.I)({query:"query FrontendResourceRenderQuery{internalFrontendResource{__typename resourceList{__typename type url attributes{__typename key value}}}}"})}function Qn({contentId:e,context:t}){return e?(0,wt.I)({query:"query LegacyBridgeQuery($contentId:ID!){page(id:$contentId status:[CURRENT]){__typename id title nearestAncestors(first:1){__typename edges{__typename node{__typename id title}}}}space(pageId:$contentId){__typename id key name type}content(id:$contentId){__typename nodes{__typename id type version{__typename number}operations{__typename operation targetType}}}}",variables:{contentId:e},errorPolicy:"all",context:t}):Promise.resolve({data:null})}const zn=e=>Yn(e)||Xn(e)||er(e)||Jn(e),Yn=e=>{var t;return null===(t=e.message)||void 0===t?void 0:t.includes("Space not found")},Jn=e=>{var t;return null===(t=e.message)||void 0===t?void 0:t.includes("Cannot find space with id:")},Xn=e=>{var t;return null===(t=e.message)||void 0===t?void 0:t.includes("Not permitted to view space with id:")},er=e=>{var t;return null===(t=e.message)||void 0===t?void 0:t.includes("User not permitted to access Confluence")},tr=e=>{var t;const n=window.__GRAPHQL_ERROR_PROCESSOR__;var r;(null==e||null===(t=e.errors)||void 0===t?void 0:t.length)>0&&(null==e||null===(r=e.errors)||void 0===r||r.forEach((e=>{(e=>{var t;return!!e&&(null===(t=e.graphQLErrors)||void 0===t?void 0:t.every(zn))})(e)&&(null==n||n.markErrorAsHandled(e))})));return e};function nr(t,n,r,o,s){return(0,wt.I)({query:s?'query NonRecursivePageTreeQuery($spaceKey:String!$statuses:[GraphQLPageStatus]$ptStatuses:[PTGraphQLPageStatus]$contentId:ID!$paginationLimit:Int$isSuperAdmin:Boolean!){currentPage:page(id:$contentId spaceKey:$spaceKey pageTree:$paginationLimit status:$ptStatuses enablePaging:true){__typename ...PageInfoFragment nearestAncestors{__typename pageInfo{__typename hasNextPage endCursor}nodes{__typename ...PageInfoFragment previousSiblings{__typename ...PageListFragment}followingSiblings{__typename ...PageListFragment}}}previousSiblings{__typename ...PageListFragment}followingSiblings{__typename ...PageListFragment}children{__typename ...PageListFragment}}rootLevelPages:pages(spaceKey:$spaceKey status:$statuses){__typename nodes{__typename ...PageInfoFragment}}space(key:$spaceKey){__typename id homepage{__typename id}operations{__typename operation targetType}}}fragment PageInfoFragment on Page{__typename id title status hasChildren blank hasRestrictions@include(if:$isSuperAdmin)hasInheritedRestrictions@include(if:$isSuperAdmin)type links{__typename webui}properties(keys:["emoji-title-published" "emoji-title-draft" "editor"]){__typename nodes{__typename id key value version{__typename number}}}}fragment PageListFragment on PaginatedPageList{__typename nodes{__typename ...PageInfoFragment}pageInfo{__typename hasNextPage}}':'query PageTreeQuery($spaceKey:String!$statuses:[GraphQLPageStatus]$ptStatuses:[PTGraphQLPageStatus]$contentId:ID!$paginationLimit:Int$nearestAncestorCursor:String$naPreviousSiblingsCursor:String$naFollowingSiblingsCursor:String$previousSiblingsCursor:String$followingSiblingsCursor:String$childrenCursor:String$isSuperAdmin:Boolean!){currentPage:page(id:$contentId spaceKey:$spaceKey pageTree:$paginationLimit status:$ptStatuses enablePaging:true){__typename ...PageInfoFragment nearestAncestors(after:$nearestAncestorCursor){__typename pageInfo{__typename hasNextPage endCursor}nodes{__typename ...PageInfoFragment previousSiblings(after:$naPreviousSiblingsCursor){__typename ...PageListFragment}followingSiblings(after:$naFollowingSiblingsCursor){__typename ...PageListFragment}}}previousSiblings(after:$previousSiblingsCursor){__typename ...PageListFragment}followingSiblings(after:$followingSiblingsCursor){__typename ...PageListFragment}children(after:$childrenCursor){__typename ...PageListFragment}}rootLevelPages:pages(spaceKey:$spaceKey status:$statuses){__typename nodes{__typename ...PageInfoFragment}}space(key:$spaceKey){__typename id homepage{__typename id}operations{__typename operation targetType}}}fragment PageInfoFragment on Page{__typename id title status hasChildren blank hasRestrictions@include(if:$isSuperAdmin)hasInheritedRestrictions@include(if:$isSuperAdmin)type links{__typename webui}properties(keys:["emoji-title-published" "emoji-title-draft" "editor"]){__typename nodes{__typename id key value version{__typename number}}}}fragment PageListFragment on PaginatedPageList{__typename nodes{__typename ...PageInfoFragment}pageInfo{__typename hasNextPage endCursor}}',variables:(0,e.Z)((0,e.Z)({spaceKey:t,isSuperAdmin:r,statuses:n,ptStatuses:n},o&&{contentId:o}),{},{paginationLimit:500})}).then((e=>{tr(e)}))}const rr=async({contentId:e})=>{const t={contentId:e,status:["current","archived"]};return Promise.all([(0,wt.I)({query:'query TitleContentPropertyQuery($contentId:ID$status:[String]){content(id:$contentId status:$status){__typename nodes{__typename id pageTitlePublished:properties(key:"page-title-property-published"){__typename ...pageTitleInnerFragment}}}}fragment pageTitleInnerFragment on PaginatedJsonContentPropertyList{__typename nodes{__typename id key value version{__typename number}}}',variables:t})])},or="confluence.frontend.custom-sites.page-header-and-title";let sr=function(e){return e.CURRENT="CURRENT",e.DRAFT="DRAFT",e}({});const ir=[sr.CURRENT,sr.DRAFT];var ar=i(2),cr=i(6187);function ur(){ur=function(e,t){return new n(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function n(e,r,o){var s=new RegExp(e,r);return t.set(s,o||t.get(e)),(0,cr.Z)(s,n.prototype)}function r(e,n){var r=t.get(n);return Object.keys(r).reduce((function(t,n){var o=r[n];if("number"==typeof o)t[n]=e[o];else{for(var s=0;void 0===e[o[s]]&&s+1<o.length;)s++;t[n]=e[o[s]]}return t}),Object.create(null))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,cr.Z)(e,t)}(n,RegExp),n.prototype.exec=function(t){var n=e.exec.call(this,t);if(n){n.groups=r(n,this);var o=n.indices;o&&(o.groups=r(o,this))}return n},n.prototype[Symbol.replace]=function(n,o){if("string"==typeof o){var s=t.get(this);return e[Symbol.replace].call(this,n,o.replace(/\$<([^>]+)>/g,(function(e,t){var n=s[t];return"$"+(Array.isArray(n)?n.join("$"):n)})))}if("function"==typeof o){var i=this;return e[Symbol.replace].call(this,n,(function(){var e=arguments;return"object"!=(0,ar.Z)(e[e.length-1])&&(e=[].slice.call(e)).push(r(e,i)),o.apply(this,e)}))}return e[Symbol.replace].call(this,n,o)},ur.apply(this,arguments)}const lr=/<script([^>]*)\/*>/gi,dr=ur(/^(["']*)(.*?)\1$/,{value:2}),pr=/\s+/;function hr(e,t=!1){if(t)return Array.isArray(e)?e.map((e=>({src:e}))):[];if("string"!=typeof e)return[];const n=[];for(const[,r]of e.matchAll(lr))n.push(Object.fromEntries(r.split(pr).filter((e=>e)).map((e=>{const t=e.indexOf("=");if(-1!==t){var n,r;const o=e.substring(0,t),s=e.substring(t+1),i=s.match(dr);return[o,null!==(n=null==i||null===(r=i.groups)||void 0===r?void 0:r.value)&&void 0!==n?n:s]}return[e,e]}))));return n}function mr(e){const t=Object.entries(e).map((([e,t])=>t&&e!==t?`${e}="${t}"`:e)).join(" ");return t?` ${t}`:""}class fr{constructor(){(0,g.Z)(this,"resource",void 0),this.resource=""}reset(){this.resource=""}add(e){return this.resource+=e,this}addDeferTags(e){return this.resource+=function(e){return hr(e).map((e=>(e.defer="defer",`<script${mr(e)}><\/script>`))).join("")}(e),this}get(){return this.resource}}var yr=i(9551),gr=i(9668);function _r(e){var t;return null===(t=Object.entries(yr.ZP).find((([,{increasesContrastFor:t}])=>t===e)))||void 0===t?void 0:t[1].id}const vr={light:()=>i.e(334).then(i.bind(i,3586)),"light-future":()=>i.e(338).then(i.bind(i,3960)),"light-increased-contrast":()=>i.e(631).then(i.bind(i,3671)),dark:()=>i.e(903).then(i.bind(i,6180)),"dark-future":()=>i.e(983).then(i.bind(i,4054)),"dark-increased-contrast":()=>i.e(555).then(i.bind(i,4958)),"legacy-light":()=>i.e(25).then(i.bind(i,5155)),"legacy-dark":()=>i.e(214).then(i.bind(i,9304)),spacing:()=>i.e(436).then(i.bind(i,1909)),"typography-adg3":()=>i.e(261).then(i.bind(i,4666)),shape:()=>i.e(210).then(i.bind(i,9333)),"light-new-input-border":()=>i.e(85).then(i.bind(i,2514)),"dark-new-input-border":()=>i.e(942).then(i.bind(i,9753)),"typography-minor3":()=>i.e(682).then(i.bind(i,4033))},br=async e=>{const{default:t}=await vr[e]();return t},Ir=async e=>{let t,n=[];if("all"===e)t=yr.ZI,R("platform.design-system-team.increased-contrast-themes")||(t=t.filter((e=>"light-increased-contrast"!==e&&"dark-increased-contrast"!==e)));else{const r={colorMode:(null==e?void 0:e.colorMode)||yr.KR.colorMode,contrastMode:(null==e?void 0:e.contrastMode)||yr.KR.contrastMode,dark:(null==e?void 0:e.dark)||yr.KR.dark,light:(null==e?void 0:e.light)||yr.KR.light,shape:(null==e?void 0:e.shape)||yr.KR.shape,spacing:(null==e?void 0:e.spacing)||yr.KR.spacing,typography:(null==e?void 0:e.typography)||yr.KR.typography};t=(e=>{const{colorMode:t,contrastMode:n,dark:r,light:o,shape:s,spacing:i,typography:a}=e,c=[o,r],u=[];if("auto"===t)"no-preference"!==n&&R("platform.design-system-team.increased-contrast-themes")&&c.forEach((e=>{const t=_r(e);t&&c.push(t)})),u.push(...c);else if(u.push(e[t]),"no-preference"!==n&&R("platform.design-system-team.increased-contrast-themes")){const n=_r(e[t]);n&&u.push(n)}return[s,i,a].forEach((e=>{e&&u.push(e)})),[...new Set(u)]})(r),n=(e=>{const{colorMode:t}=e,n=[];return R("platform.design-system-team.border-checkbox_nyoiu")&&("auto"===t?(n.push("light-new-input-border"),n.push("dark-new-input-border")):"dark"===t?n.push("dark-new-input-border"):n.push("light-new-input-border")),[...new Set(n)]})(r)}return(await Promise.all([...[...t,...n].map((async e=>{try{return{id:e,attrs:{"data-theme":e},css:await br(e)}}catch(t){return}})),(async t=>{if("all"!==e&&null!=e&&e.UNSAFE_themeOptions&&(0,gr.aP)(null==e||null===(t=e.UNSAFE_themeOptions)||void 0===t?void 0:t.brandColor))try{const{getCustomThemeStyles:t}=await i.e(389).then(i.bind(i,2322));return await t({colorMode:(null==e?void 0:e.colorMode)||yr.KR.colorMode,UNSAFE_themeOptions:null==e?void 0:e.UNSAFE_themeOptions})}catch(n){return}})()])).flat().filter((e=>void 0!==e))};var Er=i(7690);const wr=(e,t)=>{if("auto"!==e&&"auto"!==t)return;return`(() => {${"auto"===e?`\n  try {\n    const darkModeMql = window.matchMedia('(prefers-color-scheme: dark)');\n    const colorMode = darkModeMql.matches ? 'dark' : 'light';\n    document.documentElement.setAttribute('${Er.mw}', colorMode);\n  } catch (e) {}`:""}${R("platform.design-system-team.increased-contrast-themes")&&"auto"===t?`\n  try {\n    const contrastModeMql = window.matchMedia('(prefers-contrast: more)');\n    const contrastMode = contrastModeMql.matches ? 'more' : 'no-preference';\n    document.documentElement.setAttribute('${Er.qN}', contrastMode);\n  } catch (e) {}`:""}})()`},Sr=["light","dark","spacing","typography","shape"],Tr="UNSAFE_themeOptions",kr=e=>void 0!==Sr.find((t=>t===e)),Ar=e=>void 0!==yr.hB.find((t=>t===e)),Or=e=>["light","dark","auto"].includes(e);var Cr=i(1014);const xr=({colorMode:t=yr.KR.colorMode,dark:n=yr.KR.dark,light:r=yr.KR.light,contrastMode:o=yr.KR.contrastMode,shape:s=yr.KR.shape,spacing:i=yr.KR.spacing,typography:a=yr.KR.typography,UNSAFE_themeOptions:c=yr.KR.UNSAFE_themeOptions}={})=>{const u=(l={dark:n,light:r,shape:s,spacing:i,typography:a},Object.entries(l).reduce(((e,[t,n])=>"colorMode"===t&&"string"==typeof n&&Or(n)||t===Tr&&"object"==typeof n||kr(t)&&"string"==typeof n&&Ar(n)?e+""+(e?" ":"")+`${t}:${"object"==typeof n?JSON.stringify(n):n}`:e),""));var l;let d={[Er.Fs]:u,[Er.mw]:"auto"===t?"light":t};if(R("platform.design-system-team.increased-contrast-themes")&&(d=(0,e.Z)((0,e.Z)({},d),{},{[Er.qN]:"auto"===o?"no-preference":o})),c&&(0,gr.aP)(c.brandColor)){const e=JSON.stringify(c),t=(0,Cr.v)(e);d[Er.cF]=t}return d};const Pr=new class{constructor(){(0,g.Z)(this,"errors",void 0),this.errors=[]}submitError(e,t){this.errors.push({error:{message:e.message,stack:e.stack},meta:t})}getErrors(){return this.errors}},Rr=(new fr,new fr,new fr,new class{constructor(){(0,g.Z)(this,"object",null)}set(e){this.object=e}get(){return this.object}},new fr,new fr,new class{constructor(){(0,g.Z)(this,"themeState",void 0),this.themeState={dark:"dark",light:"light",colorMode:"light"}}setThemeStateBasedOnSavedThemeState(t){t&&(this.themeState=(0,e.Z)((0,e.Z)({},this.getThemeState()),t))}getThemeState(){return this.themeState}async getThemeStylesScript(){if(this.getThemeState().colorMode){return(await Ir(this.getThemeState())).map((e=>`<style ${Object.entries(e.attrs).map((([e,t])=>`${e}="${t}"`))}>${e.css}</style>`)).join("")}return""}getSSRAutoColorModeScript(){const e=this.getThemeState().colorMode;return"auto"===e?`<script>${wr(e)}<\/script>`:""}getThemeHtmlAttrsScript(){const e=this.getThemeState();if(e.colorMode){const t=xr(e);"auto"===e.colorMode&&delete t["data-color-mode"];return`try { ${Object.entries(t).map((([e,t])=>`document?.documentElement?.setAttribute("${e}", "${t}");`)).join("")} } catch (e) {}`}return""}},new class{constructor(){(0,g.Z)(this,"banners",[])}registerBanner({name:e,height:t}){this.banners.findIndex((t=>e===t.name))<0&&this.banners.push({name:e,height:t})}getBanners(){return this.banners}},"onboarding-state:"),Nr={ONBOARDING_INTENT_EXPERIENCES_CLOSED:"onboarding-intent-experiences:onboardingIntentExperienceClosed",ONBOARDING_EXPERIENCE_ELIGIBLE:"onboarding-intent-experience:isOnboardingExperienceEligibleUser",ONBOARDING_USER_SKILL_LEVEL:"onboarding-intent-experience:skillLevel",ONBOARDING_INTENT_EXPERIENCES_LAND_NEW_HOME_VIEWED_AT:"onboarding-intent-experiences:onboardingIntentExperienceLandViewedAt",ONBOARDING_INTENT_EXPERIENCES_LAND_NEW_HOME_CLOSED:"onboarding-intent-experiences:onboardingIntentExperienceLandClosed"},Dr={EXPERIMENT_ELIGIBLE:"templates-collection:isTaggedForTemplatesCollectionExperiment",EXPERIMENT_DISMISSED:"templates-collection:isTemplatesSectionDismissed"},$r={LEGACY_ONBOARDING_STATE:`${Rr}legacy`,IS_FOUNDING_ADMIN:`${Rr}isFoundingAdmin`},{LEGACY_ONBOARDING_STATE:Lr}=$r,Fr=e=>(0,wt.I)({query:"query PersonalizationQuery($userId:String!)@experimental{experimentalUserPersonalization(userId:$userId){__typename attributes{__typename name value}}}",variables:{userId:e}}),Zr=(e="")=>e?(0,wt.I)({query:"query SpaceDetailQuery($spaceKey:String$shouldFetchDCT:Boolean=false){space(key:$spaceKey){__typename id dataClassificationTags@include(if:$shouldFetchDCT)}}",variables:{spaceKey:e,shouldFetchDCT:!0,skip:!e}}):Promise.resolve({data:null,loading:!1,error:null}),jr=e=>y.S1.match(e)||y.nM.match(e);function Mr(e){return null!==e}async function Ur(){var e,t,n,r,o,s,i,a;const c=await Et(),u=(null==c||null===(e=c.user)||void 0===e?void 0:e.id)||null,l=(null==c||null===(t=c.user)||void 0===t||null===(t=t.confluence)||void 0===t?void 0:t.accessStatus)||null;return{isLoggedIn:Boolean(u),isLicensed:Boolean(null==c||null===(n=c.user)||void 0===n?void 0:n.confluence),accessStatus:l,userId:u,cloudId:(null==c||null===(r=c.tenant)||void 0===r?void 0:r.cloudId)||null,orgId:(null==c||null===(o=c.organization)||void 0===o?void 0:o.orgId)||void 0,featureFlags:Xe(((null==c||null===(s=c.featureFlags)||void 0===s?void 0:s.nodes)||[]).filter(Mr)).withOverrides,edition:null==c||null===(i=c.tenant)||void 0===i||null===(i=i.editions)||void 0===i?void 0:i.edition,activationId:(null==c||null===(a=c.tenant)||void 0===a?void 0:a.activationId)||null}}let Br=null;const Kr=async e=>Br||(Br=null!=e&&e.query.parentProduct?i.e(663).then(i.bind(i,7056)).then((e=>{e.httpInterceptor()})):Promise.resolve(),Br),qr=window.__MANIFEST_PRELOADER__=async(e,o=Ur)=>{const s=Gr(e);if((null==s?void 0:s.experience)===n||(null==s?void 0:s.experience)===r||(null==s?void 0:s.experience)===t)return await Kr(s),await Promise.all([qn({spaceKey:s.params.spaceKey}),o().then((({featureFlags:e})=>{const t=!!e["confluence.frontend.ecosystem.access.narrrowing"],n=s.params.spaceKey;return t?Zr(n):Promise.resolve({})})),Hn(),Vn()])},Wr=window.__QUERY_PRELOADER__=async(h,m=!1,f=Ur,g,_,v)=>{if(Boolean(bt.get(It)))return Promise.resolve();const b=[],I=Gr(h);await Kr(I);const E=!!(null!=I&&I.query.embedded||null!=I&&I.query.parentProduct),w=null!=I&&I.experience?{headers:{"X-Atl-Experience":I.experience}}:void 0,S=jr(h),T={},k=(e,t)=>{T[e]=!0,at.run(`ssr-app/prepare/preloadQuery/bestEffort:${e}`,t).then((()=>T[e]=!1))},A=async(e,t,n)=>{var r;window.__SSR_MACRO_PRELOAD_TOPX_FAILS__=await(null==v?void 0:v(e,null==t||null===(r=t.data)||void 0===r||null===(r=r.content)||void 0===r?void 0:r.nodes,n,T))};if(!m&&(b.push(Et(w)),b.push((async()=>{try{return await(0,wt.I)({query:"query StatsigBootstrapQuery{frontendExperimentsBootstrap{__typename value}}",context:{single:!0}})}catch(e){return}})()),(null==I?void 0:I.experience)!==d)){b.push((0,wt.I)({query:"query SPAViewContextQuery{spaViewContext{__typename userCanCreateContent isAnonymous homepageUri homepageTitle}siteConfiguration{__typename tenantId siteLogoUrl siteTitle showFrontCover showSiteTitle}isNewUser isSiteAdmin abTestCohorts experimentFeatures}"})),b.push(f().then((({userId:e,isLicensed:t})=>Promise.all([Sn(e,t),kt()])))),b.push((0,wt.I)({query:"query GlobalOperationsQuery{globalOperations{__typename operation targetType}}"}));const e=gn("confluence.ssr.storage-enforcement_0msw5");f().then((({edition:t,isLicensed:n,isLoggedIn:r})=>{const o=null==t?void 0:t.toUpperCase();"PREMIUM"===o?k("AdminAnnouncementBannerQuery",(()=>(0,wt.I)({query:"query AdminAnnouncementBannerQuery{adminAnnouncementBanner{__typename id isDismissible content appearance title updatedAt}}"}))):"FREE"===o&&e&&n&&r&&k("GetCurrentStorageUsageQuery",(()=>(0,wt.I)({query:"query GetCurrentStorageUsageQuery{storage{__typename bytesUsed isStorageEnforcementGracePeriodComplete gracePeriodEndDate}}"})))}))}if(!I)return Promise.resolve();if(I.experience===n){const{spaceKey:e,contentId:t}=I.params,{username:n}=I.query,r=jr(h);b.push(f().then((({userId:n,cloudId:o,isLicensed:s,featureFlags:i,activationId:a})=>{const c=[],u=i["confluence.frontend.space-sidebar-refresh"];(i[or]&&c.push(rr({contentId:t})),r&&!u)||(m||E||c.push(Promise.all([Rn(e,s),nr(e,ir,!1,t,Boolean(i["confluence.frontend.page-tree.directional-pagination"]))])));return Promise.all(c)}))),b.push(f().then((({featureFlags:r,isLicensed:o,userId:s,edition:i})=>Promise.all([Pt({contentId:t,isBlog:Boolean(S),context:w,spaceKey:e}).then((({result:n,hasErrors:o})=>o?Jt(t,e,w):A(t,n,r))),qt({spaceKey:e,contentId:t,bestEffortTask:k,isLicensed:o,userId:s,username:n,edition:i,isLinkInTreeEnabled:Boolean(r["confluence.frontend.link-in-tree"])}),Qn({contentId:t,context:w})])))),b.push(f().then((({featureFlags:e})=>{const n=[];if(null!=I&&I.query.focusedCommentId)e["confluence.ssr.renderer.annotation.provider.inline.comments"]||(k(xn,(()=>Pn(t))),n.push(function(e,t){return(0,wt.I)({query:"query FocusedInlineCommentQuery($commentId:ID!$contentId:ID){content(id:$contentId){__typename nodes{__typename id type space{__typename id}operations{__typename operation targetType}}}comments(commentId:$commentId depth:ALL type:UNRESOLVED){__typename nodes{__typename ancestors{__typename ...focusedInlineCommentFragment replies{__typename ...focusedInlineCommentFragment}}...focusedInlineCommentFragment replies{__typename ...focusedInlineCommentFragment}}}user(current:true){__typename id displayName photos{__typename value isPrimary}}}fragment focusedInlineCommentFragment on Comment{__typename id body(representation:ATLAS_DOC_FORMAT){__typename value}isInlineComment permissions{__typename isEditable isRemovable isResolvable}version{__typename when number}links{__typename webui}author{__typename displayName profilePicture{__typename path}permissionType ...on KnownUser{accountId}...on User{accountId}}}",variables:{commentId:e,contentId:t}})}(null==I?void 0:I.query.focusedCommentId,t)));else{if(E&&(r="inline-comments",!(null==I||null===(o=I.query.initialAllowedFeatures)||void 0===o?void 0:o.indexOf(r))&&"all"!==(null==I?void 0:I.query.initialAllowedFeatures)))return Promise.all(n);k(xn,(()=>Pn(t)))}var r,o;return Promise.all(n)}))),b.push(f().then((({featureFlags:e})=>{const t=!!e["confluence.frontend.ecosystem.access.narrrowing"],n=I.params.spaceKey;if(t)return Zr(n)}))),m||b.push((async e=>await(0,wt.I)({query:"query MediaDownloadTokenQuery($contentId:ID$status:[String]$missingContentId:Boolean=false){content(id:$contentId status:$status)@skip(if:$missingContentId){__typename nodes{__typename id body{__typename atlas_doc_format{__typename mediaToken{__typename token}}}}}mediaConfiguration{__typename clientId fileStoreUrl}}",variables:{contentId:e,status:["current","draft","archived"]}}))(t))}else if(I.experience===r){const{spaceKey:e}=I.params;let t;if(I.query){const e=I.query[y.y4.HOMEPAGE_ID_QUERY_KEY];Array.isArray(e)?t=e[0]:"string"==typeof e&&(t=e)}m||b.push(f().then((({isLicensed:n,featureFlags:r})=>{const o=[];return o.push(Rn(e,n)),t?o.push(nr(e,ir,!1,t,Boolean(r["confluence.frontend.page-tree.directional-pagination"]))):o.push(function(e,t,n,r){return(0,wt.I)({query:'query PageTreeRootLevelPages($spaceKey:String!$statuses:[GraphQLPageStatus]$isSuperAdmin:Boolean!$paginationLimit:Int){rootLevelPages:pages(spaceKey:$spaceKey status:$statuses limit:$paginationLimit){__typename nodes{__typename id hasChildren title status blank hasRestrictions@include(if:$isSuperAdmin)hasInheritedRestrictions@include(if:$isSuperAdmin)properties(keys:["emoji-title-published" "emoji-title-draft" "editor"]){__typename nodes{__typename id key value version{__typename number}}}links{__typename webui}}}space(key:$spaceKey){__typename id homepage{__typename id}operations{__typename operation targetType}}}',variables:{spaceKey:e,statuses:t,isSuperAdmin:n,emojiTitleEnabled:r,paginationLimit:500}}).then((e=>{tr(e)}))}(e,ir,!1,!0)),Promise.all(o)}))),b.push(f().then((({userId:n,featureFlags:r,isLicensed:o})=>nn({spaceKey:e,homepageId:t,context:w,userId:n,isLicensed:o,preloadContentDependencies:(e,t)=>A(e,t,r),isDirectionalPaginationEnabled:Boolean(r["confluence.frontend.page-tree.directional-pagination"])})))),b.push(f().then((({featureFlags:e})=>{const n=!!e["confluence.frontend.ecosystem.access.narrrowing"],r=I.params.spaceKey;if(e[or]&&rr({contentId:t||""}),n)return Zr(r)})))}else if(I.experience===o){const{spaceKey:e,contentId:t}=I.params;m||b.push(f().then((({isLicensed:t})=>Rn(e,t)))),b.push(f().then((({featureFlags:n})=>async function({spaceKey:e,contentId:t,isDirectionalPaginationEnabled:n,includeWhiteboardToken:r=!1}){const o=[Ln(t,e,r),Fn(e)];return Promise.all(o)}({spaceKey:e,contentId:t,isDirectionalPaginationEnabled:Boolean(n["confluence.frontend.page-tree.directional-pagination"]),includeWhiteboardToken:Boolean(n["confluence.frontend.whiteboard.asap-token-via-graphql"])}))))}else if(I.experience===s){const{spaceKey:e,contentId:t}=I.params;m||b.push(f().then((({isLicensed:t})=>Rn(e,t)))),b.push(f().then((({featureFlags:n})=>async function(e,t,n){return Promise.all([jn(t,e),Mn()])}(e,t,Boolean(n["confluence.frontend.page-tree.directional-pagination"])))))}else if(I.experience===a){const{spaceKey:e,contentId:t}=I.params;m||b.push(f().then((({isLicensed:t})=>Rn(e,t)))),b.push(f().then((({featureFlags:n})=>async function(e,t,n){return Promise.all([Bn(t,e),Kn()])}(e,t,Boolean(n["confluence.frontend.page-tree.directional-pagination"])))))}else if(I.experience===t)m||f().then((({featureFlags:e,isLicensed:t,userId:n})=>{const r=[],o=Boolean(e["confluence.frontend.fabric.editor.initial.preload"]),s=Boolean(e[or]);if(o){const{contentId:e}=I.params;r.push(hn({userId:n,contentId:e,preloadNativeCollabData:!0,shouldPreloadNativeEditorData:!1,isCustomSitesPageTitleFFOn:s}))}t&&r.push((0,wt.I)({query:fn,variables:{key:Object.values(mn)}}));const i=!!e["confluence.frontend.ecosystem.access.narrrowing"],a=I.params.spaceKey;i&&r.push(Zr(a)),b.push(Promise.all(r))}));else if(I.experience===c){b.push(Promise.all([f(),i.e(2).then(i.bind(i,1166))]).then((([{featureFlags:e,userId:t,cloudId:n,isLicensed:r,accessStatus:o,edition:s,activationId:i},a])=>{const c="ANONYMOUS_ACCESS"!==o&&"UNLICENSED_AUTHENTICATED_ACCESS"!==o,u=[],l=(null==o||"LICENSED_ADMIN_ACCESS"===o)&&"experiment"===e["confluence.frontend.active.discovery.for.premium.features"]&&"standard"===(null==s?void 0:s.toLowerCase());r&&c&&u.push(a.preloadHome({cloudId:n,isLicensed:r,userId:t,matchParams:I.params,egressConsentFlowEnabled:!0,bestEffortTask:k,isMyVisitedSpacesEnabled:Boolean(e["confluence.frontend.recently-viewed-plugin.spaces"]),isWhiteboardViewedEnabled:Boolean(e["confluence.frontend.whiteboard.enable"]),isDatabaseEnabled:Boolean(e["confluence.frontend.databases.recents"]),isHomeRefreshEnabled:Boolean(e["confluence.frontend.home-visual-refresh"]),isHomePageUpsellEnabled:l,activationId:i,isWorkspaceARIEnabled:Boolean(e["confluence.frontend.ecosystem.forge.use.workspace.ari"])}));return!!e["confluence.frontend.ecosystem.access.narrrowing"]&&u.push((0,wt.I)({query:"query PersonalSpaceDetailQuery{user(current:true){__typename id confluence{__typename space{__typename id key dataClassificationTags}}}}"})),Promise.all(u)}))),f().then((({userId:t})=>{k("IntentBasedOnboardingQuery",(()=>(({userId:t})=>t?Promise.all([Fr(t),(0,wt.I)({query:fn,variables:{key:Object.values((0,e.Z)((0,e.Z)({},Nr),$r))}}),(0,wt.I)({query:"query GetLicensedProducts{tenantContext{__typename licensedProducts{__typename licenseStatus productKey}}}"})]):Promise.resolve())({userId:t})))}));gn("confluence.ssr.template-collections_q0gka")&&f().then((({userId:t})=>k("CreateFromTemplateQuery",(()=>(({userId:t})=>t?Promise.all([Fr(t),(0,wt.I)({query:fn,variables:{key:Object.values((0,e.Z)((0,e.Z)({},Dr),$r))}}),(0,wt.I)({query:"query GetTeamQuery{user{__typename id team confluence{__typename hasPersonalSpace space{__typename id key}}}}"})]):Promise.resolve())({userId:t})))))}else if(I.experience===u)b.push(f().then((({featureFlags:t,userId:n,isLicensed:r,isLoggedIn:o})=>(({spaceKey:t,queryParams:n,userId:r,isLicensed:o,isLoggedIn:s,spaceId:i="",isWhiteboardEnabled:a=!1})=>{const c=Cn(n,"pagesFilter"),u={first:24,maxNumberOfResults:12,searchText:Cn(n,"text")||"",filters:(0,e.Z)((0,e.Z)((0,e.Z)({spaces:{spaceKeys:[t]},titleMatchOnly:{titleMatchOnly:!0}},"worked-on"===c&&r&&o&&{contributors:{accountIds:[r]}}),"starred"===c&&o&&{labels:[{namespace:"MY",name:"favourite"}]}),{},{statuses:{statuses:[An.CURRENT,An.DRAFT]}}),sortBy:[{field:kn.LAST_MODIFIED_DATE,order:On.DESC}],isLicensed:Boolean(o),includeRecommended:!1,spaceId:i,scopes:a?[Tn.PAGE,Tn.WHITEBOARD]:[Tn.PAGE]};return Promise.all([(0,wt.I)({query:'query SpacePagesQuery($searchText:String!$filters:ConfluenceSearchFilters!$first:Int!$maxNumberOfResults:Int!$token:String$sortBy:[ConfluenceContentSortField!]$isLicensed:Boolean!$includeRecommended:Boolean=false$spaceId:String=""$scopes:[ConfluenceContentSearchScope!]!){confluenceContentSearch(query:$searchText scopes:$scopes filters:$filters first:$first token:$token sort:$sortBy sessionAttributes:{experience:"confluence.spacePages"}){__typename nodes{__typename ...PageCardSearchResult}totalCount pageInfo{__typename hasNextPage nextPageToken}}objectRecommendations(context:{containerId:$spaceId product:"confluence"}modelRequestParams:{experience:"ConfSpacePages" caller:"confluence"}maxNumberOfResults:$maxNumberOfResults)@include(if:$includeRecommended){__typename nodes{__typename id content{__typename id title type subType status blank excerpt(length:372)links{__typename webui editui}emoji:properties(keys:["emoji-title-published" "emoji-title-draft"]){__typename nodes{__typename id key value}}history{__typename createdBy{__typename profilePicture{__typename path}displayName ...on KnownUser{accountId}...on User{accountId}}ownedBy{__typename profilePicture{__typename path}displayName ...on KnownUser{accountId}...on User{accountId}}}metadata{__typename lastModifiedDate currentuser{__typename favourited{__typename isFavourite}}comments{__typename commentsCount}}likes{__typename count}version{__typename by{__typename profilePicture{__typename path}displayName ...on KnownUser{accountId}...on User{accountId}}}}}}}fragment PageCardSearchResult on ConfluenceSearchResult{__typename ...on ConfluenceContentSearchResult@include(if:$isLicensed){watchDialogContent:content{__typename ...WatchDialogContentFragment}}...on ConfluenceContentSearchResult{id title url excerpt lastModified{__typename value}content{__typename id type subType status blank links{__typename editui}emoji:properties(keys:["emoji-title-published" "emoji-title-draft"]){__typename nodes{__typename id key value}}history{__typename createdBy{__typename profilePicture{__typename path}displayName ...on KnownUser{accountId}...on User{accountId}}ownedBy{__typename profilePicture{__typename path}displayName ...on KnownUser{accountId}...on User{accountId}}}metadata{__typename currentuser{__typename favourited{__typename isFavourite}}comments{__typename commentsCount}}likes{__typename count}version{__typename by{__typename profilePicture{__typename path}displayName ...on KnownUser{accountId}...on User{accountId}}}}}}fragment WatchDialogContentFragment on Content{__typename id currentUserIsWatching type space{__typename id key currentUser{__typename isWatched isWatchingBlogs}operations{__typename operation targetType}}}',variables:u}),...i?[]:[(0,wt.I)({query:"query PagesSpaceIdQuery($spaceKey:String){space(key:$spaceKey){__typename id}}",variables:{spaceKey:t}})],...s?[(0,wt.I)({query:"query SpacePagesPersistenceQuery($spaceKey:String!){userPreferences{__typename spacePagesDisplayView(spaceKey:$spaceKey)spacePagesSortView(spaceKey:$spaceKey){__typename field order}}}",variables:{spaceKey:t}})]:[]])})({spaceKey:I.params.spaceKey,queryParams:I.query,userId:n,isLicensed:r,isLoggedIn:o,spaceId:"",isWhiteboardEnabled:Boolean(t["confluence.frontend.whiteboard.enable"])}))));else if(I.experience===p){const{spaceKey:e,contentId:t}=I.params;t&&b.push(Jt(t,e,w))}else if(I.experience===l){const e=I.params.spaceKey;b.push((({spaceKey:e})=>{const t={first:24,spaceKey:e,statuses:["current","draft"]};return Promise.all([(0,wt.I)({query:'query SpaceBlogs($spaceKey:String!$first:Int$statuses:[String]$after:String){content(spaceKey:$spaceKey type:"blogpost" first:$first orderby:"history.createdDate desc" after:$after status:$statuses){__typename pageInfo{__typename hasNextPage endCursor}count nodes{__typename id title type status blank editorVersion:properties(key:"editor"){__typename nodes{__typename value}}properties(keys:["emoji-title-published" "emoji-title-draft"]){__typename nodes{__typename id key value}}excerpt version{__typename by{__typename profilePicture{__typename path}displayName ...on KnownUser{accountId}...on User{accountId}}}history{__typename createdDate createdBy{__typename profilePicture{__typename path}displayName ...on KnownUser{accountId}...on User{accountId}}}links{__typename webui editui}likes{__typename count}metadata{__typename lastModifiedDate currentuser{__typename favourited{__typename isFavourite}}comments{__typename commentsCount}}}}}',variables:t})])})({spaceKey:e})),b.push(f().then((({featureFlags:t})=>{const n=Boolean(t["confluence.frontend.page-tree.directional-pagination"]);tn(e).then((({data:t})=>{var r;const o=(null==t||null===(r=t.space)||void 0===r||null===(r=r.homepage)||void 0===r?void 0:r.id)||"";return nr(e,ir,!1,o,n)}))}))),b.push(f().then((({isLoggedIn:t})=>(({spaceKey:e,isLoggedIn:t})=>Promise.all([...t?[(0,wt.I)({query:"query SpaceBlogsPersistenceQuery($spaceKey:String!){userPreferences{__typename spacePagesDisplayView(spaceKey:$spaceKey)}}",variables:{spaceKey:e}})]:[]]))({spaceKey:e,isLoggedIn:t}))))}return Promise.all(b).then((()=>T)).catch((e=>{null==Pr||Pr.submitError(e,{attribution:"backbone"})}))};function Gr(i){let h,m;return(h=(e=>y.SM.match(e)||jr(e))(i))?m=n:(h=(e=>y.At.match(e))(i))?m=o:(h=(e=>y.y4.match(e)||y.RI.match(e))(i))?m=r:(h=(e=>y.tH.match(e)||y.ts.match(e)||y.Ch.match(e))(i))?m=c:(h=(e=>y.uV.match(e)||y.tz.match(e))(i))?m=t:(h=(e=>y.LH.match(e))(i))?m=d:(h=(e=>y.dd.match(e))(i))?m=u:(h=(e=>y.km.match(e))(i))?m=p:(h=(e=>y.N4.match(e))(i))?m="edit-page-embed":(h=(e=>y.$R.match(e))(i))?m=l:(h=(e=>y.DN.match(e))(i))?m=s:(h=(e=>y.aY.match(e))(i))&&(m=a),h&&(0,e.Z)((0,e.Z)({},h),{},{experience:m})}window.performance.mark("CFP-63.query-preloader");if(!Boolean(document.querySelector('meta[http-equiv="Refresh"]'))){const e=window.location.toString();qr(e),window.__APOLLO_STATE__||Wr(e)}})()})();
//# sourceMappingURL=query-preloader.Uc9XevDjas.js.map