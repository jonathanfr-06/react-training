(self._cf=self._cf||[]).push([[37330,87230,90100],{682564:(e,t,n)=>{var i=n(859126),a=n(576083),o=n(143637),r=n(507514),s=n(342009),d=n(200978);e.exports=function(e,t,n,l){var g=-1,c=a,u=!0,p=e.length,h=[],f=t.length;if(!p)return h;n&&(t=r(t,s(n))),l?(c=o,u=!1):t.length>=200&&(c=d,u=!1,t=new i(t));e:for(;++g<p;){var m=e[g],v=null==n?m:n(m);if(m=l||0!==m?m:0,u&&v==v){for(var b=f;b--;)if(t[b]===v)continue e;h.push(m)}else c(t,v,l)||h.push(m)}return h}},802311:(e,t,n)=>{var i=n(957271),a=n(217567),o=n(580320),r=n(35371),s=n(658849),d=n(699313),l=o((function(e){var t=d(e);return s(t)&&(t=void 0),r(i(e,1,s,!0),a(t,2))}));e.exports=l},335097:(e,t,n)=>{var i=n(35371);e.exports=function(e){return e&&e.length?i(e):[]}},679552:(e,t,n)=>{var i=n(682564),a=n(580320),o=n(658849),r=a((function(e,t){return o(e)?i(e,t):[]}));e.exports=r},8152:(e,t,n)=>{"use strict";n.d(t,{m:()=>i});const i=(0,n(940155).ZR)({__loadable_id__:"Yne4u",name:"EmptySidebarCollapsibleSectionLoader",loader:async()=>(await Promise.all([n.e(12705),n.e(56429)]).then(n.bind(n,541494))).EmptySidebarCollapsibleSectionContainer})},71026:(e,t,n)=>{"use strict";n.d(t,{t:()=>i});const i=e=>{var t;const n=null==e||null===(t=e.properties)||void 0===t||null===(t=t.nodes)||void 0===t?void 0:t.find((e=>"editor"===(null==e?void 0:e.key))),i=((null==n?void 0:n.value)||"").replace(/['"]+/g,"");return"v1"!==i&&"v2"!==i?"":i}},340536:(e,t,n)=>{"use strict";n.d(t,{v:()=>a});var i=n(570489);const a=({url:e,spaceKey:t,contentType:n,editorVersion:a,contentId:o,bypassIsEnabled:r,fabricEditorSupported:s,noContextPath:d})=>{const l="page"===n,g=l||"blogpost"===n,c=s||"v2"===a,u=e.includes("resumedraft.action");if(g&&c&&u&&r){const n=l?"pages":"blog",a=o,r=e.includes("?")?e.slice(e.indexOf("?")+1):"",s=new URLSearchParams(r).get("draftShareId"),g=s?`draftShareId=${s}`:"";return`${d?"":i.b}/spaces/${t}/${n}/edit-v2/${a}?${g}`}return e}},897785:(e,t,n)=>{"use strict";function i(e){let t=e.offsetTop;for(;e.offsetParent;)t+=(e=e.offsetParent).offsetTop;return t}function a(e,t){if(!e)return!1;if(!(t=t||document.scrollingElement||document.body.parentNode))return!1;const n=e.offsetHeight,a=i(e),o=i(t)+t.scrollTop,r=t.offsetHeight;return a>=o&&a+n<=o+r}function o(e){if(!e||e===document)return null;const t=window.getComputedStyle(e);return e.scrollHeight>e.clientHeight&&"hidden"!==e.style.overflow&&"visible"!==t.overflow?e:o(e.parentNode)}function r(e,t){t=t||o(e),e&&t&&!a(e,t)&&(t.scrollTop=i(e)-i(t)-t.clientHeight/2)}function s(e){return e.getBoundingClientRect()}function d(e,t){const n=t?t.documentElement:window.document.documentElement;if(!e||!n)return;const i=e.getBoundingClientRect(),{top:a,bottom:o}=i,r=n.offsetHeight;return 0<=a&&a<r||0<=o&&o<=r||a<=0&&0<=o&&o>=r}function l(e,t){const n=t?t.documentElement:window.document.documentElement;if(!e||!n)return;const i=e.getBoundingClientRect(),{top:a}=i,o=n.offsetHeight;return 0<=a&&a<o}function g(e,t){let n=document.getElementById(e);if(n||(n=document.createElement("div"),n.setAttribute("id",e),n.setAttribute("style","display: none"),document.body.appendChild(n),n=document.getElementById(e)),n&&(n.innerHTML="",t)){const e=document.createRange().createContextualFragment(t);n.appendChild(e)}}n.d(t,{F1:()=>r,Mm:()=>o,PZ:()=>a,Pi:()=>s,U4:()=>i,VX:()=>d,nX:()=>l,wj:()=>g})},201484:(e,t,n)=>{"use strict";n.d(t,{G:()=>o,R:()=>r});var i=n(654927),a=n.n(i);const o=()=>a().getExperiment("confluence_frontend_edit_in_context").get("isEnabled",!1)||a().getExperiment("confluence_frontend_edit_in_context_hello").get("isEnabled",!1),r=e=>e&&e.getBooleanValue("confluence.frontend.edit-in-context",{default:!1})&&o()},534564:(e,t,n)=>{"use strict";n.d(t,{I:()=>o});var i=n(179640),a=n(201484);const o=()=>(0,i.T)("confluence.frontend.edit-in-context")&&(0,a.G)()},680118:(e,t,n)=>{"use strict";n.d(t,{G7:()=>i,UG:()=>r,eF:()=>o,fB:()=>d,sx:()=>s});const i=e=>{var t;return!!e&&(null===(t=e.graphQLErrors)||void 0===t?void 0:t.every(a))},a=e=>o(e)||s(e)||d(e)||r(e),o=e=>{var t;return null===(t=e.message)||void 0===t?void 0:t.includes("Space not found")},r=e=>{var t;return null===(t=e.message)||void 0===t?void 0:t.includes("Cannot find space with id:")},s=e=>{var t;return null===(t=e.message)||void 0===t?void 0:t.includes("Not permitted to view space with id:")},d=e=>{var t;return null===(t=e.message)||void 0===t?void 0:t.includes("User not permitted to access Confluence")}},503396:(e,t,n)=>{"use strict";n.d(t,{P:()=>r,S:()=>s});var i=n(834232),a=n(944547);const o=(0,i.M)({initialState:{hasMetPublishNudgeConditions:!1},actions:{setHasMetPublishNudgeConditions:e=>({setState:t})=>{t({hasMetPublishNudgeConditions:e})}},name:"useOnboardingEditorState"}),r=(0,a.hs)(o,{selector:e=>({hasMetPublishNudgeConditions:e.hasMetPublishNudgeConditions})}),s=(0,a.aV)(o)},416988:(e,t,n)=>{"use strict";n.d(t,{v:()=>a});var i=n(92560);const a=(e,t,n)=>(0,i.df)(e,"confluence.frontend.onboarding.creator-onboarding",t,n)},798458:(e,t,n)=>{"use strict";n.d(t,{v:()=>Z});var i=n(615919),a=n(872342),o=n(840506),r=n(920839),s=n(767001),d=n(93972),l=n(747472),g=n(142807),c=n(872779),u=n(853212),p=n(747194),h=n(16728),f=n(815815);const m=["as","style"],v=["isMovePageDialog","isSideNavRefreshEnabled"],b=["as","style"],P=["as","style"],I=["as","style"],y=["as","style"];n(694970),n(525286),n(367793),n(156704),n(341645),n(49423),n(937604),n(492989),n(381966),n(842152),n(57090),n(319272),n(172113),n(805308),n(654941),n(724383),n(157476),n(279788),n(362604),n(40592),n(234119),n(456928),n(354326),n(638556),n(325481);const S=(0,d.defineMessages)({childrenCount:{id:"page-tree.children-count-plural",defaultMessage:"{count, plural, one { includes # child page } other { includes # child pages } }"},untitledDraftText:{id:"page-tree.move-dialog.untitled-draft",defaultMessage:"Untitled"}}),E=(0,o.forwardRef)(((e,t)=>{let{as:n="div",style:d}=e,l=(0,a.Z)(e,m);const{isMovePageDialog:g,isSideNavRefreshEnabled:c}=l,u=(0,a.Z)(l,v);return o.createElement(n,(0,i.Z)((0,i.Z)({},u),{},{style:(0,i.Z)((0,i.Z)({},d),{},{"--_u1ossr":(0,r.Z)(`var(--ds-surface-raised, ${h.N0})`),"--_13yvhxg":(0,r.Z)("var(--ds-background-neutral-hovered, rgb(235, 236, 240))")}),ref:t,className:(0,s.Z)(["_1pxwftgi _1yt4lere _1e0c1txw _4cvr1h6o _2rko1l7b _vchhusvi _1bah1yb4",l.isMovePageDialog?"_1bsbkbql":"_1bsbdlvw",l.isSideNavRefreshEnabled?"_11q71n5g":"_11q71rev",l.className])}))}));const C=(0,o.forwardRef)(((e,t)=>{let{as:n="span",style:r}=e,d=(0,a.Z)(e,b);return o.createElement(n,(0,i.Z)((0,i.Z)({},d),{},{style:r,ref:t,className:(0,s.Z)(["_1e0c1txw _1bsb19bv _4t3i1tcg _1bah1h6o _4cvr1h6o _2hwx19bv",d.className])}))}));const x=(0,o.forwardRef)(((e,t)=>{let{as:n="div",style:r}=e,d=(0,a.Z)(e,P);return o.createElement(n,(0,i.Z)((0,i.Z)({},d),{},{style:r,ref:t,className:(0,s.Z)(["_4t3i1l7b _vwz4idpf",d.className])}))}));const w=(0,o.forwardRef)(((e,t)=>{let{as:n="div",style:r}=e,d=(0,a.Z)(e,I);return o.createElement(n,(0,i.Z)((0,i.Z)({},d),{},{style:r,ref:t,className:(0,s.Z)(["_16jlkb7n _1o9zkb7n _i0dl1wug _1reo15vq _18m915vq",d.className])}))}));const T=(0,o.forwardRef)(((e,t)=>{let{as:n="span",style:r}=e,d=(0,a.Z)(e,y);return o.createElement(n,(0,i.Z)((0,i.Z)({},d),{},{style:r,ref:t,className:(0,s.Z)(["_16jlidpf _1o9zidpf _i0dl1wug _18u019bv",d.className])}))}));const Z=({item:e,type:t,childPagesCount:n,isSideNavRefreshEnabled:a})=>{const r=(0,l.Z)().formatMessage(S.untitledDraftText),s="move-page-tree"===t;let d=o.createElement(x,null,"â€¢");return s?d=o.createElement(u.default,{label:"",primaryColor:"var(--ds-icon, #42526E)"}):e.hasChildren&&(d=o.createElement(c.default,{label:"",size:"medium"})),o.createElement(E,{isMovePageDialog:s,isSideNavRefreshEnabled:a},o.createElement(C,null,d),o.createElement(w,null,o.createElement(f.du,{id:e.id.toString(),displayHomePageIcon:!1,displayEmoji:e.data.emoji,displayTitle:e.data.title||r,isDraft:"DRAFT"===e.data.status,contentType:e.data.type,draggableState:"idle",isSelected:!1})),!!n&&n>0&&o.createElement(T,null,o.createElement(p.default,{label:"",size:"small"})," ",o.createElement(g.Z,(0,i.Z)((0,i.Z)({},S.childrenCount),{},{values:{count:n}}))))};Z.displayName="DragPreview"},352418:(e,t,n)=>{"use strict";n.d(t,{_:()=>at});var i=n(547357),a=n(178825),o=n(615919),r=n(840506),s=n(93972),d=n(747472),l=n(142807),g=n(443037),c=n.n(g),u=n(167347),p=n(923444),h=n(486889),f=n(654927),m=n.n(f),v=n(438809),b=n(207688),P=n(582463),I=n(179640),y=n(897785),S=n(940155),E=n(627521),C=n(8152),x=n(416988),w=n(503396),T=n(22710),Z=n(45490),k=n(834232),N=n(565008),$=n(944547),D=n(725886),A=n(335097),M=n.n(A),R=n(955451),L=n(649233),_=n(680118);const F=(e,t,n)=>{const i=e.items[t];return i?{rootId:e.rootId,items:(0,o.Z)((0,o.Z)({},e.items),{},{[t]:(0,o.Z)((0,o.Z)({},i),n)})}:e};var j=n(679552),O=n.n(j),H=n(301777),B=n(959360),K=n(71026),U=n(872342),z=n(802311),W=n.n(z);const q="VIRTUAL_ROOT_ID",Q="VIRTUAL_LOCAL_ROOT_ID",V=["previousSiblings","followingSiblings"],G=e=>{var t;return null!=e&&null!==(t=e.nodes)&&void 0!==t&&t.length?e.nodes.filter((e=>"string"==typeof e||!1===e.blank)):[]},Y=e=>e.map((e=>e.id)),X=(e,t,n)=>{if(!n||!e||!t)return q;const i=e[t];if(!i)return q;switch(t){case n:return n;case Q:return Q;default:return X(e,i.parentId,n)}},J=e=>(!e.hasChildren||Boolean(e.children)&&e.children.length>0)&&!e.hasAdditionalChildren,ee=(e,t)=>(0,D.ZP)(e,(n=>{for(const i in t){const a=e[i],r=t[i];if(a){const e=J(r)?r.children:a.children,t=a.parentId===Q&&(null==r?void 0:r.parentId)||a.parentId;n[i]=(0,o.Z)((0,o.Z)({},r),{},{parentId:t,children:e})}else n[i]=r}return n})),te=e=>{if(!e)return!1;const{previousSiblings:t,followingSiblings:n,children:i,nearestAncestors:a}=e;return a.nodes.filter((e=>e.previousSiblings.pageInfo.hasNextPage||e.followingSiblings.pageInfo.hasNextPage)).length>0||t.pageInfo.hasNextPage||n.pageInfo.hasNextPage||i.pageInfo.hasNextPage},ne=e=>{var t,n;if(!e)return!1;const{previousSiblings:i,nearestAncestors:a}=e;return(null==a||null===(t=a.pageInfo)||void 0===t?void 0:t.hasNextPage)||(null==i||null===(n=i.pageInfo)||void 0===n?void 0:n.hasNextPage)||a.nodes.some((e=>{var t;return null===(t=e.previousSiblings)||void 0===t||null===(t=t.pageInfo)||void 0===t?void 0:t.hasNextPage}))},ie=e=>{var t,n;if(!e)return!1;const{followingSiblings:i,children:a,nearestAncestors:o}=e;return(null==i||null===(t=i.pageInfo)||void 0===t?void 0:t.hasNextPage)||(null==a||null===(n=a.pageInfo)||void 0===n?void 0:n.hasNextPage)||o.nodes.some((e=>{var t;return null===(t=e.followingSiblings)||void 0===t||null===(t=t.pageInfo)||void 0===t?void 0:t.hasNextPage}))},ae=(e,t,n)=>{if(t[e]){const{parentId:i}=t[e];if(i)return n.add(i),ae(i,t,n)}return n},oe=()=>({nodes:[],pageInfo:{hasNextPage:!1}}),re=(e,t,n)=>{const i=[e[n],...e.nearestAncestors.nodes.map((e=>e[n]))];return{children:t<-1?i.shift():{nodes:[],pageInfo:{hasNextPage:!1}},siblings:t<0?i.shift():{nodes:[],pageInfo:{hasNextPage:!1}},ancestorSiblings:[...Array.from({length:Math.max(0,t)}).map(oe),...i]}},se=(e,t)=>{if(!e)return t;const{previousSiblings:n,followingSiblings:i,nearestAncestors:a,children:o}=e,r={},{endCursor:s}=n.pageInfo;r.previousSiblingsCursor=s||t.previousSiblingsCursor;const{endCursor:d}=i.pageInfo;r.followingSiblingsCursor=d||t.followingSiblingsCursor;const{endCursor:l}=a.pageInfo;r.nearestAncestorsCursor=l||t.nearestAncestorsCursor;const{endCursor:g}=o.pageInfo;r.childrenCursor=g||t.childrenCursor;const c=a.nodes.filter((e=>e.previousSiblings.pageInfo.hasNextPage)),u=c.length>0?c[0].previousSiblings.pageInfo.endCursor:null;r.naPreviousSiblingsCursor=u||t.naPreviousSiblingsCursor;const p=a.nodes.filter((e=>e.followingSiblings.pageInfo.hasNextPage)),h=p.length>0?p[0].followingSiblings.pageInfo.endCursor:null;return r.naFollowingSiblingsCursor=h||t.naFollowingSiblingsCursor,r},de=(e,t,n)=>{if(!e)return t;return{previous:"following"===n?t.previous:le(e,t.previous),following:"previous"===n?t.following:ge(e,t.following)}},le=(e,t)=>{var n,i,a;const o=e.nearestAncestors.nodes.length-1,r=o+(null!==(n=null==t?void 0:t.ancestorIndex)&&void 0!==n?n:-1)+1,s=null!==(i=e.nearestAncestors.nodes[o])&&void 0!==i?i:e,d=s.previousSiblings.nodes.length-1;return{id:(null!==(a=s.previousSiblings.nodes[d])&&void 0!==a?a:s).id,ancestorIndex:r}},ge=(e,t)=>{var n;Array.prototype.findLastIndex||(Array.prototype.findLastIndex=function(e,t){for(let n=this.length-1;n>=0;n--)if(e.call(t,this[n],n,this))return n;return-1});const i=e.nearestAncestors.nodes.findLastIndex((e=>e.followingSiblings.nodes.length>0)),a=i+(null!==(n=null==t?void 0:t.ancestorIndex)&&void 0!==n?n:-1)+1;if(i>=0){const t=e.nearestAncestors.nodes[i].followingSiblings.nodes;return{id:t[t.length-1].id,ancestorIndex:a}}const o=e.followingSiblings.nodes.length-1;if(o>=0){return{id:e.followingSiblings.nodes[o].id,ancestorIndex:a}}const r=e.children.nodes.length-1;if(r>=0){return{id:e.children.nodes[r].id,ancestorIndex:a-1}}return{id:e.id,ancestorIndex:a}},ce=e=>{var t;const{text:n,emoji:i,selectedEmoji:a}=(0,B.u2)(e.title,(0,H.xV)(e),(0,H.bm)(e),e.status,void 0,"whiteboard"!==e.type),o=(0,K.t)(e);return{id:e.id,children:G(e.children),parentId:null,hasChildren:e.hasChildren,isExpanded:!1,isChildrenLoading:!1,hasRestrictions:e.hasRestrictions||!1,hasInheritedRestrictions:e.hasInheritedRestrictions||!1,blockedInstructions:"CURRENT"===e.status?void 0:["make-child"],data:{title:n||"",fullTitle:e.title,status:e.status,blank:e.blank,emoji:i,emojiFromProperties:a,webui:null===(t=e.links)||void 0===t?void 0:t.webui,type:e.type,editorVersion:o}}},ue=(e,t={})=>{if(!e)return;const n=G(e.children),i=G(e.nearestAncestors),a=[...G(e.previousSiblings),...G(e.followingSiblings)];return t[e.id]=ce(e),a.forEach((e=>ue(e,t))),i.forEach((e=>ue(e,t))),n.forEach((e=>ue(e,t))),t},pe=(e,t={},n=!0)=>{const i=G(e).map((e=>{const n=ce(e);return t[e.id]=n,n}));return t[q]={id:q,children:Y(i),parentId:null,hasChildren:!0,isExpanded:!0,isChildrenLoading:!1,hasRestrictions:!1,hasInheritedRestrictions:!1,data:{title:"",status:"",blank:!1,webui:""}},t[Q]={id:Q,children:[],parentId:q,hasChildren:!0,isExpanded:!0,isChildrenLoading:!1,hasRestrictions:!1,hasInheritedRestrictions:!1,data:{title:"",status:"",blank:!1,webui:""}},n&&(t=me(t)),t},he=(e,t)=>{let n={};if(!e)return n;n=ue(e,n)||{},n=pe(t,n,!1);const i=G(e.nearestAncestors),a=G(e.children),o=[...[...G(e.previousSiblings)].reverse(),{id:e.id,children:a},...G(e.followingSiblings)];i.forEach(((e,t)=>{let a=[];if(0===t)a=o;else{const e=i[t-1];a=[...[...G(e.previousSiblings)].reverse(),e,...G(e.followingSiblings)]}const r=n[e.id];r&&(r.children=Y(a))})),n[e.id].children=Y(a);let r=o;if(i.length){const e=i[i.length-1];r=[...[...G(e.previousSiblings)].reverse(),e,...G(e.followingSiblings)]}return n[Q].children=Y(r),n=me(n),n},fe=(e,t,n,i,a)=>(0,D.ZP)(e,(e=>{for(const o in e)if(e.hasOwnProperty(o)){const r=e[o];r.isExpanded=n.has(o),r.isChildrenLoading=i.has(o),r.data.isSelected=r.id===t,r.data.isHighlighted=(null==a?void 0:a.includes(r.id))||!1}})),me=e=>(0,D.ZP)(e,(e=>{Object.keys(e).forEach((t=>{const n=e[t];n&&n.children&&n.children.length&&n.children.forEach((t=>{"string"!=typeof t||n.id===Q&&e[t].parentId===q||(e[t].parentId=n.id)}))}))})),ve=(e,t,n)=>(0,D.ZP)(e,(e=>{t.forEach((t=>{if(e[t]&&e[t].parentId&&e[t].parentId!==n){const n=e[e[t].parentId];n.children=O()(n.children,t)}}))})),be=(e,t,n,i,a,r,s=!1)=>{var d;const{currentPage:l,rootLevelPages:g,space:c}=e,u=((e,t)=>e?he(e,t):pe(t))(l,g),p=s?de(l,{}):se(l,{});let h=ee(n.pages,u);const f=null==c||null===(d=c.homepage)||void 0===d?void 0:d.id,m=X(h,null==l?void 0:l.id,f),v=i?c.homepage&&c.homepage.id||"noHomepageFound":void 0;h=((e,t,n,i)=>{if(t=(0,o.Z)({},t),e&&e.id){var a;t[e.id]||t[n].children.some((t=>t===e.id))||(t[n]=(0,o.Z)((0,o.Z)({},t[n]),{},{children:[e.id,...t[n].children]}));const r=(null===(a=t[e.id])||void 0===a?void 0:a.data)||{};t[e.id]=(0,o.Z)((0,o.Z)({},e),{},{data:i?(0,o.Z)((0,o.Z)({},r),e.data):(0,o.Z)((0,o.Z)({},e.data),r)})}return t})(a,h,m,r);const b=((e,t,n)=>{for(const i in e){const n=e[i];n.hasChildren&&J(n)&&n.isExpanded&&t.add(n.id)}n&&(t.add(n.id),n.nearestAncestors.nodes.forEach((e=>{t.add(e.id)})));return t})(h,n.expandedPages,l);return{rootId:m,pages:h,space:c,spaceKey:t,expandedPages:b,isTreeTruncated:te(l),isTreeTruncatedPrevious:ne(l),isTreeTruncatedFollowing:ie(l),cursors:p,initialPages:l,blogPeekRoot:v}},Pe={expandedPages:new Set,loadingPages:new Set,pages:{},space:null,spaceKey:null,rootId:null,isTreeTruncated:!1,isTreeTruncatedPrevious:!1,isTreeTruncatedFollowing:!1,cursors:{},initialPages:{},error:null,blogPeekRoot:void 0,focusedPageId:null,isPageTreeLoading:!0};let Ie=Pe;const ye={initializeState:()=>({setState:e,dispatch:t},{currentPageId:n,spaceKey:i,highlightPages:a=[],initialData:r,isPeekingFromBlogs:s,syntheticItem:d,syntheticItemIsDraft:l,detached:g,isDirectionalPaginationEnabled:c=!1})=>{if((e=>Object.keys(Ie.pages).length>0&&Ie.spaceKey===e)(i)&&!g)e((0,o.Z)((0,o.Z)({},Ie),{},{pages:fe(Ie.pages,n,Ie.expandedPages,Ie.loadingPages,a)}));else if(r&&Object.keys(r).length>0){const e=be(r,i,(0,o.Z)((0,o.Z)({},Pe),{},{expandedPages:new Set,loadingPages:new Set}),s,d,l,c);t(ye.setStateWithUIAttributes(e)),t(ye.setIsPageTreeLoading(!1))}else e((0,o.Z)((0,o.Z)({},Pe),{},{expandedPages:new Set,loadingPages:new Set,spaceKey:i}))},getState:()=>({getState:e})=>e(),derivedStateFromPropsReplacement:()=>({dispatch:e,getState:t},{currentPageId:n,highlightPages:i=[],spaceKey:a})=>{const{pages:o,expandedPages:r,loadingPages:s}=t();e(ye.setStateWithUIAttributes({pages:fe(o,n,r,s,i),spaceKey:a}))},updatePersistedState:()=>({getState:e},{detached:t})=>{if(!t){const t=e();Ie=t}},setStateWithUIAttributes:e=>({setState:t,getState:n,dispatch:i},{currentPageId:a,highlightPages:r=[]})=>{t((0,o.Z)({},e));const{pages:s,expandedPages:d,loadingPages:l}=n();t({pages:fe(s,a,d,l,r)}),i(ye.setFocusPageId())},addLoadingPage:e=>({getState:t,dispatch:n})=>{n(ye.setStateWithUIAttributes({loadingPages:t().loadingPages.add(e)}))},setIsPageTreeLoading:e=>({setState:t})=>{t({isPageTreeLoading:e})},setIsTreeTruncated:e=>({setState:t})=>{t({isTreeTruncated:e})},setIsTreeTruncatedPrevious:e=>({setState:t})=>{t({isTreeTruncatedPrevious:e})},setIsTreeTruncatedFollowing:e=>({setState:t})=>{t({isTreeTruncatedFollowing:e})},deleteLoadingPage:e=>({getState:t,dispatch:n})=>{const{loadingPages:i}=t();i.delete(e),n(ye.setStateWithUIAttributes({loadingPages:i}))},expandPage:(e,t)=>async({getState:n,dispatch:i},{onExpand:a})=>{const{pages:o,expandedPages:r,loadingPages:s,space:d}=n(),l=o[e.id];if(r.has(e.id)||!l.hasChildren)return;const g=[e.id,...ae(e.id,o,r)];if(!J(l)){i(ye.setStateWithUIAttributes({loadingPages:s.add(l.id)}));const e={},o=G(await t(l.id));o.forEach((t=>{e[t.id]=ce(t)}));const r=n().pages,g=r[l.id].children;g.forEach((t=>{e[t]=r[t]}));const c=M()([...Y(o),...g]);let u=ee(r,e);u=(0,D.ZP)(u,(e=>{e[l.id].hasAdditionalChildren=!1})),s.delete(l.id);const p=((e,t,n)=>{const i=(0,D.ZP)(e,(e=>{e[t].children=n})),a=ve(i,n,t);return me(a)})(u,l.id,c);i(ye.setStateWithUIAttributes({loadingPages:s,pages:p})),a&&a(p[l.id],{spaceId:null==d?void 0:d.id})}i(ye.setStateWithUIAttributes({expandedPages:new Set(g)}))},expandSpaceHomepage:()=>({getState:e,dispatch:t})=>{var n;const{pages:i,expandedPages:a,space:o}=e(),r=null==o||null===(n=o.homepage)||void 0===n?void 0:n.id;if(!r)return;const s=i[r];if(a.has(r)||null==s||!s.hasChildren)return;const d=[r,...ae(r,i,a)];t(ye.setStateWithUIAttributes({expandedPages:new Set(d)}))},collapsePage:e=>({getState:t,dispatch:n},{onCollapse:i})=>{const{expandedPages:a,space:o}=t();a.delete(e.id),n(ye.setStateWithUIAttributes({expandedPages:a})),i&&i(e,{spaceId:null==o?void 0:o.id})},movePageInState:(e,t,n,i,a)=>({getState:r,dispatch:s})=>{const{rootId:d,pages:l,expandedPages:g}=r();let c={rootId:d,items:l};const u=c.items[n.parentId];void 0===t.index?(c=((e,t,n)=>{const i=e.items[t],a=i.children.filter((e=>e!==n)),o=a.length>0||Boolean(i.hasAdditionalChildren);return a.length!==i.children.length?F(e,t,{children:a,hasChildren:o,isExpanded:o&&i.isExpanded}):e})(c,t.parentId,e),c=((e,t,n,i)=>{const a=[...e.items[t].children];return a.splice(i,0,n),F(e,t,{children:a,hasChildren:!0})})(c,n.parentId,e,n.index)):c=function(e,t,n){const{items:i}=e,a=(0,o.Z)({},i),r=[...a[t.parentId].children];r.splice(t.index,1),a[t.parentId]=(0,o.Z)((0,o.Z)({},a[t.parentId]),{},{children:r,hasChildren:Boolean(r.length)});const s=a[n.parentId],d=[...s.children],l=i[t.parentId].children[t.index];return void 0===n.index?d.push(l):d.splice(n.index,0,l),a[n.parentId]=(0,o.Z)((0,o.Z)({},a[n.parentId]),{},{children:d,hasChildren:!0,hasAdditionalChildren:s.hasAdditionalChildren||s.hasChildren&&0===s.children.length}),(0,o.Z)((0,o.Z)({},e),{},{items:a})}(c,t,n),0===c.items[t.parentId].children.length&&g.delete(t.parentId),s(ye.setStateWithUIAttributes({pages:c.items,rootId:c.rootId,expandedPages:g})),a&&s(ye.expandPage(u,i))},handleLoadingError:e=>({setState:t},{onLoadError:n})=>{if(!e)return;const i={apolloError:e};((0,R.rw)(e)||(0,_.G7)(e))&&((0,L.Xb)(e),i.isExpected=!0),t({error:i}),n&&n(e,{isExpected:i.isExpected})},updateSinglePage:(e,t)=>({getState:n,dispatch:i})=>{const{pages:a}=n(),r=(0,o.Z)((0,o.Z)({},a[e]),{},{data:(0,o.Z)((0,o.Z)({},a[e].data),t)});i(ye.setStateWithUIAttributes({pages:(0,o.Z)((0,o.Z)({},a),{},{[e]:r})}))},setFocusPageId:()=>({getState:e,setState:t},{currentPageId:n,highlightPages:i=[]})=>{const{blogPeekRoot:a}=e();t({focusedPageId:a||n||i[0]})}},Se=(0,k.M)({initialState:(0,o.Z)((0,o.Z)({},Pe),{},{expandedPages:new Set,loadingPages:new Set}),actions:ye,name:"pageTreeState"}),Ee=(0,N.f)(Se,{onInit:ye.initializeState,onUpdate:ye.derivedStateFromPropsReplacement}),Ce=(0,$.Bi)(Se);var xe=n(278576),we=n(779076);const Te=we.ZP`fragment PageListFragment on PaginatedPageList{nodes{...PageInfoFragment}pageInfo{hasNextPage endCursor}}`,Ze=we.ZP`fragment PageInfoFragment on Page{id title status hasChildren blank hasRestrictions@include(if:$isSuperAdmin)hasInheritedRestrictions@include(if:$isSuperAdmin)type links{webui}properties(keys:["emoji-title-published" "emoji-title-draft" "editor"]){nodes{id key value version{number}}}}`,ke=we.ZP`query PageTreeQuery($spaceKey:String!$statuses:[GraphQLPageStatus]$ptStatuses:[PTGraphQLPageStatus]$contentId:ID!$paginationLimit:Int$nearestAncestorCursor:String$naPreviousSiblingsCursor:String$naFollowingSiblingsCursor:String$previousSiblingsCursor:String$followingSiblingsCursor:String$childrenCursor:String$isSuperAdmin:Boolean!){currentPage:page(id:$contentId spaceKey:$spaceKey pageTree:$paginationLimit status:$ptStatuses enablePaging:true){...PageInfoFragment nearestAncestors(after:$nearestAncestorCursor){pageInfo{hasNextPage endCursor}nodes{...PageInfoFragment previousSiblings(after:$naPreviousSiblingsCursor){...PageListFragment}followingSiblings(after:$naFollowingSiblingsCursor){...PageListFragment}}}previousSiblings(after:$previousSiblingsCursor){...PageListFragment}followingSiblings(after:$followingSiblingsCursor){...PageListFragment}children(after:$childrenCursor){...PageListFragment}}rootLevelPages:pages(spaceKey:$spaceKey status:$statuses){nodes{...PageInfoFragment}}space(key:$spaceKey){id homepage{id}operations{operation targetType}}}${Ze}${Te}`,Ne=we.ZP`fragment PageListFragment on PaginatedPageList{nodes{...PageInfoFragment}pageInfo{hasNextPage}}`,$e=we.ZP`fragment PageInfoFragment on Page{id title status hasChildren blank hasRestrictions@include(if:$isSuperAdmin)hasInheritedRestrictions@include(if:$isSuperAdmin)type links{webui}properties(keys:["emoji-title-published" "emoji-title-draft" "editor"]){nodes{id key value version{number}}}}`,De=we.ZP`query NonRecursivePageTreeQuery($spaceKey:String!$statuses:[GraphQLPageStatus]$ptStatuses:[PTGraphQLPageStatus]$contentId:ID!$paginationLimit:Int$isSuperAdmin:Boolean!){currentPage:page(id:$contentId spaceKey:$spaceKey pageTree:$paginationLimit status:$ptStatuses enablePaging:true){...PageInfoFragment nearestAncestors{pageInfo{hasNextPage endCursor}nodes{...PageInfoFragment previousSiblings{...PageListFragment}followingSiblings{...PageListFragment}}}previousSiblings{...PageListFragment}followingSiblings{...PageListFragment}children{...PageListFragment}}rootLevelPages:pages(spaceKey:$spaceKey status:$statuses){nodes{...PageInfoFragment}}space(key:$spaceKey){id homepage{id}operations{operation targetType}}}${$e}${Ne}`,Ae=we.ZP`query PageTreeRootLevelPages($spaceKey:String!$statuses:[GraphQLPageStatus]$isSuperAdmin:Boolean!$paginationLimit:Int){rootLevelPages:pages(spaceKey:$spaceKey status:$statuses limit:$paginationLimit){nodes{id hasChildren title status blank hasRestrictions@include(if:$isSuperAdmin)hasInheritedRestrictions@include(if:$isSuperAdmin)properties(keys:["emoji-title-published" "emoji-title-draft" "editor"]){nodes{id key value version{number}}}links{webui}}}space(key:$spaceKey){id homepage{id}operations{operation targetType}}}`;var Me=n(950117);const Re=we.ZP`fragment PageListFragment on PaginatedPageList{nodes{...PageInfoFragment}pageInfo{hasNextPage}}`,Le=we.ZP`fragment PageInfoFragment on Page{id title status hasChildren blank hasRestrictions@include(if:$isSuperAdmin)hasInheritedRestrictions@include(if:$isSuperAdmin)links{webui}properties(keys:["emoji-title-published" "emoji-title-draft" "editor"]){nodes{id key value version{number}}}}`,_e=we.ZP`query PageTreePreviousItemsQuery($spaceKey:String!$ptStatuses:[PTGraphQLPageStatus]$contentId:ID!$paginationLimit:Int$isSuperAdmin:Boolean!){currentPage:page(id:$contentId spaceKey:$spaceKey pageTree:$paginationLimit status:$ptStatuses enablePaging:true){...PageInfoFragment nearestAncestors{pageInfo{hasNextPage}nodes{...PageInfoFragment previousSiblings{...PageListFragment}}}previousSiblings{...PageListFragment}}}${Le}${Re}`,Fe=we.ZP`fragment PageListFragment on PaginatedPageList{nodes{...PageInfoFragment}pageInfo{hasNextPage}}`,je=we.ZP`fragment PageInfoFragment on Page{id title status hasChildren blank hasRestrictions@include(if:$isSuperAdmin)hasInheritedRestrictions@include(if:$isSuperAdmin)links{webui}properties(keys:["emoji-title-published" "emoji-title-draft" "editor"]){nodes{id key value version{number}}}}`,Oe=we.ZP`query PageTreeFollowingItemsQuery($spaceKey:String!$ptStatuses:[PTGraphQLPageStatus]$contentId:ID!$paginationLimit:Int$isSuperAdmin:Boolean!){currentPage:page(id:$contentId spaceKey:$spaceKey pageTree:$paginationLimit status:$ptStatuses enablePaging:true){...PageInfoFragment nearestAncestors{pageInfo{hasNextPage}nodes{followingSiblings{...PageListFragment}}}followingSiblings{...PageListFragment}}}${je}${Fe}`;var He=n(122607);const Be={previous:ne,following:ie},Ke={previous:(e,t,n)=>t?(0,D.ZP)(t,(t=>{var i,a;const{previousSiblings:r,nearestAncestors:s}=t,{siblings:d,ancestorSiblings:l}=re(e,n,"previousSiblings");r.nodes=W()(r.nodes,d.nodes,"id"),(i=r.pageInfo).hasNextPage&&(i.hasNextPage=d.pageInfo.hasNextPage);const g=(e=>({nodes:[...e.nearestAncestors.nodes.map((e=>{const{previousSiblings:t,followingSiblings:n}=e,i=(0,U.Z)(e,V);return(0,o.Z)({previousSiblings:{nodes:[],pageInfo:{hasNextPage:!1}},followingSiblings:{nodes:[],pageInfo:{hasNextPage:!1}}},i)}))],pageInfo:e.nearestAncestors.pageInfo}))(e);return s.nodes=W()(s.nodes,g.nodes,"id"),(a=s.pageInfo).hasNextPage&&(a.hasNextPage=g.pageInfo.hasNextPage),l.forEach(((e,t)=>{if(t<s.nodes.length){var n;const i=s.nodes[t];i.previousSiblings.nodes=W()(i.previousSiblings.nodes,e.nodes,"id"),(n=i.previousSiblings.pageInfo).hasNextPage&&(n.hasNextPage=e.pageInfo.hasNextPage)}})),t})):e,following:(e,t,n)=>t?(0,D.ZP)(t,(t=>{var i,a,o,r;const{followingSiblings:s,nearestAncestors:d,children:l}=t,{children:g,siblings:c,ancestorSiblings:u}=re(e,n,"followingSiblings");return s.nodes=W()(null==s?void 0:s.nodes,null==c?void 0:c.nodes,"id"),(i=s.pageInfo).hasNextPage&&(i.hasNextPage=null==c||null===(a=c.pageInfo)||void 0===a?void 0:a.hasNextPage),l.nodes=W()(null==l?void 0:l.nodes,null==g?void 0:g.nodes,"id"),(o=l.pageInfo).hasNextPage&&(o.hasNextPage=null==g||null===(r=g.pageInfo)||void 0===r?void 0:r.hasNextPage),u.forEach(((e,t)=>{var n;const i=null==d||null===(n=d.nodes)||void 0===n?void 0:n[t];var a,o,r;i&&(i.followingSiblings.nodes=W()(null===(a=i.followingSiblings)||void 0===a?void 0:a.nodes,null==e?void 0:e.nodes,"id"),(o=i.followingSiblings.pageInfo).hasNextPage&&(o.hasNextPage=null===(r=e.pageInfo)||void 0===r?void 0:r.hasNextPage))})),t})):e},Ue=({statuses:e})=>{const[t,n]=Ce(),i=(0,I.T)("confluence.frontend.page-tree.directional-pagination"),a=(0,He.y)(ke),s=(0,He.y)(_e),d=(0,He.y)(Oe),l=(0,r.useCallback)(((t,r,g,c,u,p="following",h={children:0,previousSiblings:0,followingSiblings:0})=>{var f,m;const v=(null==c||null===(f=c[p])||void 0===f?void 0:f.id)||void 0,b=(null==c||null===(m=c[p])||void 0===m?void 0:m.ancestorIndex)||void 0,P=i?{previous:s,following:d}[p]:a,I=i?{contentId:v,paginationLimit:Me.Nx}:(0,o.Z)({contentId:t},c);return P((0,o.Z)((0,o.Z)({},I),{},{spaceKey:r,isSuperAdmin:g,statuses:e,ptStatuses:e})).then((e=>{const{data:a,error:o}=e;if(o)n.handleLoadingError(o);else if(a&&Object.keys(a).length>0){let e;const{currentPage:n,rootLevelPages:o}=a;if(i){e=Ke[p](n,u,b);const i=e.children.count,a=e.previousSiblings.count,o=e.followingSiblings.count;if((i>h.children||a>h.previousSiblings||o>h.followingSiblings)&&Be[p](n)){const s=de(n,c,p);return l(t,r,g,s,e,p,{children:i,previousSiblings:a,followingSiblings:o})}}else if(e=((e,t)=>t?(0,D.ZP)(t,(t=>{const{previousSiblings:n,followingSiblings:i,nearestAncestors:a,children:o}=e,{previousSiblings:r,followingSiblings:s,nearestAncestors:d,children:l}=t;r.nodes=W()(r.nodes,n.nodes,"id"),s.nodes=W()(s.nodes,i.nodes,"id"),l.nodes=W()(l.nodes,o.nodes,"id");const g=W()(a.nodes,d.nodes,"id");return d.nodes.forEach((e=>{const t=g.filter((t=>t.id===e.id));if(t.length>0){const{previousSiblings:n,followingSiblings:i}=t[0];n.nodes=W()(e.previousSiblings.nodes,n.nodes,"id"),i.nodes=W()(e.followingSiblings.nodes,i.nodes,"id")}})),d.nodes=g,r.pageInfo.hasNextPage=r.pageInfo.hasNextPage&&n.pageInfo.hasNextPage,s.pageInfo.hasNextPage=s.pageInfo.hasNextPage&&i.pageInfo.hasNextPage,d.pageInfo.hasNextPage=d.pageInfo.hasNextPage&&a.pageInfo.hasNextPage,t})):e)(n,u),te(n)){const i=se(n,c);return l(t,r,g,i,e,p)}return{mergedPages:e,rootLevelPages:o}}}))}),[a,s,d,i,n,e]);return{loadAllPages:l}},ze=we.ZP`fragment PageInfoFragment on Page{id title status blank hasChildren hasRestrictions@include(if:$isSuperAdmin)hasInheritedRestrictions@include(if:$isSuperAdmin)type links{webui}properties(keys:["emoji-title-published" "emoji-title-draft" "editor"]){nodes{id key value version{number}}}}`,We=we.ZP`query PageTreeChildrenQuery($contentId:ID!$statuses:[PTGraphQLPageStatus]$first:Int$after:String$isSuperAdmin:Boolean!){page(id:$contentId status:$statuses){...PageInfoFragment children(first:$first after:$after){nodes{...PageInfoFragment}pageInfo{hasNextPage endCursor}}}}${ze}`,qe=({statuses:e,isSuperAdmin:t})=>{const[n,i]=Ce(),a=(0,He.y)(We),o=(0,r.useCallback)(((n,i=void 0,r={count:0,nodes:[]})=>a({contentId:n,statuses:e,first:Me.P_,after:i,isSuperAdmin:t||!1}).then((e=>{if(e.data){const{children:t}=e.data.page,i=((e,t)=>({nodes:[...e.nodes,...t.nodes]}))(r,t);return t.pageInfo.hasNextPage?o(n,t.pageInfo.endCursor,i):i}}))),[a,t,e]),s=(0,r.useCallback)((()=>{o(n.focusedPageId)}),[o,n.focusedPageId]);return{queryChildren:o,reloadChildren:s}};var Qe=n(600591);const Ve=(e,t,n,i,a,r,s=!1)=>{const d=e?s?De:ke:Ae,l=e?{spaceKey:a,isSuperAdmin:r,statuses:Qe.Mx,ptStatuses:Qe.Mx,contentId:e}:{spaceKey:a,isSuperAdmin:r,statuses:Qe.Mx,emojiTitleEnabled:!0},g=(0,o.Z)({paginationLimit:Me.Nx},l);return{query:d,options:{fetchPolicy:i?"no-cache":n?"network-only":"cache-first",variables:!0!==t&&e?l:g}}},Ge=(e,t,n,i,a,o,s)=>{const{query:d,options:l}=(0,r.useMemo)((()=>Ve(e,t,n,i,o,s,a)),[e,t,n,i,o,s,a]);return(0,u.aM)(d,{skip:!0,fetchPolicy:l.fetchPolicy})},Ye=(e,t,n)=>{if(void 0===n.index)return{pageId:t,parentId:n.parentId};const i=0===n.index,a=e.children.indexOf(t),o=a>-1&&a<n.index,r=i||o?n.index:n.index-1;return{pageId:t,siblingId:String(e.children[r]),positionToSibling:0===n.index?"before":"after"}},Xe=({onMoveInvalid:e,syntheticItem:t,onPageMove:n,queryChildren:i})=>{const[a,o]=Ce();return(0,r.useCallback)(((a,r)=>{var s;const{pages:d,space:l}=o.getState(),g=((e,t,n)=>t&&!c()(e,t)&&n[t.parentId]?"DRAFT"===n[t.parentId].data.status?"INVALID_MOVE_LOCATION_DRAFT":null:"INVALID_MOVE_LOCATION")(a,r,d);if(g)return void(null==e||e({reason:g}));const u=(null==t?void 0:t.id)||d[a.parentId].children[a.index],p=(null===(s=d[u])||void 0===s||null===(s=s.data)||void 0===s?void 0:s.status)||null,h=d[r.parentId],f=d[a.parentId],m=u===(null==t?void 0:t.id);o.movePageInState(u,a,r,i,m);const v=Ye(h,u,r);n(v,{contentStatus:p,destination:r,movedPageTitle:d[u].data.title,source:a,sourceParent:f,spaceId:null==l?void 0:l.id,revertMove:()=>{const{pages:e}=o.getState(),t=e[f.id],n=t.children.length>0?a:{parentId:f.id};return o.movePageInState(u,r,n,!0,!0),Ye(t,u,n)}})}),[o,e,n,i,null==t?void 0:t.id])},Je=()=>{},et=(0,S.ui)({__loadable_id__:"kXOdf",name:"PageTreeErrorComponentLoader",loader:async()=>(await n.e(41536).then(n.bind(n,924046))).PageTreeErrorComponent}),tt=(0,S.ZR)({__loadable_id__:"BDKy7",name:"ContentTreeOnboardingLoader",loader:async()=>(await Promise.all([n.e(12705),n.e(95301)]).then(n.bind(n,102125))).ContentTreeOnboarding}),nt=(0,s.defineMessages)({noContentMessage:{id:"page-tree.no-content.message",defaultMessage:"No content in this space"},publishedNudgeHeader:{id:"page-tree.onboarding.nudge.published.header",defaultMessage:"Published first page {emoji}"},publishedNudgeBody:{id:"page-tree.onboarding.nudge.published.body",defaultMessage:"Congratulations! Find future pages and drafts here in the content tree."},nudgeConfirmationText:{id:"page-tree.onboarding.nudge.published.got.it",defaultMessage:"Got it"}}),it=(0,r.memo)((({currentPageId:e,isPeekingFromBlogs:t,isSuperAdmin:n,spaceKey:i,statuses:a,expandSpaceHomepage:s=!1,onInitialLoadComplete:g=Je,onLoadMore:u=Je,onDragStart:f=Je,onPageMove:S=Je,setIsViewingSpaceHomepage:k=Je,setHasItemsToDisplay:N=Je,setIsPageTreeLoading:$=Je,onMoveInvalid:D,renderItem:A,treeWrapperComponent:M,forceFetchCurrentPage:R=!1,forceFetchedCallback:L,highlightPages:_=[],isDraggable:F,syntheticItem:j,detached:O=!1,syntheticItemIsDraft:H,getIsDraggingItem:B,setIsDraggingItem:K,dragPreview:U,isSideNavRefreshEnabled:z=!1,isDirectionalPaginationEnabled:W=!1,renderResourcedEmoji:q})=>{var Q,V,G,Y,X,J;const ee=(0,r.useRef)({previousPageId:"",previousSpaceKey:"",previousHighlightedPages:[],previousForceFetchCurrentPage:!1,loadingUseEffect:!1}),te=(0,r.useRef)(!0),[ne,ie]=Ce(),[ae,oe]=(0,r.useState)(!0),{pages:re,space:se,rootId:de,isTreeTruncated:le,isTreeTruncatedPrevious:ge,isTreeTruncatedFollowing:ce,isPageTreeLoading:ue,focusedPageId:pe}=ne,{formatMessage:fe}=((0,Me.m4)(),(0,d.Z)()),{featureFlagClient:me,locale:ve}=(0,P.D)(),Pe=m().checkGate("cc_content_tree_onboarding_gate"),Ie=(0,I.T)("confluence.frontend.optimize-page-tree-emojis"),{hasMetPublishNudgeConditions:ye}=(0,w.P)(),{setHasMetPublishNudgeConditions:Se}=(0,w.S)(),{createAnalyticsEvent:Ee}=(0,h._)(),we=(0,x.v)(me,ve)&&ye;(0,r.useEffect)((()=>{we&&oe(!1)}),[we]);const Te=(0,r.useCallback)(((e,t=void 0)=>{const n=document.querySelector(`div[data-contentid="${pe}"]`);n&&!W&&(0,y.F1)(n),u&&u(e,null==se?void 0:se.id,t)}),[u,pe,se,W]),{loadMorePages:Ze,loadPreviousPages:ke,loadFollowingPages:Ne,reloadChildren:$e,queryChildren:De}=((e,t,n,i)=>{const[a,o]=Ce(),{focusedPageId:s,cursors:d,initialPages:l}=a,{loadAllPages:g}=Ue({statuses:n}),{reloadChildren:c,queryChildren:u}=qe({statuses:n,isSuperAdmin:t}),p=(0,r.useCallback)((async()=>{o.setIsPageTreeLoading(!0);const{mergedPages:n,rootLevelPages:a}=await g(s,e,t,d,l),r=he(n,a);o.expandSpaceHomepage(),o.setStateWithUIAttributes({pages:r}),o.setIsPageTreeLoading(!1),o.setIsTreeTruncated(!1),i&&i(Object.keys(r).length)}),[o,g,s,t,i,e,d,l]),h=(0,r.useCallback)((async n=>{o.setIsPageTreeLoading(!0);const{mergedPages:r,rootLevelPages:d}=await g(s,e,t,a.cursors,a.initialPages,n),l=be({currentPage:r,rootLevelPages:d,space:a.space},e,a,!1,void 0,!1,!0);o.setStateWithUIAttributes(l);const c=he(r,d);o.setIsPageTreeLoading(!1),i&&i(Object.keys(c).length,n)}),[o,g,s,t,i,e,a]);return{loadMorePages:p,loadPreviousPages:(0,r.useCallback)((()=>h("previous")),[h]),loadFollowingPages:(0,r.useCallback)((()=>h("following")),[h]),reloadChildren:c,queryChildren:u}})(i,n,a,Te),{refetch:Ae}=Ge("1",!0,!1,O,W,i,n),{refetch:Re}=Ge("1",!0,!0,O,W,i,n),{refetch:Le}=Ge(void 0,!0,!0,O,W,i,n),_e=((e,t,n,i=!1,a=!1,o,s,d=!1)=>{const[l,g]=Ce(),{queryChildren:c}=qe({statuses:o,isSuperAdmin:a});return(0,r.useCallback)((a=>{if(a&&Object.keys(a).length>0){var o;const r=null===(o=a.space)||void 0===o||null===(o=o.homepage)||void 0===o?void 0:o.id,u=be(a,e,l,i,n,s,d);g.setStateWithUIAttributes(u);const{rootId:p,pages:h}=u;return t&&r&&p!==r&&h[r]?g.expandPage(h[r],c):h}return a}),[e,l,i,n,s,g,t,c,d])})(i,s,j,t,n,a,H,W),Fe=(0,r.useCallback)((async e=>{const{data:t,error:n}=e;return n?(te.current&&ie.handleLoadingError(n),t):(ie.setIsPageTreeLoading(!1),_e(t),R&&L&&L(t),t)}),[_e,ie,R,L]),je=(0,r.useCallback)((async e=>{var a;if(null!=e&&null!==(a=e.space)&&void 0!==a&&null!==(a=a.homepage)&&void 0!==a&&a.id){var o;const a=null==e||null===(o=e.space)||void 0===o||null===(o=o.homepage)||void 0===o?void 0:o.id;if(t&&a&&"noHomepageFound"!==a){const{options:e}=Ve(a,!0,!1,O,i,n,W);return Re(e.variables).then((e=>Fe(e))).catch((e=>Fe({error:e})))}}}),[O,Re,Fe,t,n,i,W]),Oe=Xe({onMoveInvalid:D,syntheticItem:j,onPageMove:S,queryChildren:De}),He=(0,r.useCallback)((e=>{var t;const n=null==se||null===(t=se.homepage)||void 0===t?void 0:t.id;$(ue),N(Object.keys(e).length>0),k(pe===n)}),[$,ue,N,k,pe,null==se||null===(Q=se.homepage)||void 0===Q?void 0:Q.id]);(0,r.useEffect)((()=>{const{previousPageId:a,previousSpaceKey:o,previousHighlightedPages:r,previousForceFetchCurrentPage:s}=ee.current,{options:d}=Ve(e,!0,!1,O,i,n,W),l=e?Ae:Le;(!ee.current.loadingUseEffect||R&&!s)&&(ee.current.loadingUseEffect=!0,(async()=>{const n=()=>Re(d.variables).then((e=>Fe(e))).catch((e=>Fe({error:e})));if(e&&(R||a!==e)){const t=re[e];if(R&&!0!==s)return n();if(_.length&&!c()(r,_)){const e=re[_[0]];if(!e)return n();if(e)return ie.expandPage(e,De)}else{if(!t||i!==o&&""!==o)return n();if(!window.__SSR_RENDERED__&&""===a)return n();if(a!==e&&t&&t.hasChildren)return ie.expandPage(t,De)}}if(!e&&i!==o)return l(d.variables).then((e=>t&&!z?je(e.data):Fe(e))).catch((e=>Fe({error:e})))})().then((e=>{if(e){const{pages:n}=be(e,i,ne,t,j,H,W);He(n)}ee.current.loadingUseEffect=!1})).catch((e=>Fe({error:e})))),ee.current.previousPageId=e,ee.current.previousSpaceKey=i,ee.current.previousHighlightedPages=_,ee.current.previousForceFetchCurrentPage=R,Object.keys(re).length>=0&&ie.updatePersistedState()}),[ie,e,ie.expandPage,R,Re,_,Ae,Le,re,i,L,De,He,O,Fe,n,je,t,ne,j,H,W,z]),(0,r.useEffect)((()=>()=>{te.current=!1}),[]);const Be=(0,r.useCallback)((async e=>{var t;if(!j)return;const n=j.id;if(e.id===n)return;const{pages:i}=ie.getState(),a=Object.keys(i).find((e=>{var t,a;return(null===(t=i[e])||void 0===t||null===(t=t.data)||void 0===t?void 0:t.hasSyntheticChild)||(null===(a=i[e])||void 0===a||null===(a=a.children)||void 0===a?void 0:a.includes(n))}));if(!a)return;const o={parentId:a,index:null===(t=i[a])||void 0===t||null===(t=t.children)||void 0===t?void 0:t.indexOf(n)},r={parentId:e.id};-1!==o.index&&Oe(o,r)}),[j,ie,Oe]),Ke=(0,r.useCallback)((e=>{ie.expandPage(e,De)}),[ie,De]),ze=(0,r.useCallback)((e=>F(e,{space:se})),[se,F]),We=(0,r.useCallback)((e=>{var t,n;const i=null==se||null===(t=se.homepage)||void 0===t?void 0:t.id,a=null==e||null===(n=e.item)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.emoji;let s;return a&&Ie&&(s=r.createElement(p.ue,{emoji:a,context:"pageTree",height:14,key:a,wrapper:z?Z.C:Z.x,renderResourcedEmoji:q})),A((0,o.Z)((0,o.Z)({},e),{},{spaceHomePageId:i,onClick:Be,updateSinglePage:ie.updateSinglePage,getIsDraggingItem:B,spaceId:null==se?void 0:se.id,emoji:s}))}),[se,A,Be,ie.updateSinglePage,B,z,q,Ie]),Qe=(0,r.useCallback)((()=>{null==f||f()}),[f]);return ne.error?r.createElement(r.Fragment,null,r.createElement(et,null),!ne.error.isExpected&&r.createElement(E.X,{error:ne.error.apolloError})):z&&!ue&&(null!=se&&null!==(V=se.homepage)&&void 0!==V&&V.id&&de==(null==se||null===(G=se.homepage)||void 0===G?void 0:G.id)&&0==re[de].children.length||(null==se||null===(Y=se.homepage)||void 0===Y||!Y.id)&&Object.keys(re).length<=2||null!=se&&null!==(X=se.homepage)&&void 0!==X&&X.id&&de!=(null==se||null===(J=se.homepage)||void 0===J?void 0:J.id)&&Object.keys(re).length<3)?Pe?r.createElement(tt,{spaceKey:i}):r.createElement(C.m,null,r.createElement(l.Z,(0,o.Z)({},nt.noContentMessage))):r.createElement(r.Fragment,null,r.createElement(T.W,{width:348,heading:r.createElement(l.Z,(0,o.Z)((0,o.Z)({},nt.publishedNudgeHeader),{},{values:{emoji:"ðŸŽ‰"}})),content:r.createElement(l.Z,(0,o.Z)({},nt.publishedNudgeBody)),position:"right-start",offset:[0,16],hideSpotlightCardOnOutsideClick:!1,concealSpotlightOnReferenceHidden:!0,hidden:ue||!we||ae,onShow:()=>{Ee({type:"sendScreenEvent",data:{name:"creatorOnboardingNudge"}}).fire()},actions:[{text:fe(nt.nudgeConfirmationText),onClick:()=>{oe(!0),Se(!1),Ee({type:"sendUIEvent",data:{action:"dismissed",actionSubject:"button",actionSubjectId:"creatorOnboardingNudge",source:"pageTreeCoordinator"}}).fire()}}],setHidden:()=>null},r.createElement(xe.x,{isDraggable:ze,isTreeTruncated:le,loadMorePages:Ze,isTreeTruncatedPrevious:ge,isTreeTruncatedFollowing:ce,loadPreviousPages:ke,loadFollowingPages:Ne,onCollapse:ie.collapsePage,onDragStart:Qe,onDragEnd:Oe,onExpand:Ke,onInitialLoadComplete:g,tree:{rootId:de,items:re},treeWrapperComponent:M,loading:ue,refactor:!0,renderItem:We,setIsDraggingItem:K,dragPreview:U,isSideNavRefreshEnabled:z,isDirectionalPaginationEnabled:W,isNudgeShowing:!ae})),r.createElement(v.h,{name:"pagetree",types:[b.ai.content],reload:$e}),!1)})),at=e=>{let t=(0,a.Z)({},((0,i.Z)(e),e));const n=(0,I.T)("confluence.frontend.page-tree.directional-pagination"),{query:o,options:s}=Ve(t.currentPageId,!0,!1,!1,t.spaceKey,t.isSuperAdmin,n),{data:d,error:l}=(0,u.aM)(o,{variables:s.variables,fetchPolicy:"cache-only"});return l?r.createElement(r.Fragment,null,r.createElement(et,null)):r.createElement(Ee,{currentPageId:t.currentPageId,highlightPages:t.highlightPages,initialData:d,spaceKey:t.spaceKey,syntheticItem:t.syntheticItem,onExpand:t.onExpand,onCollapse:t.onCollapse,onLoadError:t.onLoadError,syntheticItemIsDraft:t.syntheticItemIsDraft,isPeekingFromBlogs:t.isPeekingFromBlogs,detached:t.detached,isDirectionalPaginationEnabled:n},r.createElement(it,{currentPageId:t.currentPageId,isPeekingFromBlogs:t.isPeekingFromBlogs,isSuperAdmin:t.isSuperAdmin,spaceKey:t.spaceKey,statuses:t.statuses,setHasItemsToDisplay:t.setHasItemsToDisplay,setIsPageTreeLoading:t.setIsPageTreeLoading,setIsViewingSpaceHomepage:t.setIsViewingSpaceHomepage,expandSpaceHomepage:t.expandSpaceHomepage,onInitialLoadComplete:t.onInitialLoadComplete,onLoadMore:t.onLoadMore,onDragStart:t.onDragStart,onPageMove:t.onPageMove,onMoveInvalid:t.onMoveInvalid,renderItem:t.renderItem,treeWrapperComponent:t.treeWrapperComponent,isDraggable:t.isDraggable,syntheticItem:t.syntheticItem,detached:t.detached,syntheticItemIsDraft:t.syntheticItemIsDraft,forceFetchCurrentPage:t.forceFetchCurrentPage,forceFetchedCallback:t.forceFetchedCallback,highlightPages:t.highlightPages,getIsDraggingItem:t.getIsDraggingItem,setIsDraggingItem:t.setIsDraggingItem,setOpenQuickActionsId:t.setOpenQuickActionsId,dragPreview:t.dragPreview,isSideNavRefreshEnabled:t.isSideNavRefreshEnabled,isDirectionalPaginationEnabled:n,renderResourcedEmoji:t.renderResourcedEmoji}))};at.displayName="PageTreeCoordinator"},815815:(e,t,n)=>{"use strict";n.d(t,{n8:()=>D,N_:()=>M,du:()=>A});var i=n(615919),a=n(946972),o=n(840506),r=n(16728),s=n(618305),d=n(293724),l=n(872779),g=n(923444),c=n(570489),u=n(117229),p=n(100543),h=n(340536),f=n(179640),m=n(992058),v=n(468879),b=n(887430),P=n(984915),I=n(940155);const y=(0,I.ZR)({__loadable_id__:"ZozL_",name:"HomepageIcon",loader:async()=>(await n.e(61794).then(n.bind(n,942948))).HomepageIcon}),S=(0,I.ZR)({__loadable_id__:"pbKvu",name:"DraftLozenge",loader:async()=>(await n.e(94184).then(n.bind(n,388754))).DraftLozenge});var E=n(968473),C=n(45490);const x="medium",w=(0,o.memo)((0,a.Z)("div",{target:"e1a4ig9z0"})("width:24px;font-size:12pt;display:flex;align-items:center;justify-content:center;color:",(e=>e.itemIsRestricted?`var(--ds-icon-danger, ${r.$H})`:"inherit"),";")),T=(0,o.memo)((0,a.Z)("div",{target:"e1a4ig9z1"})({name:"ux5l63",styles:"height:3px;line-height:0;"})),Z=(0,a.Z)("span",{target:"e1a4ig9z2"})({name:"k008qs",styles:"display:flex;"}),k=(0,a.Z)("span",{target:"e1a4ig9z3"})({name:"xrz7ko",styles:"display:inline-block;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;"}),N=(0,a.Z)("div",{target:"e1a4ig9z4"})({name:"ojxxjw",styles:"margin:0 var(--ds-space-050, 4px);"}),$=(0,a.Z)("span",{target:"e1a4ig9z5"})({name:"1ivru2r",styles:"display:flex;align-items:center;padding-right:var(--ds-space-050, 4px);"}),D=(0,o.memo)((({item:e,isSuperAdmin:t,onExpand:n,onCollapse:a})=>{const{isChildrenLoading:g,hasChildren:c,isExpanded:u,hasRestrictions:p,hasInheritedRestrictions:h}=e,f=Boolean(!!t&&(p||h)),m=f?`var(--ds-icon-danger, ${r.$H})`:void 0,v=(0,i.Z)({display:"flex",zIndex:1,border:"none",margin:0,padding:0,textDecoration:"none",backgroundColor:"transparent",color:"inherit",cursor:"pointer"},!1);return g?o.createElement(N,{"data-testid":"tree-item-spinner"},o.createElement(s.Z,{size:16})):c?u?o.createElement("button",{onClick:a,"data-testid":"chevron-down",style:v,"aria-expanded":u,"aria-labelledby":e.id},o.createElement(d.default,{primaryColor:m,label:"",size:x})):o.createElement("button",{onClick:n,"data-testid":"chevron-right",style:v,"aria-expanded":u,"aria-labelledby":e.id},o.createElement(l.default,{primaryColor:m,label:"",size:x})):o.createElement(w,{itemIsRestricted:f,"data-testid":"dot-icon"},o.createElement(T,null,"â€¢"))})),A=(0,o.memo)((({id:e,displayHomePageIcon:t,displayEmoji:n,displayTitle:i,isDraft:a,isSideNavRefreshEnabled:s,renderResourcedEmoji:d,contentType:l,isSelected:c,draggableState:h,emoji:f})=>{const m=c?`var(--ds-icon-selected, ${r.AX})`:void 0,v=`var(--ds-icon-disabled, ${r.n2})`,b="dragging"===h,P=l&&(0,p.rN)(l),I=!!f;return o.createElement(Z,null,t?o.createElement(y,null):null,P&&o.createElement($,null,o.createElement(u.iy,{size:"small",type:l,label:"",primaryColor:b?v:m})),n&&(I?f:o.createElement(g.ue,{key:n,emoji:n,context:"pageTree",height:14,wrapper:s?C.C:C.x,renderResourcedEmoji:d})),o.createElement(k,{id:e,className:"title"},i),a&&o.createElement(S,null))})),M=function({item:e,draftText:t="",spaceHomePageId:n,onExpand:i,onCollapse:a,onHighlight:r,draggableState:s,isSuperAdmin:d,onClick:l,spaceKey:g,indent:u,dragHandleProps:p,isHoverPageCardOptedIn:I,hoverPageCardTriggerRef:y,closeAllHoverPageCards:S,isQuickActionsOpen:C,setOpenQuickActionsId:x,isQuickActionsFocused:w,setFocusedQuickActionsId:T,isEditingTitle:Z,setIsEditingTitleId:k,isHoveringPageCard:N,onEnterHoverTarget:$,onLeaveHoverTarget:M,onBlurHoverTarget:R,isDraft:L,updateSinglePage:_,shouldRenderAfterIcon:F,contentStatus:j,isSideNavRefreshEnabled:O=!1,renderResourcedEmoji:H,hideDraftHrefs:B,emoji:K}){const U=(0,f.T)("confluence.frontend.page-tree-resumedraft-bypass"),z=e.data.emoji,W=e.data.title||t,q=e.data.isHighlighted,Q=e.data.isSelected,V=e.data.type,G=L&&B?null:(0,h.v)({url:`${c.b}${e.data.webui}`,spaceKey:g,contentType:e.data.type,editorVersion:e.data.editorVersion,contentId:e.id,bypassIsEnabled:U}),Y=e=>R(e,T);(0,o.useEffect)((()=>{q&&setTimeout(r,1e3*m.tO)}),[q,r]);const[X,J]=(0,o.useState)(!1);return o.createElement("div",{onMouseDown:()=>{S(),C&&x(null)},onBlur:Y,ref:y,"data-contentid":e.id,role:"presentation"},o.createElement(P.r,{id:e.id,title:e.data.fullTitle||"",displayEmoji:e.data.emojiFromProperties||"",isEditingTitle:Z,setIsEditingTitleId:k,setFocusedQuickActionsId:T,updateSinglePage:_,contentStatus:j,contentType:V},o.createElement(b.p,{title:W,isHoverPageCardOptedIn:I,isQuickActionsOpen:C},o.createElement(E.JF,{dragHandleProps:p,onMouseEnter:()=>{$(e.id.toString(),w,X)},onFocus:()=>$(e.id.toString(),w,X),onMouseLeave:M,onBlur:Y,isSelected:Boolean(Q),onClick:l,href:G,item:e,draggableState:s,isSuperAdmin:d,indent:u,forceHoverBackground:C||N||X,isQuickActionsFocused:w,isSideNavRefreshEnabled:O,beforeIcon:o.createElement(D,{item:e,isSuperAdmin:d,onExpand:t=>{t.preventDefault(),t.stopPropagation(),null==i||i(e.id)},onCollapse:t=>{t.preventDefault(),t.stopPropagation(),null==a||a(e.id)}}),afterIcon:F&&o.createElement(v.$,{setFocusedQuickActionsId:T,isSuperAdmin:d,isQuickActionsOpen:C,setOpenQuickActionsId:x,setIsEditingTitleId:k,closeAllHoverPageCards:S,spaceKey:g,item:e,isContextualCreateFocused:X,setIsContextualCreateFocused:J,isSideNavRefreshEnabled:O,displayTitle:W})},o.createElement(A,{id:e.id.toString(),displayHomePageIcon:e.id===n,isDraft:L,displayTitle:W,displayEmoji:z,isSideNavRefreshEnabled:O,contentType:V,isSelected:Q,renderResourcedEmoji:H,draggableState:s,emoji:K})))))};M.displayName="PageTreeItem"},540827:(e,t,n)=>{"use strict";n.d(t,{BQ:()=>o,D6:()=>r,Ks:()=>a,_Z:()=>d,aE:()=>l,ar:()=>g,hw:()=>s});var i=n(615919);const a=({source:e,contentStatus:t,pageId:n,previousParentPageId:a,newParentPageId:o,previousSpaceId:r,newSpaceId:s,referrer:d,sideNavLearningLoopCohort:l,isLivePage:g,isEditInContextEnabled:c,isOnEditRoute:u})=>({type:"sendTrackEvent",data:{action:"updated",source:e,containerType:"space",containerId:r,objectType:"page",objectId:n,actionSubject:"page",attributes:(0,i.Z)((0,i.Z)({contentStatus:null!=t?t:null,previousSpaceId:r,previousParentPageId:a,newSpaceId:s,newParentPageId:o},d?{referrer:d}:void 0),{},{sideNavLearningLoopCohort:l,isLivePage:g,isEditInContextEnabled:c,isOnEditRoute:u})}}),o=()=>({type:"sendUIEvent",data:{action:"dragged",actionSubject:"pageTree",source:"viewPageScreen"}}),r=e=>({type:"sendUIEvent",data:{action:"dropped",actionSubject:"pageTree",source:"viewPageScreen",attributes:{isValidTarget:e}}}),s=e=>({type:"sendUIEvent",data:{action:"clicked",actionSubject:"button",actionSubjectId:"pageTreeDragDropUndo",source:"viewPageScreen",attributes:{isFlagAutoDismissEnabled:e}}}),d=e=>({type:"sendUIEvent",data:{action:"pressed",actionSubject:"keyboardShortcut",actionSubjectId:"pageTreeDragDropUndo",source:"viewPageScreen",attributes:{isFlagAutoDismissEnabled:e}}}),l=(e,t,n,i,a,o,r,s,d)=>{const l={type:"sendUIEvent",data:{containerType:"space",containerId:t,objectType:"page",objectId:null!=o?o:"",action:e,actionSubject:"pageTree",source:n?"pageTreeDrawer":"containerNavigation",attributes:{navigationLayer:"container",spaceView:"TREE",contentStatus:null!=a?a:null,sideNavLearningLoopCohort:i,isEditInContextEnabled:s,isOnEditRoute:d}}};return r&&(l.data.attributes.navdexPointType=r),l},g=(e,t,n,i)=>({type:"sendUIEvent",data:{action:"clicked",containerId:e,actionSubject:"button",actionSubjectId:"showAllButton",source:n||"containerNavigation",attributes:{pageCount:t,direction:i}}})},45490:(e,t,n)=>{"use strict";n.d(t,{C:()=>c,x:()=>g});var i=n(615919),a=n(872342),o=n(840506),r=n(920839),s=n(767001);const d=["as","style"],l=["as","style"];n(96061),n(846121),n(539910),n(465206),n(372972),n(456928),n(664418),n(525286),n(354326),n(115533);const g=(0,o.forwardRef)(((e,t)=>{let{as:n="span",style:l}=e,g=(0,a.Z)(e,d);return o.createElement(n,(0,i.Z)((0,i.Z)({},g),{},{style:(0,i.Z)((0,i.Z)({},l),{},{"--_11fpzcn":(0,r.Z)("var(--ds-space-075, 6px)")}),ref:t,className:(0,s.Z)(["_lcxvglyw _1e0c1txw _1o9zidpf _2hwxewg3 _4cvr1h6o",g.className])}))}));const c=(0,o.forwardRef)(((e,t)=>{let{as:n=g,style:d}=e,c=(0,a.Z)(e,l);return o.createElement(n,(0,i.Z)((0,i.Z)({},c),{},{style:(0,i.Z)((0,i.Z)({},d),{},{"--_h7os2z":(0,r.Z)("var(--ds-space-100, 8px)")}),ref:t,className:(0,s.Z)(["_2hwx1xra _4t3i7vkz _1bsb7vkz _bna77vkz _mezj7vkz",c.className])}))}))},431658:(e,t,n)=>{"use strict";n.d(t,{a:()=>i});const i=(0,n(93972).defineMessages)({flagErrorTitle:{id:"page-tree.dragndrop.failed.title",defaultMessage:"Something went wrong"},flagErrorDescription:{id:"page-tree.dragndrop.failed.description",defaultMessage:"Refresh the page and try again. If this keeps happening, contact your space administrator."},flagErrorAction:{id:"page-tree.dragndrop.failed.action.visitsupport",defaultMessage:"Visit Atlassian Support"},flagMovePagePermissionErrorTitle:{id:"page-tree.dragndrop.permissions.error.title",defaultMessage:"You can't move this content"},flagMovePagePermissionErrorDescription:{id:"page-tree.dragndrop.permissions.error.decription",defaultMessage:"You don't have permission to move this restricted content. Contact your space administrator."},flagUndoTitle:{id:"page-tree.dragndrop.undo.title",defaultMessage:'Moved "{pageTitle}"'},flagUndoUntitled:{id:"page-tree.dragndrop.undo.untitled",defaultMessage:'Moved "Untitled"'},flagUndoAction:{id:"page-tree.dragndrop.undo.action",defaultMessage:"Undo"},flagLargePageTreeTitle:{id:"page-tree.dragndrop.lpt.title",defaultMessage:"We can't move this content"},flagLargePageTreeDescription:{id:"page-tree.dragndrop.lpt.description",defaultMessage:"Drag and drop is not available for a list of 500 or more. Refresh and try again without expanding the content tree."},flagLargePageTreeSettingsAction:{id:"page-tree.dragndrop.lpt.settings.action",defaultMessage:"Go to space settings"},flagLargePageTreeRefreshAction:{id:"page-tree.dragndrop.lpt.refresh.action",defaultMessage:"Refresh page"},flagInvalidMoveDraftTitle:{id:"page-tree.dragndrop.invalid-move-draft.title",defaultMessage:"You can't move content under a draft"},flagInvalidMoveDraftDescription:{id:"page-tree.dragndrop.invalid-move-draft.description",defaultMessage:"Publish the draft to move content here."},untitledDraftText:{id:"page-tree.untitled-draft",defaultMessage:"Untitled"}})},361895:(e,t,n)=>{"use strict";n.d(t,{Gg:()=>s,jG:()=>l,ZA:()=>d});var i=n(615919),a=n(634554);const o=(0,n(93972).defineMessages)({noCreatePermissionsErrorTitle:{id:"page-tree.move-page-dialog.published-page.move-error.no-create-permissions-error.title",defaultMessage:"You canâ€™t move this content"},noCreatePermissionsErrorDescription:{id:"page-tree.move-page-dialog.published-page.move-error.no-create-permissions-error.description",defaultMessage:"To move content to another space, you need permission to create in that space."},permissionsErrorTitle:{id:"page-tree.move-page-dialog.published-page.move-error.permissions-error.title",defaultMessage:"You canâ€™t move this content"},permissionsErrorDescription:{id:"page-tree.move-page-dialog.published-page.move-error.permissions-error.description",defaultMessage:"You donâ€™t have the required permissions to move this content to another space."},parentChildLoopErrorTitle:{id:"page-tree.move-page-dialog.published-page.move-error.parent-child-loop.title",defaultMessage:"Select a different destination"},parentChildLoopErrorDescription:{id:"page-tree.move-page-dialog.published-page.move-error.parent-child-loop.description",defaultMessage:"The destination cannot be nested below the content being moved."},singleConflictingContentNameErrorTitle:{id:"page-tree.move-page-dialog.published-page.move-error.single-conflicting-page-name.title",defaultMessage:"Content with this title already exists"},singleConflictingContentNameErrorDescription:{id:"page-tree.move-page-dialog.published-page.move-error.single-conflicting-page-name.description",defaultMessage:"{conflictingPageName} already exists in the {destinationSpace} space. Rename your content before moving."},singleConflictingPageNameWithinEditorErrorCallToAction:{id:"page-tree.move-page-dialog.published-page.move-error.single-conflicting-page-name-within-editor.call-to-action",defaultMessage:"Rename this page"},singleConflictingPageNameWithinEditorErrorTitle:{id:"page-tree.move-page-dialog.published-page.move-error.single-conflicting-page-name-within-editor.title",defaultMessage:"Rename this page to make it unique"},singleConflictingPageNamWithinEditorErrorDescription:{id:"page-tree.move-page-dialog.published-page.move-error.single-conflicting-page-name-within-editor.description",defaultMessage:"A page titled {conflictingPageName} already exists in the {destinationSpace} space. To move this page, youâ€™ll first need to give it a unique title and publish it."},multipleConflictingContentNamesErrorTitle:{id:"page-tree.move-page-dialog.published-page.move-error.multiple-conflicting-page-name.title",defaultMessage:"Content with these names already exist"},multipleConflictingContentNamesErrorDescription:{id:"page-tree.move-page-dialog.published-page.move-error.multiple-conflicting-page-name.description",defaultMessage:"The following content already exists in the {destinationSpace} space: {listOfConflictingNames}. Rename your content before moving."},restrictionsPermissionErrorTitle:{id:"page-tree.move-page-dialog.published-page.move-error.no-restrictions-permissions.title",defaultMessage:"You canâ€™t move restricted content to this space"},restrictionsPermissionErrorDescription:{id:"page-tree.move-page-dialog.published-page.move-error.no-restrictions-permissions.description",defaultMessage:"This content is restricted, and you donâ€™t have permission to create restricted content in the new space. Remove restrictions before moving it."},destinationDoesNotExistErrorTitle:{id:"page-tree.move-page-dialog.published-page.move-error.destination-does-not-exist.title",defaultMessage:"Select a different destination"},destinationDoesNotExistErrorDescription:{id:"page-tree.move-page-dialog.published-page.move-error.destination-does-not-exist.description",defaultMessage:"This destination has recently been deleted or archived. Please select a different destination."},sourceDoesNotExistErrorTitle:{id:"page-tree.move-page-dialog.published-page.move-error.source-does-not-exist.title",defaultMessage:"This content canâ€™t be moved"},sourceDoesNotExistErrorDescription:{id:"page-tree.move-page-dialog.published-page.move-error.source-does-not-exist.description",defaultMessage:"This content has recently been deleted or archived and therefore cannot be moved."},defaultErrorTitle:{id:"page-tree.move-page-dialog.published-page.move-error.default.title",defaultMessage:"Weâ€™re having issues moving this content"},defaultErrorDescription:{id:"page-tree.move-page-dialog.published-page.move-error.default.description",defaultMessage:"Weâ€™re having issues moving this content. Refresh and try again; if that doesnâ€™t solve the issue, please contact support."},tooManyPagesErrorTitle:{id:"page-tree.move-page-dialog.published-page.move-error.too-many-pages.title",defaultMessage:"We couldnâ€™t move this many pages at once"},tooManyPagesErrorDescription:{id:"page-tree.move-page-dialog.published-page.move-error.too-many-pages.description",defaultMessage:"Try again by selecting a page with fewer children."},moreThan100PagesErrorTitle:{id:"page-tree.move-page-dialog.published-page.move-error.more-than-hundred-pages.title",defaultMessage:"We couldnâ€™t move this many pages at once"},moreThan100PagesErrorDescription:{id:"page-tree.move-page-dialog.published-page.move-error.more-than-hundred-pages.description",defaultMessage:"Try again by selecting a page with fewer than 100 children."},movingContentToSelfErrorTitle:{id:"page-tree.move-page-dialog.published-page.move-error.source-same-as-target.title",defaultMessage:"You canâ€™t move any content to a position relative to itself"},movingContentToSelfErrorDescription:{id:"page-tree.move-page-dialog.published-page.move-error.source-same-as-target.description",defaultMessage:"Uh, oh! You are attempting to move content to itself. Please choose other content you wish to move to."},currentlyUpdatedErrorTitle:{id:"page-tree.move-page-dialog.published-page.move-error.currently-updated.title",defaultMessage:"We canâ€™t move this content right now"},currentlyUpdatedErrorDescription:{id:"page-tree.move-page-dialog.published-page.move-error.currently-updated.description",defaultMessage:"Someone just updated this content. Refresh and try moving it again."},partiallyMovedErrorTitle:{id:"page-tree.move-page-dialog.published-page.move-error.partially-moved.title",defaultMessage:"The move could not be fully completed"},partiallyMovedErrorDescription:{id:"page-tree.move-page-dialog.published-page.move-error.partially-moved.description",defaultMessage:"Some of the content was not able to be moved to the target space. If you have trouble finding any content, please reach out to Support for help."},notSpaceAdminForCrossSpaceMoveTitle:{id:"page-tree.move-page-dialog.published-page.move-error.not-space-admin-cross-space.title",defaultMessage:"You canâ€™t move this content"},notSpaceAdminForCrossSpaceMoveDescription:{id:"page-tree.move-page-dialog.published-page.move-error.not-space-admin-cross-space.description",defaultMessage:"Only space admins can move content to another space. Contact your admin for help."}}),r=(e,t,n)=>(e=>(e.includes("A page with the name(s)")||e.includes("A content with the name(s)"))&&e.includes("already exist(s) in the space"))(e)?((e,t,n)=>{let a="A page with the name(s) ";const r=" already exist(s) in the space ";let s=". You must rename the page title before moving it.";-1===e.indexOf(a)&&(a="A content with the name(s) ",s=". You must rename the content title before moving it.");const d=e.substring(e.indexOf(a)+a.length,e.indexOf(r)).split(","),l=e.substring(e.indexOf(r)+31,e.indexOf(s));if(1===d.length){const e=t?o.singleConflictingPageNameWithinEditorErrorTitle:o.singleConflictingContentNameErrorTitle,a=t?o.singleConflictingPageNamWithinEditorErrorDescription:o.singleConflictingContentNameErrorDescription,r=(0,i.Z)({},t&&{actions:[{key:"move-page-error-error-cta",text:o.singleConflictingPageNameWithinEditorErrorCallToAction,onClick:n}]});return(0,i.Z)({title:e,description:a,props:{values:{conflictingPageName:d[0],destinationSpace:l}}},r)}return{title:o.multipleConflictingContentNamesErrorTitle,description:o.multipleConflictingContentNamesErrorDescription,props:{values:{listOfConflictingNames:(g=d,2===g.length?g.join(" and "):g.length>2?`${g.slice(0,g.length-1).join(", ")}, and ${g[g.length-1]}`:g.join(", ")),destinationSpace:l}}};var g})(e,t,n):(e=>e.includes("Invalid to perform any move operation where source is same as target"))(e)?{title:o.movingContentToSelfErrorTitle,description:o.movingContentToSelfErrorDescription}:(e=>e.includes("creates a parent-child loop"))(e)?{title:o.parentChildLoopErrorTitle,description:o.parentChildLoopErrorDescription}:(e=>e.includes("You can not restrict pages in the destination space.")||e.includes("You can not restrict contents in the destination space."))(e)?{title:o.restrictionsPermissionErrorTitle,description:o.restrictionsPermissionErrorDescription}:(e=>e.includes("We can't support moving more than 100 pages at this time"))(e)?{title:o.moreThan100PagesErrorTitle,description:o.moreThan100PagesErrorDescription}:(e=>e.includes("We can't support moving this many pages at this time"))(e)?{title:o.tooManyPagesErrorTitle,description:o.tooManyPagesErrorDescription}:void 0,s=(e,{IsInEditor:t=!1,onActionClick:n=(()=>{})}={})=>{var i;const s=null==e||null===(i=e.graphQLErrors)||void 0===i?void 0:i[0],d=(0,a.e9)(s),l=null==s?void 0:s.message;return"400"===d?r(l,t,n):"403"===d?(e=>(e=>e.includes("Only space admins can move content to another space."))(e)?{title:o.notSpaceAdminForCrossSpaceMoveTitle,description:o.notSpaceAdminForCrossSpaceMoveDescription}:{title:o.permissionsErrorTitle,description:o.permissionsErrorDescription})(l):"404"===d?(e=>(e=>e.includes("The target page provided does not exist.")||e.includes("The target content provided does not exist.")||(e.includes("The target page with ID = ")||e.includes("The target content with ID = "))&&e.includes("is archived"))(e)?{title:o.destinationDoesNotExistErrorTitle,description:o.destinationDoesNotExistErrorDescription}:(e=>e.includes("The source page provided does not exist.")||e.includes("The source content provided does not exist.")||(e.includes("The source page with ID = ")||e.includes("The source content with ID ="))&&e.includes("is archived"))(e)?{title:o.sourceDoesNotExistErrorTitle,description:o.sourceDoesNotExistErrorDescription}:void 0)(l):"500"===d?(e=>(e=>e.includes("Can not set page as its own parent."))(e)?{title:o.parentChildLoopErrorTitle,description:o.parentChildLoopErrorDescription}:(e=>e.includes("UnexpectedRollbackException"))(e)?{title:o.currentlyUpdatedErrorTitle,description:o.currentlyUpdatedErrorDescription}:(e=>e.includes("Can't add a parent from another space"))(e)?{title:o.partiallyMovedErrorTitle,description:o.partiallyMovedErrorDescription}:void 0)(l):void 0},d=(e,t)=>(0,a.j6)(e,"503")&&t>=500?{title:o.tooManyPagesErrorTitle,description:o.tooManyPagesErrorDescription}:{title:o.defaultErrorTitle,description:o.defaultErrorDescription},l=()=>({title:o.noCreatePermissionsErrorTitle,description:o.noCreatePermissionsErrorDescription})},600591:(e,t,n)=>{"use strict";n.d(t,{Mx:()=>a});let i=function(e){return e.CURRENT="CURRENT",e.DRAFT="DRAFT",e}({});const a=[i.CURRENT,i.DRAFT]},950117:(e,t,n)=>{"use strict";n.d(t,{Nx:()=>i,P_:()=>a,m4:()=>o});const i=500,a=100,o=()=>300},601996:(e,t,n)=>{"use strict";n.d(t,{I:()=>o});var i=n(840506);function a(){let e=!1;return{setIsDraggingItem(t){e=t},getIsDraggingItem:()=>e}}function o(){const[e]=(0,i.useState)(a);return e}},122607:(e,t,n)=>{"use strict";n.d(t,{y:()=>o});var i=n(840506),a=n(167347);const o=e=>{const{refetch:t}=(0,a.aM)(e,{skip:!0});return(0,i.useCallback)((e=>t(e)),[t])}},983191:(e,t,n)=>{"use strict";n.d(t,{p:()=>p});var i=n(615919),a=n(872342),o=n(840506),r=n(167347),s=n(779076);const d=s.ZP`mutation MovePageAfterMutation($pageId:ID!$siblingId:ID!){movePageAfter(input:{pageId:$pageId siblingId:$siblingId}){page{id links{webui editui}}}}`,l=s.ZP`mutation MovePageAppendMutation($pageId:ID!$parentId:ID!){movePageAppend(input:{pageId:$pageId parentId:$parentId}){page{id links{webui editui}}}}`,g=s.ZP`mutation MovePageBeforeMutation($pageId:ID!$siblingId:ID!){movePageBefore(input:{pageId:$pageId siblingId:$siblingId}){page{id links{webui editui}}}}`,c=s.ZP`mutation MovePageTopLevelMutation($pageId:ID!$spaceKey:String!){movePageTopLevel(input:{pageId:$pageId targetSpaceKey:$spaceKey}){page{id links{webui editui}}}}`,u=["data"],p=()=>{const[e]=(0,r.Db)(d),[t]=(0,r.Db)(g),[n]=(0,r.Db)(l),[s]=(0,r.Db)(c);return{movePage:(0,o.useCallback)((async o=>{const r=e=>t=>{let{data:n}=t,o=(0,a.Z)(t,u);return(0,i.Z)((0,i.Z)({},o),{},{data:void 0===n?void 0:{mutationResult:e(n)}})};return"parentId"in o?n({variables:{pageId:o.pageId,parentId:o.parentId}}).then(r((e=>e.movePageAppend))):"spaceKey"in o?s({variables:{pageId:o.pageId,spaceKey:o.spaceKey}}).then(r((e=>e.movePageTopLevel))):"after"===o.positionToSibling?e({variables:{pageId:o.pageId,siblingId:o.siblingId}}).then(r((e=>e.movePageAfter))):t({variables:{pageId:o.pageId,siblingId:o.siblingId}}).then(r((e=>e.movePageBefore)))}),[e,n,t,s])}}},438809:(e,t,n)=>{"use strict";n.d(t,{h:()=>a});var i=n(758771);const a=e=>((0,i.t)(e),null)},758771:(e,t,n)=>{"use strict";n.d(t,{t:()=>o});var i=n(840506),a=n(207688);const o=e=>{const{contentId:t,registerReloader:n,unregisterReloader:o}=(0,i.useContext)(a.qC);(0,i.useEffect)((()=>(n(e),()=>{o(e)})),[t,e.reload,e.name])}},293724:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,a=(i=n(840506))&&i.__esModule?i:{default:i},o=n(340531);const r=e=>a.default.createElement(o.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M8.292 10.293a1.009 1.009 0 000 1.419l2.939 2.965c.218.215.5.322.779.322s.556-.107.769-.322l2.93-2.955a1.01 1.01 0 000-1.419.987.987 0 00-1.406 0l-2.298 2.317-2.307-2.327a.99.99 0 00-1.406 0z" fill="currentColor" fill-rule="evenodd"/></svg>'},e));r.displayName="ChevronDownIcon";var s=r;t.default=s},747194:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,a=(i=n(840506))&&i.__esModule?i:{default:i},o=n(340531);const r=e=>a.default.createElement(o.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M6 17H5V7h1V5H5a2 2 0 00-2 2v10a2 2 0 002 2h1v-2zm13-6.995V19H9V5h5.99v2.49a1.5 1.5 0 001.5 1.5h4.5v-.522c0-.297-.132-.578-.359-.768l-5.074-4.236c-.36-.3-.813-.464-1.282-.464H9a2 2 0 00-2 2v14a2 2 0 002 2h10a2 2 0 002-2v-8.995h-2z" fill="currentColor" fill-rule="evenodd"/></svg>'},e));r.displayName="DocumentsIcon";var s=r;t.default=s},853212:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,a=(i=n(840506))&&i.__esModule?i:{default:i},o=n(340531);const r=e=>a.default.createElement(o.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><g fill="currentColor" fill-rule="evenodd"><circle cx="10" cy="8" r="1"/><circle cx="14" cy="8" r="1"/><circle cx="10" cy="16" r="1"/><circle cx="14" cy="16" r="1"/><circle cx="10" cy="12" r="1"/><circle cx="14" cy="12" r="1"/></g></svg>'},e));r.displayName="DragHandlerIcon";var s=r;t.default=s},22710:(e,t,n)=>{"use strict";n.d(t,{W:()=>D});var i=n(615919),a=n(872342),o=n(840506),r=n(546033);const s=["children","nudgeTestId"],d=(0,o.forwardRef)(((e,t)=>{let{children:n,nudgeTestId:d}=e,l=(0,a.Z)(e,s);return o.createElement(r.j,(0,i.Z)((0,i.Z)({},l),{},{ref:t,"data-testid":d}),n)}));var l=n(136342),g=n(379525),c=n(393242),u=n(16728),p=n(39030);const h=["index"],f={color:`var(--ds-text-inverse, ${u.N0})`,boxShadow:`var(--ds-shadow-overlay, 0 4px 8px -2px ${u.Nx}, 0 0 1px ${u.VG})`,backgroundColor:`var(--ds-background-discovery-bold, ${u.Wn})`,borderRadius:"3px",overflow:"auto"},m={display:"flex",flexDirection:"column",padding:"var(--ds-space-200, 16px) var(--ds-space-250, 20px)"},v=p.iv`
  font-size: 1.42857em;
  font-style: inherit;
  line-height: 1.2;
  font-weight: 500;
  letter-spacing: -0.008em;
  margin-top: 28;
  color: inherit;

  &:first-child {
    margin-top: 0;
  }
`,b={display:"flex",paddingBottom:"var(--ds-space-100, 8px)",alignItems:"baseline",justifyContent:"space-between"},P={display:"flex",paddingTop:"var(--ds-space-100, 8px)",alignItems:"center",justifyContent:"space-between"},I=e=>p.iv`
  margin: 0 ${"var(--ds-space-050, 4px)"};
  cursor: pointer;
  align-items: baseline;
  border-width: 0px;
  border-radius: 3px;
  box-sizing: border-box;
  display: inline-flex;
  font-size: inherit;
  font-style: normal;
  font-family: inherit;
  font-weight: 500;
  max-width: 100%;
  position: relative;
  text-align: center;
  text-decoration: none;
  transition: background 0.1s ease-out 0s,
    box-shadow 0.15s cubic-bezier(0.47, 0.03, 0.49, 1.38) 0s;
  white-space: nowrap;
  background: ${e?`var(--ds-background-discovery-bold, ${u.Wn})`:`var(--ds-background-inverse-subtle, ${u.HD})`};
  height: 2.28571em;
  line-height: 2.28571em;
  padding: 0px 10px;
  vertical-align: middle;
  width: auto;
  justify-content: center;
  color: ${`var(--ds-text-inverse, ${u.N0})`};
  &:hover {
    background-color: ${`var(--ds-interaction-hovered, ${u.vJ})`};
  }
  &:active {
    background-color: ${`var(--ds-interaction-pressed, ${u.vJ})`};
  }
`,y=e=>{let{index:t}=e,n=(0,a.Z)(e,h);return(0,p.tZ)("button",(0,i.Z)({css:I(t)},n))};y.displayName="ActionItem";const S={display:"flex",margin:"var(--ds-space-negative-050, -4px)",flexDirection:"row-reverse"},E=(0,o.forwardRef)((({image:e,heading:t,actions:n,actionsBeforeElement:a,width:r=300,cardTestId:s,content:d},l)=>{const g=(0,o.useMemo)((()=>null==n?void 0:n.map((({text:e,onClick:t},n)=>(0,p.tZ)(y,{index:n,onClick:t,key:`${e}-${n}`},e)))),[n]),c=!!t,u=!!a||!!n;return(0,p.tZ)("div",{ref:l,style:(0,i.Z)((0,i.Z)({},f),{},{width:`${r}px`}),"data-testid":s},"string"==typeof e?(0,p.tZ)("img",{src:e,alt:""}):e,(0,p.tZ)("div",{style:m},c&&(0,p.tZ)("div",{style:b},(0,p.tZ)("div",{id:"nudge-spot-light-card-heading",css:v},t)),d,u&&(0,p.tZ)("div",{style:P},a||(0,p.tZ)("span",null),(0,p.tZ)("div",{style:S},g))))}));var C=n(830665);const x=["containerStyles","showSpotlight","shouldBlink","zIndex","stopBlink","ariaLabelledBy"],w={opacity:0,transitionProperty:"opacity",transitionTimingFunction:"ease-in-out",transitionDuration:"200ms"},T={entering:{},entered:{opacity:1},exiting:{transitionDuration:"120ms",opacity:0},exited:{},unmounted:{}},Z={enter:0,exit:120},k=(0,o.forwardRef)(((e,t)=>{let{containerStyles:n,showSpotlight:r,shouldBlink:s,zIndex:d,stopBlink:g,ariaLabelledBy:c}=e,u=(0,a.Z)(e,x);return o.createElement(C.ZP,{appear:!0,in:r&&!s,timeout:Z,onExited:g,unmountOnExit:!s},(e=>o.createElement(l.Z,{zIndex:d},o.createElement("div",(0,i.Z)({style:(0,i.Z)((0,i.Z)((0,i.Z)({},n),w),T[e]),ref:t,"aria-labelledby":c},u)))))}));var N=n(214248);const $=["hidden","setHidden","hideNudgeOnClick","hideSpotlightCardOnOutsideClick","concealSpotlightOnReferenceHidden","showSpotlightCardOnFirstRender","children","spotlightCard","nudge","position","offset","zIndex","onRender","onShow","onHide","onClick","onOutsideClick","pulseColor","pulseShadowColor","pulseBorderRadius","nudgeBlinkId","nudgeTestId","nudgeTag","headingId"],D=(0,o.forwardRef)(((e,t)=>{let{hidden:n,setHidden:r,hideNudgeOnClick:s=!0,hideSpotlightCardOnOutsideClick:u=!0,concealSpotlightOnReferenceHidden:p=!1,showSpotlightCardOnFirstRender:h=!0,children:f,spotlightCard:m=E,nudge:v=d,position:b="bottom",offset:P,zIndex:I=800,onRender:y,onShow:S,onHide:C,onClick:x,onOutsideClick:w,pulseColor:T,pulseShadowColor:Z,pulseBorderRadius:D,nudgeBlinkId:A,nudgeTestId:M,nudgeTag:R,headingId:L}=e,_=(0,a.Z)(e,$);const F=(0,o.useRef)();F.current={onRender:y,onHide:C,onShow:S,onClick:x,onOutsideClick:w};const j=(0,o.useRef)(null),O=(0,o.useRef)(null),H=!n,[B,K]=(0,o.useState)(h),[U,z]=(0,o.useState)(!1),[W,q]=(0,o.useState)(!1),Q=(0,o.useCallback)((()=>q(!1)),[]),V=(0,o.useRef)({fn:()=>{}});(0,o.useImperativeHandle)(t,(()=>({toggleCardVisibility:K,forceUpdateCardPosition:()=>V.current.fn()})),[K]);const G=(0,o.useCallback)((()=>H&&K(!0)),[H]),Y=(0,o.useCallback)((e=>{var t,i;n||(s&&r(e),null===(t=F.current)||void 0===t||null===(i=t.onClick)||void 0===i||i.call(t))}),[n,s,r,F]);(0,o.useEffect)((()=>{z(H&&B)}),[H,B]),(0,o.useEffect)((()=>{var e,t;if(!n)return null===(e=F.current)||void 0===e||null===(t=e.onRender)||void 0===t||t.call(e),()=>{var e,t;return null===(e=F.current)||void 0===e||null===(t=e.onHide)||void 0===t?void 0:t.call(e)}}),[n,F]),(0,o.useEffect)((()=>{var e,t;U&&(null===(e=F.current)||void 0===e||null===(t=e.onShow)||void 0===t||t.call(e))}),[U,F]),(0,o.useEffect)((()=>{n&&K(h)}),[n,h]),(0,o.useEffect)((()=>{let e,t;return U&&u&&(t=window.setTimeout((()=>{e=(0,c.ak)(window,{type:"click",listener:t=>{const n=t.target;if(j.current&&O.current&&n instanceof Node&&!j.current.contains(n)&&!O.current.contains(n)){var i,a,o;if(A){const e=((e,t,n)=>{const i=Array.from(document.querySelectorAll(`[data-nudge-blink='${e}']`));return!!(null==i?void 0:i.some((e=>e&&e.contains(t))))&&(n(!0),!0)})(A,n,q);if(e)return}K(!1),null===(i=F.current)||void 0===i||null===(a=i.onOutsideClick)||void 0===a||a.call(i),null===(o=e)||void 0===o||o()}},options:{capture:!0,passive:!0}})}))),()=>{var n;null===(n=e)||void 0===n||n(),window.clearTimeout(t)}}),[U,u,r,F,A]);const X=e=>p&&e?{display:"none"}:{},J=(0,o.useMemo)((()=>m===E?(0,i.Z)({},_):{cardTestId:_.cardTestId}),[m,_]);return o.createElement(o.Fragment,null,o.createElement(v,{ref:j,hasPulse:H,onClickCapture:Y,onMouseEnter:G,pulseColor:T,pulseShadowColor:Z,pulseBorderRadius:D,nudgeTestId:M,tag:R},f),o.createElement(l.Z,{zIndex:I},o.createElement(g.r,{placement:b,referenceElement:j.current||void 0,offset:P},(({ref:e,style:t,forceUpdate:n,isReferenceHidden:a})=>o.createElement(k,{showSpotlight:U,shouldBlink:W,stopBlink:Q,zIndex:I,ref:e,containerStyles:(0,i.Z)((0,i.Z)({},t),X(a)),role:"dialog",ariaLabelledBy:L||"nudge-spot-light-card-heading"},o.createElement(N.ZP,null,V.current.fn=n,o.createElement(m,(0,i.Z)((0,i.Z)({},J),{},{ref:O}))))))))}))},546033:(e,t,n)=>{"use strict";n.d(t,{j:()=>m});var i=n(615919),a=n(872342),o=n(840506),r=n(39030),s=n(16728),d=n(2142);const l=["hasPulse","pulseBorderRadius","pulseColor","pulseShadowColor","tag"],g="0 0 0 3px",c=`var(--ds-border-accent-purple, ${s.kJ})`,u="var(--ds-border-accent-purple, rgba(101, 84, 192, 1))",p=r.iv`
  @keyframes pulseKeyframes {
    0% {
      opacity: 0;
    }

    50% {
      opacity: 1;
    }

    100% {
      opacity: 0;
    }
  }

  animation: pulseKeyframes 3000ms ${"cubic-bezier(0.55, 0.055, 0.675, 0.19)"} infinite;
`,h=r.iv`
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`,f=({hasPulse:e,pulseBorderRadius:t,pulseColor:n,pulseShadowColor:i})=>r.iv`
  display: block;
  > * {
    position: relative;

    &::before {
      ${h}
      border-radius: ${t}px;
      box-shadow: ${g} ${n};
      opacity: ${e?1:0};
      transition: opacity 0.1s ease-in-out;
      pointer-events: none;
    }

    &::after {
      ${h}
      border-radius: ${t}px;
      box-shadow: ${g} ${n}, 0 0 11px ${i};
      opacity: 0;
      pointer-events: none;
      ${e&&p}
    }
  }
`,m=(0,o.forwardRef)(((e,t)=>{let{hasPulse:n,pulseBorderRadius:o=(0,d.E0)(),pulseColor:s=c,pulseShadowColor:g=u,tag:p="span"}=e,h=(0,a.Z)(e,l);const m=p;return(0,r.tZ)(m,(0,i.Z)({css:f({hasPulse:n,pulseBorderRadius:o,pulseColor:s,pulseShadowColor:g}),ref:t},h))}))},547357:(e,t,n)=>{"use strict";function i(e){if(null==e)throw new TypeError("Cannot destructure "+e)}n.d(t,{Z:()=>i})}}]);
//# sourceMappingURL=37330._zix1ITots.js.map