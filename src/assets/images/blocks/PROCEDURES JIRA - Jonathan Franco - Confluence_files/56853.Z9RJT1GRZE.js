(self._cf=self._cf||[]).push([[56853],{334806:function(e,t){!function(e){const t=Symbol("newer"),n=Symbol("older");class i{constructor(e,t){"number"!=typeof e&&(t=e,e=0),this.size=0,this.limit=e,this.oldest=this.newest=void 0,this._keymap=new Map,t&&(this.assign(t),e<1&&(this.limit=this.size))}_markEntryAsUsed(e){e!==this.newest&&(e[t]&&(e===this.oldest&&(this.oldest=e[t]),e[t][n]=e[n]),e[n]&&(e[n][t]=e[t]),e[t]=void 0,e[n]=this.newest,this.newest&&(this.newest[t]=e),this.newest=e)}assign(e){let i,o=this.limit||Number.MAX_VALUE;this._keymap.clear();let r=e[Symbol.iterator]();for(let a=r.next();!a.done;a=r.next()){let e=new s(a.value[0],a.value[1]);if(this._keymap.set(e.key,e),i?(i[t]=e,e[n]=i):this.oldest=e,i=e,0==o--)throw new Error("overflow")}this.newest=i,this.size=this._keymap.size}get(e){var t=this._keymap.get(e);return t?(this._markEntryAsUsed(t),t.value):void 0}set(e,i){var o=this._keymap.get(e);return o?(o.value=i,this._markEntryAsUsed(o),this):(this._keymap.set(e,o=new s(e,i)),this.newest?(this.newest[t]=o,o[n]=this.newest):this.oldest=o,this.newest=o,++this.size,this.size>this.limit&&this.shift(),this)}shift(){var e=this.oldest;if(e)return this.oldest[t]?(this.oldest=this.oldest[t],this.oldest[n]=void 0):(this.oldest=void 0,this.newest=void 0),e[t]=e[n]=void 0,this._keymap.delete(e.key),--this.size,[e.key,e.value]}find(e){let t=this._keymap.get(e);return t?t.value:void 0}has(e){return this._keymap.has(e)}delete(e){var i=this._keymap.get(e);return i?(this._keymap.delete(i.key),i[t]&&i[n]?(i[n][t]=i[t],i[t][n]=i[n]):i[t]?(i[t][n]=void 0,this.oldest=i[t]):i[n]?(i[n][t]=void 0,this.newest=i[n]):this.oldest=this.newest=void 0,this.size--,i.value):void 0}clear(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()}keys(){return new r(this.oldest)}values(){return new a(this.oldest)}entries(){return this}[Symbol.iterator](){return new o(this.oldest)}forEach(e,n){"object"!=typeof n&&(n=this);let i=this.oldest;for(;i;)e.call(n,i.value,i.key,this),i=i[t]}toJSON(){for(var e=new Array(this.size),n=0,i=this.oldest;i;)e[n++]={key:i.key,value:i.value},i=i[t];return e}toString(){for(var e="",n=this.oldest;n;)e+=String(n.key)+":"+n.value,(n=n[t])&&(e+=" < ");return e}}function s(e,i){this.key=e,this.value=i,this[t]=void 0,this[n]=void 0}function o(e){this.entry=e}function r(e){this.entry=e}function a(e){this.entry=e}e.LRUMap=i,o.prototype[Symbol.iterator]=function(){return this},o.prototype.next=function(){let e=this.entry;return e?(this.entry=e[t],{done:!1,value:[e.key,e.value]}):{done:!0,value:void 0}},r.prototype[Symbol.iterator]=function(){return this},r.prototype.next=function(){let e=this.entry;return e?(this.entry=e[t],{done:!1,value:e.key}):{done:!0,value:void 0}},a.prototype[Symbol.iterator]=function(){return this},a.prototype.next=function(){let e=this.entry;return e?(this.entry=e[t],{done:!1,value:e.value}):{done:!0,value:void 0}}}(t)},506262:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AdminAnnouncementBanner:()=>C,BannerComponent:()=>S});var i=n(840506),s=n(822464),o=n(486889),r=n(582463),a=n(482997),l=n(627521),c=n(234461),d=n(9019),u=n(649233),p=n(190206),h=n(400318),v=n(115613),m=n(828105),f=n(739778),y=n(879741),b=n(865884),g=n(518315),k=n(493289),w=n(612035),x=n(135811);const S=({bannerState:e})=>{const t=(0,i.useContext)(p.F);(0,i.useEffect)((()=>{t.start({name:h.lnC})}),[t]);const{createAnalyticsEvent:n}=(0,o._)(),{cloudId:s,userId:a}=(0,r.D)(),{shouldRender:x,hasOtherBanners:S,onDismiss:C,error:E,data:Z,loading:I}=(0,f.t1)(e),{id:A,appearance:B,isDismissible:_=!1,content:z}=(null==Z?void 0:Z.adminAnnouncementBanner)||{};(0,i.useEffect)((()=>{x&&H("rendered",A)}),[x,A]),(0,i.useEffect)((()=>{S&&H("blocked")}),[S]),(0,i.useEffect)((()=>{E&&H("failed")}),[E]);const H=(t,i)=>{var s,o;n({type:"sendTrackEvent",data:{source:"adminAnnouncementBanner",action:"rendered",actionSubject:"banner",attributes:{status:t,bannerId:"rendered"===t?i:void 0,linkCount:"rendered"===t?(0,b.r)(N).length:void 0,bannerContainerLength:"blocked"===t?null==e||null===(s=e.state)||void 0===s||null===(s=s.banners)||void 0===s?void 0:s.length:void 0,blockedOn:"blocked"===t?null==e||null===(o=e.state)||void 0===o||null===(o=o.banners)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.name:void 0}}}).fire()};if(S)return t.abort({name:h.lnC,reason:"Banner is blocked"}),null;if(E)return t.stopOnError({name:h.lnC,error:E}),(0,k.y)(E)?((0,u.Xb)(E),null):i.createElement(l.X,{error:E});if(!x)return!I&&t.succeed({name:h.lnC}),null;t.succeed({name:h.lnC});const N=(0,y.H)(z);return i.createElement(c.S,{attribution:d.x.MISSION_CONTROL},i.createElement(i.Fragment,null,i.createElement(v.q,{metric:w.U}),i.createElement(m.tA,{onClick:e=>{e.preventDefault();const t=e.target.closest("a");t&&(n({type:"sendUIEvent",data:{source:"adminAnnouncementBanner",action:"clicked",actionSubject:"link",actionSubjectId:"adminAnnouncementBannerContentLink"}}).fire(),window.open(t.href,"_blank"))},content:N,isDismissible:_,appearance:B,userId:a,cloudId:s,onDismiss:()=>{if(_){t.start({name:h.KY7});try{C(),t.succeed({name:h.KY7})}catch(e){t.stopOnError({name:h.KY7,error:e})}n({type:"sendUIEvent",data:{source:"adminAnnouncementBanner",action:"clicked",actionSubject:"button",actionSubjectId:"adminAnnouncementBannerDismissButton",attributes:{bannerId:A,linkCount:(0,b.r)(N).length,emojiCount:(0,g.m)(N).length,appearance:B,dismissable:_}}}).fire()}}})))};S.displayName="BannerComponent";const C=()=>(0,x.z)()?i.createElement(s.xs,{to:[a.S]},(e=>i.createElement(S,{bannerState:e}))):null;C.displayName="AdminAnnouncementBanner"},675543:(e,t,n)=>{"use strict";n.d(t,{OZ:()=>h,c6:()=>c});var i=n(199009),s=n(443998),o=n(417269);const r=["media","embedCard","blockCard","caption"],a=e=>!!e.content,l=e=>"text"===e.type,c=e=>e.reduce(((e,t)=>(e=>-1!==r.indexOf(e.type))(t)?e:a(t)?e+c(t.content):l(t)?e+t.text.length:(e=>!a(e)&&!l(e)&&"media"!==e.type)(t)&&"hardBreak"!==t.type?e+1:e),0);class d{constructor(){(0,i.Z)(this,"subscriptions",[]),(0,i.Z)(this,"lastChange",void 0)}subscribe(e){return this.subscriptions.push(e),e(this.lastChange),()=>this.subscriptions.filter((t=>t===e))}change(e){this.lastChange=e;for(const t of this.subscriptions)t(e)}}class u{constructor(e,t){(0,i.Z)(this,"editorView",void 0),(0,i.Z)(this,"subscription",void 0),(0,i.Z)(this,"initialized",!1),this.editorView=e,this.subscription=t}update(e){const t=p.getState(e.state);this.subscription.change(t)}}const p=new s.H$("content-overflow"),h=e=>{const t=new d;return{plugin:new s.Sy({key:p,state:{init:()=>({isActive:!1,positions:{characterCount:0,breakPointPosition:0}}),apply:t=>{const n=((e,t)=>{let n=0,i=0,s=0;return function e(o){var r,a;if(i===t&&(s=n),"caption"===o.type.name)n+=(null!==(r=null===(a=o.content)||void 0===a?void 0:a.size)&&void 0!==r?r:0)+1;else if(o.isText)for(let c=0;c<o.nodeSize;c++)i===t&&(s=n),n++,i++;else if(o.isInline)n++,"hardBreak"!==o.type.name&&i++;else{"doc"!==o.type.name&&n++;for(const t of null===(l=o.content)||void 0===l?void 0:l.content){var l;e(t)}"doc"!==o.type.name&&n++}}(e),{characterCount:i,breakPointPosition:s}})(t.doc,e);return n.characterCount>e?{isActive:!0,positions:n}:{isActive:!1,positions:n}}},props:{decorations(e){const{doc:t}=e,{isActive:n,positions:i}=p.getState(e);return n&&i?o.EH.create(t,[o.p.inline(i.breakPointPosition,t.nodeSize,{class:"editor-content-overflow","data-testId":"editor-content-overflow"})]):null}},view:e=>new u(e,t)}),subscription:t}}},518315:(e,t,n)=>{"use strict";n.d(t,{m:()=>s});var i=n(887922);const s=e=>(0,i.h)(e,(e=>"emoji"===e.type))},865884:(e,t,n)=>{"use strict";n.d(t,{r:()=>s});var i=n(887922);const s=e=>(0,i.h)(e,(e=>(e.marks||[]).some((e=>"link"===e.type))))},879741:(e,t,n)=>{"use strict";n.d(t,{H:()=>i});const i=e=>{if(!e)return{};try{return JSON.parse(e)}catch(t){return{}}}},728382:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const i=n(779076).ZP`query AdminAnnouncementBannerQuery{adminAnnouncementBanner{id isDismissible content appearance title updatedAt}}`},493289:(e,t,n)=>{"use strict";n.d(t,{y:()=>o});var i=n(865331),s=n(634554);const o=e=>{var t;if(!e)return!0;const n=(0,i.MS)(e)?(0,s.e9)(null==e||null===(t=e.graphQLErrors)||void 0===t?void 0:t[0]):(0,s.e9)(e);return!n||!!(parseInt(n)>=400&&parseInt(n)<500)}},422272:(e,t,n)=>{"use strict";n.d(t,{B2:()=>A,Cu:()=>m,Du:()=>s,E2:()=>y,Gx:()=>c,HY:()=>f,I2:()=>x,Jj:()=>r,P4:()=>S,RR:()=>w,V9:()=>v,VM:()=>h,a$:()=>d,cJ:()=>i,d4:()=>u,dK:()=>a,fw:()=>g,gj:()=>E,nx:()=>l,o9:()=>o,oC:()=>Z,qy:()=>b,ug:()=>I,vH:()=>B,yv:()=>k,zR:()=>p,zd:()=>C});const i="admin-announcement-banner-setting-page",s="advanced-search",o="confluence-home",r="content-history",a="edit-page",l="edit-template",c="edit-template-old",d="embedded-view-page",u="embedded-edit-page",p="global-permissions",h="inaccessible-page",v="not-found",m="space-directory",f="space-overview",y="space-pages",b="space-blogs",g="tasks-home",k="template-gallery",w="view-page",x="embedded-marketplace",S="create-content",C="public-link-shared-page",E="public-link-site-setting-page",Z="public-links-space-settings-page",I="whiteboard-view-page",A="database-view-page",B="embed-view-page"},243578:(e,t,n)=>{"use strict";n.d(t,{W:()=>s,x:()=>i});const i={transitionId:0,pageLoadStartTimestamp:0,routeName:null,previousRoute:null,startTimes:{},previousContentId:null,contentId:null},s=()=>0===i.transitionId},862545:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(615919),s=n(872342),o=n(840506),r=n(32807);const a=["analyticsContext"],l=e=>t=>{const n=(0,o.forwardRef)(((n,l)=>{let{analyticsContext:c}=n,d=(0,s.Z)(n,a);const u=(0,o.useMemo)((()=>(0,i.Z)((0,i.Z)({},e),c)),[c]);return o.createElement(r.Z,{data:u},o.createElement(t,(0,i.Z)((0,i.Z)({},d),{},{ref:l})))}));return n.displayName=`WithAnalyticsContext(${t.displayName||t.name})`,n}},331513:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var i=n(615919),s=n(840506),o=n(39030),r=n(219957),a=n(319754),l=n(16728),c=n(2142);const d={componentName:"blanket",packageName:"platform-pkg",packageVersion:"0.0.0-use.local"},u=(0,o.iv)({position:"fixed",zIndex:c.ug.blanket(),inset:0,backgroundColor:`var(--ds-blanket, ${l.Kz})`,overflowY:"auto",pointerEvents:"initial"}),p=(0,o.iv)({pointerEvents:"none"}),h=(0,o.iv)({backgroundColor:"transparent"}),v=(0,s.memo)((0,s.forwardRef)((function({shouldAllowClickThrough:e=!1,isTinted:t=!1,onBlanketClicked:n=a.Z,testId:l,children:c,analyticsContext:v},m){const f=(0,s.useRef)(null),y=(0,r.B)((0,i.Z)({fn:n,action:"clicked",analyticsData:v},d)),b=(0,s.useCallback)((e=>e.currentTarget===e.target&&f.current===e.target?y(e):void 0),[y]),g=e?void 0:b,k=(0,s.useCallback)((e=>{f.current=e.target}),[]);return(0,o.tZ)("div",{role:"presentation",css:[u,e&&p,!t&&h],onClick:g,onMouseDown:k,"data-testid":l,ref:m},c)})));v.displayName="Blanket";const m=v},471654:(e,t,n)=>{"use strict";n.d(t,{d:()=>o});var i=n(840506),s=n(9441);const o=()=>{const e=(0,i.useContext)(s.t);if(null==e)throw Error("@atlaskit/modal-dialog: Modal context unavailable – this component needs to be a child of ModalDialog.");return e}},416595:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>E});var i=n(840506),s=n(39030),o=n(521488),r=n(471654),a=n(393242),l=n(269626),c=n(70397),d=n(319754),u=n(874729),p=n(168862),h=n(428524),v=n(455113),m=n(402349);const f=(0,s.iv)({display:"inherit",margin:"var(--ds-space-0, 0px)",flex:"inherit",flexDirection:"inherit",flexGrow:1,overflowX:"hidden",overflowY:"auto",[v.B.above.xs]:{height:"unset",overflowY:"auto"}}),y=(0,s.iv)({borderBlockStart:`${m.HV}px solid ${m.RC}`}),b=(0,s.iv)({borderBlockEnd:`${m.HV}px solid ${m.RC}`}),g=(0,i.forwardRef)(((e,t)=>{const{testId:n,children:o}=e,[r,v]=(0,p.Z)({previous:!1,next:!1}),[g,k]=(0,i.useState)(!1),[w,x]=(0,i.useState)(!1),[S,C]=(0,i.useState)(!1),E=(0,i.useRef)(null),Z=(0,u.Z)(v),I=(0,u.Z)((0,l.Z)((()=>{const e=E.current;e&&k(e.scrollHeight>e.clientHeight)}))),A=(0,u.Z)((0,l.Z)((()=>{const e=E.current;if(e){const t=e.scrollHeight-e.clientHeight;r.current.previous&&x(e.scrollTop>m.HV),r.current.next&&C(e.scrollTop<=t-m.HV)}})));return(0,i.useEffect)((()=>{const e=E.current,t=(0,a.ak)(window,{type:"resize",listener:A}),n=e?(0,a.ak)(e,{type:"scroll",listener:A}):d.Z;return I(),A(),Z({previous:Boolean(null==e?void 0:e.previousElementSibling),next:Boolean(null==e?void 0:e.nextElementSibling)}),()=>{t(),n()}}),[I,A,Z]),(0,s.tZ)(h.Z,{isInset:!0},(0,s.tZ)("div",{tabIndex:g?0:void 0,role:g?"region":void 0,"aria-label":g?"Scrollable content":void 0,"data-testid":n&&`${n}--scrollable`,ref:(0,c.Z)([t,E]),css:[f,w&&y,S&&b]},o))}));g.displayName="ScrollContainer";const k=g;var w=n(9441);const x=(0,s.iv)({flex:"1 1 auto"}),S=(0,s.iv)({padding:`${m.HV}px ${m.o3}px`}),C=(0,s.iv)({padding:`0px ${m.o3}px`}),E=e=>{const{children:t,testId:n}=e,{testId:a}=(0,r.d)(),l=n||a&&`${a}--body`;return function(){const e=(0,i.useContext)(w.$);if(null==e)throw Error("@atlaskit/modal-dialog: Scroll context unavailable – this component needs to be a child of ModalDialog.");return e}()?(0,s.tZ)("div",{css:[x,C],"data-testid":l},t):(0,s.tZ)(o.in,null,(0,s.tZ)(k,{testId:n||a},(0,s.tZ)("div",{css:[x,S],"data-testid":l},t)))}},272169:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var i=n(39030),s=n(471654),o=n(402349);const r=(0,i.iv)({display:"flex",padding:o.o3,position:"relative",alignItems:"center",justifyContent:"flex-end",gap:"var(--ds-space-100, 8px)",paddingBlockStart:o.o3-o.HV+"px"}),a=e=>{const{children:t,testId:n}=e,{testId:o}=(0,s.d)(),a=n||o&&`${o}--footer`;return(0,i.tZ)("div",{css:r,"data-testid":a},t)};a.displayName="ModalFooter";const l=a},587499:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(840506),s=n(227318);const o=e=>i.createElement(s.Z,{appear:!0},e.children);o.displayName="ModalTransition";const r=o},887922:(e,t,n)=>{"use strict";n.d(t,{h:()=>s});var i=n(710358);function s(e,t){const n=[];return(0,i.f)(e,{any:e=>{t(e)&&n.push(e)}}),n}},15319:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}}]);
//# sourceMappingURL=56853.Z9RJT1GRZE.js.map