WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:confluence-macro-api-v5', location = 'v5/js/confluence/utils.js' */
define("ac/confluence/utils",["document"],(function(e){return{isFabricEditor:function(){return e.querySelectorAll("[data-fabric-mode]").length>0}}}));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:confluence-macro-api-v5', location = 'v5/js/confluence/macro/macro.js' */
define("ac/confluence/macro",["confluence/root","ajs","ac/confluence/utils"],(function(o,e,r){var a=void 0,t={};function n(){var o=require("confluence-macro-browser/macro-browser");void 0===o&&(o={getMacroName:function(o){},getMacroParams:function(o){},getMacroBody:function(){throw new Error("confluence-macro-browser/macro-browser is unavailable")}});return o}function c(o){const e=o.indexOf("=");if(e>0){return{key:o.slice(0,e),value:o.slice(e+1)}}return{}}function i(o){return o.split("|").reduce((function(o,e){const r=c(e);r.key&&(o[r.key]=r.value);return o}),{})}return{convertRawParamToObject:c,convertRawParamSeriesToObject:i,getMacroBody:function(o){var r=o._context.extension.options.productContext["macro.id"],a=$('[data-macro-body][data-fabric-macro="'+r+'"]');if(a.length)o(a.attr("data-macro-body")||"");else if(t&&"string"==typeof t.body)o(t.body);else try{var c=n().getMacroBody(),i=$($.parseXML('<root xmlns:ac="guid">'+c+"</root>")).find("[ac\\:macro-id='"+r+"']");if(1==i.length){o(i.html().replace('xmlns:ac="guid"',""));return}o(c);return}catch(a){var s=o._context.extension.options.productContext;if("false"===s["macro.truncated"]){o(s["macro.body"]);return}var u=s["page.id"],d=s["page.version"];e.$.ajax({url:e.contextPath()+"/rest/api/content/"+u+"/history/"+d+"/macro/id/"+r,dataType:"json",success:function(e){o(e.body)}})}},closeCurrentMacroPropertyPanel:function(){e.Confluence.PropertyPanel.destroy()},setLastSelectedConnectMacroNode:function(o){t.locationToInsert=void 0;t.params=void 0;t.body=void 0;t.name=void 0;var e=n().getMacroName(o);a=void 0!==e?o:void 0},setUnsavedMacroData:function(o,e,r,a){t.body=e;t.params=r;t.locationToInsert=a;t.name=o},clearMacroDataParams:function(){t.params=null},getMacroData:function(o){var e=o._context.extension.options.productContext["macro.id"],r=$('[data-fabric-macro="'+e+'"]');if(r.length)o(JSON.parse(r.attr("data-macro-parameters")||"{}"));else if(void 0===a&&t.params)o(t.params);else if(a)o(n().getMacroParams(a));else{o(i(o._context.extension.options.productContext[": = | RAW | = :"]||""))}},getCurrentMacroParameters:function(){return void 0===a?t.params:n().getMacroParams(a)},saveMacro:function(){return tinymce.confluence.MacroUtils.updateMacro.apply(this,arguments)},saveCurrentMacro:function(c,i){if(r.isFabricEditor()){return require("confluence-macro-browser/macro-browser-facade").insert({name:t.name,params:c,body:i})}if(void 0===a){t.params=c;t.body=i;var s={contentId:o.getContentId(),macro:{name:t.name,params:t.params,body:null===t.body?"":t.body}};e.Rte.getEditor().selection.moveToBookmark(t.locationToInsert);return tinymce.confluence.MacroUtils.insertMacro(s).done((function(o){a=o}))}var u=n().getMacroName(a);if(void 0!==u)return tinymce.confluence.MacroUtils.updateMacro(c,i,u,a).done((function(o){a=o}))}}}));
}catch(e){WRMCB(e)};