(self._cf=self._cf||[]).push([[42434],{725886:(t,e,r)=>{"use strict";function n(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+t+(r.length?" "+r.map((function(t){return"'"+t+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function i(t){return!!t&&!!t[q]}function o(t){return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;var r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===V}(t)||Array.isArray(t)||!!t[$]||!!t.constructor[$]||h(t)||d(t))}function s(t,e,r){void 0===r&&(r=!1),0===a(t)?(r?Object.keys:G)(t).forEach((function(n){r&&"symbol"==typeof n||e(n,t[n],t)})):t.forEach((function(r,n){return e(n,r,t)}))}function a(t){var e=t[q];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:h(t)?2:d(t)?3:0}function c(t,e){return 2===a(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function u(t,e){return 2===a(t)?t.get(e):t[e]}function l(t,e,r){var n=a(t);2===n?t.set(e,r):3===n?(t.delete(e),t.add(r)):t[e]=r}function p(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function h(t){return L&&t instanceof Map}function d(t){return B&&t instanceof Set}function f(t){return t.o||t.t}function b(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=J(t);delete e[q];for(var r=G(e),n=0;n<r.length;n++){var i=r[n],o=e[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(e[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function m(t,e){return void 0===e&&(e=!1),v(t)||i(t)||!o(t)||(a(t)>1&&(t.set=t.add=t.clear=t.delete=y),Object.freeze(t),e&&s(t,(function(t,e){return m(e,!0)}),!0)),t}function y(){n(2)}function v(t){return null==t||"object"!=typeof t||Object.isFrozen(t)}function w(t){var e=Q[t];return e||n(18,t),e}function g(){return z}function x(t,e){e&&(w("Patches"),t.u=[],t.s=[],t.v=e)}function S(t){_(t),t.p.forEach(E),t.p=null}function _(t){t===z&&(z=t.l)}function O(t){return z={p:[],l:z,h:t,m:!0,_:0}}function E(t){var e=t[q];0===e.i||1===e.i?e.j():e.O=!0}function P(t,e){e._=e.p.length;var r=e.p[0],i=void 0!==t&&t!==r;return e.h.g||w("ES5").S(e,t,i),i?(r[q].P&&(S(e),n(4)),o(t)&&(t=j(e,t),e.l||I(e,t)),e.u&&w("Patches").M(r[q].t,t,e.u,e.s)):t=j(e,r,[]),S(e),e.u&&e.v(e.u,e.s),t!==D?t:void 0}function j(t,e,r){if(v(e))return e;var n=e[q];if(!n)return s(e,(function(i,o){return T(t,n,e,i,o,r)}),!0),e;if(n.A!==t)return e;if(!n.P)return I(t,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=4===n.i||5===n.i?n.o=b(n.k):n.o;s(3===n.i?new Set(i):i,(function(e,o){return T(t,n,i,e,o,r)})),I(t,i,!1),r&&t.u&&w("Patches").R(n,r,t.u,t.s)}return n.o}function T(t,e,r,n,s,a){if(i(s)){var u=j(t,s,a&&e&&3!==e.i&&!c(e.D,n)?a.concat(n):void 0);if(l(r,n,u),!i(u))return;t.m=!1}if(o(s)&&!v(s)){if(!t.h.F&&t._<1)return;j(t,s),e&&e.A.l||I(t,s)}}function I(t,e,r){void 0===r&&(r=!1),t.h.F&&t.m&&m(e,r)}function A(t,e){var r=t[q];return(r?f(r):t)[e]}function k(t,e){if(e in t)for(var r=Object.getPrototypeOf(t);r;){var n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Object.getPrototypeOf(r)}}function F(t){t.P||(t.P=!0,t.l&&F(t.l))}function C(t){t.o||(t.o=b(t.t))}function M(t,e,r){var n=h(e)?w("MapSet").N(e,r):d(e)?w("MapSet").T(e,r):t.g?function(t,e){var r=Array.isArray(t),n={i:r?1:0,A:e?e.A:g(),P:!1,I:!1,D:{},l:e,t,k:null,o:null,j:null,C:!1},i=n,o=W;r&&(i=[n],o=Y);var s=Proxy.revocable(i,o),a=s.revoke,c=s.proxy;return n.k=c,n.j=a,c}(e,r):w("ES5").J(e,r);return(r?r.A:g()).p.push(n),n}function N(t){return i(t)||n(22,t),function t(e){if(!o(e))return e;var r,n=e[q],i=a(e);if(n){if(!n.P&&(n.i<4||!w("ES5").K(n)))return n.t;n.I=!0,r=U(e,i),n.I=!1}else r=U(e,i);return s(r,(function(e,i){n&&u(n.t,e)===i||l(r,e,t(i))})),3===i?new Set(r):r}(t)}function U(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return b(t)}r.d(e,{Uy:()=>tt,ZP:()=>et});var Z,z,R="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),L="undefined"!=typeof Map,B="undefined"!=typeof Set,K="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,D=R?Symbol.for("immer-nothing"):((Z={})["immer-nothing"]=!0,Z),$=R?Symbol.for("immer-draftable"):"__$immer_draftable",q=R?Symbol.for("immer-state"):"__$immer_state",V=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),G="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,J=Object.getOwnPropertyDescriptors||function(t){var e={};return G(t).forEach((function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)})),e},Q={},W={get:function(t,e){if(e===q)return t;var r=f(t);if(!c(r,e))return function(t,e,r){var n,i=k(e,r);return i?"value"in i?i.value:null===(n=i.get)||void 0===n?void 0:n.call(t.k):void 0}(t,r,e);var n=r[e];return t.I||!o(n)?n:n===A(t.t,e)?(C(t),t.o[e]=M(t.A.h,n,t)):n},has:function(t,e){return e in f(t)},ownKeys:function(t){return Reflect.ownKeys(f(t))},set:function(t,e,r){var n=k(f(t),e);if(null==n?void 0:n.set)return n.set.call(t.k,r),!0;if(!t.P){var i=A(f(t),e),o=null==i?void 0:i[q];if(o&&o.t===r)return t.o[e]=r,t.D[e]=!1,!0;if(p(r,i)&&(void 0!==r||c(t.t,e)))return!0;C(t),F(t)}return t.o[e]===r&&"number"!=typeof r&&(void 0!==r||e in t.o)||(t.o[e]=r,t.D[e]=!0,!0)},deleteProperty:function(t,e){return void 0!==A(t.t,e)||e in t.t?(t.D[e]=!1,C(t),F(t)):delete t.D[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var r=f(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n?{writable:!0,configurable:1!==t.i||"length"!==e,enumerable:n.enumerable,value:r[e]}:n},defineProperty:function(){n(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){n(12)}},Y={};s(W,(function(t,e){Y[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}})),Y.deleteProperty=function(t,e){return Y.set.call(this,t,e,void 0)},Y.set=function(t,e,r){return W.set.call(this,t[0],e,r,t[0])};var H=function(){function t(t){var e=this;this.g=K,this.F=!0,this.produce=function(t,r,i){if("function"==typeof t&&"function"!=typeof r){var s=r;r=t;var a=e;return function(t){var e=this;void 0===t&&(t=s);for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return a.produce(t,(function(t){var n;return(n=r).call.apply(n,[e,t].concat(i))}))}}var c;if("function"!=typeof r&&n(6),void 0!==i&&"function"!=typeof i&&n(7),o(t)){var u=O(e),l=M(e,t,void 0),p=!0;try{c=r(l),p=!1}finally{p?S(u):_(u)}return"undefined"!=typeof Promise&&c instanceof Promise?c.then((function(t){return x(u,i),P(t,u)}),(function(t){throw S(u),t})):(x(u,i),P(c,u))}if(!t||"object"!=typeof t){if(void 0===(c=r(t))&&(c=t),c===D&&(c=void 0),e.F&&m(c,!0),i){var h=[],d=[];w("Patches").M(t,c,h,d),i(h,d)}return c}n(21,t)},this.produceWithPatches=function(t,r){if("function"==typeof t)return function(r){for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return e.produceWithPatches(r,(function(e){return t.apply(void 0,[e].concat(i))}))};var n,i,o=e.produce(t,r,(function(t,e){n=t,i=e}));return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(t){return[t,n,i]})):[o,n,i]},"boolean"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),"boolean"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze)}var e=t.prototype;return e.createDraft=function(t){o(t)||n(8),i(t)&&(t=N(t));var e=O(this),r=M(this,t,void 0);return r[q].C=!0,_(e),r},e.finishDraft=function(t,e){var r=(t&&t[q]).A;return x(r,e),P(void 0,r)},e.setAutoFreeze=function(t){this.F=t},e.setUseProxies=function(t){t&&!K&&n(20),this.g=t},e.applyPatches=function(t,e){var r;for(r=e.length-1;r>=0;r--){var n=e[r];if(0===n.path.length&&"replace"===n.op){t=n.value;break}}r>-1&&(e=e.slice(r+1));var o=w("Patches").$;return i(t)?o(t,e):this.produce(t,(function(t){return o(t,e)}))},t}(),X=new H,tt=X.produce;X.produceWithPatches.bind(X),X.setAutoFreeze.bind(X),X.setUseProxies.bind(X),X.applyPatches.bind(X),X.createDraft.bind(X),X.finishDraft.bind(X);const et=tt},78818:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(e,r,n){t.call(this),this.parent=e,this.outerValue=r,this.outerIndex=n,this.index=0}return n(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(r(364552).Subscriber);e.InnerSubscriber=i},522281:(t,e,r)=>{"use strict";var n=r(869886),i=function(){function t(t,e,r){this.kind=t,this.value=e,this.error=r,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,r){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return r&&r()}},t.prototype.accept=function(t,e,r){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,r)},t.prototype.toObservable=function(){switch(this.kind){case"N":return n.Observable.of(this.value);case"E":return n.Observable.throw(this.error);case"C":return n.Observable.empty()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();e.Notification=i},869886:(t,e,r)=>{"use strict";var n=r(508962),i=r(957550),o=r(636675),s=r(711546),a=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n=this.operator,o=i.toSubscriber(t,e,r);if(n?n.call(o,this.source):o.add(this.source||!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}},t.prototype.forEach=function(t,e){var r=this;if(e||(n.root.Rx&&n.root.Rx.config&&n.root.Rx.config.Promise?e=n.root.Rx.config.Promise:n.root.Promise&&(e=n.root.Promise)),!e)throw new Error("no Promise impl found");return new e((function(e,n){var i;i=r.subscribe((function(e){if(i)try{t(e)}catch(r){n(r),i.unsubscribe()}else t(e)}),n,e)}))},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[o.observable]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 0===t.length?this:s.pipeFromArray(t)(this)},t.prototype.toPromise=function(t){var e=this;if(t||(n.root.Rx&&n.root.Rx.config&&n.root.Rx.config.Promise?t=n.root.Rx.config.Promise:n.root.Promise&&(t=n.root.Promise)),!t)throw new Error("no Promise impl found");return new t((function(t,r){var n;e.subscribe((function(t){return n=t}),(function(t){return r(t)}),(function(){return t(n)}))}))},t.create=function(e){return new t(e)},t}();e.Observable=a},763341:(t,e)=>{"use strict";e.empty={closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},854463:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(){t.apply(this,arguments)}return n(e,t),e.prototype.notifyNext=function(t,e,r,n,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(r(364552).Subscriber);e.OuterSubscriber=i},123948:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(659745),o=r(242127),s=r(262545),a=r(678250),c=r(687922),u=r(422830),l=function(t){function e(e,r,n){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===r&&(r=Number.POSITIVE_INFINITY),t.call(this),this.scheduler=n,this._events=[],this._bufferSize=e<1?1:e,this._windowTime=r<1?1:r}return n(e,t),e.prototype.next=function(e){var r=this._getNow();this._events.push(new p(r,e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,r=this._trimBufferThenGetEvents(),n=this.scheduler;if(this.closed)throw new c.ObjectUnsubscribedError;this.hasError||this.isStopped?e=s.Subscription.EMPTY:(this.observers.push(t),e=new u.SubjectSubscription(this,t)),n&&t.add(t=new a.ObserveOnSubscriber(t,n));for(var i=r.length,o=0;o<i&&!t.closed;o++)t.next(r[o].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||o.queue).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,r=this._windowTime,n=this._events,i=n.length,o=0;o<i&&!(t-n[o].time<r);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&n.splice(0,o),n},e}(i.Subject);e.ReplaySubject=l;var p=function(t,e){this.time=t,this.value=e}},326429:(t,e)=>{"use strict";var r=function(){function t(e,r){void 0===r&&(r=t.now),this.SchedulerAction=e,this.now=r}return t.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(r,e)},t.now=Date.now?Date.now:function(){return+new Date},t}();e.Scheduler=r},659745:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(869886),o=r(364552),s=r(262545),a=r(687922),c=r(422830),u=r(450841),l=function(t){function e(e){t.call(this,e),this.destination=e}return n(e,t),e}(o.Subscriber);e.SubjectSubscriber=l;var p=function(t){function e(){t.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return n(e,t),e.prototype[u.rxSubscriber]=function(){return new l(this)},e.prototype.lift=function(t){var e=new h(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,r=e.length,n=e.slice(),i=0;i<r;i++)n[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,r=e.length,n=e.slice(),i=0;i<r;i++)n[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new a.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,r=t.slice(),n=0;n<e;n++)r[n].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new a.ObjectUnsubscribedError;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),s.Subscription.EMPTY):this.isStopped?(t.complete(),s.Subscription.EMPTY):(this.observers.push(t),new c.SubjectSubscription(this,t))},e.prototype.asObservable=function(){var t=new i.Observable;return t.source=this,t},e.create=function(t,e){return new h(t,e)},e}(i.Observable);e.Subject=p;var h=function(t){function e(e,r){t.call(this),this.destination=e,this.source=r}return n(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):s.Subscription.EMPTY},e}(p);e.AnonymousSubject=h},422830:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(e,r){t.call(this),this.subject=e,this.subscriber=r,this.closed=!1}return n(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var r=e.indexOf(this.subscriber);-1!==r&&e.splice(r,1)}}},e}(r(262545).Subscription);e.SubjectSubscription=i},364552:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(574170),o=r(262545),s=r(763341),a=r(450841),c=function(t){function e(e,r,n){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=s.empty;break;case 1:if(!e){this.destination=s.empty;break}if("object"==typeof e){if(l(e)){var i=e[a.rxSubscriber]();this.syncErrorThrowable=i.syncErrorThrowable,this.destination=i,i.add(this)}else this.syncErrorThrowable=!0,this.destination=new u(this,e);break}default:this.syncErrorThrowable=!0,this.destination=new u(this,e,r,n)}}return n(e,t),e.prototype[a.rxSubscriber]=function(){return this},e.create=function(t,r,n){var i=new e(t,r,n);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(o.Subscription);e.Subscriber=c;var u=function(t){function e(e,r,n,o){var a;t.call(this),this._parentSubscriber=e;var c=this;i.isFunction(r)?a=r:r&&(a=r.next,n=r.error,o=r.complete,r!==s.empty&&(c=Object.create(r),i.isFunction(c.unsubscribe)&&this.add(c.unsubscribe.bind(c)),c.unsubscribe=this.unsubscribe.bind(this))),this._context=c,this._next=a,this._error=n,this._complete=o}return n(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};e.syncErrorThrowable?(this.__tryOrSetError(e,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(r){throw this.unsubscribe(),r}},e.prototype.__tryOrSetError=function(t,e,r){try{e.call(this._context,r)}catch(n){return t.syncErrorValue=n,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(c);function l(t){return t instanceof c||"syncErrorThrowable"in t&&t[a.rxSubscriber]}},262545:(t,e,r)=>{"use strict";var n=r(618658),i=r(286988),o=r(574170),s=r(80066),a=r(738856),c=r(43226),u=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var r=this,u=r._parent,p=r._parents,h=r._unsubscribe,d=r._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var f=-1,b=p?p.length:0;u;)u.remove(this),u=++f<b&&p[f]||null;if(o.isFunction(h))s.tryCatch(h).call(this)===a.errorObject&&(e=!0,t=t||(a.errorObject.e instanceof c.UnsubscriptionError?l(a.errorObject.e.errors):[a.errorObject.e]));if(n.isArray(d))for(f=-1,b=d.length;++f<b;){var m=d[f];if(i.isObject(m))if(s.tryCatch(m.unsubscribe).call(m)===a.errorObject){e=!0,t=t||[];var y=a.errorObject.e;y instanceof c.UnsubscriptionError?t=t.concat(l(y.errors)):t.push(y)}}if(e)throw new c.UnsubscriptionError(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var r=e;switch(typeof e){case"function":r=new t(e);case"object":if(r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if("function"!=typeof r._addParent){var n=r;(r=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(r),r._addParent(this),r},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},t.prototype._addParent=function(t){var e=this._parent,r=this._parents;e&&e!==t?r?-1===r.indexOf(t)&&r.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function l(t){return t.reduce((function(t,e){return t.concat(e instanceof c.UnsubscriptionError?e.errors:e)}),[])}e.Subscription=u},185831:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(869886),o=r(762298),s=r(941799),a=function(t){function e(e,r){t.call(this),this.arrayLike=e,this.scheduler=r,r||1!==e.length||(this._isScalar=!0,this.value=e[0])}return n(e,t),e.create=function(t,r){var n=t.length;return 0===n?new s.EmptyObservable:1===n?new o.ScalarObservable(t[0],r):new e(t,r)},e.dispatch=function(t){var e=t.arrayLike,r=t.index,n=t.length,i=t.subscriber;i.closed||(r>=n?i.complete():(i.next(e[r]),t.index=r+1,this.schedule(t)))},e.prototype._subscribe=function(t){var r=this.arrayLike,n=this.scheduler,i=r.length;if(n)return n.schedule(e.dispatch,0,{arrayLike:r,index:0,length:i,subscriber:t});for(var o=0;o<i&&!t.closed;o++)t.next(r[o]);t.complete()},e}(i.Observable);e.ArrayLikeObservable=a},484213:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(869886),o=r(762298),s=r(941799),a=r(620669),c=function(t){function e(e,r){t.call(this),this.array=e,this.scheduler=r,r||1!==e.length||(this._isScalar=!0,this.value=e[0])}return n(e,t),e.create=function(t,r){return new e(t,r)},e.of=function(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];var n=t[t.length-1];a.isScheduler(n)?t.pop():n=null;var i=t.length;return i>1?new e(t,n):1===i?new o.ScalarObservable(t[0],n):new s.EmptyObservable(n)},e.dispatch=function(t){var e=t.array,r=t.index,n=t.count,i=t.subscriber;r>=n?i.complete():(i.next(e[r]),i.closed||(t.index=r+1,this.schedule(t)))},e.prototype._subscribe=function(t){var r=this.array,n=r.length,i=this.scheduler;if(i)return i.schedule(e.dispatch,0,{array:r,index:0,count:n,subscriber:t});for(var o=0;o<n&&!t.closed;o++)t.next(r[o]);t.complete()},e}(i.Observable);e.ArrayObservable=c},941799:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(e){t.call(this),this.scheduler=e}return n(e,t),e.create=function(t){return new e(t)},e.dispatch=function(t){t.subscriber.complete()},e.prototype._subscribe=function(t){var r=this.scheduler;if(r)return r.schedule(e.dispatch,0,{subscriber:t});t.complete()},e}(r(869886).Observable);e.EmptyObservable=i},493178:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(618658),o=r(988400),s=r(490585),a=r(569855),c=r(790658),u=r(484213),l=r(185831),p=r(345318),h=r(869886),d=r(678250),f=r(636675),b=function(t){function e(e,r){t.call(this,null),this.ish=e,this.scheduler=r}return n(e,t),e.create=function(t,r){if(null!=t){if("function"==typeof t[f.observable])return t instanceof h.Observable&&!r?t:new e(t,r);if(i.isArray(t))return new u.ArrayObservable(t,r);if(s.isPromise(t))return new a.PromiseObservable(t,r);if("function"==typeof t[p.iterator]||"string"==typeof t)return new c.IteratorObservable(t,r);if(o.isArrayLike(t))return new l.ArrayLikeObservable(t,r)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")},e.prototype._subscribe=function(t){var e=this.ish,r=this.scheduler;return null==r?e[f.observable]().subscribe(t):e[f.observable]().subscribe(new d.ObserveOnSubscriber(t,r,0))},e}(h.Observable);e.FromObservable=b},790658:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(508962),o=r(869886),s=r(345318),a=function(t){function e(e,r){if(t.call(this),this.scheduler=r,null==e)throw new Error("iterator cannot be null.");this.iterator=function(t){var e=t[s.iterator];if(!e&&"string"==typeof t)return new c(t);if(!e&&void 0!==t.length)return new u(t);if(!e)throw new TypeError("object is not iterable");return t[s.iterator]()}(e)}return n(e,t),e.create=function(t,r){return new e(t,r)},e.dispatch=function(t){var e=t.index,r=t.hasError,n=t.iterator,i=t.subscriber;if(r)i.error(t.error);else{var o=n.next();o.done?i.complete():(i.next(o.value),t.index=e+1,i.closed?"function"==typeof n.return&&n.return():this.schedule(t))}},e.prototype._subscribe=function(t){var r=this.iterator,n=this.scheduler;if(n)return n.schedule(e.dispatch,0,{index:0,iterator:r,subscriber:t});for(;;){var i=r.next();if(i.done){t.complete();break}if(t.next(i.value),t.closed){"function"==typeof r.return&&r.return();break}}},e}(o.Observable);e.IteratorObservable=a;var c=function(){function t(t,e,r){void 0===e&&(e=0),void 0===r&&(r=t.length),this.str=t,this.idx=e,this.len=r}return t.prototype[s.iterator]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},t}(),u=function(){function t(t,e,r){void 0===e&&(e=0),void 0===r&&(r=function(t){var e=+t.length;if(isNaN(e))return 0;if(0===e||(r=e,"number"!=typeof r||!i.root.isFinite(r)))return e;var r;if(e=function(t){var e=+t;if(0===e)return e;if(isNaN(e))return e;return e<0?-1:1}(e)*Math.floor(Math.abs(e)),e<=0)return 0;if(e>l)return l;return e}(t)),this.arr=t,this.idx=e,this.len=r}return t.prototype[s.iterator]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},t}();var l=Math.pow(2,53)-1},569855:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(508962),o=function(t){function e(e,r){t.call(this),this.promise=e,this.scheduler=r}return n(e,t),e.create=function(t,r){return new e(t,r)},e.prototype._subscribe=function(t){var e=this,r=this.promise,n=this.scheduler;if(null==n)this._isScalar?t.closed||(t.next(this.value),t.complete()):r.then((function(r){e.value=r,e._isScalar=!0,t.closed||(t.next(r),t.complete())}),(function(e){t.closed||t.error(e)})).then(null,(function(t){i.root.setTimeout((function(){throw t}))}));else if(this._isScalar){if(!t.closed)return n.schedule(s,0,{value:this.value,subscriber:t})}else r.then((function(r){e.value=r,e._isScalar=!0,t.closed||t.add(n.schedule(s,0,{value:r,subscriber:t}))}),(function(e){t.closed||t.add(n.schedule(a,0,{err:e,subscriber:t}))})).then(null,(function(t){i.root.setTimeout((function(){throw t}))}))},e}(r(869886).Observable);function s(t){var e=t.value,r=t.subscriber;r.closed||(r.next(e),r.complete())}function a(t){var e=t.err,r=t.subscriber;r.closed||r.error(e)}e.PromiseObservable=o},891610:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(e,r,n){t.call(this),this.start=e,this._count=r,this.scheduler=n}return n(e,t),e.create=function(t,r,n){return void 0===t&&(t=0),void 0===r&&(r=0),new e(t,r,n)},e.dispatch=function(t){var e=t.start,r=t.index,n=t.count,i=t.subscriber;r>=n?i.complete():(i.next(e),i.closed||(t.index=r+1,t.start=e+1,this.schedule(t)))},e.prototype._subscribe=function(t){var r=0,n=this.start,i=this._count,o=this.scheduler;if(o)return o.schedule(e.dispatch,0,{index:r,count:i,start:n,subscriber:t});for(;;){if(r++>=i){t.complete();break}if(t.next(n++),t.closed)break}},e}(r(869886).Observable);e.RangeObservable=i},762298:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(e,r){t.call(this),this.value=e,this.scheduler=r,this._isScalar=!0,r&&(this._isScalar=!1)}return n(e,t),e.create=function(t,r){return new e(t,r)},e.dispatch=function(t){var e=t.done,r=t.value,n=t.subscriber;e?n.complete():(n.next(r),n.closed||(t.done=!0,this.schedule(t)))},e.prototype._subscribe=function(t){var r=this.value,n=this.scheduler;if(n)return n.schedule(e.dispatch,0,{done:!1,value:r,subscriber:t});t.next(r),t.closed||t.complete()},e}(r(869886).Observable);e.ScalarObservable=i},138400:(t,e,r)=>{"use strict";var n=r(493178);e.from=n.FromObservable.create},280325:(t,e,r)=>{"use strict";var n=r(569855);e.p=n.PromiseObservable.create},449019:(t,e,r)=>{"use strict";var n=r(891610);e.w=n.RangeObservable.create},662342:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(364552);e.bufferCount=function(t,e){return void 0===e&&(e=null),function(r){return r.lift(new o(t,e))}};var o=function(){function t(t,e){this.bufferSize=t,this.startBufferEvery=e,this.subscriberClass=e&&t!==e?a:s}return t.prototype.call=function(t,e){return e.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))},t}(),s=function(t){function e(e,r){t.call(this,e),this.bufferSize=r,this.buffer=[]}return n(e,t),e.prototype._next=function(t){var e=this.buffer;e.push(t),e.length==this.bufferSize&&(this.destination.next(e),this.buffer=[])},e.prototype._complete=function(){var e=this.buffer;e.length>0&&this.destination.next(e),t.prototype._complete.call(this)},e}(i.Subscriber),a=function(t){function e(e,r,n){t.call(this,e),this.bufferSize=r,this.startBufferEvery=n,this.buffers=[],this.count=0}return n(e,t),e.prototype._next=function(t){var e=this,r=e.bufferSize,n=e.startBufferEvery,i=e.buffers,o=e.count;this.count++,o%n==0&&i.push([]);for(var s=i.length;s--;){var a=i[s];a.push(t),a.length===r&&(i.splice(s,1),this.destination.next(a))}},e.prototype._complete=function(){for(var e=this.buffers,r=this.destination;e.length>0;){var n=e.shift();n.length>0&&r.next(n)}t.prototype._complete.call(this)},e}(i.Subscriber)},152222:(t,e,r)=>{"use strict";var n=r(785043);e.concatMap=function(t,e){return n.mergeMap(t,e,1)}},37696:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(364552);e.map=function(t,e){return function(r){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new o(t,e))}};var o=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.project,this.thisArg))},t}();e.MapOperator=o;var s=function(t){function e(e,r,n){t.call(this,e),this.project=r,this.count=0,this.thisArg=n||this}return n(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(r){return void this.destination.error(r)}this.destination.next(e)},e}(i.Subscriber)},785043:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(53771),o=r(854463);e.mergeMap=function(t,e,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),function(n){return"number"==typeof e&&(r=e,e=null),n.lift(new s(t,e,r))}};var s=function(){function t(t,e,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.project=t,this.resultSelector=e,this.concurrent=r}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.project,this.resultSelector,this.concurrent))},t}();e.MergeMapOperator=s;var a=function(t){function e(e,r,n,i){void 0===i&&(i=Number.POSITIVE_INFINITY),t.call(this,e),this.project=r,this.resultSelector=n,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return n(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,r=this.index++;try{e=this.project(t,r)}catch(n){return void this.destination.error(n)}this.active++,this._innerSub(e,t,r)},e.prototype._innerSub=function(t,e,r){this.add(i.subscribeToResult(this,t,e,r))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,r,n,i){this.resultSelector?this._notifyResultSelector(t,e,r,n):this.destination.next(e)},e.prototype._notifyResultSelector=function(t,e,r,n){var i;try{i=this.resultSelector(t,e,r,n)}catch(o){return void this.destination.error(o)}this.destination.next(i)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(o.OuterSubscriber);e.MergeMapSubscriber=a},678250:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(364552),o=r(522281);e.observeOn=function(t,e){return void 0===e&&(e=0),function(r){return r.lift(new s(t,e))}};var s=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.scheduler,this.delay))},t}();e.ObserveOnOperator=s;var a=function(t){function e(e,r,n){void 0===n&&(n=0),t.call(this,e),this.scheduler=r,this.delay=n}return n(e,t),e.dispatch=function(t){var e=t.notification,r=t.destination;e.observe(r),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new c(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(o.Notification.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(o.Notification.createError(t))},e.prototype._complete=function(){this.scheduleMessage(o.Notification.createComplete())},e}(i.Subscriber);e.ObserveOnSubscriber=a;var c=function(t,e){this.notification=t,this.destination=e};e.ObserveOnMessage=c},97787:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(364552);e.tap=function(t,e,r){return function(n){return n.lift(new o(t,e,r))}};var o=function(){function t(t,e,r){this.nextOrObserver=t,this.error=e,this.complete=r}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.nextOrObserver,this.error,this.complete))},t}(),s=function(t){function e(e,r,n,o){t.call(this,e);var s=new i.Subscriber(r,n,o);s.syncErrorThrowable=!0,this.add(s),this.safeSubscriber=s}return n(e,t),e.prototype._next=function(t){var e=this.safeSubscriber;e.next(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.next(t)},e.prototype._error=function(t){var e=this.safeSubscriber;e.error(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.error(t)},e.prototype._complete=function(){var t=this.safeSubscriber;t.complete(),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.complete()},e}(i.Subscriber)},318341:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(e,r){t.call(this)}return n(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(r(262545).Subscription);e.Action=i},957694:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(508962),o=function(t){function e(e,r){t.call(this,e,r),this.scheduler=e,this.pending=!1,this.work=r}return n(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t,this.pending=!0;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,e)),this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this},e.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),i.root.setInterval(t.flush.bind(t,this),r)},e.prototype.recycleAsyncId=function(t,e,r){if(void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending)return e;i.root.clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var r=!1,n=void 0;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,r=e.actions,n=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(r(318341).Action);e.AsyncAction=o},953835:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(){t.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return n(e,t),e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var r;this.active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}},e}(r(326429).Scheduler);e.AsyncScheduler=i},633718:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(e,r){t.call(this,e,r),this.scheduler=e,this.work=r}return n(e,t),e.prototype.schedule=function(e,r){return void 0===r&&(r=0),r>0?t.prototype.schedule.call(this,e,r):(this.delay=r,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,r){return r>0||this.closed?t.prototype.execute.call(this,e,r):this._execute(e,r)},e.prototype.requestAsyncId=function(e,r,n){return void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0?t.prototype.requestAsyncId.call(this,e,r,n):e.flush(this)},e}(r(957694).AsyncAction);e.QueueAction=i},34251:function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(r(953835).AsyncScheduler);e.QueueScheduler=i},242127:(t,e,r)=>{"use strict";var n=r(633718),i=r(34251);e.queue=new i.QueueScheduler(n.QueueAction)},345318:(t,e,r)=>{"use strict";var n=r(508962);function i(t){var e=t.Symbol;if("function"==typeof e)return e.iterator||(e.iterator=e("iterator polyfill")),e.iterator;var r=t.Set;if(r&&"function"==typeof(new r)["@@iterator"])return"@@iterator";var n=t.Map;if(n)for(var i=Object.getOwnPropertyNames(n.prototype),o=0;o<i.length;++o){var s=i[o];if("entries"!==s&&"size"!==s&&n.prototype[s]===n.prototype.entries)return s}return"@@iterator"}e.symbolIteratorPonyfill=i,e.iterator=i(n.root),e.$$iterator=e.iterator},636675:(t,e,r)=>{"use strict";var n=r(508962);function i(t){var e,r=t.Symbol;return"function"==typeof r?r.observable?e=r.observable:(e=r("observable"),r.observable=e):e="@@observable",e}e.getSymbolObservable=i,e.observable=i(n.root),e.$$observable=e.observable},450841:(t,e,r)=>{"use strict";var n=r(508962).root.Symbol;e.rxSubscriber="function"==typeof n&&"function"==typeof n.for?n.for("rxSubscriber"):"@@rxSubscriber",e.$$rxSubscriber=e.rxSubscriber},687922:function(t,e){"use strict";var r=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=function(t){function e(){var e=t.call(this,"object unsubscribed");this.name=e.name="ObjectUnsubscribedError",this.stack=e.stack,this.message=e.message}return r(e,t),e}(Error);e.ObjectUnsubscribedError=n},43226:function(t,e){"use strict";var r=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=function(t){function e(e){t.call(this),this.errors=e;var r=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"");this.name=r.name="UnsubscriptionError",this.stack=r.stack,this.message=r.message}return r(e,t),e}(Error);e.UnsubscriptionError=n},738856:(t,e)=>{"use strict";e.errorObject={e:{}}},618658:(t,e)=>{"use strict";e.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},988400:(t,e)=>{"use strict";e.isArrayLike=function(t){return t&&"number"==typeof t.length}},574170:(t,e)=>{"use strict";e.isFunction=function(t){return"function"==typeof t}},286988:(t,e)=>{"use strict";e.isObject=function(t){return null!=t&&"object"==typeof t}},490585:(t,e)=>{"use strict";e.isPromise=function(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}},620669:(t,e)=>{"use strict";e.isScheduler=function(t){return t&&"function"==typeof t.schedule}},64980:(t,e)=>{"use strict";e.noop=function(){}},711546:(t,e,r)=>{"use strict";var n=r(64980);function i(t){return t?1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}:n.noop}e.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return i(t)},e.pipeFromArray=i},508962:(t,e,r)=>{"use strict";var n="undefined"!=typeof window&&window,i="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,o=void 0!==r.g&&r.g,s=n||o||i;e.root=s,function(){if(!s)throw new Error("RxJS could not find any global context (window, self, global)")}()},53771:(t,e,r)=>{"use strict";var n=r(508962),i=r(988400),o=r(490585),s=r(286988),a=r(869886),c=r(345318),u=r(78818),l=r(636675);e.subscribeToResult=function(t,e,r,p){var h=new u.InnerSubscriber(t,r,p);if(h.closed)return null;if(e instanceof a.Observable)return e._isScalar?(h.next(e.value),h.complete(),null):(h.syncErrorThrowable=!0,e.subscribe(h));if(i.isArrayLike(e)){for(var d=0,f=e.length;d<f&&!h.closed;d++)h.next(e[d]);h.closed||h.complete()}else{if(o.isPromise(e))return e.then((function(t){h.closed||(h.next(t),h.complete())}),(function(t){return h.error(t)})).then(null,(function(t){n.root.setTimeout((function(){throw t}))})),h;if(e&&"function"==typeof e[c.iterator])for(var b=e[c.iterator]();;){var m=b.next();if(m.done){h.complete();break}if(h.next(m.value),h.closed)break}else if(e&&"function"==typeof e[l.observable]){var y=e[l.observable]();if("function"==typeof y.subscribe)return y.subscribe(new u.InnerSubscriber(t,r,p));h.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var v="You provided "+(s.isObject(e)?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";h.error(new TypeError(v))}}return null}},957550:(t,e,r)=>{"use strict";var n=r(364552),i=r(450841),o=r(763341);e.toSubscriber=function(t,e,r){if(t){if(t instanceof n.Subscriber)return t;if(t[i.rxSubscriber])return t[i.rxSubscriber]()}return t||e||r?new n.Subscriber(t,e,r):new n.Subscriber(o.empty)}},80066:(t,e,r)=>{"use strict";var n,i=r(738856);function o(){try{return n.apply(this,arguments)}catch(t){return i.errorObject.e=t,i.errorObject}}e.tryCatch=function(t){return n=t,o}},810796:function(t,e,r){!function(t,e){"use strict";if(!t.setImmediate){var r,n,i,o,s,a=1,c={},u=!1,l=t.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(t);p=p&&p.setTimeout?p:t,"[object process]"==={}.toString.call(t.process)?r=function(t){process.nextTick((function(){d(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}()?t.MessageChannel?((i=new MessageChannel).port1.onmessage=function(t){d(t.data)},r=function(t){i.port2.postMessage(t)}):l&&"onreadystatechange"in l.createElement("script")?(n=l.documentElement,r=function(t){var e=l.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,n.removeChild(e),e=null},n.appendChild(e)}):r=function(t){setTimeout(d,0,t)}:(o="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(o)&&d(+e.data.slice(o.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),r=function(e){t.postMessage(o+e,"*")}),p.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return c[a]=i,r(a),a++},p.clearImmediate=h}function h(t){delete c[t]}function d(t){if(u)setTimeout(d,0,t);else{var r=c[t];if(r){u=!0;try{!function(t){var r=t.callback,n=t.args;switch(n.length){case 0:r();break;case 1:r(n[0]);break;case 2:r(n[0],n[1]);break;case 3:r(n[0],n[1],n[2]);break;default:r.apply(e,n)}}(r)}finally{h(t),u=!1}}}}}("undefined"==typeof self?void 0===r.g?this:r.g:self)},547440:(t,e,r)=>{for(var n=r(922213).Buffer,i=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[0-9a-f]{4}-[0-9a-f]{12}$/i,o=[],s=0;s<256;s++)o[s]=(s+256).toString(16).substr(1);t.exports=function(t,e){var r;if(n.isBuffer(t))r=function(t,e){var r=e||0,n=o;return n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]}(t);else{if("[object String]"!==Object.prototype.toString.call(t))return!1;r=t}if(r=r.toLowerCase(),!i.test(r))return!1;if(void 0===e)e=a(r);else if(a(r)!==e)return!1;switch(e){case 1:case 2:return!0;case 3:case 4:case 5:return-1!==["8","9","a","b"].indexOf(r.charAt(19));default:throw new Error("Invalid version provided.")}};var a=t.exports.version=function(t){return 0|t.charAt(14)}},382556:t=>{"use strict";var e,r=function(){function t(t,e){if("function"!=typeof t)throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but got: "+t+".");this._batchLoadFn=t,this._maxBatchSize=function(t){var e=!t||!1!==t.batch;if(!e)return 1;var r=t&&t.maxBatchSize;if(void 0===r)return 1/0;if("number"!=typeof r||r<1)throw new TypeError("maxBatchSize must be a positive number: "+r);return r}(e),this._batchScheduleFn=function(t){var e=t&&t.batchScheduleFn;if(void 0===e)return n;if("function"!=typeof e)throw new TypeError("batchScheduleFn must be a function: "+e);return e}(e),this._cacheKeyFn=function(t){var e=t&&t.cacheKeyFn;if(void 0===e)return function(t){return t};if("function"!=typeof e)throw new TypeError("cacheKeyFn must be a function: "+e);return e}(e),this._cacheMap=function(t){var e=!t||!1!==t.cache;if(!e)return null;var r=t&&t.cacheMap;if(void 0===r)return new Map;if(null!==r){var n=["get","set","delete","clear"].filter((function(t){return r&&"function"!=typeof r[t]}));if(0!==n.length)throw new TypeError("Custom cacheMap missing methods: "+n.join(", "))}return r}(e),this._batch=null}var e=t.prototype;return e.load=function(t){if(null==t)throw new TypeError("The loader.load() function must be called with a value,but got: "+String(t)+".");var e=function(t){var e=t._batch;if(null!==e&&!e.hasDispatched&&e.keys.length<t._maxBatchSize&&(!e.cacheHits||e.cacheHits.length<t._maxBatchSize))return e;var r={hasDispatched:!1,keys:[],callbacks:[]};return t._batch=r,t._batchScheduleFn((function(){return function(t,e){if(e.hasDispatched=!0,0===e.keys.length)return void o(e);var r=t._batchLoadFn(e.keys);if(!r||"function"!=typeof r.then)return i(t,e,new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise: "+String(r)+"."));r.then((function(t){if(!s(t))throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array: "+String(t)+".");if(t.length!==e.keys.length)throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array of the same length as the Array of keys.\n\nKeys:\n"+String(e.keys)+"\n\nValues:\n"+String(t));o(e);for(var r=0;r<e.callbacks.length;r++){var n=t[r];n instanceof Error?e.callbacks[r].reject(n):e.callbacks[r].resolve(n)}})).catch((function(r){return i(t,e,r)}))}(t,r)})),r}(this),r=this._cacheMap,n=this._cacheKeyFn(t);if(r){var a=r.get(n);if(a){var c=e.cacheHits||(e.cacheHits=[]);return new Promise((function(t){c.push((function(){return t(a)}))}))}}e.keys.push(t);var u=new Promise((function(t,r){e.callbacks.push({resolve:t,reject:r})}));return r&&r.set(n,u),u},e.loadMany=function(t){if(!s(t))throw new TypeError("The loader.loadMany() function must be called with Array<key> but got: "+t+".");for(var e=[],r=0;r<t.length;r++)e.push(this.load(t[r]).catch((function(t){return t})));return Promise.all(e)},e.clear=function(t){var e=this._cacheMap;if(e){var r=this._cacheKeyFn(t);e.delete(r)}return this},e.clearAll=function(){var t=this._cacheMap;return t&&t.clear(),this},e.prime=function(t,e){var r=this._cacheMap;if(r){var n,i=this._cacheKeyFn(t);if(void 0===r.get(i))e instanceof Error?(n=Promise.reject(e)).catch((function(){})):n=Promise.resolve(e),r.set(i,n)}return this},t}(),n="object"==typeof process&&"function"==typeof process.nextTick?function(t){e||(e=Promise.resolve()),e.then((function(){return process.nextTick(t)}))}:setImmediate||setTimeout;function i(t,e,r){o(e);for(var n=0;n<e.keys.length;n++)t.clear(e.keys[n]),e.callbacks[n].reject(r)}function o(t){if(t.cacheHits)for(var e=0;e<t.cacheHits.length;e++)t.cacheHits[e]()}function s(t){return"object"==typeof t&&null!==t&&"number"==typeof t.length&&(0===t.length||t.length>0&&Object.prototype.hasOwnProperty.call(t,t.length-1))}t.exports=r},542434:(t,e,r)=>{"use strict";r.d(e,{K_:()=>c,U5:()=>o,tI:()=>u,y0:()=>a});var n=r(840506),i=r(485423);const o=n.createContext(void 0),s=new Map,a=t=>{if(!t)return new i.Q({authProvider:()=>Promise.resolve({clientId:"",token:"",baseUrl:""})});let e=s.get(t);return e||(e=new i.Q(t),s.set(t,e)),e},c=({children:t,clientConfig:e})=>{const r=(0,n.useMemo)((()=>a(e)),[e]);return n.createElement(o.Provider,{value:r},t)};c.displayName="MediaClientProvider";const u=()=>{const t=n.useContext(o);if(!t)throw new Error("No MediaClient set, use MediaClientProvider to set one");return t}},317796:(t,e,r)=>{"use strict";r.d(e,{y:()=>i});var n=r(109335);class i extends n.tM{constructor(t,e,r){super(t),this.reason=t,this.id=e,this.metadata=r}get attributes(){const{reason:t,id:e,metadata:{collectionName:r,occurrenceKey:n}={}}=this;return{reason:t,id:e,collectionName:r,occurrenceKey:n}}}},485423:(t,e,r)=>{"use strict";r.d(e,{Q:()=>rt});var n=r(199009),i=r(131382),o=r(113039),s=r(615919),a=r(262545),c=r(37696),u=r(492516),l=r.n(u),p=(r(810796),r(578859)),h=r(981224),d=r(118691),f=r(317796),b=r(97787),m=r(152222),y=r(662342),v=r(280325),w=r(449019);var g=r(869886),x=r(785043);const S=(t,e)=>(0,x.mergeMap)((t=>{const e=new Array,r=()=>{const t=e.findIndex((t=>!t.notifyIfReady()));t>0&&e.splice(0,t)};return n=>new g.Observable((i=>{e.push(((t,e,r)=>{const n={notifyIfReady:()=>!1};return t.then((t=>{n.notifyIfReady=()=>(e.next(t),e.complete(),!0),r(n)}),(t=>{n.notifyIfReady=()=>(e.error(t),!0),r(n)})),n})(t(n),i,r))}))})(t),e);function _(t){return Array.prototype.map.call(new Uint8Array(t),(t=>("00"+t.toString(16)).slice(-2))).join("")}const O=t=>function(t){const e=new FileReader;return new Promise(((r,n)=>{e.onload=function(){r(this.result)},e.onerror=n,e.readAsArrayBuffer(t)}))}(t).then((t=>crypto.subtle.digest("SHA-1",t))).then(_);var E=r(138400);const P=(t,e,r)=>(0,v.p)(async function(t){return"string"==typeof t?await fetch(t).then((t=>t.blob())):t}(t)).pipe((0,m.concatMap)((t=>{const{chunkSize:n}=e,{onProgress:i}=r,o=Math.ceil(t.size/n),s=((t,{size:e})=>{const r=Math.ceil(t.size/e);return(0,w.w)(0,r).pipe((0,c.map)((r=>({partNumber:r+1,blob:t.slice(r*e,(r+1)*e)}))))})(t,{size:n}),a=((t,{hasher:e,concurrency:r})=>S((t=>e=>t(e.blob).then((t=>({blob:e.blob,hash:`${t}-${e.blob.size}`,partNumber:e.partNumber}))))(e||O),r)(t))(s,{concurrency:e.hashingConcurrency,hasher:e.hashingFunction});let u=0,l=((t,e)=>t.pipe(S((t=>e.uploader(t).then((()=>t))),e.concurrency)))(a,{concurrency:e.uploadingConcurrency,uploader:e.uploadingFunction});return i&&(l=l.pipe((0,b.tap)((()=>{u+=1,i(u/o)})))),((t,e)=>t.pipe((0,y.bufferCount)(e.batchSize)).pipe((0,m.concatMap)((t=>e.processor?e.processor(t).then((()=>t)):Promise.resolve(t)))))(l,{batchSize:e.processingBatchSize,processor:e.processingFunction}).pipe((0,m.concatMap)((t=>(0,E.from)(t))),(0,y.bufferCount)(o))})));let j=null;const T=async()=>{if(!j)try{const{WorkerHasher:t}=await Promise.all([r.e(77249),r.e(80060)]).then(r.bind(r,580060));j=new t(3)}catch(f){const{SimpleHasher:e}=await Promise.all([r.e(77249),r.e(48251)]).then(r.bind(r,848251));j=new e}return j};var I=r(109335);class A extends I.tM{constructor(t,e,r){super(t),this.reason=t,this.id=e,this.metadata=r}get attributes(){const{reason:t,id:e,metadata:{collectionName:r,occurrenceKey:n}={}}=this;return{reason:t,id:e,collectionName:r,occurrenceKey:n}}}var k=r(790215),F=r(588574);const C="fileSizeExceedsLimit",M=async t=>(await T()).hash(t),N=(t,e,r,n)=>async i=>await t.uploadChunk(i.hash,i.blob,await e,i.partNumber,r,n),U=(t,e,r,n)=>{let i=0;return async o=>{await t.appendChunksToUpload(await e,{chunks:z(o),offset:i},r,n),i+=o.length}},Z=(t,e,r,n,i)=>{const{content:o,collection:s}=t,{deferredUploadId:a,id:c,occurrenceKey:u}=r;let l=k.kr;try{o instanceof Blob&&(l=(t=>{if(t>k.f0)throw new Error(C);return t<=5*F.x.GB?5*F.x.MB:t>5*F.x.GB&&t<=50*F.x.GB?50*F.x.MB:t>50*F.x.GB&&t<=.95*F.x.TB?100*F.x.MB:210*F.x.MB})(o.size))}catch(f){return f instanceof Error&&f.message===C&&(null==n||n.onUploadFinish(new A(f.message,c,{collectionName:s,occurrenceKey:u}))),{cancel:()=>{null==n||n.onUploadFinish("canceled")}}}const p=((t,e,r)=>P(t,e,r))(o,{hashingFunction:M,hashingConcurrency:5,chunkSize:l,uploadingConcurrency:3,uploadingFunction:N(e,a,s,i),processingBatchSize:k.wl,processingFunction:U(e,a,s,i)},{onProgress(t){n&&n.onProgress(t)}}),h=n&&n.onUploadFinish||(()=>{}),d=(0,E.from)(a).pipe((0,m.concatMap)((n=>p.pipe((0,m.concatMap)((()=>(0,E.from)((async(t,e,r,n,i)=>{const{collection:o,name:s,mimeType:a}=t,{id:c,occurrenceKey:u}=r,l=t.size?{uploadId:n,name:s,mimeType:a,conditions:{size:t.size}}:{uploadId:n,name:s,mimeType:a};return e.createFileFromUpload(l,{occurrenceKey:u,collection:o,replaceFileId:c},i)})(t,e,r,n,i)))))))).subscribe({error:t=>h(t),complete:()=>h()});return{cancel:()=>{d.unsubscribe(),h("canceled")}}},z=t=>t.map((t=>t.hash));var R=r(21413),L=r(453966),B=r(547440),K=r.n(B),D=r(338010),$=r(589068);const q=(t,e)=>(0,d.f6)(t)||"unknown"!==t.mediaType?{}:{mediaType:e};function V(t){return{subscribe:e=>{const r=t.subscribe(e);return{unsubscribe:()=>{r.unsubscribe()}}}}}var G=r(900659),J=r(28138),Q=r(549889),W=r(422790),Y=r(398450),H=r(32420),X=r(37447);class tt{constructor(t,e=X.G){this.mediaApi=t,this.store=e,(0,n.Z)(this,"dataloader",void 0),(0,n.Z)(this,"getErrorFileState",((t,e,r)=>"string"==typeof t?{status:"error",id:e,reason:t,occurrenceKey:r,message:t}:{status:"error",id:e,reason:null==t?void 0:t.reason,details:null==t?void 0:t.attributes,occurrenceKey:r,message:null==t?void 0:t.message})),(0,n.Z)(this,"setFileState",((t,e)=>{this.store.setState((r=>{r.files[t]=e}))})),(0,n.Z)(this,"createDownloadFileStream",((t,e,r)=>{const n=(0,J.O)(),i=new Y.D;return i.onError=t=>n.error(t),i.execute((async()=>{const o=await this.dataloader.load({id:t,collectionName:e});if(!o)throw new f.y("emptyItems",t,{collectionName:e,occurrenceKey:r});if((0,H.d)(o))throw new f.y("zeroVersionFile",t,{collectionName:e,occurrenceKey:r});const s=(0,d.L5)(t,o);switch(n.next(s),s.status){case"processing":i.next();break;case"processed":n.complete()}})),n})),(0,n.Z)(this,"getUploadingFileStateBase",((t,e)=>{"string"==typeof t.content&&(t.content=(t=>{const e=t.split(",")[1],r=atob(e),n=[];for(let i=0;i<r.length;i+=512){const t=r.slice(i,i+512),e=t.split("").map(((e,r)=>t.charCodeAt(r))),o=new Uint8Array(e);n.push(o)}return new Blob(n,{type:"image/jpeg"})})(t.content));const{content:r,name:n=""}=t,{id:i,occurrenceKey:o}=e;let s,a=0,c="";r instanceof Blob&&(a=r.size,c=r.type,(0,Q.PU)(r.type)&&(s={value:r,origin:"local"}));const u=(t=>{if(t.content instanceof Blob){const e=t.content.type;return(0,$.L4)(e)}return"unknown"})(t);return{id:i,occurrenceKey:o,name:n,size:a,mediaType:u,mimeType:c,preview:s}})),this.dataloader=(0,D.dR)(t)}getFileState(t,e={}){const{collectionName:r,occurrenceKey:n}=e;if(!K()(t)){const e=(0,J.O)(),i=new f.y("invalidFileId",t,{collectionName:r,occurrenceKey:n}),o={status:"error",id:t,reason:null==i?void 0:i.reason,message:null==i?void 0:i.message,occurrenceKey:n,details:null==i?void 0:i.attributes};return e.error(i),this.setFileState(t,o),V(e)}return V((0,R.Q)().getOrInsert(t,(()=>{const e=this.createDownloadFileStream(t,r);return e.subscribe({next:e=>{this.setFileState(t,e)},error:e=>{const r=this.getErrorFileState(e,t,n);this.setFileState(t,r)}}),e})))}getCurrentState(t,e){return((t,e=new a.Subscription)=>new Promise(((r,n)=>e.add(t.subscribe({next:t=>{r(t),e.unsubscribe()},error:t=>{n(t),e.unsubscribe()}})))))(this.getFileState(t,e))}getArtifactURL(t,e,r){return this.mediaApi.getArtifactURL(t,e,r)}getFileBinaryURL(t,e){return this.mediaApi.getFileBinaryURL(t,e)}touchFiles(t,e,r){return this.mediaApi.touchFiles({descriptors:t},{collection:e},r).then((({data:t})=>t))}generateUploadableFileUpfrontIds(t,e){const r=l()(),n=l()(),i={fileId:r,occurrenceKey:n,collection:t};return{id:r,occurrenceKey:n,deferredUploadId:this.touchFiles([i],t,e).then((t=>t.created[0].uploadId))}}async uploadExternal(t,e,r){const n=this.generateUploadableFileUpfrontIds(e,r),{id:i,occurrenceKey:o}=n,s=(0,J.O)(),a=fetch(t).then((t=>t.blob())).catch((()=>{})),c=new Promise((async(t,e)=>{const r=await a;r||e("Could not fetch the blob"),t({value:r,origin:"remote"})})),u=t.split("/").pop()||"",l={status:"processing",name:u,size:0,mediaType:"unknown",mimeType:"",id:i,occurrenceKey:o,preview:c};return s.next(l),(0,R.Q)().set(i,s),this.setFileState(i,l),new Promise((async(t,l)=>{const p=await a;if(!p)return l("Could not download remote file");const{type:h,size:d}=p,f={content:p,mimeType:h,collection:e,name:u,size:d},b=(0,$.L4)(h);s.next({status:"processing",name:u,size:d,mediaType:b,mimeType:h,id:i,occurrenceKey:o,preview:c}),this.upload(f,void 0,n,r);t({dimensions:await(0,G.x)(b,p),uploadableFileUpfrontIds:n})}))}upload(t,e,r,n){const{collection:i}=t,o=r||this.generateUploadableFileUpfrontIds(i,n),{id:u,occurrenceKey:l}=o,p=this.getUploadingFileStateBase(t,o),h=(0,J.O)();(0,R.Q)().set(u,h);const d=t=>{const e=(0,s.Z)((0,s.Z)({status:"uploading"},p),{},{progress:t});h.next(e),this.setFileState(u,e)};let f=new a.Subscription;const{cancel:b}=Z(t,this.mediaApi,o,{onUploadFinish:t=>{if(t){const e=this.getErrorFileState(t,u,l);return this.setFileState(u,e),h.error(t)}f=this.createDownloadFileStream(u,i,l).pipe((0,c.map)((t=>(0,s.Z)((0,s.Z)((0,s.Z)({},p),t),q(t,p.mediaType))))).subscribe({next:t=>{h.next(t),this.setFileState(u,t)},error:t=>{const e=this.getErrorFileState(t,u,l);h.error(t),this.setFileState(u,e)},complete:h.complete})},onProgress:d},n);return null==e||e.setAbort((()=>{b(),f.unsubscribe()})),setTimeout(d,0,0),V(h)}async downloadBinary(t,e="download",r){const n=await this.mediaApi.getFileBinaryURL(t,r);(0,h.G)(n,{name:e}),L.h.emit("media-viewed",{fileId:t,isUserCollection:r===k.a1,viewingLevel:"download"})}async copyFile(t,e,r={},n){const{authProvider:i,collection:a,id:c}=t,{authProvider:u,collection:l,replaceFileId:h,occurrenceKey:b}=e,{preview:m,mimeType:y}=r,v=e.mediaStore||new o.Fq({authProvider:u}),w=(0,p.pl)(await i({collectionName:a})),g={sourceFile:{id:c,collection:a,owner:w}},x={collection:l,replaceFileId:h,occurrenceKey:b},S=(0,R.Q)();let _;try{const{data:t}=await v.copyFileWithToken(g,x,n),e=(0,s.Z)((0,s.Z)({},t),y?{mimeType:y}:void 0),{id:r,mimeType:i}=e,o=i?(0,$.L4)(i):"unknown",a=(0,d.eS)({data:e}),u=S.get(r)||(0,J.O)(),p=!(0,d.f6)(a)&&m?{preview:m}:{};if(!(0,d.nT)(a)&&i&&await(0,W.M)(o,i,m)){const t=(0,s.Z)((0,s.Z)((0,s.Z)({},a),q(a,o)),p);u.next(t),this.setFileState(r,t),_=this.createDownloadFileStream(r,l,b).subscribe({next:t=>{const e=(0,s.Z)((0,s.Z)((0,s.Z)({},t),q(t,o)),!(0,d.f6)(t)&&p);return this.setFileState(r,e),u.next(e)},error:t=>{const e=this.getErrorFileState(t,c,b);return this.setFileState(r,e),u.error(t)},complete:()=>u.complete()})}else if(!(0,d.y2)(a)){const t=(0,s.Z)((0,s.Z)({},a),!(0,d.f6)(a)&&p);u.next(t),this.setFileState(r,t)}return S.has(r)||(0,R.Q)().set(r,u),t}catch(f){if(_&&_.unsubscribe(),h){const e=S.get(h),r=this.store.getState().files[h];e?e.error(f):S.set(c,(0,J.O)(f));const n=r?h:c,i=this.getErrorFileState(f,c,b);this.setFileState(n,i)}throw f}}}class et{constructor(t){(0,n.Z)(this,"baseUrl",void 0),this.baseUrl=t||"/gateway/api"}async fetchToken(t){return(await fetch(`${this.baseUrl}/media/auth/smartedge`,{credentials:"include",headers:{"x-client-id":t}})).json()}isTokenExpired(t){const e=(new Date).getTime()/1e3;return t.data.iat+t.data.expiresIn-e<0}}class rt{constructor(t,e=X.G,r){this.mediaClientConfig=t,this.store=e,(0,n.Z)(this,"mediaStore",void 0),(0,n.Z)(this,"file",void 0),(0,n.Z)(this,"stargate",void 0),(0,n.Z)(this,"eventEmitter",void 0),(0,n.Z)(this,"mobileUpload",void 0),(0,n.Z)(this,"config",void 0),this.mediaStore=null!=r?r:new o.Fq({authProvider:t.authProvider,initialAuth:t.initialAuth}),this.config=t,this.file=new tt(this.mediaStore,this.store),this.eventEmitter=new i.EventEmitter2,this.stargate=new et(t.stargateBaseUrl)}__DO_NOT_USE__getMediaStore(){return this.store}getImage(t,e,r,n,i){return this.mediaStore.getImage(t,e,r,n,i)}getImageUrl(t,e){return this.mediaStore.getFileImageURL(t,e)}getImageUrlSync(t,e){return this.mediaStore.getFileImageURLSync(t,e)}async getImageMetadata(t,e){return(await this.mediaStore.getImageMetadata(t,e)).metadata}async mobileUploadPromise(){if(this.mobileUpload)return this.mobileUpload;const t=await Promise.all([r.e(51519),r.e(94761)]).then(r.bind(r,712058));return this.mobileUpload=new t.MobileUploadImpl(this.mediaStore,this.store),this.mobileUpload}async removeFileFromCollection(t,e,r,n){await this.mediaStore.removeCollectionFile(t,e,r,n)}on(t,e){this.eventEmitter.on(t,e)}off(t,e){this.eventEmitter.off(t,e)}emit(t,e){return this.eventEmitter.emit(t,e)}}},113039:(t,e,r)=>{"use strict";r.d(e,{Fq:()=>b,rl:()=>v,ro:()=>w});var n=r(199009),i=r(615919),o=r(942470),s=r(790215),a=r(458023),c=r(63176),u=r(870954),l=r(492293);const p="media-api-region",h="media-api-environment",d=(t,e=!1)=>{var r,n,o;return(0,i.Z)((0,i.Z)({},t),{},{"max-age":null!==(r=null==t?void 0:t["max-age"])&&void 0!==r?r:s.NK,allowAnimated:null===(n=null==t?void 0:t.allowAnimated)||void 0===n||n,mode:null!==(o=null==t?void 0:t.mode)&&void 0!==o?o:"crop"},e?{width:s.xQ,height:s.xQ}:{})},f={Accept:"application/json","Content-Type":"application/json"};class b{constructor(t){this.config=t,(0,n.Z)(this,"resolveAuth",(t=>(async(t,e,r=1e4)=>{let n;try{n=await Promise.race([t(e),(i=r,o=new l.r("authProviderTimedOut"),new Promise(((t,e)=>{setTimeout(e,i,o)})))])}catch(s){if(s instanceof l.r)throw s;throw new l.r("failedAuthProvider",s instanceof Error?s:void 0)}var i,o;if(!n)throw new l.r("emptyAuth");return n})(this.config.authProvider,t))),(0,n.Z)(this,"resolveInitialAuth",(()=>(t=>{if(!t)throw new l.r("missingInitialAuth");return t})(this.config.initialAuth)))}async removeCollectionFile(t,e,r,n){const o={actions:[{action:"remove",item:{type:"file",id:t,occurrenceKey:r}}]},s=(0,i.Z)((0,i.Z)({},{method:"PUT",endpoint:"/collection/{collectionName}"}),{},{authContext:{collectionName:e},headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o),traceContext:n});await this.request(`/collection/${e}`,s)}createUpload(t=1,e,r){const n={method:"POST",endpoint:"/upload"},o=(0,i.Z)((0,i.Z)({},n),{},{authContext:{collectionName:e},params:{createUpTo:t},headers:{Accept:"application/json"},traceContext:r});return this.request("/upload",o).then((0,u.jV)(n))}async uploadChunk(t,e,r,n,o,s){const a=(0,i.Z)((0,i.Z)({},{method:"PUT",endpoint:"/chunk/{etag}"}),{},{params:{uploadId:r,partNumber:n},authContext:{collectionName:o},body:e,traceContext:s});await this.request(`/chunk/${t}`,a)}createFileFromUpload(t,e={},r){const n={method:"POST",endpoint:"/file/upload"},o=(0,i.Z)((0,i.Z)({},n),{},{authContext:{collectionName:e.collection},params:e,headers:f,body:JSON.stringify(t),traceContext:r});return this.request("/file/upload",o).then((0,u.jV)(n))}getRejectedResponseFromDescriptor(t,e){return{fileId:t.fileId,error:{code:"ExceedMaxFileSizeLimit",title:"The expected file size exceeded the maximum size limit.",href:"https://dt-api-filestore--app.ap-southeast-2.dev.atl-paas.net/api.html#BadRequest",limit:e,size:t.size}}}async touchFiles(t,e={},r){const n={method:"POST",endpoint:"/upload/createWithFiles"},o=(0,i.Z)((0,i.Z)({},n),{},{authContext:{collectionName:e.collection},headers:f,body:JSON.stringify(t),traceContext:r});return this.request("/upload/createWithFiles",o).then((0,u.jV)(n))}getFile(t,e={},r){const n={method:"GET",endpoint:"/file/{fileId}"},o=(0,i.Z)((0,i.Z)({},n),{},{authContext:{collectionName:e.collection},params:e,traceContext:r});return this.request(`/file/${t}`,o).then((0,u.jV)(n))}async getFileImageURL(t,e){const{collection:r}=e||{},n=await this.resolveAuth({collectionName:r});return this.createFileImageURL(t,n,e)}getFileImageURLSync(t,e){const r=this.resolveInitialAuth();return this.createFileImageURL(t,r,e)}createFileImageURL(t,e,r){const n={params:d(r),auth:e};return(0,u.uJ)(`${e.baseUrl}/file/${t}/image`,n)}async getFileBinaryURL(t,e){const r=await this.resolveAuth({collectionName:e}),n={params:{dl:!0,collection:e,"max-age":s.NK},auth:r};return(0,u.uJ)(`${r.baseUrl}/file/${t}/binary`,n)}async getArtifactURL(t,e,r){const n=(0,a.l)(t,e);if(!n)throw new Error(`artifact ${e} not found`);const i=await this.resolveAuth({collectionName:r}),o={params:{collection:r,"max-age":s.NK},auth:i};return(0,u.uJ)(`${i.baseUrl}${n}`,o)}async getImage(t,e,r,n,o){const s={};const a={method:"GET",endpoint:"/file/{fileId}/image"},c=(0,i.Z)((0,i.Z)({},a),{},{authContext:{collectionName:e&&e.collection},params:d(e,n),headers:s,traceContext:o});return this.request(`/file/${t}/image`,c,r).then((0,u.Yb)(a))}async getItems(t,e,r){const n=t.map((t=>({type:"file",id:t,collection:e}))),o={method:"POST",endpoint:"/items"},s=(0,i.Z)((0,i.Z)({},o),{},{authContext:{collectionName:e},headers:f,body:JSON.stringify({descriptors:n}),traceContext:r});return this.request("/items",s).then((0,u.jV)(o))}async getImageMetadata(t,e,r){const n={method:"GET",endpoint:"/file/{fileId}/image/metadata"},o=(0,i.Z)((0,i.Z)({},n),{},{authContext:{collectionName:e&&e.collection},params:e,traceContext:r});return this.request(`/file/${t}/image/metadata`,o).then((0,u.jV)(n))}async appendChunksToUpload(t,e,r,n){const o=(0,i.Z)((0,i.Z)({},{method:"PUT",endpoint:"/upload/{uploadId}/chunks"}),{},{authContext:{collectionName:r},headers:f,body:JSON.stringify(e),traceContext:n});await this.request(`/upload/${t}/chunks`,o)}copyFileWithToken(t,e,r){const n={method:"POST",endpoint:"/file/copy/withToken"},o=(0,i.Z)((0,i.Z)({},n),{},{authContext:{collectionName:e.collection},params:e,headers:f,body:JSON.stringify(t),traceContext:r});return this.request("/file/copy/withToken",o).then((0,u.jV)(n))}async request(t,e={method:"GET",endpoint:void 0,authContext:{}},r){const{method:n,endpoint:s,authContext:a,params:u,headers:l,body:d,clientOptions:f,traceContext:b}=e,m=await this.resolveAuth(a),v=b?(0,i.Z)((0,i.Z)({},b),{},{spanId:(null==b?void 0:b.spanId)||(0,o.QB)(8)}):void 0,w=await(0,c.WY)(`${m.baseUrl}${t}`,{method:n,endpoint:s,auth:m,params:u,headers:l,body:d,clientOptions:f,traceContext:v},r);return y(p,w.headers.get("x-media-region")),y(h,w.headers.get("x-media-env")),w}}const m=t=>window&&window.sessionStorage&&window.sessionStorage.getItem(t)||void 0,y=(t,e)=>{if(!e||!window||!window.sessionStorage)return;window.sessionStorage.getItem(t)!==e&&window.sessionStorage.setItem(t,e)},v=()=>m(h),w=()=>m(p)},492293:(t,e,r)=>{"use strict";r.d(e,{W:()=>o,r:()=>i});var n=r(109335);class i extends n.tM{constructor(t,e){super(t),this.reason=t,this.innerError=e}get attributes(){const{reason:t,innerError:e}=this;return{reason:t,innerError:e}}}function o(t){return t instanceof i}},790215:(t,e,r)=>{"use strict";r.d(e,{NK:()=>o,a1:()=>i,f0:()=>u,kr:()=>a,wl:()=>c,xQ:()=>s});var n=r(588574);const i="recents",o=2592e3,s=4096,a=5*n.x.MB,c=1e3,u=2*n.x.TB},21413:(t,e,r)=>{"use strict";r.d(e,{Q:()=>o});class n{constructor(t){this.streams=t}has(t){return!!this.streams.find(t)}set(t,e){this.streams.set(t,e)}get(t){return this.streams.get(t)}getOrInsert(t,e){return this.has(t)||this.set(t,e()),this.get(t)}removeAll(){this.streams.clear()}remove(t){this.streams.delete(t)}get size(){return this.streams.size}}let i;const o=()=>{if(!i){const t=r(578859).nA;i=new n(t.streams)}return i}},458023:(t,e,r)=>{"use strict";r.d(e,{l:()=>n});const n=(t,e)=>{const r=t[e];if(r&&r.url)return r.url}},109335:(t,e,r)=>{"use strict";r.d(e,{tM:()=>n});class n extends Error{constructor(t){super(t),this.message=t,Object.setPrototypeOf(this,new.target.prototype),"captureStackTrace"in Error&&Error.captureStackTrace(this,new.target)}}},118691:(t,e,r)=>{"use strict";r.d(e,{L5:()=>h,__:()=>i,eS:()=>p,f6:()=>a,jL:()=>c,mo:()=>l,nT:()=>u,vh:()=>s,y2:()=>o});var n=r(615919);const i=t=>"uploading"===t.status,o=t=>"processing"===t.status,s=t=>"processed"===t.status,a=t=>"error"===t.status,c=t=>!a(t)&&!!t.preview,u=t=>["processed","failed-processing","error"].includes(t.status),l=t=>{switch(t.status){case"processing":case"processed":case"failed-processing":return!(!t.representations||!t.representations.image);default:return!1}},p=t=>{const{id:e,name:r,size:i,processingStatus:o,artifacts:s,mediaType:a,mimeType:c,representations:u,createdAt:l,metadataTraceContext:p}=t.data,h={id:e,name:r,size:i,mediaType:a,mimeType:c,artifacts:s,representations:u,createdAt:l,metadataTraceContext:p};switch(o){case"pending":case void 0:return(0,n.Z)((0,n.Z)({},h),{},{status:"processing"});case"succeeded":return(0,n.Z)((0,n.Z)({},h),{},{status:"processed"});case"failed":return(0,n.Z)((0,n.Z)({},h),{},{status:"failed-processing"})}},h=(t,e)=>p({data:(0,n.Z)({id:t},e)})},588574:(t,e,r)=>{"use strict";r.d(e,{d:()=>n,x:()=>i});const n=t=>["audio","video","image","doc"].indexOf(t)>-1;let i=function(t){return t[t.MB=1048576]="MB",t[t.GB=1073741824]="GB",t[t.TB=1099511627776]="TB",t}({})},338010:(t,e,r)=>{"use strict";r.d(e,{dR:()=>l});var n=r(615919),i=(r(810796),r(382556)),o=r.n(i),s=r(942470);const a=100,c=(t,e)=>e?`${t}-${e}`:t,u=(t,e)=>{const r=e.reduce(((t,e)=>{const{id:r,collection:i}=e;return t[c(r,i)]=e.error instanceof Error?e.error:(0,n.Z)((0,n.Z)({},e.details),{},{metadataTraceContext:e.metadataTraceContext}),t}),{});return t.map((t=>{const{id:e,collectionName:n}=t,i=c(e,n);return r[i]||null}))};function l(t){return new(o())(function(t){return async e=>{const r="__media-single-file-collection__",i=e.reduce(((t,e)=>{const n=e.collectionName||r,i=t[n]||[];return-1===i.indexOf(e.id)&&i.push(e.id),t[n]=i,t}),{}),o=[];return await Promise.all(Object.keys(i).map((async e=>{const a={traceId:(0,s.QB)(8),spanId:(0,s.QB)(8)},c=i[e],u=e===r?void 0:e;try{const e=(await t.getItems(c,u,a)).data.items.map((t=>(0,n.Z)((0,n.Z)({},t),{},{metadataTraceContext:a})));o.push(...e)}catch(l){c.forEach((t=>{o.push({id:t,collection:u,error:l})}))}}))),u(e,o)}}(t),{maxBatchSize:a})}},28138:(t,e,r)=>{"use strict";r.d(e,{O:()=>i});var n=r(123948);function i(t){const e=new n.ReplaySubject(1);return t instanceof Error?e.error(t):t&&e.next(t),e}},32420:(t,e,r)=>{"use strict";r.d(e,{d:()=>i});const n=432e5;function i(t,e=Date.now()){const{artifacts:r,mediaType:i,mimeType:o,name:s,processingStatus:a,representations:c,size:u,createdAt:l}=t;if(!(r||i||o||s||a||c||u||"number"!=typeof l)){if(e-l>n)return!0}return!1}},900659:(t,e,r)=>{"use strict";r.d(e,{x:()=>i});var n=r(992699);const i=async(t,e)=>{switch(t){case"image":{const t=URL.createObjectURL(e);try{return await(t=>new Promise(((e,r)=>{const n=new Image;n.src=t,n.onload=()=>e({width:n.width,height:n.height}),n.onerror=r})))(t)}finally{URL.revokeObjectURL(t)}}case"video":return(0,n.t)(e);default:throw new Error(`Can't extract dimensions from ${t}`)}}},992699:(t,e,r)=>{"use strict";r.d(e,{t:()=>n});const n=async t=>new Promise(((e,r)=>{const n=URL.createObjectURL(t),i=document.createElement("video");i.preload="metadata",i.src=n,i.muted=!0,i.addEventListener("loadedmetadata",(function t(){i.removeEventListener("loadedmetadata",t),e({width:i.videoWidth,height:i.videoHeight}),URL.revokeObjectURL(n)})),i.addEventListener("error",(()=>{r(new Error("failed to load video")),URL.revokeObjectURL(n)}))}))},316784:(t,e,r)=>{"use strict";r.d(e,{C:()=>o,k:()=>i});var n=r(109335);class i extends n.tM{constructor(t,e){super(t),this.reason=t,this.attempts=e}get attributes(){const{reason:t,attempts:e}=this;return{reason:t,attempts:e}}}function o(t){return t instanceof i}},398450:(t,e,r)=>{"use strict";r.d(e,{D:()=>a});var n=r(615919),i=r(199009),o=r(316784);const s={poll_intervalMs:3e3,poll_maxAttempts:30,poll_backoffFactor:1.25,poll_maxIntervalMs:2e5};class a{constructor(t){(0,i.Z)(this,"options",void 0),(0,i.Z)(this,"poll_intervalMs",0),(0,i.Z)(this,"attempt",1),(0,i.Z)(this,"shouldIterate",!0),(0,i.Z)(this,"onError",void 0),(0,i.Z)(this,"timeoutId",0),this.options=(0,n.Z)((0,n.Z)({},s),t),this.poll_intervalMs=this.options.poll_intervalMs}async execute(t){const{poll_maxAttempts:e}=this.options;if(0===e)return this.fail(new o.k("pollingMaxAttemptsExceeded",this.attempt));try{if(this.shouldIterate=!1,await t(),!this.shouldIterate)return;if(this.attempt>=e)return this.fail(new o.k("pollingMaxAttemptsExceeded",this.attempt));this.poll_intervalMs=this.getIntervalMsForIteration(this.attempt),this.attempt++,this.timeoutId=window.setTimeout((()=>this.execute(t)),this.poll_intervalMs)}catch(r){this.fail(r)}}fail(t){const{onError:e}=this;this.cancel(),e&&e(t)}getIntervalMsForIteration(t){let e=this.options.poll_intervalMs;if(1===t)return e;for(let r=2;r<=t;r++)e*=this.options.poll_backoffFactor;return Math.min(Math.round(e),this.options.poll_maxIntervalMs)}next(){this.shouldIterate=!0}cancel(){window.clearTimeout(this.timeoutId),this.timeoutId=0}}},290514:(t,e,r)=>{"use strict";r.d(e,{L:()=>i,N:()=>o});var n=r(109335);class i extends n.tM{constructor(t,e,r){super(t),this.reason=t,this.metadata=e,this.innerError=r}get attributes(){const{reason:t,metadata:{method:e,endpoint:r,mediaRegion:n,mediaEnv:i,attempts:o,clientExhaustedRetries:s,statusCode:a}={},innerError:c}=this;return{reason:t,method:e,endpoint:r,mediaRegion:n,mediaEnv:i,attempts:o,clientExhaustedRetries:s,statusCode:a,innerError:c}}}function o(t){return t instanceof i}},870954:(t,e,r)=>{"use strict";r.d(e,{Yb:()=>b,jV:()=>f,j_:()=>w,hd:()=>v,uJ:()=>h,B1:()=>d,Fr:()=>y,n0:()=>s,no:()=>c});var n=r(615919),i=r(578859);var o=r(290514);function s(t){return t instanceof Error&&"request_cancelled"===t.message||!!t&&"AbortError"===t.name}function a(t){return t instanceof TypeError}function c(t){return!!t&&(0,o.N)(t)&&429===t.attributes.statusCode||!!t&&!!t.message&&t.message.includes("429")}const u="x-b3-traceid",l="x-b3-spanid",p=t=>t?{[u]:t.traceId,[l]:t.spanId}:{};function h(t,{params:e,auth:r}){const o=new URL(t),s=r&&function(t){return(0,i.Wf)(t)?{client:t.clientId,token:t.token}:{issuer:t.asapIssuer,token:t.token}}(r)||{},a=(0,n.Z)((0,n.Z)({},e),s);return Object.entries(a).filter((([t,e])=>null!=e)).forEach((t=>{o.searchParams.append(...t)})),o.searchParams.sort(),o.toString()}function d(t,e,r){if(e||r||t)return(0,n.Z)((0,n.Z)((0,n.Z)({},null!=t?t:{}),function(t){return t?(0,i.Wf)(t)?{"X-Client-Id":t.clientId,Authorization:`Bearer ${t.token}`}:{"X-Issuer":t.asapIssuer,Authorization:`Bearer ${t.token}`}:{}}(e)),p(r))}function f(t){return async e=>{try{return await e.json()}catch(r){throw new o.L("serverInvalidBody",(0,n.Z)((0,n.Z)((0,n.Z)({},t),g(e)),{},{statusCode:e.status}),r instanceof Error?r:void 0)}}}function b(t){return async e=>{try{return await e.blob()}catch(r){throw new o.L("serverInvalidBody",(0,n.Z)((0,n.Z)((0,n.Z)({},t),g(e)),{},{statusCode:e.status}),r instanceof Error?r:void 0)}}}const m={startTimeoutInMs:1e3,maxAttempts:5,factor:2};async function y(t,e,r={}){const i=(0,n.Z)((0,n.Z)({},m),r),{startTimeoutInMs:c,maxAttempts:u,factor:l}=i;let p,h=0,d=c;const f=async()=>{var t;await(t=d,new Promise((e=>setTimeout(e,t)))),d*=l,h+=1};for(;h<u;)try{return await t()}catch(b){if(p=b,s(b))throw new o.L("clientAbortedRequest",e,b);if(!a(b)&&!(0,o.N)(b)||(0,o.N)(b)&&(!b.metadata||!b.metadata.statusCode||b.metadata.statusCode<500))throw b;await f()}if((0,o.N)(p))throw function(t,e){const{reason:r,metadata:i,innerError:s}=t;return new o.L(r,(0,n.Z)((0,n.Z)({},i),e),s)}(p,{attempts:h,clientExhaustedRetries:!0});throw new o.L("serverUnexpectedError",(0,n.Z)((0,n.Z)({},e),{},{attempts:h,clientExhaustedRetries:!0}),p)}function v(t){switch(t){case 400:return"serverBadRequest";case 401:return"serverUnauthorized";case 403:return"serverForbidden";case 404:return"serverNotFound";case 429:return"serverRateLimited";case 500:return"serverInternalError";case 502:return"serverBadGateway";default:return"serverUnexpectedError"}}function w(t){return e=>{if(e.ok||e.status<400)return e;const r=function(t,e){const{status:r}=e,i=v(r);return new o.L(i,(0,n.Z)((0,n.Z)((0,n.Z)({},t),g(e)),{},{statusCode:r}))}(t,e);throw r}}function g(t){const{headers:e}=t;return{mediaRegion:e.get("x-media-region")||"unknown",mediaEnv:e.get("x-media-env")||"unknown"}}},63176:(t,e,r)=>{"use strict";r.d(e,{WY:()=>i});var n=r(870954);async function i(t,e={},r){const{method:i="GET",endpoint:o,auth:s,params:a,headers:c,body:u,clientOptions:l={},traceContext:p}=e,{retryOptions:h}=l,d={method:i,endpoint:o,traceContext:p};return(0,n.Fr)((()=>fetch((0,n.uJ)(t,{params:a}),{method:i,body:u,headers:(0,n.B1)(c,s,p),signal:r&&r.signal}).then((0,n.j_)(d))),d,h)}},422790:(t,e,r)=>{"use strict";r.d(e,{M:()=>s});var n=r(549889),i=r(822102),o=r(992699);async function s(t,e,r){if(("doc"===t||!(0,n.PU)(e)||!r)&&(0,i.ld)(e))return!0;if("video"===t&&r){const t=(await r).value;if(!(t instanceof Blob))return!1;try{const{width:e,height:r}=await(0,o.t)(t);return!e&&!r}catch(s){return!0}}return!1}},981224:(t,e,r)=>{"use strict";r.d(e,{G:()=>n});const n=(t,e)=>{const r=!!window.MSInputMethodContext&&!!document.documentMode,n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),i="media-download-iframe",o=document.createElement("a");let s=document.getElementById(i);s||(s=document.createElement("iframe"),s.style.display="none",s.id=i,s.name=i,document.body.appendChild(s)),o.href=t,e&&e.name&&(o.download=e.name),o.target=r||n?"_blank":i,document.body.appendChild(o),o.click(),document.body.removeChild(o)}},589068:(t,e,r)=>{"use strict";r.d(e,{L4:()=>o});var n=r(549889),i=r(822102);const o=t=>(t=>["application/x-archive","application/x-cpio","application/x-shar","application/x-iso9660-image","application/x-sbx","application/x-tar","application/x-bzip2","application/gzip","application/x-gzip","application/x-lzip","application/x-lzma","application/x-lzop","application/x-snappy-framed","application/x-xz","application/x-compress","application/zstd","application/x-7z-compressed","application/x-ace-compressed","application/x-astrotite-afa","application/x-alz-compressed","application/vnd.android.package-archive","application/x-freearc","application/x-arj","application/x-b1","application/vnd.ms-cab-compressed","application/x-cfs-compressed","application/x-dar","application/x-dgc-compressed","application/x-apple-diskimage","application/x-gca-compressed","application/java-archive","application/x-lzh","application/x-lzx","application/x-rar-compressed","application/x-stuffit","application/x-stuffitx","application/x-gtar","application/x-ms-wim","application/x-xar","application/zip","application/x-zoo","application/x-par2"].indexOf(t.toLowerCase())>-1)(t)?"archive":(0,n.$k)(t)||(0,i.$v)(t)?"image":(0,n.k_)(t)||(0,i.N5)(t)?"doc":(0,n.Fk)(t)||(0,i.p5)(t)?"audio":(0,n.AI)(t)||(0,i.a6)(t)?"video":"unknown"},549889:(t,e,r)=>{"use strict";r.d(e,{$k:()=>n,AI:()=>s,Fk:()=>o,PU:()=>a,k_:()=>i});const n=t=>["image/apng","image/bmp","image/gif","image/x-icon","image/jpeg","image/png","image/webp"].indexOf(t.toLowerCase())>-1,i=t=>"application/pdf"===t.toLowerCase(),o=t=>["audio/aac","audio/flac","audio/mp4","audio/mpeg","audio/ogg","audio/x-ogg","audio/wav","audio/x-wav"].indexOf(t.toLowerCase())>-1,s=t=>["video/mp4","video/quicktime"].indexOf(t.toLowerCase())>-1,a=t=>i(t)||n(t)||o(t)||s(t)},822102:(t,e,r)=>{"use strict";r.d(e,{$v:()=>n,N5:()=>i,a6:()=>s,ld:()=>a,p5:()=>o});const n=t=>["image/bmp","image/x-windows-bmp","application/dicom","image/gif","image/jpeg","image/jpg","image/jp_","application/jpg","application/x-jpg","image/png","application/png","application/x-png","application/vnd.adobe.photoshop","image/vnd.adobe.photoshop","image/photoshop","image/x-photoshop","image/psd","application/photoshop","application/psd","zz-application/zz-winassoc-psd","image/tiff","image/x-tif","image/x-tiff","application/tif","application/x-tif","application/tiff","application/x-tiff","image/svg+xml","image/heif","image/heif-sequence","image/heic","image/heic-sequence"].indexOf(t.toLowerCase())>-1,i=t=>["application/pdf","application/x-pdf","application/acrobat","applications/vnd.pdf","text/pdf","text/x-pdf","application/vnd.adobe.illustrator","application/vnd.ms-office","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-word.document.macroenabled.12","application/vnd.ms-word.template.macroenabled.12","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.spreadsheetml.template","application/vnd.ms-excel.sheet.macroenabled.12","application/vnd.ms-excel.template.macroenabled.12","application/vnd.ms-excel.addin.macroenabled.12","application/vnd.ms-excel.sheet.macroenabled","application/vnd.ms-excel.template.macroenabled","application/vnd.ms-excel.addin.macroenabled","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.presentationml.template","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/vnd.ms-powerpoint.presentation.macroenabled.12","application/vnd.ms-powerpoint.template.macroenabled.12","application/vnd.ms-powerpoint.slideshow.macroenabled.12","application/vnd.sun.xml.writer","application/vnd.sun.xml.writer.template","application/vnd.sun.xml.draw","application/vnd.sun.xml.draw.template","application/vnd.oasis.opendocument.graphics","application/vnd.oasis.opendocument.presentation","application/x-vnd.oasis.opendocument.presentation","application/vnd.sun.xml.calc","application/vnd.sun.xml.calc.template","application/vnd.oasis.opendocument.spreadsheet","application/x-vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.spreadsheet-template","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.text-template","application/vnd.oasis.opendocument.text-master","application/x-vnd.oasis.opendocument.text","application/x-vnd.oasis.opendocument.text-template","application/x-vnd.oasis.opendocument.text-master","application/vnd.wordperfect","text/csv","text/x-diff","text/x-perl","text/x-python","text/x-ruby","text/rtf","text/richtext","text/plain","application/txt","application/rtf","application/x-rtf","application/postscript"].indexOf(t.toLowerCase())>-1,o=t=>["audio/aac","audio/x-hx-aac-adts","audio/vnd.dolby.dd-raw","audio/aiff","audio/x-aiff","audio/x-monkeys-audio","audio/x-ape","audio/basic","audio/flac","audio/mp4","audio/midi","audio/x-matroska","audio/x-mod","audio/mpeg","audio/ogg","audio/x-ogg","audio/x-pn-realaudio","audio/wav","audio/x-wav","audio/x-ms-wma"].indexOf(t.toLowerCase())>-1,s=t=>["video/3gpp","video/3gpp2","video/x-ms-asf","video/avi","video/msvideo","video/x-msvideo","video/x-dv","video/x-flv","video/m2ts","video/x-m4v","video/x-matroska","video/quicktime","video/mp4","video/mpeg","video/ogg","video/x-ogg","video/webm","video/x-ms-wmv"].indexOf(t.toLowerCase())>-1,a=t=>n(t)||i(t)||o(t)||s(t)||(t=>["binary/octet-stream"].indexOf(t.toLowerCase())>-1)(t)},942470:(t,e,r)=>{"use strict";r.d(e,{GM:()=>i,QB:()=>s,o8:()=>n});const n=t=>void 0===t,i=(t,e)=>Object.fromEntries(Object.entries(t).filter((([,t])=>!e(t))));function o(t){return[...Array(2*t)].map((()=>Math.floor(16*Math.random()).toString(16))).join("")}function s(t){var e;let r;if(null!==(e=window)&&void 0!==e&&e.crypto)try{r=Array.from(window.crypto.getRandomValues(new Uint8Array(t))).map((t=>t.toString(16).padStart(2,"0"))).join("")}catch(n){r=o(t)}else r=o(t);return r}},37447:(t,e,r)=>{"use strict";r.d(e,{G:()=>d});const n=new Map,i=t=>{const e=n.get(t);return e?Object.fromEntries(Object.entries(e.stores).map((([t,e])=>[t,e.getState()]))):{}},o=(t,e={})=>(r,o,a)=>{const{enabled:c,anonymousActionType:u,store:l,...p}=e;let h;try{h=(null==c||c)&&window.__REDUX_DEVTOOLS_EXTENSION__}catch(v){}if(!h)return c&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),t(r,o,a);const{connection:d,...f}=((t,e,r)=>{if(void 0===t)return{type:"untracked",connection:e.connect(r)};const i=n.get(r.name);if(i)return{type:"tracked",store:t,...i};const o={connection:e.connect(r),stores:{}};return n.set(r.name,o),{type:"tracked",store:t,...o}})(l,h,p);let b=!0;a.setState=(t,e,n)=>{const s=r(t,e);if(!b)return s;const c=void 0===n?{type:u||"anonymous"}:"string"==typeof n?{type:n}:n;return void 0===l?(null==d||d.send(c,o()),s):(null==d||d.send({...c,type:`${l}/${c.type}`},{...i(p.name),[l]:a.getState()}),s)};const m=(...t)=>{const e=b;b=!1,r(...t),b=e},y=t(a.setState,o,a);if("untracked"===f.type?null==d||d.init(y):(f.stores[f.store]=a,null==d||d.init(Object.fromEntries(Object.entries(f.stores).map((([t,e])=>[t,t===f.store?y:e.getState()]))))),a.dispatchFromDevtools&&"function"==typeof a.dispatch){let t=!1;const e=a.dispatch;a.dispatch=(...r)=>{"__setState"!==r[0].type||t||(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),t=!0),e(...r)}}return d.subscribe((t=>{var e;switch(t.type){case"ACTION":return"string"!=typeof t.payload?void console.error("[zustand devtools middleware] Unsupported action format"):s(t.payload,(t=>{if("__setState"!==t.type)a.dispatchFromDevtools&&"function"==typeof a.dispatch&&a.dispatch(t);else{if(void 0===l)return void m(t.state);1!==Object.keys(t.state).length&&console.error('\n                    [zustand devtools middleware] Unsupported __setState action format. \n                    When using \'store\' option in devtools(), the \'state\' should have only one key, which is a value of \'store\' that was passed in devtools(),\n                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }\n                    ');const e=t.state[l];if(null==e)return;JSON.stringify(a.getState())!==JSON.stringify(e)&&m(e)}}));case"DISPATCH":switch(t.payload.type){case"RESET":return m(y),void 0===l?null==d?void 0:d.init(a.getState()):null==d?void 0:d.init(i(p.name));case"COMMIT":return void 0===l?void(null==d||d.init(a.getState())):null==d?void 0:d.init(i(p.name));case"ROLLBACK":return s(t.state,(t=>{if(void 0===l)return m(t),void(null==d||d.init(a.getState()));m(t[l]),null==d||d.init(i(p.name))}));case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return s(t.state,(t=>{void 0!==l?JSON.stringify(a.getState())!==JSON.stringify(t[l])&&m(t[l]):m(t)}));case"IMPORT_STATE":{const{nextLiftedState:r}=t.payload,n=null==(e=r.computedStates.slice(-1)[0])?void 0:e.state;if(!n)return;return m(void 0===l?n:n[l]),void(null==d||d.send(null,r))}case"PAUSE_RECORDING":return b=!b}return}})),y},s=(t,e)=>{let r;try{r=JSON.parse(t)}catch(n){console.error("[zustand devtools middleware] Could not parse the received json",n)}void 0!==r&&e(r)},a=t=>(e,r,n)=>{const i=n.subscribe;n.subscribe=(t,e,r)=>{let o=t;if(e){const i=(null==r?void 0:r.equalityFn)||Object.is;let s=t(n.getState());o=r=>{const n=t(r);if(!i(s,n)){const t=s;e(s=n,t)}},(null==r?void 0:r.fireImmediately)&&e(s,s)}return i(o)};return t(e,r,n)};var c=r(725886);const u=t=>(e,r,n)=>(n.setState=(t,r,...n)=>{const i="function"==typeof t?(0,c.Uy)(t):t;return e(i,r,...n)},t(n.setState,r,n)),l=t=>{let e;const r=new Set,n=(t,n)=>{const i="function"==typeof t?t(e):t;if(!Object.is(i,e)){const t=e;e=(null!=n?n:"object"!=typeof i)?i:Object.assign({},e,i),r.forEach((r=>r(e,t)))}},i=()=>e,o={setState:n,getState:i,subscribe:t=>(r.add(t),()=>r.delete(t)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}};return e=t(n,i,o),o},p=t=>t?l(t):l;const h=p()(a(u((()=>({files:{}}))))),d=(p()(o(a(u((()=>({files:{}})))))),h)}}]);
//# sourceMappingURL=42434.rQQQY8vV5V.js.map