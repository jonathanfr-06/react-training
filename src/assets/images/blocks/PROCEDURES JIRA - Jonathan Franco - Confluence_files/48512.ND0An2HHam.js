"use strict";(self._cf=self._cf||[]).push([[48512,92824],{151532:(e,r,t)=>{t.r(r),t.d(r,{ExternalGroupLozenge:()=>d,ExternalGroupLozengeProps:()=>c});var a=t(615919),s=t(840506),n=t(93972),o=t(142807),i=t(480963),l=t(332072);const u=(0,n.defineMessages)({externalGroupLozengeText:{id:"external-collab-ui.group-guest-lozenge",defaultMessage:"Guest"},externalGroupTooltip:{id:"external-collab-ui.group-guest-lozenge.tooltip",defaultMessage:"Guest groups can only access certain spaces and have limited access to user info."}}),c={text:s.createElement(l.Z,{content:s.createElement(o.Z,(0,a.Z)({},u.externalGroupTooltip))},s.createElement(o.Z,(0,a.Z)({},u.externalGroupLozengeText))),appearance:"new",isBold:!1},d=()=>{const{text:e,appearance:r,isBold:t}=c;return s.createElement(i.Z,{appearance:r,isBold:t},e)};d.displayName="ExternalGroupLozenge"},984290:(e,r,t)=>{t.d(r,{Id:()=>M});var a=t(615919),s=t(872342),n=t(840506),o=t(920839),i=t(767001),l=t(167347),u=t(625677),c=t(142807),d=t(395470),p=t(252766),m=t(582463),g=t(627521),f=t(189445),y=t(649233),h=t(779076),v=t(649567);const b=h.ZP`query UserAndGroupSearchPickerQuery{...ExternalCollaboratorEntitlementFragment}${v.$}`;var x=t(336712),T=t(151532),E=t(906552),A=t(483740);const U=h.ZP`query UserAndGroupSearchQuery($searchTerm:String!$maxResults:Int=50$withGroups:Boolean=true$withUsers:Boolean=true$sitePermissionTypeFilter:SitePermissionTypeFilter=NONE){userGroupSearch(query:$searchTerm maxResults:$maxResults sitePermissionTypeFilter:$sitePermissionTypeFilter){users@include(if:$withUsers){type displayName permissionType profilePicture{path}...on User{accountId}...on KnownUser{accountId}}groups@include(if:$withGroups){id name permissionType}}}`,Z=["as","style"];t(492968),t(276513),t(772372);const N=(0,n.forwardRef)(((e,r)=>{let{as:t="div",style:l}=e,u=(0,s.Z)(e,Z);return n.createElement(t,(0,a.Z)((0,a.Z)({},u),{},{style:(0,a.Z)((0,a.Z)({},l),{},{"--_1vfudzf":(0,o.Z)("var(--ds-space-025, 2px)")}),ref:r,className:(0,i.Z)(["_1f1u1ylp _4g2i13rc _pfyj13rc",u.className])}))}));const P=({fieldId:e,client:r,isMulti:t,includeGroup:s,onSelect:o,onChange:i,onClear:u,onFocus:h,onBlur:v,onInputChange:Z,filterSearchResults:P,smartFilterOptions:M,value:w,defaultValue:L,noOptionsMessage:G,addMoreMessage:I,menuPortalTarget:S,autoFocus:O,width:$,maxPickerHeight:C,smart:R,styles:k,placeholder:z,sitePermissionTypeFilter:F=A.k.NONE,allowEmail:D,includeTeams:B,menuPosition:Q,ariaLabel:_,ariaDescribedBy:j,role:q,isDisabled:H=!1,isLoading:W=!1,bootstrapOptions:X=[],inputId:Y,withUsers:V=!0})=>{var J;const[K,ee]=(0,n.useState)(void 0),{cloudId:re,orgId:te}=(0,m.D)(),{loading:ae,data:se}=(0,l.aM)(b),ne=n.createElement(c.Z,{id:"user-and-group-search.search.error",defaultMessage:"Sorry, we're having trouble loading search results right now."}),oe=n.createElement(c.Z,{id:"user-and-group-search.permission.error",defaultMessage:"We couldn't find any results because you don't have permission to search the user directory."}),ie=null!==(J=(0,f.D)(se))&&void 0!==J&&J,le={placeholder:z||(s?D?n.createElement(c.Z,{id:"user-and-group-search.placeholder.text.users.groups.and.email",defaultMessage:"Add people by name, email, or group"}):n.createElement(c.Z,{id:"user-and-group-search.placeholder.text.users.and.groups",defaultMessage:"Type a user name or group"}):D?n.createElement(c.Z,{id:"user-and-group-search.placeholder.text.users.and.email",defaultMessage:"Add people, emails"}):n.createElement(c.Z,{id:"user-and-group-search.placeholder.text.users",defaultMessage:"Type a user name"})),addMoreMessage:I,isMulti:t,defaultValue:L,fieldId:e,menuPortalTarget:S,noOptionsMessage:e=>K?function(e){var r,t;return!!("statusCode"in e&&403===e.statusCode||null!==(r=e.message)&&void 0!==r&&r.includes("403")||null!==(t=e.message)&&void 0!==t&&t.includes("not allowed"))}(K)?oe:ne:"function"==typeof G?G(e):G,onChange:i,onClear:u,onFocus:h,onInputChange:Z,onSelection:o,value:w,width:$,maxPickerHeight:C,allowEmail:D,styles:k,menuPosition:Q,isDisabled:H,inputId:Y,withUsers:V};return n.createElement(N,{"aria-label":_,"aria-describedby":j,role:q},K?n.createElement(g.X,{error:K}):null,!R&&n.createElement(d.f,(0,a.Z)((0,a.Z)({},le),{},{inputId:Y,autoFocus:O,loadOptions:e=>!e||e.length<2?[]:(({searchTerm:e,client:r,includeGroup:t,setError:a,sitePermissionTypeFilter:s,filterResults:n,withUsers:o})=>{const i="userAndGroupSearchQuery";return(0,E.So)({subject:i}),r.query({query:U,variables:{withGroups:t,searchTerm:e,sitePermissionTypeFilter:s,withUsers:o}}).then((({data:e})=>{const{users:r=[],groups:t=[]}=e.userGroupSearch,a=[...r.map((e=>({id:`user-${e.accountId}`,name:e.displayName,extra:e,type:"user",avatarUrl:e.profilePicture?e.profilePicture.path:"",lozenge:e.permissionType===A.n.EXTERNAL?x.ExternalUserLozengeProps:null}))),...t.map((e=>({id:`group-${e.id}`,name:e.name,type:"group",extra:e,lozenge:e.permissionType===A.n.EXTERNAL?T.ExternalGroupLozengeProps:null})))];return(0,E._N)({subject:i}),n?a.filter(n):a})).catch((e=>(a(e),[])))})({searchTerm:e,client:r,includeGroup:s,setError:ee,filterResults:P,sitePermissionTypeFilter:F,withUsers:V}),onBlur:v,isLoading:W})),R&&n.createElement(p.Z,(0,a.Z)((0,a.Z)({},le),{},{inputId:Y,debounceTime:200,includeGroups:s,isLoading:ae||W,maxOptions:60,onError:e=>{e&&(ee(e),(0,y.Xb)(e))},filterOptions:M,productAttributes:{isEntitledConfluenceExternalCollaborator:ie},principalId:"context",productKey:"confluence",siteId:re,orgId:te,includeTeams:B,bootstrapOptions:X})))};P.displayName="UserAndGroupSearchPickerComponent";const M=(0,u.CG)(P)},483740:(e,r,t)=>{t.d(r,{k:()=>s,n:()=>a});let a=function(e){return e.ANONYMOUS="ANONYMOUS",e.APP="APP",e.EXTERNAL="EXTERNAL",e.INTERNAL="INTERNAL",e.JSD="JSD",e}({}),s=function(e){return e.ALL="ALL",e.EXTERNALCOLLABORATOR="EXTERNALCOLLABORATOR",e.NONE="NONE",e}({})},752540:(e,r,t)=>{t.d(r,{Z:()=>n});var a=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function s(e,r){if(e.length!==r.length)return!1;for(var t=0;t<e.length;t++)if(s=e[t],n=r[t],!(s===n||a(s)&&a(n)))return!1;var s,n;return!0}function n(e,r){void 0===r&&(r=s);var t=null;function a(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(t&&t.lastThis===this&&r(a,t.lastArgs))return t.lastResult;var n=e.apply(this,a);return t={lastResult:n,lastArgs:a,lastThis:this},n}return a.clear=function(){t=null},a}},649796:(e,r,t)=>{t.d(r,{Z:()=>v});var a=t(615919),s=t(840506),n=t(39030),o=t(16728),i=t(2142),l=t(298488);const u=(0,n.iv)({display:"block",margin:"var(--ds-space-0, 0px)",color:`var(--ds-text, ${o.xA})`}),c=(0,n.iv)({overflowX:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),d=(0,n.iv)({color:`var(--ds-text-subtlest, ${o.iw})`,fontSize:"0.85em"}),p=({isSecondary:e,children:r,shouldTruncate:t})=>(0,n.tZ)("span",{css:[u,e&&d,t&&c]},r);p.displayName="Text";const m=p;var g=t(347524);const f=(0,n.iv)({minWidth:0,maxWidth:"100%",flex:"1 1 100%",lineHeight:"1.4",paddingInlineStart:"var(--ds-space-100, 8px)"}),y=(e,{backgroundColor:r,isInteractive:t,isDisabled:a})=>e`
    align-items: center;
    background-color: ${r};
    border-radius: ${(0,i.E0)()}px;
    border: ${l.YF}px solid transparent;
    box-sizing: border-box;
    color: inherit;
    display: flex;
    font-size: inherit;
    font-style: normal;
    font-weight: normal;
    line-height: 1;
    outline: none;
    margin: ${"var(--ds-space-0, 0px)"};
    padding: ${"var(--ds-space-050, 4px)"};
    text-align: left;
    text-decoration: none;
    width: 100%;

    ${t&&`\n        :hover {\n          background-color: var(--ds-background-neutral-subtle-hovered, ${o.gt});\n          cursor: pointer;\n          text-decoration: none;\n        }\n\n        :focus {\n          outline: none;\n          border-color: var(--ds-border-focused, ${o.VY});\n        }\n\n        :active {\n          background-color: var(--ds-background-neutral-subtle-pressed, ${o.BA});\n        }\n      `}

    ${a&&"\n        cursor: not-allowed;\n        opacity: var(--ds-opacity-disabled, 0.5);\n        pointer-events: none;\n      "}
  `,h=(0,s.forwardRef)((({avatar:e,backgroundColor:r="transparent",children:t,isTruncationDisabled:o,href:i,isDisabled:l,onClick:u,primaryText:c,secondaryText:d,target:p,testId:h,label:v},b)=>(0,n.tZ)(n.ms,null,(({css:x})=>{const T=(0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({ref:b,className:y(x,{backgroundColor:r,isInteractive:Boolean(u||i),isDisabled:l})},l?{disabled:!0}:(0,a.Z)((0,a.Z)({},i&&(0,g.LR)(i,p)),u&&!i?(0,g._m)(u):{onClick:u})),h&&((e,r)=>r?{testId:`${e}--itemInner`}:{"data-testid":`${e}--itemInner`})(h,t)),(u||i)&&{"aria-label":v}),{},{children:(0,n.tZ)(s.Fragment,null,e,(0,n.tZ)("div",{css:f},(0,n.tZ)(m,{shouldTruncate:!o},c),(0,n.tZ)(m,{isSecondary:!0,shouldTruncate:!o},d)))});return t?t(T):(0,s.createElement)((0,g.hQ)(l,i,u),T)}))));h.displayName="AvatarItem";const v=h},764803:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a,s=(a=t(840506))&&a.__esModule?a:{default:a},n=t(340531);const o=e=>s.default.createElement(n.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><g fill="currentColor" fill-rule="evenodd"><circle cx="16" cy="9" r="3"/><circle cx="8" cy="6" r="3"/><path d="M11 15c0-1.105.887-2 2-2h6c1.105 0 2 .885 2 2v3.73c0 3.027-10 3.027-10 0V15z"/><path d="M13 12a1.997 1.997 0 00-2-2H5c-1.113 0-2 .897-2 2.003v3.826c0 1.921 4.054 2.518 7 1.984v-2.807A3.001 3.001 0 0112.997 12H13z"/></g></svg>'},e));o.displayName="PeopleIcon";var i=o;r.default=i},500408:(e,r,t)=>{t.d(r,{DJ:()=>x,E$:()=>U,FW:()=>h,HU:()=>u,Jh:()=>d,NU:()=>l,Nh:()=>T,TW:()=>y,UK:()=>p,Uh:()=>E,ZC:()=>N,ad:()=>m,cb:()=>Z,eZ:()=>A,ew:()=>v,iP:()=>i,px:()=>b,rQ:()=>f,ty:()=>c});var a=t(615919),s=t(752540),n=t(92905),o=t(686138);const i=e=>l(e)&&Boolean(e.isExternal),l=e=>void 0===e.type||e.type===n.FW,u=e=>e.type===n.C9,c=e=>e.type===n.YT,d=e=>e.type===n.VQ,p=e=>e.type===n.Wu,m=e=>e&&!Array.isArray(e)||Array.isArray(e)&&e.length>0,g=e=>(e=>void 0!==e.name)(e)?{data:e,isDisabled:e.isDisabled,label:e.name,value:e.id}:{data:(0,a.Z)((0,a.Z)({},e),{},{name:e.id}),isDisabled:e.isDisabled,label:e.id,value:e.id},f=e=>{if(e)return Array.isArray(e)?e.map((({data:e})=>e)):e.data},y=e=>"function"==typeof e[Symbol.iterator],h=(0,s.Z)((e=>e.map(g))),v=(0,s.Z)((e=>e?Array.isArray(e)?e.map(g):g(e):null)),b=e=>"big"===e?"medium":"multi"===e?"xsmall":"small",x=e=>e&&"object"==typeof e&&e.props&&"text"===e.props.type,T=e=>!!e&&!Array.isArray(e),E=e=>!!e&&e.trim().length>0,A=(e,...r)=>{if("function"==typeof e)try{return e(...r)}catch(t){console.error("@atlassian/user-select: an error happening in `callCallback`: ",t)}},U=e=>{if(l(e)||u(e)||p(e))return e.avatarUrl},Z=e=>e===o.Z,N=e=>(null==e?void 0:e.hasOwnProperty("text"))||!1},92905:(e,r,t)=>{t.d(r,{C9:()=>s,FW:()=>a,VQ:()=>o,Wu:()=>i,YT:()=>n});const a="user",s="team",n="group",o="email",i="custom"},698161:(e,r,t)=>{t.d(r,{v:()=>a});const a={getRecommendationServiceUrl:e=>e?`${e}/gateway/api/v1/recommendations`:"/gateway/api/v1/recommendations",getUsersServiceUrl:(e,r="")=>"jira"===e?`${r}/rest/api/3/user/bulk`:`${r}/wiki/rest/api/user/bulk`,getGraphQLUrl:e=>e?`${e}/gateway/api/graphql`:"/gateway/api/graphql",getTeamsUrl:e=>e?`${e}/gateway/api/v3/teams`:"/gateway/api/v3/teams"}},528591:(e,r,t)=>{t.d(r,{Z:()=>c});var a=t(615919),s=t(92905);const n=(0,t(93972).defineMessages)({externalUserSourcesHeading:{id:"fabric.elements.user-picker.external.sourced.from",defaultMessage:"Found in:"},slackProvider:{id:"fabric.elements.user-picker.slack.provider",defaultMessage:"Slack"},googleProvider:{id:"fabric.elements.user-picker.google.provider",defaultMessage:"Google"},microsoftProvider:{id:"fabric.elements.user-picker.microsoft.provider",defaultMessage:"Microsoft"},gitHubProvider:{id:"fabric.elements.user-picker.github.provider",defaultMessage:"GitHub"},memberLozengeText:{id:"fabric.elements.user-picker.member.lozenge.text",defaultMessage:"MEMBER"},guestLozengeText:{id:"fabric.elements.user-picker.guest.lozenge.text",defaultMessage:"GUEST"},guestUserLozengeTooltip:{id:"fabric.elements.user-picker.guest.lozenge.tooltip.user",defaultMessage:"Guests can only access certain spaces and have limited access to user info."},guestGroupLozengeTooltip:{id:"fabric.elements.user-picker.guest.lozenge.tooltip.group",defaultMessage:"Guest groups can only access certain spaces and have limited access to user info."}});var o=function(e){return e.USER="USER",e.TEAM="TEAM",e.GROUP="GROUP",e}(o||{});const i=(e,r)=>{var t,a;if(null!==(t=e.attributes)&&void 0!==t&&t.workspaceMember)return r.formatMessage(n.memberLozengeText);if(null!==(a=e.attributes)&&void 0!==a&&a.isConfluenceExternalCollaborator){const t=e.entityType===o.GROUP?n.guestGroupLozengeTooltip:n.guestUserLozengeTooltip;return{text:r.formatMessage(n.guestLozengeText),tooltip:r.formatMessage(t),appearance:"default"}}},l=(e,r)=>(e.recommendedUsers||[]).map((e=>((e,r)=>{const t=e.entityType;if(t===o.USER){const t=e,a=i(t,r);return{id:t.id,type:s.FW,avatarUrl:t.avatarUrl,name:t.name,email:t.email,title:t.title,lozenge:a,tooltip:t.name}}if(t===o.TEAM){const r=e;return{id:r.id,type:s.C9,description:r.description||"",name:r.displayName||"",memberCount:r.memberCount,members:r.members,includesYou:r.includesYou,avatarUrl:r.largeAvatarImageUrl||r.smallAvatarImageUrl,tooltip:r.displayName}}if(t===o.GROUP){const t=e,a=i(t,r);return{id:t.id,type:s.YT,name:t.name||"",lozenge:a}}})(e,r))).filter((e=>!!e)).map((e=>e));var u=t(698161);const c=(e,r)=>{var t;const s=u.v.getRecommendationServiceUrl(e.baseUrl||"");return fetch(s,{method:"POST",credentials:"include",headers:{"content-type":"application/json"},body:JSON.stringify({context:e.context,includeUsers:e.includeUsers,includeGroups:e.includeGroups,includeTeams:e.includeTeams,includeNonLicensedUsers:e.includeNonLicensedUsers,maxNumberOfResults:e.maxNumberOfResults,performSearchQueryOnly:!1,searchQuery:(0,a.Z)((0,a.Z)({cpusQueryHighlights:{query:"",field:""}},(null===(t=e.context)||void 0===t||null===(t=t.productAttributes)||void 0===t?void 0:t.isEntitledConfluenceExternalCollaborator)&&{productAccessPermissionIds:["write","external-collaborator-write"]}),{},{customQuery:"",customerDirectoryId:"",filter:e.searchQueryFilter||"",minimumAccessLevel:"APPLICATION",queryString:e.query,restrictTo:{userIds:[],groupIds:[]},searchUserbase:!1})})}).then((e=>200===e.status?e.json():Promise.reject({message:`error calling smart service, statusCode=${e.status}, statusText=${e.statusText}`,statusCode:e.status}))).then((e=>l(e,r)))}}}]);
//# sourceMappingURL=48512.ND0An2HHam.js.map