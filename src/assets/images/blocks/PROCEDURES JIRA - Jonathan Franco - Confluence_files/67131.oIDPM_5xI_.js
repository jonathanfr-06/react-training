"use strict";(self._cf=self._cf||[]).push([[67131,75638],{237425:(e,t,a)=>{a.d(t,{U:()=>r});var o=a(872762),n=a(179640);const r=()=>{const e=(0,n.T)("confluence.frontend.link-in-tree"),t=(0,n.T)("confluence.frontend.databases.enabled"),a=(0,n.T)("confluence.frontend.databases.opt-out"),{isWhiteboardCreationDropdownEnabled:r}=(0,o.T)();return r()||e||t&&!a}},21944:(e,t,a)=>{a.d(t,{C:()=>S});var o=a(615919),n=a(872342),r=a(840506),i=a(920839),l=a(767001),c=a(747472),s=a(142807),d=a(167347),u=a(555687),p=a(27966),C=a(16728),E=a(332072),f=a(95677),I=a(627521),T=a(717994),m=a(904698),g=a(734233),_=a(197949);const v=["as","style"];a(564342),a(275310);const b=(0,r.forwardRef)(((e,t)=>{let{as:a="span",style:c}=e,s=(0,n.Z)(e,v);return r.createElement(a,(0,o.Z)((0,o.Z)({},s),{},{style:(0,o.Z)((0,o.Z)({},c),{},{"--_13k44sm":(0,i.Z)(`var(--ds-icon-subtle, ${C.uv})`),"--_nb31jz":(0,i.Z)(`var(--ds-icon, ${C.Mx})`)}),ref:t,className:(0,l.Z)(["_1efs1nc8 _i2zut4jn",s.className])}))}));const S=({canCreateContent:e,createContent:t,href:a,tooltipTestId:n,labelI18n:i,tooltipShortcut:l,spaceKey:C,createPagePermissionCheck:v,tooltipPosition:S,pagesSideNavButtonStyleOverride:y=!1,testId:U})=>{const P=(0,r.useContext)(g.M),R=(0,c.Z)(),{data:A,loading:L,error:h}=(0,d.aM)(T.t,{variables:{spaceKey:C}}),{enforceStorageLimit:B,shouldBlockCreate:O}=(0,f.u)({source:"page-tree-create-button-base"}),D=A&&e(A);if((0,r.useEffect)((()=>null==v?void 0:v(D)),[v,D]),h)return r.createElement(I.X,{error:h});if(L||!D)return null;const k=l?r.createElement(_.oW,{shortcut:l,contentBefore:r.createElement(s.Z,(0,o.Z)({},i))}):R.formatMessage(i),w=y?b:r.Fragment,K=r.createElement(w,null,r.createElement(p.default,{label:R.formatMessage(i)}));return r.createElement(E.Z,{content:k,position:S,testId:n},r.createElement(u.Z,{appearance:"subtle",iconBefore:K,onClick:B((e=>{var o;e.stopPropagation(),a?((e,t,a)=>{(0,m.H)(e,a)&&(e.preventDefault(),a.push(t))})(e,a,P):e.preventDefault();const n=(null==A||null===(o=A.space)||void 0===o?void 0:o.id)||"";t({spaceId:n})})),href:O?void 0:a,testId:U}))};S.displayName="CreateButtonBase"},470453:(e,t,a)=>{a.d(t,{K:()=>r,M:()=>n});const o=(e,t,a)=>{var o,n;return(null!==(o=null==e||null===(n=e.space)||void 0===n?void 0:n.operations)&&void 0!==o?o:[]).some((e=>(null==e?void 0:e.operation)===t&&(null==e?void 0:e.targetType)===a))},n=e=>o(e,"create","page"),r=e=>o(e,"create","blogpost")},422654:(e,t,a)=>{a.d(t,{Z:()=>o});const o=(0,a(940155).ZR)({__loadable_id__:"F26AE",name:"ContextualCreateContentPopoverLoader",loader:async()=>(await Promise.all([a.e(12705),a.e(11216),a.e(61769),a.e(14248),a.e(21488),a.e(34099),a.e(86408),a.e(71688)]).then(a.bind(a,446924))).ContextualCreateContentPopover})},980877:(e,t,a)=>{a.d(t,{XK:()=>f,nf:()=>p,Z_:()=>C,O5:()=>E});var o=a(357261),n=a(284186),r=a(316534),i=a(990762),l=a(654927),c=a.n(l);const s=()=>"experiment"===c().getExperimentValue("jsw_sprint_planning_whiteboards","cohort","control"),d={parentPageId:"parentPageId",title:"title",draftId:"draftId",linkCreation:"linkCreation",fromPageId:"fromPageId",spaceKey:"spaceKey",source:"source",withFallback:"withFallback",embedURL:"embedURL",embedIconURL:"embedIconURL",paywallStatus:"paywallStatus",deactivationIdentifier:"deactivationIdentifier",openJiraImportTool:r.SX,cloudId:r.vU,projectUuid:r.xV},u=["page","blog","whiteboard","embed","database"],p=e=>{const t={};return"spaceKey"in e&&e.spaceKey&&(t[d.spaceKey]=e.spaceKey),"parentPageId"in e&&e.parentPageId&&(t[d.parentPageId]=e.parentPageId),"title"in e&&e.title&&(t[d.title]=e.title),"draftId"in e&&e.draftId&&(t[d.draftId]=e.draftId),"linkCreation"in e&&e.linkCreation&&(t[d.linkCreation]=e.linkCreation),"withFallback"in e&&e.withFallback&&(t[d.withFallback]=e.withFallback),"source"in e&&e.source&&(t[d.source]=e.source),"embedURL"in e&&e.embedURL&&(t[d.embedURL]=e.embedURL),"embedIconURL"in e&&e.embedIconURL&&(t[d.embedIconURL]=e.embedIconURL),"paywallStatus"in e&&e.paywallStatus&&(t[d.paywallStatus]=e.paywallStatus),"deactivationIdentifier"in e&&e.deactivationIdentifier&&(t[d.deactivationIdentifier]=e.deactivationIdentifier),r.SX in e&&e.openJiraImportTool&&(t[d.openJiraImportTool]=e.openJiraImportTool),r.vU in e&&e.cloudId&&(t[d.cloudId]=e.cloudId),r.xV in e&&e.projectUuid&&(t[d.projectUuid]=e.projectUuid),n.Rs.toUrl({contentType:e.contentType},{query:t})},C=e=>{if(u.includes(e))return e},E=e=>{const t=(0,o.r)(e,d.spaceKey),a=(0,o.r)(e,d.parentPageId),n=(0,o.r)(e,d.title),r=(0,o.r)(e,d.draftId),l=(0,o.r)(e,d.linkCreation),c=(0,o.r)(e,d.fromPageId),u=!!(0,o.r)(e,d.withFallback)||void 0,p=(0,o.r)(e,d.source),C=(0,o.r)(e,d.embedURL),E=(0,o.r)(e,d.embedIconURL),f=(0,o.r)(e,d.deactivationIdentifier);return{spaceKey:t,parentPageId:a||c,title:n,draftId:r,linkCreation:l,withFallback:u,source:p,embedURL:C,embedIconURL:E,paywallStatus:i.V[(0,o.r)(e,d.paywallStatus)||""],deactivationIdentifier:f,openJiraImportTool:!(!s()||!(0,o.r)(e,d.openJiraImportTool))||void 0,cloudId:s()?(0,o.r)(e,d.cloudId):void 0,projectUuid:s()?(0,o.r)(e,d.projectUuid):void 0}};let f=function(e){return e[e.ABORT=0]="ABORT",e[e.SUCCEED=1]="SUCCEED",e}({})},990762:(e,t,a)=>{a.d(t,{V:()=>o});let o=function(e){return e.ACTIVE="ACTIVE",e.DEACTIVATED="DEACTIVATED",e.UNSET="UNSET",e}({})},262188:(e,t,a)=>{a.d(t,{e:()=>i});var o=a(840506),n=a(300535),r=a(429555);const i=({children:e,editSource:t=""})=>{const a=(0,o.useContext)(r.x),[i,l]=(0,o.useState)(!1),[{editSource:c},{setEditSource:s}]=(0,n.L)(),d=(0,o.useCallback)((()=>{s(t),l(!0)}),[t,s]);return o.createElement(o.Fragment,null,o.createElement("div",{onMouseEnter:d},e),t===c&&i&&a?a({}):null)};i.displayName="CreateContentButtonPreloader"},397293:(e,t,a)=>{a.d(t,{p:()=>r,z:()=>n});var o=a(779076);const n=o.ZP`fragment ContentOperationsFragment on Content{id type operations{operation targetType}}`,r=o.ZP`fragment SpaceOperationsFragment on Space{id operations{operation targetType}}`},717994:(e,t,a)=>{a.d(t,{t:()=>r});var o=a(779076),n=a(397293);const r=o.ZP`query SpaceOperationsQuery($spaceKey:String!){space(key:$spaceKey){...SpaceOperationsFragment}}${n.p}`},482995:(e,t,a)=>{a.d(t,{AD:()=>l,Ae:()=>d,Bp:()=>o,Dc:()=>n,Jc:()=>T,QI:()=>c,SR:()=>p,Yc:()=>r,Zy:()=>i,bl:()=>f,cZ:()=>I,s5:()=>s,sP:()=>E,ub:()=>C,y_:()=>u});const o="PAGE_EDIT_BUTTON_CLICK",n="BLOG_EDIT_BUTTON_CLICK",r="SPACE_EDIT_BUTTON_CLICK",i="PAGE_EDIT_SHORTCUT_E",l="BLOG_EDIT_SHORTCUT_E",c="SPACE_EDIT_SHORTCUT_E",s="NAVIGATION_RECENT_DROPDOWN_EDIT_BUTTON_CLICK",d="PAGECARD_EDIT_BUTTON_CLICK",u="QUICK_ACTIONS_EDIT_BUTTON_CLICK",p="CREATE_PAGE_SHORTCUT",C="CREATE_NAV_BUTTON_CLICK",E="CREATE_PAGETREE_BLOG_BUTTON_CLICK",f="CREATE_PAGETREE_CHILDPAGE_BUTTON_CLICK",I="CREATE_PAGETREE_PAGE_BUTTON_CLICK",T=[u,d,"PAGECARD_DRAFT_EDIT_BUTTON_CLICK",s]},300535:(e,t,a)=>{a.d(t,{L:()=>l});var o=a(615919),n=a(834232),r=a(944547);const i=(0,n.M)({initialState:(0,o.Z)({},{editSource:""}),actions:{setEditSource:e=>({setState:t})=>{t({editSource:e})}},name:"setEditSource"}),l=(0,r.Bi)(i)},451843:(e,t,a)=>{a.d(t,{BP:()=>n,NG:()=>c,ZC:()=>o,jf:()=>l,n$:()=>r,uF:()=>i});const o="confluence.frontend.storage-enforcement",n="confluence.ssr.storage-enforcement_0msw5",r="confluence.frontend.storage-enforcement.release.two_6ajmv",i="confluence.frontend.storage-enforcement.release.two.exposure_se96j",l="onboarding",c="https://support.atlassian.com/confluence-cloud/docs/manage-your-storage-usage/"},948479:(e,t,a)=>{a.d(t,{x:()=>i});var o=a(834232),n=a(944547);const r=(0,o.M)({name:"BLOCK_CREATE_MODAL_STORE",initialState:{isActive:!1,source:""},actions:{showBlockCreateModal:e=>({setState:t})=>{t({isActive:!0,source:e})},onBlockCreateModalClose:()=>({setState:e})=>{e({isActive:!1,source:""})}}}),i=(0,n.Bi)(r)},415138:(e,t,a)=>{a.d(t,{T:()=>r});var o=a(167347);const n=a(779076).ZP`query GetCurrentStorageUsageQuery{storage{bytesUsed isStorageEnforcementGracePeriodComplete gracePeriodEndDate}}`,r=({skip:e}={})=>{var t,a,r;const{data:i,loading:l,error:c}=(0,o.aM)(n,{skip:e});return{currentUsage:null==i||null===(t=i.storage)||void 0===t?void 0:t.bytesUsed,isStorageEnforcementGracePeriodComplete:null==i||null===(a=i.storage)||void 0===a?void 0:a.isStorageEnforcementGracePeriodComplete,gracePeriodEndDate:null==i||null===(r=i.storage)||void 0===r?void 0:r.gracePeriodEndDate,loading:l,error:c}}},95677:(e,t,a)=>{a.d(t,{u:()=>p});var o=a(840506),n=a(486889),r=a(190206),i=a(400318),l=a(582463),c=a(451843),s=a(415138),d=a(349904),u=a(948479);const p=({source:e})=>{const t=(0,o.useContext)(r.F),{createAnalyticsEvent:a}=(0,n._)(),{isReleaseTwoEligible:p}=(0,d.K)(),{featureFlagClient:C}=(0,l.D)(),{isStorageEnforcementGracePeriodComplete:E}=(0,s.T)({skip:!p}),[,{showBlockCreateModal:f}]=(0,u.x)(),I=p&&Boolean(E)&&C.getBooleanValue(c.uF,{default:!1,shouldTrackExposureEvent:!0}),T=(0,o.useCallback)((o=>(...n)=>{if(I){const o=null==n?void 0:n[0];return o&&"function"==typeof o.preventDefault&&o.preventDefault(),t.start({name:i.tp0}),a({type:"sendOperationalEvent",data:{action:"render",actionSubject:"hardStorageEnforcement",actionSubjectId:"enforceStorageLimit",source:e||"onboarding"}}).fire(),void f(e)}return o.apply(void 0,n)}),[a,t,I,f,e]);return{shouldBlockCreate:I,enforceStorageLimit:T}}},349904:(e,t,a)=>{a.d(t,{K:()=>c});var o=a(582463),n=a(179640),r=a(856389),i=a(526771),l=a(451843);const c=({shouldCheckSSRFlag:e}={})=>{const{edition:t,isLicensed:a,isLoggedIn:c}=(0,o.D)(),s=(0,n.T)(l.ZC),d=(0,n.T)(l.n$),u=Boolean(e)&&(0,i.y)(l.BP),p=t===r.m.FREE&&c&&a;return{isEligibleUser:p,isReleaseOneEligible:p&&(s||u),isReleaseTwoEligible:p&&(d||u)}}},27966:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,n=(o=a(840506))&&o.__esModule?o:{default:o},r=a(340531);const i=e=>n.default.createElement(r.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M13 11V7a1 1 0 00-2 0v4H7a1 1 0 000 2h4v4a1 1 0 002 0v-4h4a1 1 0 000-2h-4z" fill="currentColor" fill-rule="evenodd"/></svg>'},e));i.displayName="EditorAddIcon";var l=i;t.default=l}}]);
//# sourceMappingURL=67131.oIDPM_5xI_.js.map