"use strict";(self._cf=self._cf||[]).push([[39159],{686138:(e,t,n)=>{n.d(t,{Z:()=>T});var s=n(872342),o=n(615919),i=n(199009),r=n(840506),l=n(150030),p=n(214248),a=n(647e3),d=n(242074),c=n(467220),h=n(394049),u=n(129275),m=n(479198),f=n(253594);function g(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),s=Object.keys(t),o=n.length;if(s.length!==o)return!1;for(let i=0;i<o;i++){const s=n[i];if(e[s]!==t[s]||!Object.prototype.hasOwnProperty.call(t,s))return!1}return!0}var y=n(16728),Z=n(24359),w=n(728100),v=n(39030),b=n(372387),C=n(977724),S=n(2142);const O=["innerRef","innerProps"],R=(0,v.iv)({backgroundColor:"var(--ds-surface-overlay, white)",borderRadius:"var(--ds-border-radius-100, 4px)",boxShadow:`var(--ds-shadow-overlay, 0 0 0 1px ${y.bt}, 0 4px 11px ${y.bt})`,zIndex:S.ug.modal()}),x=({maxWidth:e,minWidth:t,children:n,id:s,style:o,testId:i})=>(0,v.tZ)("div",{css:[R,{maxWidth:e,minWidth:t}],style:o,id:s,"data-testid":i&&`${i}--menu`},n);x.displayName="MenuDialog";const P=(0,v.iv)({marginInlineEnd:"var(--ds-space-025, 2px)",textAlign:"center",width:32}),W=()=>(0,v.tZ)("div",{css:P},(0,v.tZ)(C.default,{label:"open"}));W.displayName="DropdownIndicator";const M=(0,v.iv)({padding:"var(--ds-space-100, 8px) var(--ds-space-100, 8px) var(--ds-space-050, 4px)"}),k=e=>{let{innerRef:t,innerProps:n}=e,i=(0,s.Z)(e,O);return(0,v.tZ)("div",{ref:t,css:M},(0,v.tZ)(w.c.Control,(0,o.Z)((0,o.Z)({},i),{},{innerProps:n})))};k.displayName="Control";const E=e=>(0,v.tZ)(b.Z,null,(0,v.tZ)(w.c.Control,(0,o.Z)({},e)));E.displayName="DummyControl";const I=({children:e,innerProps:t})=>(0,v.tZ)("div",(0,o.Z)({},t),e);I.displayName="Menu";const D={Control:k,DropdownIndicator:W,Menu:I};var K=n(932041),_=n(393242),H=n(365892);const F=["footer","label","maxMenuWidth","minMenuWidth","placeholder","target","testId"],N={modifiers:[{name:"offset",options:{offset:[0,8]}},{name:"preventOverflow",enabled:!0,options:{padding:5,boundary:"clippingParents",altAxis:!0,altBoundary:!0}}],placement:"bottom-start"};class T extends r.PureComponent{constructor(...e){var t,n;super(...e),(0,i.Z)(this,"menuRef",null),(0,i.Z)(this,"selectRef",null),(0,i.Z)(this,"targetRef",null),(0,i.Z)(this,"unbindWindowClick",null),(0,i.Z)(this,"unbindWindowKeydown",null),(0,i.Z)(this,"defaultStyles",(0,a.m)((0,K.Z)(this.props.validationState||(this.props.isInvalid?"error":"default"),"compact"===this.props.spacing,"default"),{groupHeading:e=>(0,o.Z)((0,o.Z)({},e),{},{color:`var(--ds-text-subtlest, ${y.Bn})`})})),(0,i.Z)(this,"isOpenControlled",void 0!==this.props.isOpen),(0,i.Z)(this,"defaultOpenState",this.isOpenControlled?this.props.isOpen:this.props.defaultIsOpen),(0,i.Z)(this,"state",(0,Z.e)("platform.design-system-team.popup-select-render-perf_i0s6m")?{isOpen:null!==(t=this.defaultOpenState)&&void 0!==t&&t,mergedComponents:D,mergedPopperProps:N}:{focusLockEnabled:!1,isOpen:null!==(n=this.defaultOpenState)&&void 0!==n&&n,mergedComponents:D,mergedPopperProps:N}),(0,i.Z)(this,"popperWrapperId",`${(0,c.h)({options:this.props.options})}-popup-select`),(0,i.Z)(this,"handleTargetKeyDown",(e=>{if("ArrowDown"===e.key)this.open()})),(0,i.Z)(this,"handleKeyDown",(e=>{switch(e.key){case"Escape":case"Esc":this.close()}this.props.onKeyDown&&this.props.onKeyDown(e)})),(0,i.Z)(this,"handleClick",(({target:e})=>{const{isOpen:t}=this.state;e instanceof Element&&(t&&this.menuRef&&!this.menuRef.contains(e)&&this.close(),!t&&this.targetRef&&this.targetRef.contains(e)&&this.open())})),(0,i.Z)(this,"handleSelectChange",((e,t)=>{const{closeMenuOnSelect:n,onChange:s}=this.props;n&&"clear"!==t.action&&this.close(),s&&s(e,t)})),(0,i.Z)(this,"handleFirstPopperUpdate",(()=>{this.setState({focusLockEnabled:!0})})),(0,i.Z)(this,"open",(e=>{const{onOpen:t}=this.props;(null!=e&&e.controlOverride||!this.isOpenControlled)&&(t&&t(),this.setState({isOpen:!0}),this.selectRef&&this.selectRef.openMenu("first"),"undefined"!=typeof window&&(this.unbindWindowKeydown=(0,_.ak)(window,{type:"keydown",listener:this.handleKeyDown,options:{capture:!0}})))})),(0,i.Z)(this,"close",(e=>{var t;const{onClose:n}=this.props;(null!=e&&e.controlOverride||!this.isOpenControlled)&&(n&&n(),this.setState({isOpen:!1}),(0,Z.e)("platform.design-system-team.popup-select-render-perf_i0s6m")||this.setState({focusLockEnabled:!1}),null!=this.targetRef&&this.targetRef.focus(),"undefined"!=typeof window&&(null===(t=this.unbindWindowKeydown)||void 0===t||t.call(this),this.unbindWindowKeydown=null))})),(0,i.Z)(this,"resolveTargetRef",(e=>t=>{!this.targetRef&&e&&t&&(this.targetRef=t,"function"==typeof e?e(t):e.current=t)})),(0,i.Z)(this,"resolveMenuRef",(e=>t=>{this.menuRef=t,"function"==typeof e?e(t):e.current=t})),(0,i.Z)(this,"getSelectRef",(e=>{this.selectRef=e})),(0,i.Z)(this,"getSelectStyles",(0,H.Z)(((e,t)=>(0,a.m)(e,t||{})))),(0,i.Z)(this,"getSelectComponents",(0,H.Z)(((e,t)=>t?e:(0,o.Z)((0,o.Z)({},e),{},{Control:E})))),(0,i.Z)(this,"getItemCount",(()=>{const{options:e}=this.props;let t=0;return e.forEach((e=>{e.options?e.options.forEach((()=>t++)):t++})),t})),(0,i.Z)(this,"getMaxHeight",(()=>{const{maxMenuHeight:e}=this.props;if(!this.selectRef)return e;const t=this.showSearchControl(),{controlRef:n}=this.selectRef;return e-(t&&n?n.offsetHeight:0)})),(0,i.Z)(this,"showSearchControl",(()=>{const{searchThreshold:e,isSearchable:t}=this.props;return t&&this.getItemCount()>e})),(0,i.Z)(this,"renderSelect",(()=>{const e=this.props,{footer:t,label:n,maxMenuWidth:i,minMenuWidth:c,placeholder:u,target:m,testId:g}=e,y=(0,s.Z)(e,F),{focusLockEnabled:w,isOpen:v,mergedComponents:b,mergedPopperProps:C}=this.state,S=this.showSearchControl(),O=Boolean("undefined"!=typeof window&&window.document&&window.document.createElement)?document.body:null;if(!O||!v)return null;const R=(0,Z.e)("platform.design-system-team.popup-select-render-perf_i0s6m")?this.getSelectStyles(this.defaultStyles,y.styles):(0,a.m)(this.defaultStyles,y.styles||{}),P=(0,Z.e)("platform.design-system-team.popup-select-render-perf_i0s6m")?this.getSelectComponents(b,S):(0,o.Z)((0,o.Z)({},b),{},{Control:S?b.Control:E}),W=r.createElement(h.r,(0,o.Z)((0,o.Z)({},C),(0,Z.e)("platform.design-system-team.popup-select-render-perf_i0s6m")?void 0:{onFirstUpdate:e=>{var t;this.handleFirstPopperUpdate(),null===(t=C.onFirstUpdate)||void 0===t||t.call(C,e)}}),(({placement:e,ref:s,style:l,isReferenceHidden:a})=>{const h=!(0,Z.e)("platform.design-system-team.popup-select-render-perf_i0s6m")||null!==a;return r.createElement(f.Z,{innerRef:this.resolveMenuRef(s)},r.createElement(x,{style:l,"data-placement":e,minWidth:c,maxWidth:i,id:this.popperWrapperId,testId:g},r.createElement(p.ZP,{disabled:(0,Z.e)("platform.design-system-team.popup-select-render-perf_i0s6m")?!h:!w,returnFocus:!0},h&&r.createElement(d.ZP,(0,o.Z)((0,o.Z)({"aria-label":n||("string"==typeof u?u:void 0),backspaceRemovesValue:!1,controlShouldRenderValue:!1,isClearable:!1,tabSelectsValue:!1,menuIsOpen:!0,placeholder:u,ref:this.getSelectRef},y),{},{onMenuClose:()=>{var e;(0,Z.e)("platform.design-system-team.popup-select-close_8h15h")&&this.close(),null===(e=y.onMenuClose)||void 0===e||e.call(y)},isSearchable:S,styles:R,maxMenuHeight:this.getMaxHeight(),components:P,onChange:this.handleSelectChange})),t)))}));return"fixed"===C.strategy?W:(0,l.createPortal)(W,O)}))}static getDerivedStateFromProps(e,t){const n={},s=(0,o.Z)((0,o.Z)({},N),e.popperProps);g(s,t.mergedPopperProps)||(n.mergedPopperProps=s);const i=(0,o.Z)((0,o.Z)({},D),e.components);return g(i,t.mergedComponents)||(n.mergedComponents=i),r=n,0!==Object.keys(r).length?n:null;var r}componentDidMount(){"undefined"!=typeof window&&(this.unbindWindowClick=(0,_.ak)(window,{type:"click",listener:this.handleClick,options:{capture:!0}}))}componentWillUnmount(){var e,t;"undefined"!=typeof window&&(null===(e=this.unbindWindowClick)||void 0===e||e.call(this),this.unbindWindowClick=null,null===(t=this.unbindWindowKeydown)||void 0===t||t.call(this),this.unbindWindowKeydown=null)}componentDidUpdate(e){const{isOpen:t}=this.props;e.isOpen!==t&&(!0===t?this.open({controlOverride:!0}):!1===t&&this.close({controlOverride:!0}))}render(){const{target:e}=this.props,{isOpen:t}=this.state;return r.createElement(u.dK,null,r.createElement(m.s,null,(({ref:n})=>e&&e({isOpen:t,onKeyDown:this.handleTargetKeyDown,ref:this.resolveTargetRef(n),"aria-haspopup":"true","aria-expanded":t,"aria-controls":t?this.popperWrapperId:void 0}))),this.renderSelect())}}T.displayName="PopupSelect",(0,i.Z)(T,"defaultProps",{closeMenuOnSelect:!0,components:{},maxMenuHeight:300,maxMenuWidth:440,minMenuWidth:220,popperProps:{},isSearchable:!0,searchThreshold:5,styles:{},options:[]})}}]);
//# sourceMappingURL=39159.W1C1iy3HE4.js.map