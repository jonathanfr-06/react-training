"use strict";(self._cf=self._cf||[]).push([[10748],{70051:(e,t,n)=>{n.d(t,{B1:()=>i,hq:()=>s});const i="/gateway/api/graphql";let s=function(e){return e.COMMENTED="commented",e.CREATED="created",e.EDITED="edited",e.PUBLISHED="published",e.UPDATED="updated",e}({})},470815:(e,t,n)=>{n.d(t,{O:()=>i,b:()=>s});const i="platform-pkg",s="0.0.0-use.local"},179341:(e,t,n)=>{n.d(t,{o:()=>u});var i=n(615919),s=n(165124),a=n(470815),r=n(747298),o=n(288920);const c=["FetchedActivities","TransformedActivityItems","GeneratedQueryWithFilters"].map((e=>({key:e,startMark:`${e}_start`,endMark:`${e}_end`}))),l=()=>new r.Q("client",{type:o.Z.Load,performanceType:o.R.Custom,platform:{component:"recent-work"},timings:c}),d=()=>new r.Q("client-v3",{type:o.Z.Load,performanceType:o.R.Custom,platform:{component:"recent-work"},timings:c});async function u(e,t){const n="v2"===t?l():d();try{n.start(),n.addMetadata({clientVersion:t,packageName:a.O,packageVersion:a.b});const i=await e(n);return n.success(),i}catch(i){throw n.failure({metadata:{error:m(i)}}),i}}const m=e=>{var t;return e instanceof s.Z?(0,i.Z)((0,i.Z)({},e),{},{xRequestId:null!==(t=e.xRequestId)&&void 0!==t?t:void 0,cause:void 0}):e instanceof Error?(0,i.Z)((0,i.Z)({},e),{},{cause:void 0}):"unknown"}},136569:(e,t,n)=>{n.d(t,{r:()=>a});var i=n(755287),s=n.n(i);const a=e=>`${(e=>s()(e))(e)}_activity_recentWorkClient`},440153:(e,t,n)=>{n.d(t,{y:()=>g});var i=n(872342),s=n(615919);const a=(e={},t,n)=>Object.entries(e).reduce(((e,[i,a])=>{const r=t?t(i,a):{[i]:a};return null!=n&&n.includes(i)?(0,s.Z)((0,s.Z)({},e),r):(0,s.Z)((0,s.Z)({},e),{},{arguments:(0,s.Z)((0,s.Z)({},e.arguments),r)})}),{type:"AND",arguments:{}}),r=["products","eventTypes","objectTypes"],o=new Map([["actors","accountIds"]]),c=(e={})=>a(e,((e,t)=>{const n=Array.isArray(t)&&r.includes(e)?t.map((e=>e.toUpperCase())):t;return{[o.has(e)?o.get(e):e]:n}})),l=["limit"],d=["limit","actors"],u=new Map([["myActivity",(e={})=>{const{limit:t,actors:n}=e,s=(0,i.Z)(e,d);return c(s)}],["activities",(e={})=>{const{limit:t}=e,n=(0,i.Z)(e,l);return c(n)}]]),m=["products","eventTypes","objectTypes"],h=["actors","rootContainerIds"],p=(e={})=>a(e,((e,t)=>Array.isArray(t)&&m.includes(e)?{[e]:t.map((e=>e.toLowerCase()))}:{[e]:t}),h),f=["limit"],v=["limit","actors"],g={v2:u,v3:new Map([["myActivity",(e={})=>{const{limit:t,actors:n}=e,s=(0,i.Z)(e,v);return p(s)}],["activities",(e={})=>{const{limit:t}=e,n=(0,i.Z)(e,f);return p(n)}]])}},793059:(e,t,n)=>{n.d(t,{t:()=>a});var i=n(199009),s=n(70051);class a{constructor(e,t,n,a){(0,i.Z)(this,"clientVersion",void 0),(0,i.Z)(this,"product","unknown"),(0,i.Z)(this,"headers",void 0),(0,i.Z)(this,"baseUrl",s.B1),(0,i.Z)(this,"fetchActivities",void 0),(0,i.Z)(this,"setProduct",void 0),t&&(this.product=t),this.clientVersion=e,this.headers=null!=n?n:{},a&&(this.baseUrl=a)}}},570413:(e,t,n)=>{n.d(t,{r:()=>I});var i=n(199009),s=n(179341),a=n(793059),r=n(872342),o=n(136569),c=n(610045),l=n(440153);const d="\n  nodes {\n    id\n    timestamp\n    object {\n      id\n      name\n      cloudId\n      localResourceId\n      product\n      type\n      url\n      iconUrl\n      containers {\n        name\n      }\n      contributors {\n        profile {\n          accountId\n          name\n          picture\n        }\n      }\n      events {\n        eventType\n      }\n      extension {\n        ... on ActivitiesJiraIssue {\n          issueKey\n        }\n      }\n    }\n  }\n",u=new Map([["workedOn",`\n   workedOn(first: $first, filters: $filters) {\n     ${d}\n   }\n`],["viewed",`\n   viewed(first: $first, filters: $filters) {\n     ${d}\n   }\n`],["all",`\n    all(first: $first, filters: $filters) {\n      ${d}\n    }\n`]]),m=(e,t)=>`\n    query ${(0,o.r)(e)}($first: Int, $filters: [ActivitiesFilter!]) {\n      activities {\n        ${t}\n      }\n    }\n`;function h(e,t={}){return t&&t.nodes?t.nodes.map((t=>{const{object:n,timestamp:i}=t,{cloudId:s,events:a,extension:r,iconUrl:o,id:c,localResourceId:l,name:d,product:u,url:m,type:h}=n,p=a[0].eventType.toLowerCase(),f=r&&r.issueKey;let v=[];return f&&v.push({name:f}),Array.isArray(n.containers)&&(v=v.concat(n.containers)),v=v.filter((e=>!!e.name)),{query:e,containers:v,contributors:(n.contributors||[]).reduce(((e,t)=>{if(t.profile){const{accountId:n,picture:i}=t.profile;e.push({accountId:n,name:t.profile.name,picture:i})}return e}),[]),eventType:p,object:{rootContainerIdentifier:{id:s,type:"SITE",ari:`ari:cloud:platform::site/${s}`},deduplicateId:c,icon:{type:"URL",value:o},id:c,localResourceId:l,name:d,product:u,subProduct:null,type:h,url:m},timestamp:i}})):[]}const p=["limit"],f=50,v=["teamCentral","editor","people","jira","townsquare","apOnboarding","worklens","confluence","start"],g=async({experience:e,product:t,retryMS:n,filters:i={},activityQueries:s,baseUrl:a})=>{var d;const{limit:g=f}=i,y=(0,r.Z)(i,p);e.mark("GeneratedQueryWithFilters_start");const{query:E,queryFilters:w}=((e,t,n)=>{if(Array.isArray(t.actors)){const i=n.filter((e=>"viewed"!==e));return{query:m(e,i.map((e=>u.get(e))).join("\n")),queryFilters:l.y.v2.get("activities")(t)}}return{query:m(e,(i=n.map((e=>u.get(e))),`\n      myActivities {\n        ${i.join("\n")}\n      }\n`)),queryFilters:l.y.v2.get("myActivity")(t)};var i})(t,y,s);e.mark("GeneratedQueryWithFilters_end");const I=v.includes(t)?t:"start";let b;e.mark("FetchedActivities_start");try{b=await(0,c.J)(a,{operationName:(0,o.r)(I),query:E,variables:{first:g,filters:w}},n)}catch(A){if(!A||401!==A.statusCode&&"The operation was aborted."!==A.message)throw A}e.mark("FetchedActivities_end");let T=[],_=[],C=[];return b&&null!==(d=b.data)&&void 0!==d&&d.activities?(e.mark("TransformedActivityItems_start"),void 0!==b.data.activities.myActivities?(b.data.activities.myActivities.workedOn&&s.includes("workedOn")&&(T=h("workedOn",b.data.activities.myActivities.workedOn)),b.data.activities.myActivities.viewed&&s.includes("viewed")&&(_=h("viewed",b.data.activities.myActivities.viewed)),b.data.activities.myActivities.all&&s.includes("all")&&(C=h("all",b.data.activities.myActivities.all))):(b.data.activities.workedOn&&s.includes("workedOn")&&(T=h("workedOn",b.data.activities.workedOn)),b.data.activities.all&&s.includes("all")&&(C=h("all",b.data.activities.all))),e.mark("TransformedActivityItems_end"),{all:C,viewed:_,workedOn:T}):{all:C,workedOn:T,viewed:_}};class y extends a.t{constructor(e,t){super("v2",e,void 0,t),(0,i.Z)(this,"fetchActivities",(async(e,t,n)=>(0,s.o)((i=>g({experience:i,product:this.product,retryMS:e,filters:t,activityQueries:n,baseUrl:this.baseUrl})),"v2"))),(0,i.Z)(this,"setProduct",(e=>{this.product=e}))}}var E=n(236731);let w;const I=(e,t,n,i,s)=>(w&&w!==e&&null!=n&&n.captureWarning&&n.captureWarning("ActivityClient version has changed, is this intentional?"),w=e||"v3","v2"===e?new y(t,i):new E.h(t,i,n,s))},236731:(e,t,n)=>{n.d(t,{h:()=>X});var i=n(615919),s=n(199009),a=n(277191),r=n(70051),o=n(470815),c=n(179341),l=n(610045);class d extends Error{constructor(e){super(e),this.name="GraphQLFragmentError",this.message=e}}class u extends Error{constructor(e){super(e.message),(0,s.Z)(this,"error",void 0),this.name="GraphQLJSError",this.error=e,this.message=e.message}}class m extends Error{constructor(e){super(),(0,s.Z)(this,"errors",void 0),(0,s.Z)(this,"errorMessages",void 0),this.name="GraphQLNoResultsError",this.errors=e,this.message="GraphQL returned errors & no results",this.errorMessages=e.map((e=>e.message))}}var h=n(380924),p=n.n(h);class f extends Error{constructor({error:e,message:t}){super(),(0,s.Z)(this,"originalName",void 0),(0,s.Z)(this,"originalMessage",void 0),(0,s.Z)(this,"stack",void 0);const n=e instanceof Error?e:new Error;this.name="HydratorError",this.message=t,this.originalMessage=n.message,this.stack=n.stack,this.originalName=n.name}}function v(e,t){if(!e)return e;if(t.includes(":")){const[n,i]=t.split(":");return function(e,t,n){return e.find((e=>p()(e,t)===n))}(e,n.trim(),i.trim().replace(/"/g,""))}return p()(e,t)}function g(e,t){return t.map((t=>function(e,t){const n=t.split(/\(|\)./);let i=e;for(const s of n)i=v(i,s);return i}(e,t)))}const y=(e,t)=>{const{hydratorPaths:n,staticFallbacks:s}=t;return(0,i.Z)({staticFallbacks:s},Object.entries(n).reduce(((t,[n,i])=>{const s=g(e,i);if(!s)throw new Error(`Bad hydrator path: ${n}`);return t[n]=s,t}),{}))},E=(e,t="")=>e?Array.isArray(e)?e.join(t):e:null;function w(e){return"string"==typeof e}function I(e){return"object"==typeof e&&void 0!==e.value&&!!e.value}const b=(e,t,n)=>{switch(e){case"ConfluenceBlogPost":return T(t,n,"confluenceBlogIcon")||T(t,n);case"ConfluencePage":return T(t,n,"confluencePageIcon")||T(t,n);default:return T(t,n)}},T=(e,t,n="icon")=>{if(Array.isArray(e)&&e.length>0){const i=e.filter(I);if(i.length>0)return{type:"EMOJI",value:i[0].value,fallback:null==t?void 0:t[n]};const s=e.filter(w);if(s.length>0){const e=E(s);if(null!==e)return{type:"URL",value:e}}}return t&&n in t&&t[n]?{type:"URL",value:t[n]}:null};var _=n(908844),C=n(793059);const A=new RegExp(/^Validation error.*?@ '(\w+)/),S=new Map([["ValidationError",e=>{const t=A.exec(e.message);if(Array.isArray(t)){const e=t[1];if(e)return e}return null}]]),k=e=>{const t=S.get(e.extensions.classification);return"function"==typeof t?t(e):null};var R=n(872342),D=n(136569),P=n(440153);const Z=["limit"],O=50,F=new Map([["workedOn","\n   workedOn(first: $first, filter: $filter) {\n     ...activityItemConnection\n   }\n"],["viewed","\n   viewed(first: $first, filter: $filter) {\n     ...activityItemConnection\n   }\n"],["all","\n    all(first: $first, filter: $filter) {\n      ...activityItemConnection\n    }\n"]]),x=(e,t,n,i="ActivityFilter")=>`\n    query ${(0,D.r)(e)}($first: Int, $filter: ${i}) {\n      activity {\n        ${t}\n      }\n    }\n${n}\n`,j=(e,t,n,i)=>{const{limit:s=O}=t,a=(0,R.Z)(t,Z),{query:r,queryFilters:o}=((e,t,n,i)=>{if(Array.isArray(t.actors)){const s=n.filter((e=>"viewed"!==e));return{query:x(e,s.map((e=>F.get(e))).join("\n"),i,"ActivityFilter"),queryFilters:P.y.v3.get("activities")(t)}}return{query:x(e,(s=n.map((e=>F.get(e))),`\n      myActivity {\n        ${s.join("\n")}\n      }\n`),i,"MyActivityFilter"),queryFilters:P.y.v3.get("myActivity")(t)};var s})(e,a,n,i);return{operationName:(0,D.r)(e),query:r,variables:{first:s,filter:o}}};function U(e){const t=e.reduce(((e,t)=>{const n=t.object.deduplicateId||t.object.id,i=e[n];if(i){const s=i.aggregatedActivityItems||[];Date.parse(i.timestamp)<Date.parse(t.timestamp)?(t.aggregatedActivityItems=[...s,i],delete e[n],e[n]=t):e[n].aggregatedActivityItems=[...s,t]}else e[n]=t;return e}),{});return Object.values(t)}const B=e=>e.charAt(0).toLowerCase()+e.slice(1),L=e=>e.charAt(0).toUpperCase()+e.slice(1),q=e=>e.myActivity?e.myActivity:e,M=new Map([["ari:cloud:platform::site/","SITE"]]);function $(e){const t=e.indexOf("/");return{ari:e,id:e.slice(t+1),type:M.get(e.slice(0,t+1))||"OTHER"}}function N(e){var t,n,s,a,r,o;return(0,i.Z)((0,i.Z)({},e),{},{actors:null===(t=e.actors)||void 0===t?void 0:t.length,containerIds:null===(n=e.containerIds)||void 0===n?void 0:n.length,products:null===(s=e.products)||void 0===s?void 0:s.join(","),eventTypes:null===(a=e.eventTypes)||void 0===a?void 0:a.join(","),objectTypes:null===(r=e.objectTypes)||void 0===r?void 0:r.join(","),rootContainerIds:null===(o=e.rootContainerIds)||void 0===o?void 0:o.join(",")})}const G=["activity","all","myActivity","workedOn","viewed","activityItemConnection","activityItemEdge"];function V(e,t){return e.filter((e=>!G.includes(e))).reduce(((e,t)=>{return e.replace(new RegExp(`...${t}\n`,"g"),"").replace((n=t,new RegExp(`fragment ${B(n)} on ${L(n)} ({(.|\\n)+?(?=fragment))`,"gm")),"");var n}),t)}const H=["IncorrectAuthException"];function J(e){if(null==e||!e.data||!Array.isArray(e.errors))return!1;return e.errors.filter((e=>!e.extensions.classification||!H.includes(e.extensions.classification))).length>0&&(!(t=e.data).activity||0===(null===(n=q(t.activity).all)||void 0===n||null===(n=n.edges)||void 0===n?void 0:n.length)&&0===(null===(i=q(t.activity).workedOn)||void 0===i||null===(i=i.edges)||void 0===i?void 0:i.length)&&0===(null===(s=t.activity)||void 0===s||null===(s=s.myActivity)||void 0===s||null===(s=s.viewed)||void 0===s||null===(s=s.edges)||void 0===s?void 0:s.length));var t,n,i,s}const Q=["ConfluenceComment","ConfluenceFooterComment","ConfluenceInlineComment"],W=new Map([[401,[/.*/]],[403,[/Invalid CORS request/]]]),Y=["The operation was aborted."],K={source:o.O,sourcePackageVersion:o.b};class X extends C.t{constructor(e,t,n,r){super("v3",e,{"X-ExperimentalApi":"ActivityV3Api"},t),(0,s.Z)(this,"hydratorConfigClient",void 0),(0,s.Z)(this,"clientHandlers",void 0),(0,s.Z)(this,"setProduct",(e=>{this.product=e})),(0,s.Z)(this,"captureException",((e,t)=>{this.clientHandlers&&this.clientHandlers.captureException(e,(0,i.Z)((0,i.Z)({},K),t))})),(0,s.Z)(this,"captureWarning",((e,t)=>{this.clientHandlers&&this.clientHandlers.captureWarning(e,(0,i.Z)((0,i.Z)({},K),t))})),(0,s.Z)(this,"fetchHydratorConfig",(async()=>await this.hydratorConfigClient.fetchConfig())),(0,s.Z)(this,"handleGraphQLErrors",(e=>{const t=[];if(Array.isArray(e)){for(const n of e){this.captureException(new u(n));const e=k(n);e&&t.push(e)}return t}return[]})),(0,s.Z)(this,"fetchActivitiesV3",(async(e,t,n,s,r=!0)=>{var o,c,u,h;let p,{fragments:f,hydrators:v}=await this.fetchHydratorConfig();e.mark("GeneratedQueryWithFilters_start");try{p=await(0,a.AQ)((async()=>{const a=j(this.product,n,s,f);e.mark("GeneratedQueryWithFilters_end"),e.mark("FetchedActivities_start"),e.addMetadata({filters:N(n)});const r=await(0,l.J)(this.baseUrl,a,t,(0,i.Z)({},this.headers));e.mark("FetchedActivities_end");const o=this.handleGraphQLErrors(null==r?void 0:r.errors);if(o.length>0)throw f=V(o,f),new d(`Missing fragments: [${o.toString()}]`);return r}),{intervalsMS:[0,0,0],retryOn:e=>[d].some((t=>e instanceof t)),captureException:this.captureException})}catch(b){var g;if(!b||(null===(g=W.get(b.statusCode))||void 0===g||!g.some((e=>e.test(b.message))))&&!Y.includes(b.message))throw b}if(J(p))throw new m(p.errors);if(!p||null===(o=p.data)||void 0===o||!o.activity)return{workedOn:[],viewed:[],all:[]};e.mark("TransformedActivityItems_start");const y=z("workedOn",(null===(c=q(p.data.activity))||void 0===c||null===(c=c.workedOn)||void 0===c?void 0:c.edges)||[],v,this.captureException),E=z("viewed",(null===(u=p.data.activity)||void 0===u||null===(u=u.myActivity)||void 0===u||null===(u=u.viewed)||void 0===u?void 0:u.edges)||[],v,this.captureException),w=z("all",(null===(h=q(p.data.activity))||void 0===h||null===(h=h.all)||void 0===h?void 0:h.edges)||[],v,this.captureException);e.mark("TransformedActivityItems_end");const I={viewed:E,workedOn:y,all:w};return r?function(e){const{all:t,viewed:n,workedOn:i}=e;return{all:U(t),viewed:U(n),workedOn:U(i)}}(I):I})),(0,s.Z)(this,"fetchActivities",(async(e,t,n,i=!0)=>(0,c.o)((s=>this.fetchActivitiesV3(s,e,t,n,i)),"v3"))),this.clientHandlers=n,this.hydratorConfigClient=new _.Z({captureException:this.captureException,captureWarning:this.captureWarning},e,r)}}function z(e,t,n,i){return t.reduce(((t,s)=>{if(s&&s.node&&s.node.object&&s.node.event){const{object:o,event:c}=s.node;if(!o.product||!o.type)return t;const l=[];const d=(o.contributors||[]).reduce(((e,t)=>{if(t.profile){const{accountId:n,picture:i}=t.profile;e.push({accountId:n,name:t.profile.name,picture:i})}return e}),[]),u=((e,t,n)=>{if(t)if("__typename"in t){const s=e[t.__typename];if(s)try{return y(t,s)}catch(i){n&&n(new f({error:i,message:`Hydrator failed for [${t.__typename}].`}))}else n&&n(new f({message:`Missing hydrator for [${t.__typename}].`}))}else n&&n(new f({message:"Missing [__typename] field from data."}));return null})(n,o.data,i);if(u){var a;u.key&&l.push({name:E(u.key," ")}),u.containers&&l.push({name:E(u.containers," ")});const n=c.actor?{name:c.actor.name,picture:c.actor.picture,accountId:c.actor.accountId}:void 0,i="comment"===o.type&&c.eventType===r.hq.CREATED?r.hq.COMMENTED:c.eventType;t.push({actor:n,query:e,containers:l,contributors:d,eventType:i,object:{rootContainerIdentifier:$(o.rootContainerId),icon:Q.includes(o.data.__typename)?b(null===(a=o.data)||void 0===a||null===(a=a.container)||void 0===a?void 0:a.__typename,u.icon,u.staticFallbacks):T(u.icon,u.staticFallbacks),id:o.id,deduplicateId:E(u.deduplicateId)||o.id,localResourceId:E(u.localResourceId),name:E(u.name," "),product:o.product,subProduct:o.subProduct,type:o.type,url:E(u.url)},timestamp:c.timestamp})}}return t}),[])}},908844:(e,t,n)=>{n.d(t,{$:()=>o,Z:()=>c});var i=n(199009),s=n(634664);const a={localization:{eventTypes:{commented:{absolute:"You commented on {absoluteTime}",relative:"You commented {relativeTime}",standalone:"You commented",multiAbsolute:"Commented on {absoluteTime}",multiRelative:"Commented {relativeTime}",multiStandalone:"Commented"},created:{absolute:"You created on {absoluteTime}",relative:"You created {relativeTime}",standalone:"You created",multiAbsolute:"Created on {absoluteTime}",multiRelative:"Created {relativeTime}",multiStandalone:"Created"},edited:{absolute:"You edited on {absoluteTime}",relative:"You edited {relativeTime}",standalone:"You edited",multiAbsolute:"Edited on {absoluteTime}",multiRelative:"Edited {relativeTime}",multiStandalone:"Edited"},published:{absolute:"You published on {absoluteTime}",relative:"You published {relativeTime}",standalone:"You published",multiAbsolute:"Published on {absoluteTime}",multiRelative:"Published {relativeTime}",multiStandalone:"Published"},updated:{absolute:"You updated on {absoluteTime}",relative:"You updated {relativeTime}",standalone:"You updated",multiAbsolute:"Updated on {absoluteTime}",multiRelative:"Updated {relativeTime}",multiStandalone:"Updated"},viewed:{absolute:"You viewed on {absoluteTime}",relative:"You viewed {relativeTime}",standalone:"You viewed",multiAbsolute:"Viewed on {absoluteTime}",multiRelative:"Viewed {relativeTime}",multiStandalone:"Viewed"}}},hydrators:{TownsquareGoal:{hydratorPaths:{id:["id"],key:["key"],name:["name"],url:["url"],icon:["iconData"]}},TownsquareProject:{hydratorPaths:{id:["id"],key:["key"],name:["name"],url:["url"],icon:["iconData"]}},TownsquareComment:{hydratorPaths:{id:["id"],key:["container.key"],name:["container.name"],url:["container.url"],icon:["container.iconData"],deduplicateId:["container.id"]}},ConfluencePage:{hydratorPaths:{id:["id"],name:["title"],localResourceId:["pageId"],url:["links.base","links.webUi"],containers:["space.name"]},staticFallbacks:{icon:"https://fd-assets.prod.atl-paas.net/image/misc-icons/confluence/page.svg"}},ConfluenceBlogPost:{hydratorPaths:{id:["id"],name:["title"],localResourceId:["blogPostId"],url:["links.base","links.webUi"],containers:["space.name"]},staticFallbacks:{icon:"https://fd-assets.prod.atl-paas.net/image/misc-icons/confluence/blogpost.svg"}},ConfluenceComment:{hydratorPaths:{id:["id"],name:["container.title"],url:["links.base","links.webUi"],containers:["container.space.name"],deduplicateId:["container.id"]},staticFallbacks:{icon:"https://fd-assets.prod.atl-paas.net/image/misc-icons/confluence/page.svg",confluenceBlogIcon:"https://fd-assets.prod.atl-paas.net/image/misc-icons/confluence/blogpost.svg",confluencePageIcon:"https://fd-assets.prod.atl-paas.net/image/misc-icons/confluence/page.svg"}},ConfluenceFooterComment:{hydratorPaths:{id:["id"],name:["container.title"],url:["links.base","links.webUi"],containers:["container.space.name"],deduplicateId:["container.id"]},staticFallbacks:{icon:"https://fd-assets.prod.atl-paas.net/image/misc-icons/confluence/page.svg",confluenceBlogIcon:"https://fd-assets.prod.atl-paas.net/image/misc-icons/confluence/blogpost.svg",confluencePageIcon:"https://fd-assets.prod.atl-paas.net/image/misc-icons/confluence/page.svg"}},ConfluenceInlineComment:{hydratorPaths:{id:["id"],name:["container.title"],url:["links.base","links.webUi"],containers:["container.space.name"],deduplicateId:["container.id"]},staticFallbacks:{icon:"https://fd-assets.prod.atl-paas.net/image/misc-icons/confluence/page.svg",confluenceBlogIcon:"https://fd-assets.prod.atl-paas.net/image/misc-icons/confluence/blogpost.svg",confluencePageIcon:"https://fd-assets.prod.atl-paas.net/image/misc-icons/confluence/page.svg"}},JiraIssue:{hydratorPaths:{id:["id"],name:['fieldsById.edges(node.fieldId: "summary").node.text'],url:["webUrl"],containers:['fieldsById.edges(node.fieldId: "project").node.project.name'],icon:['fieldsById.edges(node.fieldId: "issuetype").node.issueType.avatar.xsmall'],key:["key"]}},JiraPlatformComment:{hydratorPaths:{id:["commentId"],name:['issue.fieldsById.edges(node.fieldId: "summary").node.text'],url:["webUrl"],containers:['issue.fieldsById.edges(node.fieldId: "project").node.project.name'],icon:['issue.fieldsById.edges(node.fieldId: "issuetype").node.issueType.avatar.xsmall'],key:["issue.key"],deduplicateId:["issue.id"]}},JiraServiceManagementComment:{hydratorPaths:{id:["commentId"],name:['issue.fieldsById.edges(node.fieldId: "summary").node.text'],url:["webUrl"],containers:['issue.fieldsById.edges(node.fieldId: "project").node.project.name'],icon:['issue.fieldsById.edges(node.fieldId: "issuetype").node.issueType.avatar.xsmall'],key:["issue.key"],deduplicateId:["issue.id"]}}},queryFragments:'\n\n  fragment townsquareGoal on TownsquareGoal {\n    id\n    key\n    name\n    url\n    iconData\n  }\n\n\n  fragment townsquareProject on TownsquareProject {\n    id\n    key\n    name\n    url\n    iconData\n  }\n\n\n  fragment townsquareComment on TownsquareComment {\n    id\n    url\n    container {\n      __typename\n      ...townsquareGoal\n      ...townsquareProject\n    }\n  }\n\n\n  fragment confluencePage on ConfluencePage {\n    id\n    title\n    pageId\n    links {\n      base\n      webUi\n    }\n    space {\n      name\n    }\n  }\n\n\n  fragment confluenceBlogPost on ConfluenceBlogPost {\n    id\n    title\n    blogPostId\n    links {\n      base\n      webUi\n    }\n    space {\n      name\n    }\n  }\n\n\n  fragment confluenceComment on ConfluenceComment {\n    id\n    links {\n      base\n      webUi\n    }\n    container {\n      __typename\n      ...confluenceBlogPost\n      ...confluencePage\n    }\n  }\n\n\n  fragment confluenceFooterComment on ConfluenceFooterComment {\n    id\n    links {\n      base\n      webUi\n    }\n    container {\n      __typename\n      ...confluenceBlogPost\n      ...confluencePage\n    }\n  }\n\n\n  fragment confluenceInlineComment on ConfluenceInlineComment {\n    id\n    links {\n      base\n      webUi\n    }\n    container {\n      __typename\n      ...confluenceBlogPost\n      ...confluencePage\n    }\n  }\n\n\nfragment jiraIssue on JiraIssue {\n  id\n  key\n  webUrl\n  fieldsById(ids: ["summary", "issuetype", "project"]) {\n    edges {\n      node {\n        __typename\n        fieldId\n        ...jiraSingleLineTextField\n        ...jiraIssueTypeField\n        ...jiraProjectField\n      }\n    }\n  }\n}\nfragment jiraSingleLineTextField on JiraSingleLineTextField {\n  text\n}\nfragment jiraIssueTypeField on JiraIssueTypeField {\n  issueType {\n    avatar {\n      xsmall\n    }\n  }\n}\nfragment jiraProjectField on JiraProjectField {\n  project {\n    name\n  }\n}\n\n\nfragment jiraPlatformComment on JiraPlatformComment {\n  commentId\n  webUrl\n  issue {\n    ...jiraIssue\n  }\n}\n\n\nfragment jiraServiceManagementComment on JiraServiceManagementComment {\n  commentId\n  webUrl\n  issue {\n    ...jiraIssue\n  }\n}\n\nfragment activityItemEdge on ActivityItemEdge {\n  cursor\n  node {\n    id\n    object {\n      id\n      type\n      product\n      subProduct\n      rootContainerId\n      contributors {\n        profile {\n          name\n          picture\n          accountId\n        }\n      }\n      data {\n        __typename\n\t...townsquareGoal\n\t...townsquareProject\n\t...townsquareComment\n\t...confluencePage\n\t...confluenceBlogPost\n\t...confluenceComment\n\t...confluenceFooterComment\n\t...confluenceInlineComment\n\t...jiraIssue\n\t...jiraPlatformComment\n\t...jiraServiceManagementComment\n      }\n    }\n    event {\n      id\n      timestamp\n      eventType\n      actor {\n        name\n        picture\n        accountId\n      }\n    }\n  }\n}\nfragment activityItemConnection on ActivityConnection {\n  edges {\n    ...activityItemEdge\n  }\n}\n\n'},r="prod",o={name:"recent-work-service",dimensions:{environmentType:r}};class c{constructor(e,t,n){(0,i.Z)(this,"flightDeck",void 0),(0,i.Z)(this,"artifactFetch",void 0),(0,i.Z)(this,"fetchConfig",(async()=>{const e=await this.fetchArtifact(),{queryFragments:t,hydrators:n}=e;return{fragments:t,hydrators:n}})),this.flightDeck=new s.Z(t||"recent-work-client",{handlers:e},[{name:"recent-work-service",dimensions:{environmentType:r},value:a}]),this.artifactFetch=n}async fetchArtifact(){return this.artifactFetch?this.artifactFetch():this.flightDeck.fetchConfigFromFlightDeck(o,{intervalsMS:[100,500]})}}},165124:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(199009);class s extends Error{constructor({message:e,statusCode:t,path:n,method:s,xRequestId:a,headers:r}){super(),(0,i.Z)(this,"message",void 0),(0,i.Z)(this,"method",void 0),(0,i.Z)(this,"path",void 0),(0,i.Z)(this,"statusCode",void 0),(0,i.Z)(this,"xRequestId",void 0),(0,i.Z)(this,"headers",void 0),this.name="HttpError",this.message=e;const o=n.split("?")[0];this.path=/^[/-a-z]+$/i.test(o)?o:"",this.method=s,this.statusCode=t,this.xRequestId=a,this.headers=Array.from(r.entries()).map(((e,t)=>`${t}:${e}`)).sort().join(",")}}},610045:(e,t,n)=>{n.d(t,{J:()=>l});var i=n(615919),s=n(990814),a=n(277191);const r=new RegExp(/^https?:\/\//);var o=n(165124);const c=async(e,t,n={})=>{const a=function(e,t={host:window.location.hostname,port:window.location.port}){return r.test(e)?e:"localhost"===t.host?`http://${t.host}:${t.port}${e}`:e}(e),c=await fetch(a,(0,i.Z)({credentials:"include",method:t},n)).catch((n=>{throw new s.Z({error:n,path:e,method:t})})),l=c.status;if(!c.ok){const n=function(e){let t;try{t=JSON.parse(e)}catch(n){return e}return delete t.timestamp,JSON.stringify(t)}(await c.text());throw new o.Z({message:n,method:t,path:e,statusCode:l,xRequestId:c.headers.get("x-request-id"),headers:c.headers})}return c},l=async(e,t,n,s)=>(0,a.AQ)((()=>(async(e,t,n={})=>{const i=await c(e,t,n),s=await i.text();return s?JSON.parse(s):{}})(e,"POST",{body:JSON.stringify(t),headers:(0,i.Z)({"content-type":"application/json"},s)})),{intervalsMS:null!=n?n:[]})},824953:(e,t,n)=>{n.d(t,{d:()=>i});const i=()=>"undefined"!=typeof window},450466:(e,t,n)=>{n.d(t,{US:()=>c,o5:()=>o,oY:()=>r,sG:()=>l,ur:()=>a});var i=n(118407),s=n(52431);const a=()=>{if(!globalThis.__UFO_GLOBAL_EVENT_STREAM__){const e=(()=>{const e=[];return{__buffer_only__:!0,push:t=>{e.length<250&&e.push(t)},getStream:()=>e}})();globalThis.__UFO_GLOBAL_EVENT_STREAM__=e}return globalThis.__UFO_GLOBAL_EVENT_STREAM__},r=e=>{var t,n;!globalThis.__UFO_GLOBAL_EVENT_STREAM__||null!==(t=globalThis.__UFO_GLOBAL_EVENT_STREAM__)&&void 0!==t&&t.__buffer_only__?(null!==(n=globalThis.__UFO_GLOBAL_EVENT_STREAM__)&&void 0!==n&&n.__buffer_only__&&globalThis.__UFO_GLOBAL_EVENT_STREAM__.getStream().forEach(e.push.bind(e)),globalThis.__UFO_GLOBAL_EVENT_STREAM__=e):(0,i.hl)("Global Event Stream already initialised. Ignoring new event stream setup")},o=(e,t)=>({type:s.pp.SUBSCRIBE,payload:{experienceId:e,callback:t}}),c=(e,t)=>({type:s.pp.UNSUBSCRIBE,payload:{experienceId:e,callback:t}}),l=e=>({type:s.pp.EXPERIENCE_PAYLOAD,payload:e})},118407:(e,t,n)=>{n.d(t,{Hw:()=>r,b6:()=>a,hl:()=>o});var i=n(199009);class s{constructor(){(0,i.Z)(this,"enabled",!1)}log(...e){this.enabled&&console.log(s.UFOprefix,...e)}warn(...e){this.enabled&&console.warn(s.UFOprefix,...e)}enable(){this.enabled=!0}disable(){this.enabled=!1}}(0,i.Z)(s,"UFOprefix","[ufoðŸ›¸]");const a=new s,r=(...e)=>{a.log(...e)},o=(...e)=>{a.warn(...e)}},853576:(e,t,n)=>{n.d(t,{m:()=>a});var i=n(199009),s=n(824953);const a=new class{constructor(){(0,i.Z)(this,"started",!1),(0,i.Z)(this,"observers",[]),(0,i.Z)(this,"broadcast",(()=>{this.observers.forEach((e=>e())),this.observers=[]}))}start(){this.started||(this.started=!0,document.addEventListener("visibilitychange",this.broadcast),(0,s.d)()&&window.addEventListener("pagehide",this.broadcast))}subscribe(e){this.observers.push(e)}unsubscribe(e){this.observers=this.observers.filter((t=>t!==e))}}},270718:(e,t,n)=>{n.d(t,{h:()=>i});const i={NOT_STARTED:{id:"NOT_STARTED",final:!0},STARTED:{id:"STARTED"},IN_PROGRESS:{id:"IN_PROGRESS"},BLOCKED:{id:"BLOCKED"},RECOVERED:{id:"RECOVERED"},SUCCEEDED:{id:"SUCCEEDED",final:!0,success:!0},SUCCEEDED_WAITING_FOR_DEPS:{id:"SUCCEEDED_WAITING_FOR_DEPS"},FAILED:{id:"FAILED",final:!0},ABORTED:{id:"ABORTED",final:!0}}},288920:(e,t,n)=>{n.d(t,{R:()=>s,Z:()=>i});let i=function(e){return e.Load="load",e.Experience="experience",e.Operation="operation",e}({}),s=function(e){return e.PageLoad="page-load",e.PageSegmentLoad="page-segment-load",e.InlineResult="inline-result",e.Custom="custom",e}({})},747298:(e,t,n)=>{n.d(t,{Q:()=>g});var i=n(615919),s=n(199009),a=n(278811);var r=n(824953),o=n(450466),c=n(118407),l=n(853576),d=n(52431);var u=n(270718);const m={[u.h.NOT_STARTED.id]:[u.h.STARTED.id],[u.h.STARTED.id]:[u.h.IN_PROGRESS.id,u.h.BLOCKED.id,u.h.SUCCEEDED.id,u.h.SUCCEEDED_WAITING_FOR_DEPS.id,u.h.FAILED.id,u.h.ABORTED.id],[u.h.IN_PROGRESS.id]:[u.h.BLOCKED.id,u.h.SUCCEEDED.id,u.h.SUCCEEDED_WAITING_FOR_DEPS.id,u.h.FAILED.id,u.h.ABORTED.id],[u.h.BLOCKED.id]:[u.h.RECOVERED.id,u.h.ABORTED.id],[u.h.RECOVERED.id]:[u.h.STARTED.id,u.h.SUCCEEDED.id,u.h.SUCCEEDED_WAITING_FOR_DEPS.id,u.h.FAILED.id,u.h.ABORTED.id],[u.h.SUCCEEDED.id]:[u.h.STARTED.id],[u.h.SUCCEEDED_WAITING_FOR_DEPS.id]:[u.h.SUCCEEDED.id,u.h.FAILED.id,u.h.ABORTED.id],[u.h.FAILED.id]:[u.h.STARTED.id],[u.h.ABORTED.id]:[u.h.STARTED.id]};var h=n(288920);const p=()=>(0,r.d)()&&window.document&&"visible"!==window.document.visibilityState?d.Qx.HIDDEN:d.Qx.VISIBLE,f=e=>void 0!==e?~~e:~~performance.now();class v{constructor(e,t,n=null){(0,s.Z)(this,"state",u.h.NOT_STARTED),(0,s.Z)(this,"id",void 0),(0,s.Z)(this,"instanceId",null),(0,s.Z)(this,"parent",null),(0,s.Z)(this,"category",null),(0,s.Z)(this,"type",void 0),(0,s.Z)(this,"performanceType",void 0),(0,s.Z)(this,"metadata",{}),(0,s.Z)(this,"onDoneCallbacks",[]),(0,s.Z)(this,"childExperiences",[]),(0,s.Z)(this,"featureFlags",void 0),(0,s.Z)(this,"timings",void 0),(0,s.Z)(this,"explicitTimings",{}),(0,s.Z)(this,"isSSROutputAsFMP",!1),(0,s.Z)(this,"handleDoneBind",void 0),(0,s.Z)(this,"uuid",null),(0,s.Z)(this,"until",void 0),(0,s.Z)(this,"_until",null),(0,s.Z)(this,"pageVisibleState",void 0),(0,s.Z)(this,"metrics",{startTime:null,endTime:null,marks:[]}),(0,s.Z)(this,"performanceConfig",{}),(0,s.Z)(this,"config",void 0),(0,s.Z)(this,"setPageVisibleStateToMixed",(()=>{this.pageVisibleState=d.Qx.MIXED,l.m.unsubscribe(this.setPageVisibleStateToMixed)})),this.id=e,this.category=(null==t?void 0:t.category)||null,this.until=(null==t?void 0:t.until)||null,this.instanceId=n,this.handleDoneBind=this._handleDoneExperience.bind(this),this.type=t.type,this.performanceType=t.performanceType,this.performanceConfig=t.performanceConfig||{},this.config=t,this.pageVisibleState=p(),this.featureFlags=t.featureFlags||[],this.timings=t.timings||[],t.performanceType!==h.R.PageLoad&&t.performanceType!==h.R.PageSegmentLoad||(this.isSSROutputAsFMP=t.isSSROutputAsFMP||!1)}async transition(e,t){if((0,c.Hw)("async transition",this.id,this.state.id,e.id),n=this.state,i=e,m[n.id]&&m[n.id].includes(i.id)){if((0,c.Hw)(`TRANSITION: ${this.id} from ${this.state.id} to ${e.id} successful`,this.state.final,!e.final),e===u.h.STARTED&&this._reset(),this.state.final&&!e.final&&(this.metrics.startTime=f(t),this.uuid=(0,a.v4)()),this.state=e,e.final){this.metrics.endTime=f(t),this._isManualStateEnabled()||(0,o.ur)().push((0,o.US)(d.lS,this.handleDoneBind));const e=await this.exportData();(0,c.Hw)("this.parent",this.parent),(0,o.ur)().push((0,o.sG)(e))}return!0}var n,i;return(0,c.Hw)(`TRANSITION: ${this.id} from ${this.state.id} to ${e.id} unsuccessful`),(0,c.hl)(`transition of ${this.id} from ${this.state} to ${e} is not possible`),!1}async start(e){await this.transition(u.h.STARTED,e)&&(this.pageVisibleState=p(),l.m.subscribe(this.setPageVisibleStateToMixed),this._isManualStateEnabled()||((0,c.Hw)("subscribed",this.id),(0,o.ur)().push((0,o.o5)(d.lS,this.handleDoneBind))))}mark(e,t){e!==d.WR&&e!==d.j3?this._mark(e,t):(0,c.hl)("please use markFMP or markInlineResponse for specialised marks")}_mark(e,t){this.metrics.marks.push({name:e,time:f(t)}),this.transition(u.h.IN_PROGRESS)}markFMP(e){this._mark(d.WR,e)}markInlineResponse(e){this._mark(d.j3,e)}_isManualStateEnabled(){return null===this.until}_validateManualState(){return!!this._isManualStateEnabled()||((0,c.hl)('manual change of state not allowed as "until" is defined'),!1)}switchToEndState(e,t){return null!=t&&t.force||this._validateManualState()?(null!=t&&t.metadata&&this.addMetadata(t.metadata),l.m.unsubscribe(this.setPageVisibleStateToMixed),this.transition(e)):null}async success(e){return this.switchToEndState(u.h.SUCCEEDED,e)}async failure(e){return this.switchToEndState(u.h.FAILED,e)}async abort(e){return this.switchToEndState(u.h.ABORTED,e)}addMetadata(e){Object.assign(this.metadata,e)}_handleDoneExperience(e){if((0,c.Hw)("_handleDoneExperience in",this.id,e.state,e,this._until),e.state.final&&null!==this._until){const{done:t,state:n}=this._until(e);t&&!this.state.final&&this.transition(n)}}async getId(){return this.id}async exportData(){return{id:await this.getId(),uuid:this.uuid,type:this.type,schemaVersion:"0.1.5",performanceType:this.performanceType,category:this.category,state:this.state,metadata:(0,i.Z)({},this.metadata),metrics:(0,i.Z)({},this.metrics),children:[...this.childExperiences],result:{success:!!this.state.success,startTime:this.metrics.startTime,duration:(this.metrics.endTime||0)-(this.metrics.startTime||0)},platform:this.config.platform||null,pageVisibleState:this.pageVisibleState,featureFlags:this.featureFlags,isSSROutputAsFMP:this.isSSROutputAsFMP,timings:this.timings,explicitTimings:this.explicitTimings,performanceConfig:this.performanceConfig}}_reset(){this.parent=null,this.metadata={},this.onDoneCallbacks=[],this.childExperiences=[],this.metrics={startTime:null,endTime:null,marks:[]},this._until=this.until?this.until():null}}class g extends v{}},52431:(e,t,n)=>{n.d(t,{Qx:()=>s,WR:()=>r,j3:()=>o,lS:()=>a,pp:()=>i});let i=function(e){return e[e.EXPERIENCE_PAYLOAD=0]="EXPERIENCE_PAYLOAD",e[e.SUBSCRIBE=1]="SUBSCRIBE",e[e.UNSUBSCRIBE=2]="UNSUBSCRIBE",e}({}),s=function(e){return e.VISIBLE="visible",e.HIDDEN="hidden",e.MIXED="mixed",e}({});const a="__SUBSCRIBE_ALL__",r="fmp",o="inline-response"},220515:(e,t,n)=>{n.d(t,{e:()=>o});var i=n(615919),s=n(199009),a=n(599635);class r{constructor({url:e,cloudId:t,siteMasterList:n}){(0,s.Z)(this,"serviceConfig",void 0),(0,s.Z)(this,"cloudId",void 0),(0,s.Z)(this,"siteMasterList",void 0),(0,s.Z)(this,"makePostRequest",((e,t)=>{const n={path:e,requestInit:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}};return a.P6.requestService(this.serviceConfig,n)})),this.serviceConfig={url:e},this.cloudId=t,this.siteMasterList=n}async search({query:e,context:t,scopes:n,modelParams:s,resultLimit:a,filters:o=[],experience:c,sites:l=[]}){const d=this.cloudId,u=l.length>0?l:((e=[])=>e.slice(0,3))(this.siteMasterList).map((e=>e.cloudId)),m=(0,i.Z)((0,i.Z)({query:e,cloudId:d,limit:a,scopes:n,filters:o,searchSession:t},s.length>0?{modelParams:s}:{}),{},{experience:c,cloudIds:u}),{result:h,durationMs:p}=await(async e=>{const t=Date.now();return{result:await e,durationMs:Date.now()-t}})(this.makePostRequest(r.QUICKSEARCH_API_URL,m));return{response:{rawData:h,retrieveScope:e=>h.scopes.find((t=>t.id===e))||null},requestDurationMs:p}}}(0,s.Z)(r,"QUICKSEARCH_API_URL","quicksearch/v1");const o=({cloudId:e,aggregatorUrl:t})=>{const n=new r({cloudId:e,url:t||"/gateway/api/xpsearch-aggregator",siteMasterList:[]});return{search:async function({query:e,scopes:t,resultLimit:i,analytics:s,sites:a=[]}){return n.search({query:e,context:{sessionId:s.sessionId?s.sessionId:"not-applicable",referrerId:null},scopes:t,modelParams:[],resultLimit:i,filters:[],experience:`external-${s.identifier}`,sites:a})}}}},709816:(e,t,n)=>{n.d(t,{s:()=>o});var i=n(615919);let s=function(e){return e.ConfluencePageBlogAttachment="confluence.page,blogpost,attachment",e.ConfluencePageBlog="confluence.page,blogpost",e.ConfluenceExperimentsPageBlogAttachment="confluence_experiments.page,blogpost,attachment",e.ConfluenceSpace="confluence.space",e.UserConfluence="urs.user-confluence",e.ConfluencePageBlogWhiteboard="confluence.page,blogpost,whiteboard",e}({});let a=function(e){return e.JiraIssue="jira.issue",e.JiraPlan="jira.plan",e.JiraBoardProjectFilter="jira.board,project,filter",e.JiraBoardProjectFilterPlan="jira.board,project,filter,plan",e.JiraProject="jira.project",e.People="urs.user-jira",e}({});let r=function(e){return e.TownsquareProject="townsquare.project",e.TownsquareGoal="townsquare.goal",e.TownsquareHelpLink="townsquare.help-pointer",e.TownsquareQuestion="townsquare.question",e.TownsquareTag="townsquare.tag",e.TownsquareLearning="townsquare.learning",e.People="townsquare.people",e.Teams="townsquare.teams",e}({});const o=(0,i.Z)((0,i.Z)((0,i.Z)({},s),a),r)}}]);
//# sourceMappingURL=10748.sQDtdRGilR.js.map