"use strict";(self._cf=self._cf||[]).push([[77205,54083,76140],{749142:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(i=n(840506))&&i.__esModule?i:{default:i},o=n(340531);const s=e=>r.default.createElement(o.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path fill="currentColor" fill-rule="evenodd" d="M8 10V8.002A4.004 4.004 0 0112 4a4 4 0 014 4.002V10a2 2 0 012 2v6c0 1.105-.902 2-2.009 2H8.01A2 2 0 016 18v-6c0-1.102.897-1.995 2-2zm2 0h4V8.002A2.001 2.001 0 0012 6c-1.102 0-2 .898-2 2.002V10zm2 7a2 2 0 100-4 2 2 0 000 4z"/></svg>'},e));s.displayName="LockFilledIcon";var a=s;t.default=a},916553:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(i=n(840506))&&i.__esModule?i:{default:i},o=n(340531);const s=e=>r.default.createElement(o.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><g fill="currentColor"><path d="M16 11V9h-2V7.002A2.001 2.001 0 0012 5c-1.102 0-2 .898-2 2.002V9H8v2H7v8h10v-8h-1zm-2 0h-4V9h4v2zM8 9V7.002A4.004 4.004 0 0112 3a4 4 0 014 4.002V9h.994A2.01 2.01 0 0119 11.009v7.982c0 1.11-.897 2.009-2.006 2.009H7.006A2.009 2.009 0 015 18.991V11.01C5 9.899 5.897 9 7.006 9H8zm0 0h2v2H8V9zm6 0h2v2h-2V9z"/><circle cx="12" cy="15" r="2"/></g></svg>'},e));s.displayName="LockIcon";var a=s;t.default=a},544405:(e,t,n)=>{n.d(t,{r:()=>o});var i=n(39030),r=n(16728);const o=({url:e,testId:t="block-card",className:n})=>(0,i.tZ)("span",{"data-testid":`${t}-link`,className:n,css:{color:`var(--ds-link, ${r.AX})`,wordBreak:"break-all"}},e);o.displayName="Link"},970627:(e,t,n)=>{n.d(t,{c:()=>r});var i=n(39030);const r=({icon:e,text:t})=>(0,i.tZ)("span",{css:{display:"flex",alignItems:"center"}},e,t);r.displayName="UnresolvedText"},260957:(e,t,n)=>{n.d(t,{n:()=>g,Q:()=>k});var i=n(615919),r=n(39030),o=n(142807),s=n(840506),a=n(16728),l=n(629670),c=n(931841),d=n(312082),u=n(406766),m=n(133273),v=n(178050),p=n(895189),h=n(452376),Z=n(233339),f=n(544405),b=n(970627);const y=(0,i.Z)({},v.s.could_not_load_link),k="block-card-errored-view",g=({isSelected:e=!1,testId:t="block-card-errored-view",link:n="",onClick:g=(()=>{}),onRetry:E,inheritDimensions:w=!1})=>{const I=(0,s.useMemo)((()=>{return E?[(e=E,{id:"try-again",promise:async()=>e(),text:s.createElement(o.Z,(0,i.Z)({},v.s.try_again))})]:[];var e}),[E]);return(0,r.tZ)(c.RQ,{isSelected:e,testId:t,className:k,isFluidHeight:!0,inheritDimensions:w},(0,r.tZ)(m.V,{isCompact:!0},(0,r.tZ)("div",null,(0,r.tZ)(h.y,{onClick:e=>(0,Z.U)(e,g),link:n},(0,r.tZ)(f.r,{url:n,testId:t})),(0,r.tZ)(d.Y,null,(0,r.tZ)(b.c,{icon:(0,r.tZ)(l.default,{label:"errored-warning-icon",size:"small",primaryColor:`var(--ds-icon-warning, ${a.rt})`,testId:`${t}-warning-icon`}),text:(0,r.tZ)(o.Z,(0,i.Z)({},y))}))),(0,r.tZ)(p.j,null,(0,r.tZ)(u.S,{items:I}))))};g.displayName="ErroredView"},28432:(e,t,n)=>{n.d(t,{Yr:()=>k,kh:()=>y,rb:()=>g});var i=n(615919),r=n(39030),o=n(142807),s=n(16728),a=n(749142),l=n(931841),c=n(17521),d=n(312082),u=n(406766),m=n(133273),v=n(178050),p=n(895189),h=n(452376),Z=n(233339),f=n(544405),b=n(970627);const y="block-card-forbidden-view",k="block-card-forbidden-view-link",g=({context:e={text:""},isSelected:t=!1,actions:n=[],testId:g="block-card-forbidden-view",link:E="",onClick:w=(()=>{}),requestAccessContext:I={},actionOptions:x})=>{const{action:C,descriptiveMessageKey:S="invalid_permissions_description",hostname:_=""}=I,A=C?[...n,C]:n;return(0,r.tZ)(l.RQ,{isSelected:t,testId:g,className:y,isFluidHeight:!0},(0,r.tZ)(m.V,{isCompact:!0},(0,r.tZ)("div",null,(0,r.tZ)(h.y,{onClick:e=>(0,Z.U)(e,w),link:E},(0,r.tZ)(f.r,{url:E,testId:g,className:k})),(0,r.tZ)(d.Y,null,(0,r.tZ)(b.c,{icon:(0,r.tZ)(a.default,{label:"forbidden-lock-icon",size:"small",primaryColor:`var(--ds-icon-danger, ${s.rt})`,testId:`${g}-lock-icon`}),text:(0,r.tZ)(o.Z,(0,i.Z)((0,i.Z)({},v.s[S]),{},{values:{product:e.text,context:e.text,hostname:_}}))}))),(0,r.tZ)(p.j,null,(0,r.tZ)(c.z,{name:e.text,icon:e.icon}),!(null!=x&&x.hide)&&(0,r.tZ)(u.S,{items:A}))))};g.displayName="ForbiddenView"},631543:(e,t,n)=>{n.d(t,{K:()=>k,g:()=>y});var i=n(615919),r=n(39030),o=(n(840506),n(142807)),s=n(16728),a=n(629670),l=n(931841),c=n(17521),d=n(312082),u=n(133273),m=n(178050),v=n(895189),p=n(452376),h=n(544405),Z=n(970627),f=n(233339);const b=(0,i.Z)({},m.s.not_found_description),y="block-card-not-found-view",k=({context:e={text:""},isSelected:t=!1,testId:n="block-card-not-found-view",link:m="",onClick:k=(()=>{})})=>(0,r.tZ)(l.RQ,{isSelected:t,testId:n,className:y,isFluidHeight:!0},(0,r.tZ)(u.V,{isCompact:!0},(0,r.tZ)("div",null,(0,r.tZ)(p.y,{onClick:e=>(0,f.U)(e,k),link:m},(0,r.tZ)(h.r,{url:m,testId:n})),(0,r.tZ)(d.Y,null,(0,r.tZ)(Z.c,{icon:(0,r.tZ)(a.default,{label:"not-found-warning-icon",size:"small",primaryColor:`var(--ds-icon-warning, ${s.rt})`,testId:`${n}-warning-icon`}),text:(0,r.tZ)(o.Z,(0,i.Z)({},b))}))),(0,r.tZ)(v.j,null,(0,r.tZ)(c.z,{name:e.text,icon:e.icon}))));k.displayName="NotFoundView"},363163:(e,t,n)=>{n.d(t,{j:()=>m,m:()=>v});var i=n(615919),r=n(39030),o=n(701837),s=n(16728),a=n(2142),l=n(931841),c=n(424383),d=n(142807),u=n(178050);const m="block-card-resolving-view",v=({isSelected:e=!1,testId:t="block-card-resolving-view",inheritDimensions:n})=>(0,r.tZ)(l.RQ,{inheritDimensions:n,compact:!0,isSelected:e,testId:t,className:m},(0,r.tZ)(o.default,{size:"small",primaryColor:`var(--ds-icon-subtle, ${s.uv})`,label:"document-icon"}),(0,r.tZ)("span",{css:{fontSize:`${(0,a.JB)()}px`,color:`var(--ds-text-subtlest, ${s.WA})`,marginLeft:(0,c.gs)(.5)}},(0,r.tZ)(d.Z,(0,i.Z)({},u.s.loading))));v.displayName="ResolvingView"},777205:(e,t,n)=>{n.d(t,{o:()=>rn});var i=n(615919),r=n(840506),o=n(486889),s=n(269947);function a(e){const{featureFlags:t}=(0,s.ap)();return t&&t[e]}var l=n(380184),c=n(383686),d=n(443317),u=n(921914),m=n(89114);const v=()=>{const e=(0,s.ap)();if(e)return e.config};var p=n(299149),h=n(885347);var Z=n(478848),f=n(436884),b=n(549024),y=n(827510),k=n(142807),g=n(178050);var E=n(362334),w=n(438401),I=n(631543),x=n(363163),C=n(39030),S=n(931841),_=n(17521),A=n(312082),M=n(406766),z=n(133273),R=n(452376),F=n(895189),P=n(233339),V=n(544405);const $=(0,i.Z)({},g.s.connect_link_account_card_description),N=({context:e={text:""},isSelected:t=!1,actions:n=[],testId:r="block-card-unauthorized-view",actionOptions:o,link:s="",onClick:a=(()=>{})})=>(0,C.tZ)(S.RQ,{isSelected:t,testId:r,isFluidHeight:!0},(0,C.tZ)(z.V,{isCompact:!0},(0,C.tZ)("div",null,(0,C.tZ)(R.y,{onClick:e=>(0,P.U)(e,a),link:s},(0,C.tZ)(V.r,{url:s,testId:r})),(0,C.tZ)(A.Y,{testId:r?`${r}-byline`:void 0,text:(0,C.tZ)(k.Z,(0,i.Z)((0,i.Z)({},$),{},{values:{context:e.text}}))})),(0,C.tZ)(F.j,null,(0,C.tZ)(_.z,{name:e.text,icon:e.icon}),!(null!=o&&o.hide)&&(0,C.tZ)(M.S,{items:n}))));N.displayName="UnauthorizedView";var O=n(28432),D=n(260957),T=n(233664),K=n(402219),U=n(737385),B=n(563155),H=n(237488),L=n(426232),j=n(16728);const G=C.iv`
  /* primary element group */
  span[data-smart-element-avatar-group] {
    > ul {
      padding-left: 0px;
      margin-right: 0.5rem;
    }
  }
  [data-smart-element-group] {
    line-height: 1rem;
  }
`,q=C.iv`
  gap: 0.5em;

  [data-smart-element='Title'] {
    font-weight: 600;
  }
`,W=C.iv`
  height: 1.5rem;

  .actions-button-group {
    button,
    button:hover,
    button:focus,
    button:active {
      font-size: 0.875rem;
    }
  }
`,Q=C.iv`
  & > div {
    border-radius: ${"var(--ds-border-radius-200, 8px)"};
    border: 1px solid ${`var(--ds-border, ${j.YS})`};
  }
`;var Y=n(112663),J=n(380879),X=n(24359);const ee=[{name:Y.u5.ModifiedOn},{name:Y.u5.AttachmentCount},{name:Y.u5.SubscriberCount},{name:Y.u5.VoteCount},{name:Y.u5.DueOn},{name:Y.u5.ReadTime}],te=[{name:Y.u5.ReactCount},{name:Y.u5.CommentCount},{name:Y.u5.ViewCount},{name:Y.u5.Priority},{name:Y.u5.SubTasksProgress},{name:Y.u5.ChecklistProgress}],ne={hideElevation:!0},ie={anchorTarget:"_self",position:Y.P0.Center,overrideCss:q,hideRetry:!0,size:Y.wo.Large},re={placement:Y.jS.Right,ignoreContainerPadding:!0},oe={overrideCss:W},se=e=>t=>(0,C.tZ)("div",{css:Q},(0,C.tZ)(e,(0,i.Z)({},t))),ae=({cardState:e,onClick:t,onError:n,onResolve:o,actionOptions:s,testId:a="smart-block-resolved-view",url:l,analytics:c})=>{const[u,m]=(0,r.useState)(!1);(0,r.useEffect)((()=>{m(!1)}),[l,e]);const{titleMetadata:v,topMetadata:p,bottomMetadata:h}=(e=>{var t,n,i;const r=null!==(t=(0,d.U)(e))&&void 0!==t?t:"",o=null==e?void 0:e.data,s=[{name:Y.u5.State}],a=[{name:Y.u5.AuthorGroup},{name:Y.u5.CreatedBy},...ee],l=te;switch(r){case"bitbucket-object-provider":case"native-bitbucket-object-provider":const e=o["@type"].includes("schema:DigitalDocument");return{titleMetadata:s,topMetadata:(0,X.e)("platform.linking-platform.extractor.improve-bitbucket-file-links")&&e?[{name:Y.u5.LatestCommit},{name:Y.u5.CollaboratorGroup},{name:Y.u5.ModifiedOn}]:a,bottomMetadata:l};case"confluence-object-provider":return{titleMetadata:s,topMetadata:(0,J.Fr)(o)?[{name:Y.u5.OwnedByGroup},{name:Y.u5.OwnedBy},...ee]:a,bottomMetadata:l};case"jira-object-provider":return{titleMetadata:s,topMetadata:null!==(n=null===(i=o["@type"])||void 0===i?void 0:i.includes("atlassian:Task"))&&void 0!==n&&n?[{name:Y.u5.AssignedToGroup},{name:Y.u5.AssignedTo},{name:Y.u5.ModifiedOn}]:[{name:Y.u5.AuthorGroup},{name:Y.u5.CreatedBy},{name:Y.u5.ModifiedOn}],bottomMetadata:[{name:Y.u5.StoryPoints},{name:Y.u5.Priority},{name:Y.u5.SubTasksProgress}]};case"slack-object-provider":return{titleMetadata:s,topMetadata:[{name:Y.u5.AuthorGroup},{name:Y.u5.SentOn}],bottomMetadata:[{name:Y.u5.ReactCount},{name:Y.u5.CommentCount}]};default:return{titleMetadata:s,topMetadata:a,bottomMetadata:l}}})(e.details),Z=(0,r.useMemo)((()=>[{name:Y.OF.FollowAction,hideIcon:!0},{name:Y.OF.PreviewAction,hideIcon:!0},{name:Y.OF.ViewAction,hideIcon:!0},{name:Y.OF.DownloadAction,hideIcon:!0}]),[]);return r.createElement(T.Z,{analytics:c,appearance:"block",cardState:e,onClick:t,onError:n,onResolve:o,actionOptions:s,testId:a,ui:ne,url:l},r.createElement(K.Z,(0,i.Z)((0,i.Z)({},ie),{},{metadata:v,subtitle:[{name:Y.u5.Location}],metadataPosition:Y.P0.Top})),r.createElement(U.Z,{primary:p,maxLines:1,overrideCss:G}),r.createElement(B.Z,null),r.createElement(U.Z,{primary:h,maxLines:1,overrideCss:G}),u?null:r.createElement(H.Z,(0,i.Z)((0,i.Z)({},re),{},{onError:()=>{m(!0)}})),r.createElement(L.Z,(0,i.Z)((0,i.Z)({},oe),{},{actions:Z})))};ae.displayName="FlexibleResolvedView";const le=se(ae);var ce=n(872342);const de=(e,t)=>({appearance:"primary",name:Y.OF.CustomAction,content:t?r.createElement(k.Z,(0,i.Z)((0,i.Z)({},g.s.connect_unauthorised_account_action),{},{values:{context:t}})):r.createElement(k.Z,(0,i.Z)({},g.s.connect_link_account_card)),onClick:e,testId:"smart-action-connect-account"});var ue=n(742764),me=n(99965),ve=n(743185),pe=n(541008);const he=({actions:e,cardState:t,children:n,onAuthorize:o,onClick:s,onError:a,showPreview:l=!1,testId:c,title:d,url:u})=>r.createElement(T.Z,{appearance:"block",cardState:t,onAuthorize:o,onClick:s,onError:a,testId:c,ui:ne,url:u},r.createElement(K.Z,(0,i.Z)((0,i.Z)({},ie),{},{hideIcon:!!d,text:d})),r.createElement(ve.Z,null,n),l&&r.createElement(H.Z,(0,i.Z)({},re)),r.createElement(pe.Z,(0,i.Z)((0,i.Z)({},oe),{},{actions:e,testId:"smart-block-card-footer"})));he.displayName="UnresolvedView";const Ze=he,fe=["testId"],be=C.iv`
  color: ${"var(--ds-text-subtlest, #626F86)"};
  margin-top: 0.5rem;
  font-size: 0.75rem;
`,ye=e=>{var t,n,o;let{testId:s="smart-block-unauthorized-view"}=e,a=(0,ce.Z)(e,fe);const{analytics:l,cardState:c,onAuthorize:u}=a,m=null!==(t=(0,d.U)(null==c?void 0:c.details))&&void 0!==t?t:"",v=null===(n=c.details)||void 0===n?void 0:n.data,p=null===(o=(0,ue.S)(v))||void 0===o?void 0:o.text,h=(0,d.x5)(null==c?void 0:c.details),Z=(0,r.useCallback)((()=>{u&&(null==l||l.track.appAccountAuthStarted({extensionKey:m}),u())}),[u,m,null==l?void 0:l.track]),f=(0,r.useMemo)((()=>u?(0,C.tZ)(me.Z,{providerName:p,isProductIntegrationSupported:h,analytics:l,testId:s}):(0,C.tZ)(k.Z,(0,i.Z)((0,i.Z)({},g.s[p?"unauthorised_account_description":"unauthorised_account_description_no_provider"]),{},{values:{context:p}}))),[l,h,u,p,s]),b=(0,r.useMemo)((()=>u?[de(Z,p)]:[]),[Z,u,p]);return(0,C.tZ)(Ze,(0,i.Z)((0,i.Z)({},a),{},{actions:b,testId:s}),(0,C.tZ)("div",{css:be,"data-testid":`${s}-content`},f))};ye.displayName="FlexibleUnauthorisedView";const ke=se(ye);var ge=n(916553),Ee=n(747472),we=n(862766);const Ie=["testId"],xe=e=>{var t;let{testId:n="smart-block-not-found-view"}=e,o=(0,ce.Z)(e,Ie);const s=(0,Ee.Z)(),{cardState:a}=o,l=(0,r.useMemo)((()=>{var e,t;const n=(0,ue.S)(null==a||null===(e=a.details)||void 0===e?void 0:e.data);return null!==(t=null==n?void 0:n.text)&&void 0!==t?t:""}),[null==a||null===(t=a.details)||void 0===t?void 0:t.data]),c=(0,r.useMemo)((()=>s.formatMessage(g.s.not_found_title,{product:l})),[s,l]),d=(0,r.useMemo)((()=>({descriptor:g.s.not_found_description})),[]);return r.createElement(Ze,(0,i.Z)((0,i.Z)({},o),{},{showPreview:!0,testId:n,title:c}),r.createElement(ge.default,{label:"not-found-lock-icon",size:"small",primaryColor:`var(--ds-icon-danger, ${j.rt})`,testId:`${n}-lock-icon`}),r.createElement(we.Z,{message:d,testId:`${n}-message`}))};xe.displayName="FlexibleNotFoundView";const Ce=se(xe),Se=(e,t)=>{try{return void 0!==t&&t in g.s?g.s[t]:e}catch(n){return e}},_e=(e,t,n,o)=>({name:Y.OF.CustomAction,content:r.createElement(k.Z,(0,i.Z)((0,i.Z)({},g.s[t]),{},{values:n})),onClick:e,testId:"smart-action-connect-other-account",isDisabled:o});var Ae=n(2552);const Me=["testId"],ze=e=>{var t;let{testId:n="smart-block-forbidden-view"}=e,s=(0,ce.Z)(e,Me);const{createAnalyticsEvent:a}=(0,o._)(),l=(0,Ee.Z)(),{cardState:c,onAuthorize:d,url:u}=s,m=null==c?void 0:c.details,v=null!==(t=null==m?void 0:m.meta)&&void 0!==t?t:(0,f.h0)().meta,p=(0,ue.S)(null==m?void 0:m.data),h=(null==p?void 0:p.text)||"",Z=(0,r.useMemo)((()=>{const e=r.createElement("b",null,(0,Ae.Z)(u));return{product:h,hostname:e}}),[h,u]),y=(0,r.useMemo)((()=>(0,b.d)({jsonLd:v,url:u,product:h,createAnalyticsEvent:a})),[v,h,u,a]),k=(0,r.useMemo)((()=>{const e=Se(g.s.invalid_permissions,null==y?void 0:y.titleMessageKey);return l.formatMessage(e,{product:h})}),[l,h,null==y?void 0:y.titleMessageKey]),E=(0,r.useMemo)((()=>{let e=[];const t=d?[_e(d,"try_another_account")]:[];if(y){const{action:t,callToActionMessageKey:n}=y;e=t&&n?[_e(t.promise,n,Z,null==y?void 0:y.buttonDisabled)]:[]}return[...t,...e]}),[d,y,Z]);return r.createElement(Ze,(0,i.Z)((0,i.Z)({},s),{},{actions:E,showPreview:!0,testId:n,title:k}),r.createElement(ge.default,{label:"forbidden-lock-icon",size:"small",primaryColor:`var(--ds-icon-danger, ${j.rt})`,testId:`${n}-lock-icon`}),r.createElement(we.Z,{maxLines:2,message:{descriptor:Se(g.s.invalid_permissions_description,null==y?void 0:y.descriptiveMessageKey),values:Z}}))};ze.displayName="FlexibleForbiddenView";const Re=se(ze);var Fe=n(629670);const Pe=["testId"],Ve=e=>{let{testId:t="smart-block-errored-view"}=e,n=(0,ce.Z)(e,Pe);const o=(0,r.useMemo)((()=>{return n.onAuthorize?[(e=n.onAuthorize,{name:Y.OF.CustomAction,onClick:e,content:r.createElement(k.Z,(0,i.Z)({},g.s.try_again)),testId:"smart-action-try-again"})]:[];var e}),[n.onAuthorize]);return r.createElement(Ze,(0,i.Z)((0,i.Z)({},n),{},{actions:o,testId:t}),r.createElement(Fe.default,{label:"errored-warning-icon",size:"small",primaryColor:`var(--ds-icon-warning, ${j.rt})`,testId:`${t}-warning-icon`}),r.createElement(we.Z,{message:{descriptor:g.s.could_not_load_link}}))};Ve.displayName="FlexibleErroredView";const $e=se(Ve),Ne=({id:e,url:t,cardState:n,authFlow:o,handleAuthorize:s,handleErrorRetry:a,handleFrameClick:l,handleInvoke:c,renderers:u,isSelected:m,onResolve:v,onError:p,testId:h,platform:S,analytics:_,enableFlexibleBlockCard:A,actionOptions:M})=>{var z,R;const{status:F,details:V}=n,$=V&&V.data||(0,f.ri)(),T=V&&V.meta,K={analytics:_,origin:"smartLinkCard",handleInvoke:c,extensionKey:(0,d.U)(V),actionOptions:M};if(A){const r={id:e,cardState:n,url:t,testId:h,onClick:e=>(0,P.U)(e,l),onError:p,onResolve:v,renderers:u,actionOptions:M,analytics:_};switch(F){case"pending":case"resolving":return(0,C.tZ)(le,(0,i.Z)((0,i.Z)({},r),{},{testId:"smart-block-resolving-view"}));case"resolved":return(0,C.tZ)(le,(0,i.Z)({},r));case"unauthorized":return(0,C.tZ)(ke,(0,i.Z)((0,i.Z)({},r),{},{onAuthorize:s}));case"forbidden":return(0,C.tZ)(Re,(0,i.Z)((0,i.Z)({},r),{},{onAuthorize:s}));case"not_found":return(0,C.tZ)(Ce,(0,i.Z)((0,i.Z)({},r),{},{onAuthorize:s}));default:return p&&p({url:t,status:F}),o&&"disabled"===o?(0,C.tZ)(y.O,{link:t,isSelected:m,onClick:l,testId:`${h}-${F}`}):(0,C.tZ)($e,(0,i.Z)((0,i.Z)({},r),{},{onAuthorize:s}))}}switch(F){case"pending":case"resolving":return(0,C.tZ)(x.m,{testId:h,isSelected:m});case"resolved":const e=(0,Z.fl)($,T,K,u,S);return v&&v({title:e.title,url:t}),(0,C.tZ)(w.uq,(0,i.Z)((0,i.Z)({},e),{},{isSelected:m,testId:h,onClick:l}));case"unauthorized":p&&p({url:t,status:F});const n=(0,Z.fl)($,T,K);return(0,C.tZ)(N,(0,i.Z)((0,i.Z)({},n),{},{isSelected:m,testId:h,actions:s?[(U=s,{id:"connect-account",text:r.createElement(k.Z,(0,i.Z)({},g.s.connect_link_account_card)),promise:()=>new Promise((e=>e(U()))),buttonAppearance:"default"})]:[],actionOptions:M,onClick:l}));case"forbidden":p&&p({url:t,status:F});const c=(0,Z.fl)($,T,K),d=null!==(z=null==V?void 0:V.meta)&&void 0!==z?z:(0,f.h0)().meta,_=(0,b.r)({jsonLd:d,url:t,product:null===(R=c.context)||void 0===R?void 0:R.text});return(0,C.tZ)(O.rb,(0,i.Z)((0,i.Z)({},c),{},{isSelected:m,actions:s?[(0,E.I)(s)]:[],actionOptions:M,onClick:l,requestAccessContext:_}));case"not_found":p&&p({url:t,status:F});const A=(0,Z.fl)($,T,K);return(0,C.tZ)(I.K,(0,i.Z)((0,i.Z)({},A),{},{isSelected:m,testId:h,onClick:l}));default:return p&&p({url:t,status:F}),o&&"disabled"===o?(0,C.tZ)(y.O,{link:t,isSelected:m,onClick:l,testId:`${h}-${F}`}):(0,C.tZ)(D.n,{link:t,isSelected:m,onRetry:a,onClick:l,testId:h})}var U};var Oe=n(101506),De=n(199009),Te=n(451655),Ke=n(328167),Ue=n(232146),Be=n(735499),He=n(357931),Le=n(269221);const je=(e,t)=>n=>r.createElement(e,(0,i.Z)((0,i.Z)({},n),{},{onMouseEnter:()=>{const e=t.current;e&&(e.style.borderColor=`var(--ds-border, ${j.YS})`)},onMouseLeave:()=>{const e=t.current;e&&e.removeAttribute("style")}}));var Ge=n(278773);class qe extends r.Component{constructor(...e){super(...e),(0,De.Z)(this,"frameRef",r.createRef()),(0,De.Z)(this,"handleRetry",(e=>{const{onRetry:t}=this.props;t&&(e.preventDefault(),e.stopPropagation(),t())})),(0,De.Z)(this,"renderActionButton",(()=>{const{onRetry:e}=this.props,t=je(Ke.Z,this.frameRef);return e&&r.createElement(t,{spacing:"none",component:Le.UD,onClick:this.handleRetry,role:"button"},r.createElement(k.Z,(0,i.Z)({},g.s.try_again)))}))}render(){const{url:e,onClick:t,isSelected:n,testId:i="inline-card-errored-view",icon:o,message:s}=this.props,a=r.createElement(Ue.R,{testId:i,isSelected:n,ref:this.frameRef},r.createElement(Be.G,{icon:o||r.createElement(He.mS,null,r.createElement(Te.default,{label:"error",size:"small",primaryColor:`var(--ds-icon-danger, ${j.rt})`,testId:"errored-view-default-icon"})),link:e,title:e,onClick:t,rightSide:s}),this.renderActionButton());return this.props.showHoverPreview?r.createElement(Ge.z,{url:e},a):a}}qe.displayName="InlineCardErroredView";var We=n(749142),Qe=n(480963),Ye=n(618842);const Je=r.createElement(He.mS,null,r.createElement(We.default,{label:"error",size:"small",primaryColor:`var(--ds-icon-danger, ${j.$H})`,testId:"forbidden-view-fallback-icon"}));class Xe extends r.Component{constructor(...e){var t;super(...e),(0,De.Z)(this,"frameRef",r.createRef()),(0,De.Z)(this,"state",{hasRequestAccessContextMessage:!(null===(t=this.props)||void 0===t||null===(t=t.requestAccessContext)||void 0===t||!t.callToActionMessageKey)}),(0,De.Z)(this,"handleRetry",(e=>{const{onAuthorise:t}=this.props;var n;(e.preventDefault(),e.stopPropagation(),t)?t():null===(n=this.props)||void 0===n||null===(n=n.requestAccessContext)||void 0===n||null===(n=n.action)||void 0===n||n.promise()})),(0,De.Z)(this,"renderForbiddenAccessMessage",(()=>{var e;if(null!==(e=this.props)&&void 0!==e&&null!==(e=e.requestAccessContext)&&void 0!==e&&e.callToActionMessageKey){const{callToActionMessageKey:e}=this.props.requestAccessContext;return r.createElement(k.Z,(0,i.Z)((0,i.Z)({},g.s[e]),{},{values:{product:this.props.context}}))}return r.createElement(r.Fragment,null,r.createElement(k.Z,(0,i.Z)({},g.s.invalid_permissions),(e=>r.createElement(r.Fragment,null,e))))})),(0,De.Z)(this,"renderActionButton",(()=>{var e;const{onAuthorise:t}=this.props,n=je(Ke.Z,this.frameRef),i=null===(e=this.props.requestAccessContext)||void 0===e?void 0:e.accessType;return this.state.hasRequestAccessContextMessage?r.createElement(n,{spacing:"none",onClick:this.handleRetry,component:Le.UD,testId:"button-connect-other-account",role:"button",isDisabled:"PENDING_REQUEST_EXISTS"===i},this.renderForbiddenAccessMessage()):t?r.createElement(Ke.Z,{spacing:"none",onClick:this.handleRetry,appearance:"subtle-link",testId:"button-connect-other-account",role:"button"},r.createElement(Ye.qW,null,r.createElement(Qe.Z,{appearance:"moved"},this.renderForbiddenAccessMessage()))):null}))}render(){const{url:e,icon:t,onClick:n,isSelected:i,testId:o="inline-card-forbidden-view"}=this.props,s=r.createElement(Ue.R,{testId:o,isSelected:i,ref:this.frameRef},r.createElement(Be.G,{icon:t||Je,link:e,title:e,onClick:n,titleColor:`var(--ds-text-subtle, ${j.Mx})`}),this.renderActionButton());return this.props.showHoverPreview?r.createElement(Ge.z,{url:e},s):s}}Xe.displayName="InlineCardForbiddenView";var et=n(596895),tt=n(618305);const nt=(0,n(946972).Z)(Ye.qt,{target:"e15jjudo0"})({name:"1pvg4a",styles:"vertical-align:text-bottom;padding:0px;"});class it extends r.Component{render(){const{url:e,onClick:t,isSelected:n,inlinePreloaderStyle:i,testId:o="inline-card-resolving-view",titleTextColor:s}=this.props;return"on-right-without-skeleton"===i?r.createElement(Ue.R,{withoutBackground:!0,testId:o,onClick:t,isSelected:n},r.createElement(Ye.qt,null,e,r.createElement(Ye.vi,null,r.createElement(nt,{className:"inline-resolving-spinner"},r.createElement(tt.Z,{size:14}))))):r.createElement(Ue.R,{testId:o,onClick:t,isSelected:n},r.createElement(Be.G,{link:e,title:e,titleTextColor:s},r.createElement(nt,{className:"inline-resolving-spinner"},r.createElement(tt.Z,{size:14}))))}}it.displayName="InlineCardResolvingView";const rt=r.createElement(He.mS,null,r.createElement(We.default,{label:"error",size:"small",primaryColor:`var(--ds-icon-danger, ${j.$H})`}));class ot extends r.Component{constructor(...e){super(...e),(0,De.Z)(this,"frameRef",r.createRef()),(0,De.Z)(this,"handleConnectAccount",(e=>{const{analytics:t,extensionKey:n,onAuthorise:i}=this.props;return e.preventDefault(),e.stopPropagation(),i&&(null==t||t.track.appAccountAuthStarted({extensionKey:n})),i()})),(0,De.Z)(this,"renderActionButton",(()=>{const{onAuthorise:e,context:t}=this.props,n=je(Ke.Z,this.frameRef);return e?r.createElement(n,{spacing:"none",component:Le.UD,onClick:this.handleConnectAccount,testId:"button-connect-account"},r.createElement(k.Z,(0,i.Z)((0,i.Z)({},g.s.connect_link_account_card_name),{},{values:{context:t}}))):void 0}))}render(){const{url:e,icon:t,onAuthorise:n,onClick:i,isSelected:o,testId:s="inline-card-unauthorized-view",showAuthTooltip:a=!1}=this.props,l=r.createElement(Ue.R,{testId:s,isSelected:o,ref:this.frameRef},r.createElement(Be.G,{icon:t||rt,title:e,link:e,onClick:i,titleColor:`var(--ds-text-subtle, ${j.Mx})`}),this.renderActionButton());return n&&a?r.createElement(Ge.z,{url:e,id:this.props.id},l):l}}ot.displayName="InlineCardUnauthorizedView";const st=({analytics:e,id:t,url:n,cardState:s,handleAuthorize:l,handleFrameClick:c,isSelected:u,isHovered:m,renderers:v,onResolve:p,onError:h,testId:Z,inlinePreloaderStyle:k,showHoverPreview:g,showAuthTooltip:E,actionOptions:w})=>{var I,x;const{createAnalyticsEvent:C}=(0,o._)(),{status:S,details:_}=s,A=_&&_.data||(0,f.ri)(),M=(0,d.U)(_),z=Z?`${Z}-${S}-view`:void 0,R=a("showHoverPreview");void 0===g&&void 0!==R&&(g=Boolean(R));const F=S===Y._P.Resolved?(0,Oe.o)(A,v):{};switch((0,r.useEffect)((()=>{switch(S){case Y._P.Resolved:null==p||p({url:n,title:F.title});break;case Y._P.Errored:case Y._P.Fallback:case Y._P.Forbidden:case Y._P.NotFound:case Y._P.Unauthorized:h&&h({status:S,url:n})}}),[h,p,S,n,F.title]),S){case"pending":case"resolving":return r.createElement(it,{url:n,isSelected:u,onClick:c,testId:z,inlinePreloaderStyle:k});case"resolved":return r.createElement(et.r,(0,i.Z)((0,i.Z)({},F),{},{id:t,showHoverPreview:g,actionOptions:w,link:n,isSelected:u,isHovered:m,onClick:c,testId:z}));case"unauthorized":const o=(0,ue.S)(A);return r.createElement(ot,{icon:o&&o.icon,context:o&&o.text,url:n,isSelected:u,onClick:c,onAuthorise:l,testId:z,showAuthTooltip:E,id:t,analytics:e,extensionKey:M});case"forbidden":const s=(0,ue.S)(A),a=null!==(I=null==_?void 0:_.meta)&&void 0!==I?I:(0,f.h0)().meta,d=(0,b.d)({jsonLd:a,url:n,product:null!==(x=null==s?void 0:s.text)&&void 0!==x?x:"",createAnalyticsEvent:C});return r.createElement(Xe,{url:n,icon:s&&s.icon,context:null==s?void 0:s.text,isSelected:u,onClick:c,onAuthorise:l,testId:z,requestAccessContext:d,showHoverPreview:g});case"not_found":const v=(0,ue.S)(A);return r.createElement(qe,{url:n,icon:v&&v.icon,isSelected:u,message:"Can't find link",onClick:c,testId:z||"inline-card-not-found-view",showHoverPreview:g});default:return r.createElement(y.O,{link:n,isSelected:u,onClick:c,testId:z||"inline-card-errored-view"})}};var at=n(542459),lt=n(300797),ct=n(110996),dt=n(680298),ut=n(219899);const mt=(e,t,n)=>{const r=(0,at.A)(e,t,n);if(r&&r.src)return(0,i.Z)((0,i.Z)({},r),{},{src:r.src})},vt=(e,t,n,i)=>({link:(0,lt.r)(e)||"",title:(0,ct.O)(e),context:(0,ue.S)(e),preview:mt(e,n,i),isTrusted:(0,dt.y)(t),isSupportTheming:(0,ut.n)(t)});var pt=n(515280),ht=n(299348),Zt=n(513657);const ft=({isPlaceholder:e=!1,children:t,onClick:n,icon:i,text:o,isSelected:s,isFrameVisible:a,frameStyle:l,href:c,minWidth:d,maxWidth:u,testId:m="expanded-frame",inheritDimensions:v,allowScrollBar:p=!1})=>{const h=()=>!e&&(Boolean(c)||Boolean(n)),Z=e=>(0,P.U)(e,n),f=(0,Zt.jB)(),b=(0,r.useMemo)((()=>void 0!==l?l:a?"show":"showOnHover"),[l,a]),y=()=>r.createElement(ht.h4,{className:"embed-header",frameStyle:l},r.createElement(ht.a1,{isPlaceholder:e},!e&&i),r.createElement(ht.OP,{isPlaceholder:e},!e&&r.createElement("a",{href:c,onClick:Z,onMouseDown:f},o))),k=()=>r.createElement(ht.VY,{"data-testid":"embed-content-wrapper",allowScrollBar:p,isInteractive:h(),frameStyle:l},t);return!e&&c?r.createElement(ht.gM,{className:ht.ok,isInteractive:h(),isSelected:s,frameStyle:b,minWidth:d,maxWidth:u,"data-testid":m,"data-trello-do-not-use-override":m,"data-is-selected":s,inheritDimensions:v},y(),k()):r.createElement(ht.im,{className:ht.ok,isInteractive:h(),isSelected:s,minWidth:d,frameStyle:b,maxWidth:u,"data-testid":m,"data-trello-do-not-use-override":m,"data-is-selected":s,"data-wrapper-type":"default","data-is-interactive":h()},y(),k())};var bt=n(180132);const yt=({alt:e="",src:t,size:n=16,title:i,default:o})=>t?r.createElement(bt.Z,{src:t,loading:o,loaded:r.createElement(ht.Ee,{className:"smart-link-icon",src:t,alt:e,size:n,title:i}),errored:o}):o||null;yt.displayName="ImageIcon";const kt=[5,10,15,20,25,30,45,60,90,120,180],gt=({isIframeLoaded:e,isMouseOver:t,isWindowFocused:n,iframePercentVisible:i,onIframeDwell:o})=>{const[s,a]=(0,r.useState)({time:0,percentVisible:0}),l=(0,r.useRef)();return(0,r.useEffect)((()=>{s.time>0&&kt.includes(s.time)&&o&&o(s.time,s.percentVisible)}),[s,o]),(0,r.useEffect)((()=>{const r=()=>{a((({time:e})=>({time:e+1,percentVisible:5*Math.floor(20*(i||0))})))};return e&&t&&n&&i>.75&&(l.current&&clearInterval(l.current),l.current=setInterval(r,1e3)),()=>{l.current&&clearInterval(l.current)}}),[a,t,n,e,i]),null};var Et=n(960771);const wt=r.forwardRef((({url:e,isTrusted:t=!1,testId:n,onIframeDwell:i,onIframeFocus:o},s)=>{const[a,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(!1),[m,v]=(0,r.useState)(!0),p=(0,r.useRef)(),h=(Z=[s,p],e=>{Z.forEach((t=>{"function"==typeof t?t(e):null!==t&&(t.current=e)}))});var Z;const[f,b]=(0,r.useState)(0),[y]=(0,r.useState)([.75,.8,.85,.9,.95,1]);return(0,r.useEffect)((()=>{if(!p||!p.current)return;const e=new IntersectionObserver((e=>{e.forEach((e=>{b(null==e?void 0:e.intersectionRatio)}))}),{threshold:y});return e.observe(p.current),()=>{e.disconnect()}}),[y,h]),(0,r.useEffect)((()=>{const e=()=>{v(!1),document.activeElement===p.current&&o&&o()},t=()=>{v(!0)};return window.addEventListener("blur",e),window.addEventListener("focus",t),()=>{window.removeEventListener("blur",e),window.removeEventListener("focus",t)}}),[p,o]),e?(0,C.tZ)(r.Fragment,null,(0,C.tZ)(gt,{isIframeLoaded:a,isMouseOver:d,isWindowFocused:m,iframePercentVisible:f,onIframeDwell:i}),(0,C.tZ)(Et.G,{childRef:h,src:e,"data-testid":`${n}-frame`,"data-iframe-loaded":a,css:{border:0,top:0,left:0,width:"100%",height:"100%",position:"relative",overflow:"hidden",borderRadius:"3px"},onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),allowFullScreen:!0,scrolling:"yes",allow:"autoplay; encrypted-media; clipboard-write",onLoad:()=>{c(!0)},sandbox:(0,l.XM)(t)})):null}));var It=n(621130);const xt=r.forwardRef((({link:e,context:t,onClick:n,isSelected:i,isFrameVisible:o,frameStyle:s,preview:a,title:l,isTrusted:c,testId:d="embed-card-resolved-view",inheritDimensions:u,onIframeDwell:m,onIframeFocus:v,isSupportTheming:p},h)=>{const Z=null==t?void 0:t.icon,f="string"==typeof Z?Z:void 0,b=l||(null==t?void 0:t.text),y=r.useMemo((()=>(0,C.tZ)(pt.default,{label:"icon",size:"small",testId:"embed-card-fallback-icon"})),[]);let k=r.useMemo((()=>r.isValidElement(Z)?Z:(0,C.tZ)(yt,{src:f,default:y})),[f,y,Z]);const{colorMode:g}=(0,It.Z)();let E=null==a?void 0:a.src;return E&&p&&g&&(E=`${E}${E.includes("?")?"&":"?"}themeMode=${g}`),(0,C.tZ)(ft,{isSelected:i,isFrameVisible:o,frameStyle:s,href:e,testId:d,icon:k,text:b,onClick:n,inheritDimensions:u},(0,C.tZ)(wt,{url:E,isTrusted:c,testId:d,ref:h,onIframeDwell:m,onIframeFocus:v}))}));var Ct=n(2142),St=n(424383);const _t=({onRetry:e,isSelected:t=!1,testId:n="embed-card-errored-view",inheritDimensions:r})=>(0,C.tZ)(S.RQ,{inheritDimensions:r,compact:!0,isSelected:t,testId:n},(0,C.tZ)(Te.default,{size:"small",primaryColor:`var(--ds-icon-danger, ${j.rt})`,label:"error-icon"}),(0,C.tZ)("span",{css:{fontSize:`${(0,Ct.JB)()}px`,marginLeft:(0,St.gs)(.5),marginRight:(0,St.gs)(.5),display:"-webkit-box",overflow:"hidden",textOverflow:"ellipsis",WebkitLineClamp:1,WebkitBoxOrient:"vertical",maxHeight:(0,St.gs)(3)}},(0,C.tZ)(k.Z,(0,i.Z)({},g.s.could_not_load_link))),(0,C.tZ)(Ke.Z,{testId:"err-view-retry",appearance:"link",spacing:"none",onClick:e},(0,C.tZ)(k.Z,(0,i.Z)({},g.s.try_again))));_t.displayName="EmbedCardErroredView";var At=n(555687);const Mt=C.iv`
  display: grid;
  height: inherit;
`,zt=C.iv`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  margin: auto;
  padding: ${"var(--ds-space-200, 16px)"};
  gap: ${"var(--ds-space-250, 20px)"};
  max-width: ${(0,St.gs)(50)};
`,Rt=C.iv`
  height: 120px;
  width: 180px;
  object-fit: contain;
  object-position: center center;
`,Ft=C.iv`
  text-align: center;
  margin: 0;
  padding: 0;
`,Pt=C.iv`
  font-size: 1em;
  text-align: center;
`,Vt=({button:e,description:t,icon:n,image:i,inheritDimensions:o,isSelected:s,onClick:a,testId:l,text:c,title:d,url:u})=>{const m=(0,r.useMemo)((()=>r.isValidElement(n)?n:(0,C.tZ)(yt,{src:"string"==typeof n?n:void 0,default:(0,C.tZ)(pt.default,{label:"icon",size:"small",testId:"embed-card-fallback-icon"})})),[n]);return(0,C.tZ)(ft,{allowScrollBar:!0,frameStyle:"show",href:u,icon:m,inheritDimensions:o,isSelected:s,onClick:a,testId:l,text:c},(0,C.tZ)("div",{css:Mt,"data-testid":`${l}-unresolved-container`},(0,C.tZ)("div",{css:zt},(0,C.tZ)("img",{css:Rt,"data-testid":`${l}-unresolved-image`,src:i}),(0,C.tZ)("h2",{css:Ft,"data-testid":`${l}-unresolved-title`},d),(0,C.tZ)("span",{css:Pt,"data-testid":`${l}-unresolved-description`},t),e)))};Vt.displayName="UnresolvedView";const $t=Vt,Nt="https://smart-links-cdn.us-east-1.prod.public.atl-paas.net",Ot=`${Nt}/lock.svg`,Dt=`${Nt}/not_found.svg`,Tt=`${Nt}/unauth.svg`,Kt=e=>{switch(e){case"forbidden":return Ot;case"unauthorized":return Tt;case"notFound":return Dt}},Ut=["context","onAuthorize","accessContext","testId"],Bt=e=>{let{context:t,onAuthorize:n,accessContext:o,testId:s="embed-card-forbidden-view"}=e,a=(0,ce.Z)(e,Ut);const{icon:l,image:c,text:d=""}=null!=t?t:{},{accessType:u,hostname:m,titleMessageKey:v,descriptiveMessageKey:p,callToActionMessageKey:h,action:Z}=null!=o?o:{},f=(0,r.useMemo)((()=>{var e;const n=null!==(e=null==t?void 0:t.text)&&void 0!==e?e:"";return{context:n,product:n,hostname:r.createElement("b",null,m)}}),[m,null==t?void 0:t.text]),b=(0,r.useMemo)((()=>{var e;const t=null!==(e=null==Z?void 0:Z.promise)&&void 0!==e?e:n;return t?r.createElement(At.Z,{testId:`button-${(null==Z?void 0:Z.id)||"connect-other-account"}`,appearance:"primary",onClick:t,isDisabled:"PENDING_REQUEST_EXISTS"===u},r.createElement(k.Z,(0,i.Z)((0,i.Z)({},Se(g.s.try_another_account,h)),{},{values:f}))):null}),[u,null==Z?void 0:Z.id,null==Z?void 0:Z.promise,h,n,f]);return r.createElement($t,(0,i.Z)((0,i.Z)({},a),{},{icon:l,image:null!=c?c:Kt("forbidden"),testId:s,text:d,title:r.createElement(k.Z,(0,i.Z)((0,i.Z)({},Se(g.s.invalid_permissions,v)),{},{values:f})),description:r.createElement(k.Z,(0,i.Z)((0,i.Z)({},Se(g.s.invalid_permissions_description,p)),{},{values:f})),button:b}))};Bt.displayName="ForbiddenView";const Ht=Bt,Lt=["context","accessContext","testId"],jt=e=>{let{context:t,accessContext:n,testId:o="embed-card-not-found-view"}=e,s=(0,ce.Z)(e,Lt);const{icon:a,image:l,text:c=""}=null!=t?t:{},{titleMessageKey:d,descriptiveMessageKey:u}=null!=n?n:{},m=(0,r.useMemo)((()=>({product:c})),[c]);return r.createElement($t,(0,i.Z)((0,i.Z)({},s),{},{icon:a,image:null!=l?l:Kt("notFound"),testId:o,text:c,title:r.createElement(k.Z,(0,i.Z)((0,i.Z)({},Se(g.s.not_found_title,d)),{},{values:m})),description:r.createElement(k.Z,(0,i.Z)((0,i.Z)({},Se(g.s.not_found_description,u)),{},{values:m}))}))};jt.displayName="NotFoundView";const Gt=jt,qt=["analytics","context","extensionKey","isProductIntegrationSupported","onAuthorize","testId"],Wt=e=>{var t;let{analytics:n,context:o,extensionKey:s,isProductIntegrationSupported:a,onAuthorize:l,testId:c="embed-card-unauthorized-view"}=e,d=(0,ce.Z)(e,qt);const u=(0,r.useCallback)((()=>{l&&(n.track.appAccountAuthStarted({extensionKey:s}),l())}),[l,n.track,s]),m=(0,r.useMemo)((()=>{if(l){var e;const t={context:null!==(e=null==o?void 0:o.text)&&void 0!==e?e:""};if(t)return{title:r.createElement(k.Z,(0,i.Z)((0,i.Z)({},g.s.connect_link_account_card_name),{},{values:t})),description:r.createElement(me.Z,{analytics:n,providerName:null==o?void 0:o.text,isProductIntegrationSupported:a,testId:c}),button:r.createElement(At.Z,{testId:"connect-account",appearance:"primary",onClick:u},r.createElement(k.Z,(0,i.Z)((0,i.Z)({},g.s.connect_unauthorised_account_action),{},{values:t})))}}const t=null!=o&&o.text?{context:null==o?void 0:o.text}:void 0;return t?{title:r.createElement(k.Z,(0,i.Z)((0,i.Z)({},g.s.unauthorised_account_name),{},{values:t})),description:r.createElement(k.Z,(0,i.Z)((0,i.Z)({},g.s.unauthorised_account_description),{},{values:t}))}:{title:r.createElement(k.Z,(0,i.Z)({},g.s.unauthorised_account_name_no_provider)),description:r.createElement(k.Z,(0,i.Z)({},g.s.unauthorised_account_description_no_provider))}}),[n,null==o?void 0:o.text,u,a,l,c]);return r.createElement($t,(0,i.Z)((0,i.Z)((0,i.Z)({},d),m),{},{icon:null==o?void 0:o.icon,image:null!==(t=null==o?void 0:o.image)&&void 0!==t?t:Kt("unauthorized"),testId:c,text:null==o?void 0:o.text}))};Wt.displayName="UnauthorizedView";const Qt=Wt,Yt=r.forwardRef((({url:e,cardState:{status:t,details:n},handleAuthorize:s,handleErrorRetry:a,handleFrameClick:l,analytics:c,handleInvoke:u,isSelected:m,isFrameVisible:v,frameStyle:p,platform:h,onResolve:y,onError:k,testId:g,inheritDimensions:E,onIframeDwell:I,onIframeFocus:C,iframeUrlType:S,actionOptions:_},A)=>{var M,z,R,F,P;const{createAnalyticsEvent:V}=(0,o._)(),$=n&&n.data||(0,f.ri)(),N=n&&n.meta,O=(0,d.U)(n),D=(0,d.x5)(n);switch(t){case"pending":case"resolving":return r.createElement(x.m,{testId:"embed-card-resolving-view",inheritDimensions:E,isSelected:m});case"resolved":const o=vt($,N,h,S);var T;if(y)y({title:o.title,url:e,aspectRatio:null===(T=o.preview)||void 0===T?void 0:T.aspectRatio});if(o.preview)return r.createElement(xt,(0,i.Z)((0,i.Z)({},o),{},{isSelected:m,isFrameVisible:v,frameStyle:p,inheritDimensions:E,onClick:l,ref:A,onIframeDwell:I,onIframeFocus:C,testId:g}));{if("mobile"===h){const e=(0,Oe.o)($);return r.createElement(et.r,(0,i.Z)((0,i.Z)({},e),{},{isSelected:m,testId:g,onClick:l}))}const e=(0,Z.fl)($,N,{analytics:c,origin:"smartLinkEmbed",handleInvoke:u,extensionKey:O,actionOptions:_});return r.createElement(w.uq,(0,i.Z)((0,i.Z)({},e),{},{isSelected:m,testId:g,onClick:l}))}case"unauthorized":k&&k({url:e,status:t});const d=vt($,N,h);return r.createElement(Qt,{analytics:c,context:d.context,extensionKey:O,isProductIntegrationSupported:D,inheritDimensions:E,isSelected:m,onAuthorize:s,onClick:l,testId:g,url:d.link});case"forbidden":k&&k({url:e,status:t});const K=vt($,N,h),U=null!==(M=null==n?void 0:n.meta)&&void 0!==M?M:(0,f.h0)().meta;if(K.preview)return r.createElement(xt,(0,i.Z)((0,i.Z)({},K),{},{title:K.link,isSelected:m,isFrameVisible:v,inheritDimensions:E,onClick:l,ref:A}));const B=(0,b.d)({jsonLd:U,url:e,product:null!==(z=null===(R=K.context)||void 0===R?void 0:R.text)&&void 0!==z?z:"",createAnalyticsEvent:V});return r.createElement(Ht,{context:K.context,inheritDimensions:E,isSelected:m,onAuthorize:s,onClick:l,accessContext:B,url:K.link});case"not_found":k&&k({url:e,status:t});const H=vt($,N,h),L=null!=n&&n.meta?(0,b.d)({jsonLd:null==n?void 0:n.meta,url:e,product:null!==(F=null===(P=H.context)||void 0===P?void 0:P.text)&&void 0!==F?F:"",createAnalyticsEvent:V}):void 0;return r.createElement(Gt,{context:H.context,inheritDimensions:E,isSelected:m,onClick:l,accessContext:L,url:H.link});default:return k&&k({url:e,status:t}),r.createElement(_t,{onRetry:a,inheritDimensions:E,isSelected:m})}}));var Jt=n(926745),Xt=n(874135),en=n(742154),tn=n(714591);function nn({id:e,url:t,isSelected:n,isHovered:i,isFrameVisible:Z,frameStyle:f,platform:b,onClick:y,appearance:k,dispatchAnalytics:g,onResolve:E,onError:w,testId:I,showActions:x,showServerActions:C,actionOptions:S,inheritDimensions:_,embedIframeRef:A,embedIframeUrlType:M,inlinePreloaderStyle:z,ui:R,children:F,showHoverPreview:P,showAuthTooltip:V,analyticsEvents:$}){const{createAnalyticsEvent:N}=(0,o._)(),{state:O,actions:D,analytics:K,config:U,renderers:B,error:H}=function(e,t,n){const i=(0,u.K)(t),{store:o}=(0,s.ap)(),a=(0,p.L)(t,n,e),l=(0,m.C)(e,t,a),c=v(),d=(0,h.h)(),[Z,f]=(0,r.useState)(null);return(0,r.useEffect)((()=>{l.register().catch((e=>f(e)))}),[t,o]),{state:i,actions:l,config:c,analytics:a,renderers:d,error:Z}}(e,t,g),L=$||K,j=(0,d.hZ)(O.details),G=(0,d.U)(O.details),q=(0,d.Q5)(O.details),W=(0,d.wv)(O.details),Q=(0,d.Yr)(O.details),J=(0,d.U2)(O.details),X=(0,d.j7)(O.details);let ee=(0,r.useMemo)((()=>(0,Jt.Im)(F)),[F]);const te=Boolean(a("enableFlexibleBlockCard")),ne=(0,en.z)(S,C,x,b),ie=(0,r.useCallback)((n=>{const i=(0,l.Hk)(n);if(L.ui.cardClickedEvent({id:e,display:ee?Y.V3.Flexible:k,status:O.status,definitionId:j,extensionKey:G,isModifierKeyPressed:i,destinationProduct:W,destinationSubproduct:Q}),y||ee)y&&y(n),(0,Xt.PJ)(N)(n);else{const e=(0,d.vG)(t,O.details),r=i?"_blank":"_self";window.open(e,r),(0,Xt.PJ)(N)(n,{attributes:{clickOutcome:"_blank"===r?"clickThroughNewTabOrWindow":"clickThrough"}})}}),[e,t,O.details,O.status,L.ui,k,j,G,y,ee,W,Q,N]),re=(0,r.useCallback)((()=>D.authorize(k)),[D,k]),oe=(0,r.useCallback)((()=>{D.reload()}),[D]),se=(0,r.useCallback)((e=>D.invoke(e,k)),[D,k]);(0,r.useEffect)((()=>{c.B1(e,O.status),"pending"!==O.status&&"resolving"!==O.status&&(c.Ue(e,O.status),L.operational.instrument({id:e,status:O.status,definitionId:j,extensionKey:G,resourceType:q,error:O.error}))}),[e,k,O.status,O.error,j,G,q,L.operational]),(0,r.useEffect)((()=>{(0,d.ir)(O.status)&&L.ui.renderSuccessEvent({display:ee?"flexible":k,status:O.status,id:e,definitionId:j,extensionKey:G,canBeDatasource:X})}),[ee,k,O.status,t,j,G,L.ui,e,X]);const ae=(0,r.useCallback)(((t,n)=>{L.ui.iframeDwelledEvent({id:e,display:ee?"flexible":k,status:O.status,definitionId:j,extensionKey:G,destinationProduct:W,destinationSubproduct:Q,dwellTime:t,dwellPercentVisible:n})}),[e,O.status,L.ui,k,j,G,ee,W,Q]),le=(0,r.useCallback)((()=>{L.ui.iframeFocusedEvent({id:e,display:ee?"flexible":k,status:O.status,definitionId:j,extensionKey:G,destinationProduct:W,destinationSubproduct:Q})}),[e,O.status,L.ui,k,j,G,ee,W,Q]);if(ee){let n=O;if(H){if("APIError"!==(null==H?void 0:H.name))throw H;n={status:"errored"}}return r.createElement(T.Z,{id:e,cardState:n,onAuthorize:J.length&&re||void 0,onClick:ie,renderers:B,ui:R,showHoverPreview:P,showAuthTooltip:V,actionOptions:ne,url:t,testId:I,onResolve:E,onError:w,analytics:L},F)}if(H)throw H;switch(k){case"inline":return r.createElement(st,{analytics:L,id:e,url:t,renderers:B,cardState:O,handleAuthorize:J.length&&re||void 0,handleFrameClick:ie,isSelected:n,isHovered:i,onResolve:E,onError:w,testId:I,inlinePreloaderStyle:z,showHoverPreview:P,showAuthTooltip:V,actionOptions:ne});case"block":return r.createElement(Ne,{id:e,url:t,renderers:B,authFlow:U&&U.authFlow,cardState:O,handleAuthorize:J.length&&re||void 0,handleErrorRetry:oe,handleInvoke:se,handleFrameClick:ie,analytics:L,isSelected:n,onResolve:E,onError:w,testId:I,actionOptions:ne,platform:b,enableFlexibleBlockCard:te});case"embed":return r.createElement(Yt,{id:e,url:t,cardState:O,iframeUrlType:M,handleAuthorize:J.length&&re||void 0,handleErrorRetry:oe,handleFrameClick:ie,handleInvoke:se,analytics:L,isSelected:n,isFrameVisible:Z,frameStyle:f,platform:b,onResolve:E,onError:w,testId:I,inheritDimensions:_,actionOptions:ne,ref:A,onIframeDwell:ae,onIframeFocus:le})}}const rn=e=>{const t=(0,Jt.Im)(e.children)?Y.V3.Flexible:e.appearance;return r.createElement(tn.W,{url:e.url,id:e.id,display:t},r.createElement(nn,(0,i.Z)({},e)))};rn.displayName="CardWithUrlContent"},960771:(e,t,n)=>{n.d(t,{G:()=>a});var i=n(615919),r=n(872342),o=n(840506);const s=["childRef"],a=e=>{let{childRef:t}=e,n=(0,r.Z)(e,s);return o.createElement("iframe",(0,i.Z)((0,i.Z)({},n),{},{ref:t}))};a.displayName="IFrame"}}]);
//# sourceMappingURL=77205.QlPc4jR2k6.js.map