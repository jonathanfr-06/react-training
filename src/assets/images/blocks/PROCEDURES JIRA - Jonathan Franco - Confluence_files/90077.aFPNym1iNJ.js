"use strict";(self._cf=self._cf||[]).push([[90077],{390077:(e,t,s)=>{s.d(t,{Z:()=>I});var i=s(872342),r=s(615919),o=s(199009),a=s(840506),n=s(430564),l=s(497872),d=s(817182),c=s(24359),u=s(724093),h=s(2142),p=s(184784),v=s(433226),g=s(892543),m=s(22339),f=s(187258),b=s(747472),w=s(486889),x=s(591670);const y=["ref"];function k({trigger:e="hover",userId:t,cloudId:s,resourceClient:o,actions:n=[],position:c="bottom-start",children:v,testId:x,addFlag:k,onReportingLinesClick:E}){const{createAnalyticsEvent:C}=(0,w._)(),{formatMessage:S}=(0,b.Z)(),[I,D]=(0,a.useState)(!1),P="click"===e?0:m.w,T="click"===e?0:m.y,[U,A]=(0,a.useState)(0),[L,K]=(0,a.useState)(0),[M,F]=(0,a.useState)(!1),[$,B]=(0,a.useState)(void 0),[O,_]=(0,a.useState)(!1),[z,R]=(0,a.useState)(null),[N,W]=(0,a.useState)(null),[J,V]=(0,a.useState)(void 0),[q,G]=(0,a.useState)(!1),[j,Y]=(0,a.useState)(void 0),[H,X]=(0,a.useState)(!1);(0,a.useEffect)((()=>(D(!0),()=>{D(!1),clearTimeout(U),clearTimeout(L)})),[]),(0,a.useEffect)((()=>{B(void 0),_(!1),R(null),W(null),V(void 0),G(!1),Y(void 0)}),[t]);const Q=(0,a.useCallback)((e=>{I&&(0,g.BX)(C,e)}),[C,I]),ee=(0,a.useCallback)((()=>{clearTimeout(U),clearTimeout(L),K(window.setTimeout((()=>{F(!1)}),T))}),[T,L,U]),te=(0,a.useCallback)(((e,t,s)=>{I&&(B(!1),_(!1),W(e),V(t),G(s))}),[I,_,B,W,V,G]),se=(0,a.useCallback)((e=>{I&&(B(!1),_(!0),R(e))}),[I,_,B,R]),ie=(0,a.useCallback)((async()=>{if(!0!==$){Y(o.getTeamCentralBaseUrl()),B(!0),_(!1),R(null),W(null);try{const e=Promise.all([o.getProfile(s||"",t,Q),o.getReportingLines(t),o.shouldShowGiveKudos()]),i=await e;te(...i)}catch(e){se(e)}}}),[s,Q,$,o,t,te,se]),re=(0,a.useCallback)((()=>{clearTimeout(L),clearTimeout(U),A(window.setTimeout((()=>{M||(ie(),F(!0))}),P))}),[L,P,U,M,ie]),oe=(0,a.useCallback)((e=>{e.stopPropagation(),re(),M||Q((0,g.cw)("user","click"))}),[Q,re,M]),ae=(0,a.useCallback)((()=>{re(),M||Q((0,g.cw)("user","hover"))}),[Q,re,M]),ne=(0,a.useCallback)((e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),re(),M||Q((0,g.cw)("user","click")))}),[Q,re,M]),le=(0,a.useCallback)((()=>{re()}),[re]),de=(0,a.useMemo)((()=>"hover"===e?{onMouseEnter:ae,onMouseLeave:ee,onBlur:ee,onKeyPress:ne}:{onClick:oe,onKeyPress:ne}),[ee,oe,ne,ae,e]),ce=(0,a.useCallback)((()=>(0,p.Z)(n,N)),[n,N]),ue=!0===$||void 0===$,he=(0,a.useMemo)((()=>"hover"===e?{onMouseEnter:ae,onMouseLeave:ee,onFocus:le}:{}),[ee,le,ae,e]),pe=(0,r.Z)((0,r.Z)({userId:t,isCurrentUser:null==N?void 0:N.isCurrentUser,clientFetchProfile:ie},N),{},{reportingLines:J,onReportingLinesClick:E,isKudosEnabled:q,teamCentralBaseUrl:j,cloudId:s,openKudosDrawer:()=>{ee(),X(!0)}});return a.createElement(a.Fragment,null,a.createElement(u.Z,{isOpen:!!M,onClose:ee,placement:c,content:()=>ue?a.createElement(Z,{fireAnalytics:Q}):a.createElement("div",(0,r.Z)({},he),M&&a.createElement(a.Suspense,{fallback:null},a.createElement(f.J,(0,r.Z)((0,r.Z)({},pe),{},{actions:ce(),hasError:O,errorType:z,withoutElevation:!0})))),trigger:e=>{const{ref:t}=e,s=(0,i.Z)(e,y);return a.createElement("span",(0,r.Z)((0,r.Z)((0,r.Z)({},s),de),{},{ref:t,"data-testid":x,role:"button",tabIndex:0,"aria-label":S({id:"profilecard.user.trigger.aria-label",defaultMessage:"More information about {fullName}"},{fullName:pe.fullName})}),v)},zIndex:h.ug.modal(),shouldUseCaptureOnOutsideClick:!0,autoFocus:"click"===e}),q&&a.createElement(a.Suspense,{fallback:null},a.createElement(l.w,{isOpen:H,recipient:{type:d.iz.INDIVIDUAL,recipientId:t},analyticsSource:"profile-card",teamCentralBaseUrl:j,cloudId:s,addFlag:k,onClose:()=>{X(!1)}})))}const Z=({fireAnalytics:e})=>a.createElement(v.UK,{"data-testId":"profilecard.profilecardtrigger.loading"},a.createElement(x.Z,{fireAnalytics:e}));Z.displayName="LoadingView";const E=["ref"];class C extends a.PureComponent{constructor(...e){super(...e),(0,o.Z)(this,"_isMounted",!1),(0,o.Z)(this,"showDelay","click"===this.props.trigger?0:m.w),(0,o.Z)(this,"hideDelay","click"===this.props.trigger?0:m.y),(0,o.Z)(this,"showTimer",0),(0,o.Z)(this,"hideTimer",0),(0,o.Z)(this,"fireAnalytics",(e=>{this._isMounted&&this.props.createAnalyticsEvent&&(0,g.BX)(this.props.createAnalyticsEvent,e)})),(0,o.Z)(this,"hideProfilecard",(()=>{clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.hideTimer=window.setTimeout((()=>{this.setState({visible:!1})}),this.hideDelay)})),(0,o.Z)(this,"showProfilecard",(()=>{clearTimeout(this.hideTimer),clearTimeout(this.showTimer),this.showTimer=window.setTimeout((()=>{this.state.visible||(this.clientFetchProfile(),this.setState({visible:!0}))}),this.showDelay)})),(0,o.Z)(this,"onClick",(e=>{e.stopPropagation(),this.showProfilecard(),this.state.visible||this.fireAnalytics((0,g.cw)("user","click"))})),(0,o.Z)(this,"onMouseEnter",(()=>{this.showProfilecard(),this.state.visible||this.fireAnalytics((0,g.cw)("user","hover"))})),(0,o.Z)(this,"onKeyPress",(e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.showProfilecard(),this.state.visible||this.fireAnalytics((0,g.cw)("user","click")))})),(0,o.Z)(this,"onFocus",(()=>{this.showProfilecard()})),(0,o.Z)(this,"containerListeners","hover"===this.props.trigger?{onMouseEnter:this.onMouseEnter,onMouseLeave:this.hideProfilecard,onBlur:this.hideProfilecard,onKeyPress:this.onKeyPress}:{onClick:this.onClick,onKeyPress:this.onKeyPress}),(0,o.Z)(this,"layerListeners",{handleClickOutside:this.hideProfilecard,handleEscapeKeydown:this.hideProfilecard}),(0,o.Z)(this,"state",{visible:!1,isLoading:void 0,hasError:!1,error:null,data:null,reportingLinesData:void 0,shouldShowGiveKudos:!1,teamCentralBaseUrl:void 0,kudosDrawerOpen:!1}),(0,o.Z)(this,"clientFetchProfile",(()=>{const{cloudId:e,userId:t}=this.props,{isLoading:s}=this.state;!0!==s&&(this.setState({teamCentralBaseUrl:this.props.resourceClient.getTeamCentralBaseUrl()}),this.setState({isLoading:!0,hasError:!1,data:null},(()=>{Promise.all([this.props.resourceClient.getProfile(e||"",t,this.fireAnalytics),this.props.resourceClient.getReportingLines(t),this.props.resourceClient.shouldShowGiveKudos()]).then((e=>this.handleClientSuccess(...e)),(e=>this.handleClientError(e))).catch((e=>this.handleClientError(e)))})))})),(0,o.Z)(this,"openKudosDrawer",(()=>{this.hideProfilecard(),this.setState({kudosDrawerOpen:!0})})),(0,o.Z)(this,"closeKudosDrawer",(()=>{this.setState({kudosDrawerOpen:!1})})),(0,o.Z)(this,"renderCard",(()=>{const{isLoading:e}=this.state;return!0===e||void 0===e?a.createElement(v.UK,null,a.createElement(x.Z,{fireAnalytics:this.fireAnalytics})):this.renderProfileCard()}))}componentDidMount(){this._isMounted=!0}componentDidUpdate(e){const{userId:t,cloudId:s,resourceClient:i}=this.props,{visible:r}=this.state;!r||t===e.userId&&s===e.cloudId&&i===e.resourceClient||this.setState({isLoading:void 0},this.clientFetchProfile)}componentWillUnmount(){this._isMounted=!1,clearTimeout(this.showTimer),clearTimeout(this.hideTimer)}handleClientSuccess(e,t,s){this._isMounted&&this.setState({isLoading:!1,hasError:!1,data:e,reportingLinesData:t,shouldShowGiveKudos:s})}handleClientError(e){this._isMounted&&this.setState({isLoading:!1,hasError:!0,error:e})}filterActions(){return(0,p.Z)(this.props.actions,this.state.data)}renderProfileCard(){var e;const t=(0,r.Z)((0,r.Z)({userId:this.props.userId,isCurrentUser:null===(e=this.state.data)||void 0===e?void 0:e.isCurrentUser,clientFetchProfile:this.clientFetchProfile},this.state.data),{},{reportingLines:this.state.reportingLinesData,onReportingLinesClick:this.props.onReportingLinesClick,isKudosEnabled:this.state.shouldShowGiveKudos,teamCentralBaseUrl:this.state.teamCentralBaseUrl,cloudId:this.props.cloudId,openKudosDrawer:this.openKudosDrawer}),s="hover"===this.props.trigger?{onMouseEnter:this.onMouseEnter,onMouseLeave:this.hideProfilecard,onFocus:this.onFocus}:{};return a.createElement("div",(0,r.Z)({},s),this.state.visible&&a.createElement(a.Suspense,{fallback:null},a.createElement(f.J,(0,r.Z)((0,r.Z)({},t),{},{actions:this.filterActions(),hasError:this.state.hasError,errorType:this.state.error,withoutElevation:!0}))))}renderWithTrigger(){return a.createElement(a.Fragment,null,a.createElement(u.Z,{isOpen:!!this.state.visible,onClose:this.hideProfilecard,placement:this.props.position,content:this.renderCard,trigger:e=>{const{ref:t}=e,s=(0,i.Z)(e,E);return a.createElement("span",(0,r.Z)((0,r.Z)((0,r.Z)({},s),this.containerListeners),{},{ref:t,"data-testid":this.props.testId,role:"button",tabIndex:0}),this.props.children)},zIndex:h.ug.modal(),shouldUseCaptureOnOutsideClick:!0,autoFocus:"click"===this.props.trigger}),this.state.shouldShowGiveKudos&&a.createElement(a.Suspense,{fallback:null},a.createElement(l.w,{isOpen:this.state.kudosDrawerOpen,recipient:{type:d.iz.INDIVIDUAL,recipientId:this.props.userId},analyticsSource:"profile-card",teamCentralBaseUrl:this.state.teamCentralBaseUrl,cloudId:this.props.cloudId,addFlag:this.props.addFlag,onClose:this.closeKudosDrawer})))}render(){if(this.props.children)return this.renderWithTrigger();throw new Error('Component "ProfileCardTrigger" must have "children" property')}}C.displayName="ProfilecardTrigger",(0,o.Z)(C,"defaultProps",{actions:[],trigger:"hover",position:"bottom-start"});const S=(0,n.Z)()(C);function I(e){return(0,c.e)("platform.profile-card-trigger-next")?a.createElement(k,(0,r.Z)({},e)):a.createElement(S,(0,r.Z)({},e))}},591670:(e,t,s)=>{s.d(t,{Z:()=>l});var i=s(840506),r=s(618305),o=s(433226),a=s(892543);const n=({fireAnalytics:e})=>((0,i.useEffect)((()=>{e((0,a.XO)("user","spinner"))}),[e]),i.createElement(o.eg,null,i.createElement(r.Z,null)));n.displayName="UserLoadingState";const l=n},187258:(e,t,s)=>{s.d(t,{J:()=>i});const i=(0,s(840506).lazy)((()=>Promise.all([s.e(33963),s.e(29583),s.e(87828),s.e(82185),s.e(99470)]).then(s.bind(s,402911))))},184784:(e,t,s)=>{s.d(t,{Z:()=>i});const i=(e=[],t)=>e.filter((e=>!e.shouldRender||("function"!=typeof e.shouldRender?Boolean(e.shouldRender):e.shouldRender(t))))},433226:(e,t,s)=>{s.d(t,{Gv:()=>I,IA:()=>E,UK:()=>u,YI:()=>m,_L:()=>T,aY:()=>y,bm:()=>L,eg:()=>P,f4:()=>S,gp:()=>U,hN:()=>D,k0:()=>k,kx:()=>p,l5:()=>f,m1:()=>h,o$:()=>A,p8:()=>Z,pr:()=>b,qW:()=>C,uF:()=>w,uu:()=>x});var i=s(615919),r=s(946972),o=s(840506),a=s(39030),n=s(16728),l=s(2142),d=s(354355);const c=e=>e.noMeta?`${4.5*(0,l.ww)()}px 0 ${1.5*(0,l.ww)()}px 0`:1.5*(0,l.ww)()+"px 0 0 0",u=(0,r.Z)("div",{target:"e1ebb2vo0"})("background-color:",d.Um,";border-radius:",l.E0,"px;width:",45*(0,l.ww)(),"px;"),h=(0,r.Z)("div",{target:"e1ebb2vo1"})({name:"1su61qk",styles:"position:absolute;top:var(--ds-space-300, 24px);left:var(--ds-space-300, 24px);"}),p=(0,r.Z)("div",{target:"e1ebb2vo2"})({name:"1c3h18e",styles:"flex:1 0 auto;"}),v=a.F4`
  0%   { transform: translate(-80px, -50px); }
  100% { transform: translate(90px, -70px); }
`,g=(0,r.Z)("div",{target:"e1ebb2vo3"})("display:none;height:150px;width:150px;z-index:-1;position:absolute;top:",4*(0,l.ww)()/(0,l.JB)(),"em;animation-name:",v,";animation-iteration-count:1;animation-duration:3s;background-image:radial-gradient( circle,var(--ds-background-information-pressed, #85B8FF) 0%,var(--ds-background-discovery-pressed, #B8ACF6) 25%,transparent 50% );overflow:hidden;"),m=e=>o.createElement(g,(0,i.Z)({className:"kudos-blob-animation"},e));m.displayName="KudosBlobAnimation";const f=(0,r.Z)("div",{target:"e1ebb2vo4"})("clip-path:inset(0px 0px 0px 0px round ",l.E0,"px);position:absolute;top:0;left:0;bottom:0;right:0;"),b=(0,r.Z)("div",{target:"e1ebb2vo5"})({name:"18xp5qc",styles:"margin-left:var(--ds-space-100, 8px);&:focus-within .kudos-blob-animation,&:focus .kudos-blob-animation,&:hover .kudos-blob-animation{display:block;}"}),w=(0,r.Z)("div",{target:"e1ebb2vo6"})("user-select:none;margin:var(--ds-space-200, 16px) 0 0 0;text-align:right;display:flex;justify-content:flex-end;button,a{position:relative;}button,a,span{margin-left:var(--ds-space-100, 8px);&:first-child{margin-left:0;}}a,button{&:focus{outline-color:",`var(--ds-border-focused, ${n.VY})`,";outline-offset:var(--ds-border-width, 2px);outline-style:solid;outline-width:var(--ds-border-width, 2px);}}"),x=(0,r.Z)("div",{target:"e1ebb2vo7"})("display:inline-block;width:32px;height:32px;margin-left:var(--ds-space-100, 8px);button{&:focus{outline-color:",`var(--ds-border-focused, ${n.VY})`,";outline-offset:var(--ds-border-width, 2px);outline-style:solid;outline-width:var(--ds-border-width, 2px);}}"),y=(0,r.Z)("div",{target:"e1ebb2vo8"})("display:flex;flex-direction:column;min-height:",17*(0,l.ww)(),"px;"),k=(0,r.Z)("div",{target:"e1ebb2vo9"})("display:flex;flex-direction:column;margin-left:",14.5*(0,l.ww)(),"px;width:",24.5*(0,l.ww)(),"px;"),Z=(0,r.Z)("div",{target:"e1ebb2vo10"})("font-size:",l._V,"px;color:",d.k3,";margin:var(--ds-space-150, 12px) 0 0 0;line-height:16px;"),E=(0,r.Z)("h2",{target:"e1ebb2vo11"})("overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:18px;font-weight:400;letter-spacing:normal;color:",(e=>e.isDisabledAccount?d.J9:d.DU),";margin:",(e=>c(e)),";line-height:",24/18,"em;:first-child{margin:",(e=>c(e)),";}"),C=(0,r.Z)("div",{target:"e1ebb2vo12"})({name:"qa77ym",styles:"margin-top:var(--ds-space-200, 16px);text-transform:uppercase;display:block;"}),S=(0,r.Z)(C,{target:"e1ebb2vo13"})({name:"1logu7f",styles:"display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start;margin-top:var(--ds-space-150, 12px);> *{margin-top:var(--ds-space-050, 4px);&:not(:last-child){margin-right:var(--ds-space-050, 4px);}}"}),I=(0,r.Z)("span",{target:"e1ebb2vo14"})("overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:14px;color:",d.DU,";margin:0 0 var(--ds-space-150, 12px) 0;line-height:",24/14,"em;"),D=(0,r.Z)("span",{target:"e1ebb2vo15"})("background:",d.DW,";color:",d.u5,";border-radius:",(0,l.E0)(),";padding:0 var(--ds-space-075, 6px);width:fit-content;font-weight:bold;text-transform:uppercase;font-size:12px;margin:var(--ds-space-050, 4px) 0 var(--ds-space-150, 12px) 0;line-height:",24/14,"em;"),P=(0,r.Z)("div",{target:"e1ebb2vo16"})("align-items:center;display:flex;height:",12*(0,l.ww)(),"px;justify-content:center;position:relative;"),T=(0,r.Z)("div",{target:"e1ebb2vo17"})("position:relative;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background-image:linear-gradient( to bottom,",(e=>e.isDisabledUser?d.h_:d.KH)," 0%,",(e=>e.isDisabledUser?d.h_:d.KH)," 100% );background-repeat:no-repeat;background-size:100% ",12*(0,l.ww)(),"px;box-sizing:content-box;padding:var(--ds-space-300, 24px);box-shadow:",(e=>e.withoutElevation?"":`var(--ds-shadow-overlay, 0 4px 8px -2px ${n.Nx}, 0 0 1px ${n.VG})`),";border-radius:",(e=>e.withoutElevation?"":`${(0,l.E0)()}px`),";overflow:hidden;"),U=(0,r.Z)("div",{target:"e1ebb2vo18"})("display:flex;align-items:center;line-height:24px;font-size:",1.5*(0,l.ww)(),"px;margin:var(--ds-space-200, 16px) 0 0 0;white-space:nowrap;& + &{margin-top:var(--ds-space-025, 2px);}"),A=(0,r.Z)("div",{target:"e1ebb2vo19"})("display:flex;flex-shrink:0;color:",d.SW,";width:var(--ds-space-200, 16px);height:var(--ds-space-200, 16px);padding:var(--ds-space-050, 4px);vertical-align:top;svg{width:100%;height:100%;}"),L=(0,r.Z)("span",{target:"e1ebb2vo20"})("overflow:hidden;text-overflow:ellipsis;color:",d.k3,";padding-left:var(--ds-space-050, 4px);")},354355:(e,t,s)=>{s.d(t,{DU:()=>l,DW:()=>c,J9:()=>d,KH:()=>o,SS:()=>a,SW:()=>p,TA:()=>g,Um:()=>r,VA:()=>m,h_:()=>n,k3:()=>h,kq:()=>v,u5:()=>u});var i=s(16728);const r=`var(--ds-surface-overlay, ${i.N0})`,o=`var(--ds-background-brand-bold, ${i.YC})`,a=`var(--ds-background-neutral, ${i.uv})`,n=`var(--ds-background-disabled, ${i.gt})`,l=`var(--ds-text-inverse, ${i.N0})`,d=`var(--ds-text, ${i.q2})`,c=`var(--ds-background-neutral, ${i.IR})`,u=`var(--ds-text, ${i.Mx})`,h=`var(--ds-text, ${i.q2})`,p=`var(--ds-text-subtlest, ${i.ip})`,v=`var(--ds-text-disabled, ${i.WA})`,g=`var(--ds-text, ${i.q2})`,m=`var(--ds-text-subtlest, ${i.WA})`},22339:(e,t,s)=>{s.d(t,{w:()=>i,y:()=>r});const i=800,r=200},817182:(e,t,s)=>{s.d(t,{Jt:()=>o,bs:()=>r,iz:()=>i});let i=function(e){return e.INDIVIDUAL="individual",e.TEAM="team",e}({}),r=function(e){return e.KUDOS_CREATED="kudos-created",e.JIRA_KUDOS_CREATED="jira-kudos-created",e.JIRA_KUDOS_FAILED="jira-kudos-failed",e.DIRTY="dirty",e.CLOSE="close",e}({});const o=e=>Object.values(r).includes(e)},497872:(e,t,s)=>{s.d(t,{w:()=>i});const i=(0,s(840506).lazy)((()=>Promise.all([s.e(11216),s.e(14248),s.e(21488),s.e(84185),s.e(80273),s.e(98634)]).then(s.bind(s,796941))))}}]);
//# sourceMappingURL=90077.aFPNym1iNJ.js.map