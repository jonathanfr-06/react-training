(self._cf=self._cf||[]).push([[36608,75638],{35371:(e,a,t)=>{var l=t(859126),n=t(576083),r=t(143637),s=t(200978),o=t(116742),d=t(505265);e.exports=function(e,a,t){var i=-1,c=n,u=e.length,b=!0,p=[],m=p;if(t)b=!1,c=r;else if(u>=200){var v=a?null:o(e);if(v)return d(v);b=!1,c=s,m=new l}else m=a?[]:p;e:for(;++i<u;){var y=e[i],g=a?a(y):y;if(y=t||0!==y?y:0,b&&g==g){for(var f=m.length;f--;)if(m[f]===g)continue e;a&&m.push(g),p.push(y)}else c(m,g,t)||(m!==p&&m.push(g),p.push(y))}return p}},116742:(e,a,t)=>{var l=t(204005),n=t(272786),r=t(505265),s=l&&1/r(new l([,-0]))[1]==1/0?function(e){return new l(e)}:n;e.exports=s},802311:(e,a,t)=>{var l=t(957271),n=t(217567),r=t(580320),s=t(35371),o=t(658849),d=t(699313),i=r((function(e){var a=d(e);return o(a)&&(a=void 0),s(l(e,1,o,!0),n(a,2))}));e.exports=i},36103:(e,a,t)=>{"use strict";t.d(a,{b:()=>l});const l=t(779076).ZP`query LabelSearchQuery($contentId:ID!$searchText:String!){contentLabelSearch(contentId:$contentId searchText:$searchText){suggestedLabels{prefix name id label}otherLabels{prefix name id label}}}`},36608:(e,a,t)=>{"use strict";t.r(a),t.d(a,{LabelsSelect:()=>b});var l=t(872342),n=t(840506),r=t(93972),s=t(747472),o=t(814728),d=t(240073);const i=["contentId","source","experienceName","components","styles","spaceKey","isInDialog","onUpdateSuccess","onAdded"],c=["isDisabled","labelsQueryLoading","labelsQueryError","labelsMutationError","labelsSearchQueryError","validationError","fetchRecommendedLabels"],u=(0,r.defineMessages)({labelAlreadyAddedMessage:{id:"labels.labels-select.create-new-label-already-added",defaultMessage:"{inputValue} was already added to the page"},labelSearchErrorMessage:{id:"labels.labels-select.labels-search-error",defaultMessage:"Suggestions aren't loading. Try writing it again or refresh the page."}}),b=(0,n.forwardRef)(((e,a)=>{let{contentId:t,source:r,experienceName:b,components:p,styles:m,spaceKey:v,isInDialog:y,onUpdateSuccess:g,onAdded:f}=e,h=(0,l.Z)(e,i);const L=(0,o.fe)({contentId:t,source:r,onUpdateSuccess:g,onAdded:f}),{isDisabled:Z,labelsQueryLoading:E,labelsQueryError:_,labelsMutationError:I,labelsSearchQueryError:x,validationError:w,fetchRecommendedLabels:C}=L,M=(0,l.Z)(L,c),S=(0,s.Z)();return n.createElement(d.c,{isDisabled:Z,labelsQueryLoading:E,labelsQueryError:_,labelsMutationError:I,validationError:w,fetchRecommendedLabels:C,experienceName:b,isInDialog:y,ref:a,spaceKey:v,source:r,styles:m,customProps:h,controlledProps:M,components:p,getNoOptionsMessage:e=>!e||(0,o.nU)(e)||w?null:x?S.formatMessage(u.labelSearchErrorMessage):S.formatMessage(u.labelAlreadyAddedMessage,{inputValue:e})})}))},240073:(e,a,t)=>{"use strict";t.d(a,{c:()=>se});var l=t(615919),n=t(872342),r=t(920839),s=t(767001),o=t(840506),d=t(93972),i=t(142807),c=t(747472),u=t(728100),b=t(647e3),p=t(768896),m=t(16728),v=t(233006),y=t(486889),g=t(332072),f=t(27966),h=t(940155),L=t(155049),Z=t(870797),E=t(814728),_=t(815641),I=t(214870);const x=["as","style"],w=["as","style"],C=["as","style"],M=["children"],S=["as","style"],P=["as","style"],N=["children","isFocused"],k=["isFocused"],$=["children"],R=["spaceKey","source"],D=["children"];t(456928),t(167767),t(525286),t(979586),t(354326),t(816583),t(355958),t(234119),t(599352),t(144961),t(413076),t(66777),t(563952);const{ValueContainer:Q,Input:T,Control:O,MultiValueContainer:V,MultiValueLabel:A,Option:j}=u.c,F=(0,h.ui)({__loadable_id__:"EPCqm",name:"LabelsQueryErrorDisplayLoader",loader:async()=>(await t.e(98689).then(t.bind(t,86256))).LabelsQueryErrorDisplay}),K=(0,h.ui)({__loadable_id__:"DdFm2",name:"LabelsMutationErrorDisplayLoader",loader:async()=>(await t.e(98689).then(t.bind(t,86256))).LabelsMutationErrorDisplay}),U=(0,h.ui)({__loadable_id__:"ZAu6I",name:"LabelsValidationErrorLoader",loader:async()=>(await t.e(98689).then(t.bind(t,86256))).LabelsValidationError}),q=(0,d.defineMessages)({inputPlaceholder:{id:"labels.labels-select.input-placeholder",defaultMessage:"Search or create a label"},createNewLabel:{id:"labels.labels-select.create-new-label",defaultMessage:"Create new label"},addLabelPlaceholder:{id:"labels.view-page-labels.placeholder",defaultMessage:"Add label"}}),z=(0,o.forwardRef)(((e,a)=>{let{as:t="span",style:d}=e,i=(0,n.Z)(e,x);return o.createElement(t,(0,l.Z)((0,l.Z)({},i),{},{style:(0,l.Z)((0,l.Z)({},d),{},{"--_1nvt7kj":(0,r.Z)("var(--ds-space-050, 4px)"),"--_1rfcblr":(0,r.Z)(`var(--ds-background-inverse-subtle, ${m.IR})`),"--_ypa99r":(0,r.Z)(`var(--ds-background-inverse-subtle-pressed, ${m.uv})`)}),ref:a,className:(0,s.Z)(["_1e0c1o8l _k48p1nn1 _1wybdlk8 _vwz4gktf _1yt41b8i _2rko1l7b _bfhkkcr1 _1d26da8q",i.className])}))}));const B=(0,o.forwardRef)(((e,a)=>{let{as:t="div",style:d}=e,i=(0,n.Z)(e,w);return o.createElement(t,(0,l.Z)((0,l.Z)({},i),{},{style:(0,l.Z)((0,l.Z)({},d),{},{"--_h7os2z":(0,r.Z)("var(--ds-space-100, 8px)")}),ref:a,className:(0,s.Z)(["_1e0c1txw _zulp1xra",i.className])}))}));const W=(0,o.forwardRef)(((e,a)=>{let{as:t="div",style:r}=e,d=(0,n.Z)(e,C);return o.createElement(t,(0,l.Z)((0,l.Z)({},d),{},{style:r,ref:a,className:(0,s.Z)(["_1o9zidpf",d.className])}))}));const X={valueContainer:e=>(0,l.Z)((0,l.Z)({},e),{},{paddingLeft:"var(--ds-space-050, 4px)",paddingRight:"var(--ds-space-050, 4px)",paddingTop:"var(--ds-space-050, 4px)",paddingBottom:"var(--ds-space-050, 4px)",display:"flex"}),group:e=>(0,l.Z)((0,l.Z)({},e),{},{paddingTop:"0"}),groupHeading:e=>(0,l.Z)((0,l.Z)((0,l.Z)({},e),(0,v.qm)()),{},{marginTop:"0",marginBottom:"var(--ds-space-100, 8px)"}),multiValueLabel:e=>(0,l.Z)((0,l.Z)({},e),{},{fontWeight:400,fontSize:"14px",lineHeight:"20px",paddingLeft:"var(--ds-space-050, 4px)",paddingRight:"var(--ds-space-025, 2px)",padding:0,maxWidth:"400px",overflow:"hidden",textOverflow:"ellipsis"}),multiValue:e=>(0,l.Z)((0,l.Z)({},e),{},{margin:"var(--ds-space-050, 4px)",backgroundColor:`var(--ds-background-neutral, ${m.IR})`,"&:hover, &:focus-within":{backgroundColor:`var(--ds-background-neutral-pressed, ${m.uv})`},"&:hover .labels__multi-value__label span":{backgroundColor:`var(--ds-background-neutral-pressed, ${m.uv})`},borderRadius:"3px","&:hover a, &:focus-within a":{textDecoration:"none"},pointerEvents:"auto",overflow:"hidden",flexDirection:"row-reverse","div:hover + div":{backgroundColor:`var(--ds-background-accent-red-subtler, ${m.Xd})`},"a > .labels__multi-value__label":{color:`var(--ds-text, ${m.q2})`}}),option:e=>(0,l.Z)((0,l.Z)({},e),{},{width:"max-content",minWidth:"100%"}),input:e=>(0,l.Z)((0,l.Z)({},e),{},{input:{fontFamily:"inherit","::placeholder":{color:`var(--ds-text-subtle, ${m.iw})`},width:"auto !important"},maxWidth:0})},G=e=>e?{control:e=>(0,l.Z)((0,l.Z)({},e),{},{"&:hover, &:focus, &:active, &:focus-within":{borderColor:"var(--ds-border-inverse, white)"},"&:focus-within, :hover":{borderColor:"var(--ds-border-inverse, white)"},cursor:"default !important",borderWidth:"0px"}),multiValueLabel:e=>(0,l.Z)((0,l.Z)({},e),{},{paddingRight:"var(--ds-space-050, 4px)"})}:{},Y=e=>{let{children:a}=e,t=(0,n.Z)(e,M);const{isFocused:r}=t;return o.createElement(O,(0,l.Z)({},t),o.Children.map(a,(e=>(null==e?void 0:e.type)===ae?(0,o.cloneElement)(e,{isFocused:r}):e)))};Y.displayName="CustomControl";const H=(0,o.forwardRef)(((e,a)=>{let{as:t="div",style:d}=e,i=(0,n.Z)(e,S);return o.createElement(t,(0,l.Z)((0,l.Z)({},i),{},{style:(0,l.Z)((0,l.Z)({},d),{},{"--_1b5y5cj":(0,r.Z)(`var(--ds-text-subtle, ${m.iw})`)}),ref:a,className:(0,s.Z)(["_syaz1fw9",i.className])}))}));const J=(0,o.forwardRef)(((e,a)=>{let{as:t="div",style:r}=e,d=(0,n.Z)(e,P);return o.createElement(t,(0,l.Z)((0,l.Z)({},d),{},{style:r,ref:a,className:(0,s.Z)(["_1e0c1txw _4cvr1h6o",d.className])}))}));const ee=()=>o.createElement(J,null,o.createElement(f.default,{label:""}),o.createElement(i.Z,(0,l.Z)({},q.addLabelPlaceholder)));ee.displayName="AddLabelPlaceholder";const ae=e=>{let{children:a,isFocused:t}=e,r=(0,n.Z)(e,N);return o.createElement(Q,(0,l.Z)({},r),o.Children.map(a,(e=>(null==e?void 0:e.type)===te?(0,o.cloneElement)(e,{isFocused:t}):e)),o.createElement(H,null,t?null:r.selectProps.placeholder))};ae.displayName="CustomValueContainer";const te=e=>{let{isFocused:a}=e,t=(0,n.Z)(e,k);const r=(0,c.Z)();return o.createElement(T,(0,l.Z)((0,l.Z)({},t),{},{placeholder:a?r.formatMessage(q.inputPlaceholder):void 0}))};te.displayName="CustomInput";const le=e=>{let{children:a}=e,t=(0,n.Z)(e,$);return o.createElement(V,(0,l.Z)({},t),o.Children.toArray(a).reverse())};le.displayName="CustomMultiValueContainer";const ne=e=>{let{spaceKey:a,source:t}=e,r=(0,n.Z)(e,R);const{createAnalyticsEvent:s}=(0,y._)(),d=(0,o.useCallback)((()=>{s({type:"sendUIEvent",data:{action:"clicked",actionSubject:"label",source:t,attributes:{privacySafePrefix:(0,E.bG)(r.data.prefix)}}}).fire()}),[t,r.data.prefix,s]);return o.createElement("div",{onMouseDown:e=>e.stopPropagation()},o.createElement(g.Z,{content:String(r.data.value).length>=50?r.data.value:""},(e=>o.createElement("a",(0,l.Z)((0,l.Z)({href:`/wiki/label/${a}/${r.data.value}`},e),{},{onClick:d}),o.createElement(A,(0,l.Z)({},r))))))};ne.displayName="CustomMultiValueLabel";const re=e=>{let{children:a}=e,t=(0,n.Z)(e,D);const{data:{__isNew__:r},value:s}=t;return o.createElement(j,(0,l.Z)({},t),r?o.createElement(B,null,o.createElement(W,null,o.createElement(i.Z,(0,l.Z)({},q.createNewLabel))),o.createElement(z,null,s)):o.createElement(z,null,s))};re.displayName="CustomOption";const se=(0,o.forwardRef)((({isDisabled:e,labelsQueryLoading:a,labelsQueryError:t,labelsMutationError:n,validationError:r,fetchRecommendedLabels:s,experienceName:d,isInDialog:i,spaceKey:u,source:m,styles:v,customProps:y,controlledProps:g,components:f,getNoOptionsMessage:h},E)=>{const x=(0,c.Z)();return o.createElement(o.Fragment,null,t?o.createElement(F,{experienceName:d,error:t}):i||!a?o.createElement("div",{onMouseEnter:s},o.createElement(p.Z,(0,l.Z)((0,l.Z)({components:(0,l.Z)((0,l.Z)((0,l.Z)({DropdownIndicator:null,Placeholder:()=>null,Control:Y},!e&&{ValueContainer:ae}),{},{Input:te,MultiValueContainer:le,MultiValueLabel:e=>o.createElement(ne,(0,l.Z)({spaceKey:u,source:m},e))},e&&{MultiValueRemove:()=>null}),{},{Option:re},f),ref:E,noOptionsMessage:({inputValue:e})=>h(e),styles:(0,b.m)(X,(0,b.m)(G(Boolean(e)),v||{})),isClearable:!1,openMenuOnClick:!0,"aria-label":x.formatMessage(q.addLabelPlaceholder),isSearchable:!e,closeMenuOnSelect:!1,defaultOptions:!0,isMulti:!0,classNamePrefix:"labels",placeholder:o.createElement(ee,null),validationState:r?"error":"default"},g),y)),n&&o.createElement(K,{error:n}),r&&o.createElement(U,{error:r,input:g.inputValue}),!a&&o.createElement(L.F,{name:d}),"viewPage"==m&&o.createElement(Z.M,{metric:I.H})):o.createElement(_.O,null))}))},814728:(e,a,t)=>{"use strict";t.d(a,{bG:()=>$,nU:()=>R,fe:()=>A});var l=t(615919),n=t(840506),r=t(167347),s=t(93972),o=t(747472),d=t(492516),i=t.n(d),c=t(802311),u=t.n(c),b=t(394367),p=t.n(b),m=t(647e3),v=t(486889),y=t(190206),g=t(400318),f=t(582463),h=t(649233),L=t(784569),Z=t(273155),E=t(656329),_=t(300976),I=t(36103),x=t(779076);const w=x.ZP`mutation AddLabelsMutation($contentId:ID!$labels:[LabelInput!]!){addLabels(input:{contentId:$contentId labels:$labels}){labels{count nodes{id prefix name label}}}}`,C=x.ZP`mutation DeleteLabelMutation($contentId:ID!$label:String!){deleteLabel(input:{contentId:$contentId label:$label}){contentId label}}`,M=x.ZP`query LabelsQuery($contentId:ID!$refetchQuery:Boolean!$status:[String]){content(id:$contentId status:$status){nodes{id type operations@skip(if:$refetchQuery){operation targetType}space{id}labels(orderBy:{sortField:LABELLING_CREATIONDATE direction:ASCENDING}){count nodes{id label name prefix}}}}}`,S=x.ZP`query RecommendedLabelsQuery($contentId:ID!$spaceId:ID!){getRecommendedLabels(entityId:$contentId entityType:"page" spaceId:$spaceId){recommendedLabels{id name namespace strategy}}}`,P=(0,s.defineMessages)({suggestedLabels:{id:"labels.use-labels-select-props.suggested-labels",defaultMessage:"Suggested labels"}}),N=e=>{const a=e.replace(/^my:/,"");return a.match(_.xd)?"labelsValidationInvalidCharacter":a.match(/^~/)?"labelsValidationTilde":a.length>255?"labelsValidationLength":""},k=e=>/No label found with name/.test((0,E.O)(e).message),$=(e="")=>{var a;return null===(a=e.match(/my|global|team/))||void 0===a?void 0:a[0]},R=e=>"my:favourite"===e||"my:favorite"===e,D=(e,a)=>(e||[]).filter((e=>(null==e?void 0:e.prefix)===a)),Q=(e,a)=>`${e&&"global"!==e?`${e}:`:""}${a}`,T=e=>{var a;return null==e||null===(a=e.getRecommendedLabels)||void 0===a?void 0:a.recommendedLabels},O=e=>a=>{const t=Q(a.prefix,a.label);return{id:a.id,label:t,value:t,prefix:a.prefix,name:a.name,strategy:e}},V=e=>{const a=Q(e.namespace,e.name);return{id:e.id,label:a,value:a,prefix:e.namespace,name:e.name,strategy:"recommended",subStrategy:e.strategy}},A=({contentId:e,source:a,onUpdateSuccess:t,onAdded:s})=>{var d,c,b;const{createAnalyticsEvent:x}=(0,v._)(),Q=(0,Z.N)(),A=(0,n.useContext)(y.F),{activationId:j}=(0,f.D)(),[F,K]=(0,n.useState)(""),[U,q]=(0,n.useState)(""),{data:z,loading:B,error:W}=(0,r.aM)(M,{variables:{contentId:e,refetchQuery:!1,status:_.sY},fetchPolicy:"cache-and-network"}),X=(0,n.useMemo)((()=>{return(e=z)?((null==e||null===(a=e.content)||void 0===a||null===(a=a.nodes)||void 0===a||null===(a=a[0])||void 0===a||null===(a=a.labels)||void 0===a?void 0:a.nodes)||[]).map(O("current")).filter((({label:e})=>!R(e))):[];var e,a}),[z]),G=null==z||null===(d=z.content)||void 0===d||null===(d=d.nodes)||void 0===d||null===(d=d[0])||void 0===d?void 0:d.type,Y=(null==z||null===(c=z.content)||void 0===c||null===(c=c.nodes)||void 0===c||null===(c=c[0])||void 0===c||null===(c=c.space)||void 0===c?void 0:c.id)||"",H=!(null!=z&&null!==(b=z.content)&&void 0!==b&&null!==(b=b.nodes)&&void 0!==b&&null!==(b=b[0])&&void 0!==b&&null!==(b=b.operations)&&void 0!==b&&b.find((e=>"update"===(null==e?void 0:e.operation)&&(null==e?void 0:e.targetType)===G)));(0,n.useEffect)((()=>{!B&&x({type:"sendTrackEvent",data:{action:"rendered",actionSubject:"labels",containerId:Y,containerType:"space",objectId:e,objectType:G,source:a,attributes:(0,l.Z)({count:{global:D(X,"global").length,personal:D(X,"my").length,total:X.length}},Q?{isLivePage:Q}:null)}}).fire()}),[B,X,Y,e,G,a,x,Q]);const[J,{error:ee}]=(0,r.Db)(w,{update(a,{data:{addLabels:t}}){var l;const n=a.readQuery({query:M,variables:{contentId:e,refetchQuery:!1,status:_.sY}});if(null!=n&&null!==(l=n.content)&&void 0!==l&&null!==(l=l.nodes)&&void 0!==l&&l[0]&&null!=t&&t.labels){var r;const l=u()(null===(r=n.content.nodes[0].labels)||void 0===r?void 0:r.nodes,t.labels.nodes,"id");n.content.nodes[0].labels={count:l.length,nodes:l,__typename:"PaginatedLabelList"},a.writeQuery({query:M,variables:{contentId:e,refetchQuery:!1,status:_.sY},data:n})}},onCompleted:()=>{t&&t(),s&&s()}}),ae=(0,n.useCallback)(((a,{data:t})=>{var n,r;const s=a.readQuery({query:M,variables:{contentId:e,refetchQuery:!1,status:_.sY}});if(null!=s&&null!==(n=s.content)&&void 0!==n&&null!==(n=n.nodes)&&void 0!==n&&null!==(n=n[0])&&void 0!==n&&null!==(n=n.labels)&&void 0!==n&&n.nodes&&null!=(null==s||null===(r=s.content)||void 0===r||null===(r=r.nodes)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.labels)||void 0===r?void 0:r.count)){const n=s.content.nodes[0].labels.nodes.filter((e=>{var a;return(null==e?void 0:e.label)!==(null==t||null===(a=t.deleteLabel)||void 0===a?void 0:a.label)}));a.writeQuery({query:M,variables:{contentId:e,refetchQuery:!1,status:_.sY},data:{content:{nodes:[(0,l.Z)((0,l.Z)({},s.content.nodes[0]),{},{labels:{nodes:n,count:n.length,__typename:"PaginatedLabelList"}})],__typename:"PaginatedContentListWithChild"}}})}}),[e]),[te,{error:le}]=(0,r.Db)(C,{update:ae,onCompleted:()=>{t&&t()}}),ne=k(le)?void 0:le,[re,{data:se,loading:oe,error:de}]=(0,r.td)(I.b,{onCompleted:()=>{A.succeed({name:g.Ts0})},onError:e=>{(e=>/Unexpected status code 403/.test((0,E.O)(e).message))(e)&&((0,h.Xb)(e),A.abort({name:g.Ts0,reason:"User was logged out"})),A.fail({error:e,name:g.Ts0})}}),[ie,{data:ce,loading:ue}]=(0,r.td)(S,{variables:{contentId:e,spaceId:Y},onCompleted:t=>{A.succeed({name:g.KD});const l=T(t);l&&x({type:"sendTrackEvent",data:{action:"shown",actionSubject:"labelRecommendations",source:a,containerId:Y,containerType:"space",objectId:e,objectType:G,attributes:{count:null==l?void 0:l.length}}}).fire()},onError:e=>{A.fail({error:e,name:g.KD})}}),be=(0,n.useCallback)((()=>{"page"!==G||H||(A.start({name:g.KD}),ie())}),[G,A,ie,H]),pe=T(ce),me=(({searchLabelQueryResults:e,recommendedLabelsQueryResults:a,hasInput:t})=>{const l=(0,o.Z)();return(0,n.useMemo)((()=>{if(t){var n,r;const a=((null==e||null===(n=e.contentLabelSearch)||void 0===n?void 0:n.otherLabels)||[]).map(O("searched_other"));return[...((null==e||null===(r=e.contentLabelSearch)||void 0===r?void 0:r.suggestedLabels)||[]).map(O("searched_suggested")),...a]}{const e=(T(a)||[]).map(V);return[{label:l.formatMessage(P.suggestedLabels),options:e}]}}),[e,a,t,l])})({searchLabelQueryResults:se,recommendedLabelsQueryResults:ce,hasInput:Boolean(U)}),ve=(0,n.useMemo)((()=>p()(re,150,{leading:!0})),[re]),ye=(0,n.useCallback)((({action:t,labels:n})=>{n.map((({id:n,name:r,prefix:s,strategy:o,subStrategy:d})=>{const i=null==pe?void 0:pe.findIndex((({id:e})=>e===n));let c;var u;i>=0&&(c=i,null!==(u=o)&&void 0!==u&&u.startsWith("searched")&&(o="recommended_searched",d=pe[i].strategy));x({type:"sendTrackEvent",data:{action:t,actionSubject:"label",source:a,objectType:G,objectId:e,containerType:"space",containerId:Y,attributes:(0,l.Z)({contentId:e,labelId:n,strategy:o,subStrategy:d,isNewLabel:"newly_created"===o,privacySafeLabelPrefix:$(s),activationId:j,recommendedCount:null==pe?void 0:pe.length,hasRecommendations:!(null==pe||!pe.length),recommendedRanking:c},Q?{isLivePage:Q}:null),nonPrivacySafeAttributes:{labelName:r,labelPrefix:s}}}).fire()}))}),[G,a,e,Y,x,j,pe,Q]),ge=(0,n.useCallback)((async a=>{A.start({name:g.Sz0});try{var t,l;await J({variables:{labels:[{name:a.name,prefix:a.prefix}],contentId:e},optimisticResponse:{addLabels:{__typename:"AddLabelsPayload",labels:{__typename:"PaginatedLabelList",count:((null==z||null===(t=z.content)||void 0===t||null===(t=t.nodes)||void 0===t||null===(t=t[0])||void 0===t||null===(t=t.labels)||void 0===t?void 0:t.count)||0)+1,nodes:[...(null==z||null===(l=z.content)||void 0===l||null===(l=l.nodes)||void 0===l||null===(l=l[0])||void 0===l||null===(l=l.labels)||void 0===l?void 0:l.nodes)||[],{__typename:"Label",id:a.id,prefix:a.prefix,name:a.name,label:a.name}]}}}}),A.succeed({name:g.Sz0}),ye({action:"add",labels:[a]})}catch(n){A.fail({error:n,name:g.Sz0})}}),[A,J,z,ye,e]),fe=(0,n.useCallback)((async a=>{A.start({name:g.CZ5});try{var t,l,n;const{data:r}=await J({variables:{labels:[{name:a.value,prefix:""}],contentId:e},optimisticResponse:{addLabels:{__typename:"AddLabelsPayload",labels:{__typename:"PaginatedLabelList",count:((null==z||null===(t=z.content)||void 0===t||null===(t=t.nodes)||void 0===t||null===(t=t[0])||void 0===t||null===(t=t.labels)||void 0===t?void 0:t.count)||0)+1,nodes:[...(null==z||null===(l=z.content)||void 0===l||null===(l=l.nodes)||void 0===l||null===(l=l[0])||void 0===l||null===(l=l.labels)||void 0===l?void 0:l.nodes)||[],{name:a.value,prefix:"",__typename:"Label",id:i()(),label:a.value}]}}}});A.succeed({name:g.CZ5}),ye({action:"add",labels:((null==r||null===(n=r.addLabels)||void 0===n||null===(n=n.labels)||void 0===n?void 0:n.nodes)||[]).map(O("newly_created")).filter((({value:e})=>a.value===e))})}catch(r){A.fail({error:r,name:g.CZ5})}}),[A,J,z,ye,e]),he=(0,n.useCallback)((async a=>{const t={deleteLabel:{__typename:"DeleteLabelPayload",contentId:e,label:null==a?void 0:a.name}};if(a){A.start({name:g.u7L});try{await te({variables:{label:a.name,contentId:e},optimisticResponse:t}),A.succeed({name:g.u7L}),ye({action:"deleted",labels:[a]})}catch(l){k(l)?((0,h.Xb)(l),ae((0,L.WQ)(),{data:t}),A.abort({name:g.u7L,reason:"label already deleted"})):(e=>/No content found with id/.test((0,E.O)(e).message))(l)?((0,h.Xb)(l),A.abort({name:g.u7L,reason:"Content was deleted"})):(e=>/Could not delete label from content with id/.test((0,E.O)(e).message))(l)?((0,h.Xb)(l),A.abort({name:g.u7L,reason:"Edit permissions were removed"})):(e=>/Current user not permitted to use Confluence/.test((0,E.O)(e).message))(l)?((0,h.Xb)(l),A.abort({name:g.u7L,reason:"User was logged out"})):A.fail({error:l,name:g.u7L})}}}),[A,te,ye,e,ae]),Le=(0,n.useCallback)((()=>{be(),x({type:"sendTrackEvent",data:{action:"open",actionSubject:"labelsSelect",source:a,containerId:Y,containerType:"space",objectId:e,objectType:G}}).fire()}),[a,Y,e,G,x,be]),Ze=oe||ue;return{options:Ze?[]:me,value:B?[]:X,filterOption:({value:e})=>!de&&(0,m.c)({})&&!R(e)&&!N(e),onChange:async(e,{action:a,option:t,removedValue:l})=>{a===_.MF.SELECT_OPTION?ge(t):a===_.MF.CREATE_OPTION?fe(t):a!==_.MF.REMOVE_VALUE&&a!==_.MF.POP_VALUE||he(l)},onMenuOpen:Le,onInputChange:a=>{const t=N(a);K(t),q(a.toLowerCase().replace(/\s/g,"-")),Boolean(a)?(A.start({name:g.Ts0}),F||ve({variables:{searchText:a,contentId:e}})):be()},inputValue:U,isLoading:Ze,isDisabled:H,labelsQueryLoading:B,labelsQueryError:W,labelsMutationError:ee||ne,labelsSearchQueryError:de,validationError:F,fetchRecommendedLabels:be}}},656329:(e,a,t)=>{"use strict";t.d(a,{O:()=>s});var l=t(99172),n=t.n(l);const r=/\[messageKey=((?:\w|\.)+){1},\s*args=\[((?:.)+)?\]\]\]/;function s(e){let a="",t="";const l=[];if("object"==typeof e&&e.message&&(a=e.message),"string"==typeof a&&a.indexOf("messageKey")>=0&&r.test(a)){const e=r.exec(a);t=e[1];const s=e[2]?e[2].split(","):[];s&&(l[0]=n()(s),l[1]=s.slice(1).join(", "))}return{message:a,messageKey:t,args:l}}},27966:(e,a,t)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l,n=(l=t(840506))&&l.__esModule?l:{default:l},r=t(340531);const s=e=>n.default.createElement(r.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M13 11V7a1 1 0 00-2 0v4H7a1 1 0 000 2h4v4a1 1 0 002 0v-4h4a1 1 0 000-2h-4z" fill="currentColor" fill-rule="evenodd"/></svg>'},e));s.displayName="EditorAddIcon";var o=s;a.default=o}}]);
//# sourceMappingURL=36608.WBEGVxM7s9.js.map