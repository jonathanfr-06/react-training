WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:iframe-insertion-v5', location = 'v5/js/iframe/combined/iframe-insertion.js' */
!function(){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,50)},t=function(e,o,n){try{var i=require(e);o(i)}catch(i){if(n<=0){console.error("Unable to load module: "+e);o(null)}else setTimeout((function(){t(e,o,n-1)}),500)}},o=function(e,t,n,i,a){void 0===i&&(i=20);a=a||500;!e.isModuleDefined||i<=0?n():e.isModuleDefined(t)?n(!0):setTimeout((function(){o(e,t,n,i-1,a)}),a)};function n(e){var t;if("string"==typeof e&&e.length>1)try{t=JSON.parse(e)}catch(t){console.error("ACJS: failed to decode context",e)}"object"!=typeof t&&(t={});return t}window._AP=window._AP||{};window._AP.addonAttemptCounter=window._AP.addonAttemptCounter||{};window._AP._convertConnectOptions=function(e){var t={url:e.url,ns:e.uniqueKey,addon_key:e.addon_key,key:e.key,containerId:"embedded-"+e.uniqueKey,options:{history:{state:""},uniqueKey:e.uniqueKey,origin:e.origin,hostOrigin:e.hostOrigin,moduleType:e.moduleType,moduleLocation:e.moduleLocation,isFullPage:"1"===e.general,autoresize:!0,user:{timeZone:e.timeZone,fullName:e.fullName,uid:e.uid,ukey:e.ukey},productContext:n(e.productCtx),structuredContext:n(e.structuredContext),contextJwt:e.contextJwt,contextPath:e.cp,width:e.w||e.width,height:e.h||e.height,sandbox:e.sandbox,pearApp:e.pearApp,noSub:e.noSub,allowPathTraversal:e.allowPathTraversal,targets:{env:{resize:"both"}}}};"string"==typeof e.contentClassifier&&(t.options.contentClassifier=e.contentClassifier);"number"==typeof e.hostFrameOffset&&(t.options.hostFrameOffset=e.hostFrameOffset+1);window._AP.isSubHost||(t.options.history.state=window.location.hash?window.location.hash.substr(2):"");return t};window._AP._createSub=function(e){var t=document.createElement("iframe"),o=(window.connectHost||window.AP).subCreate(e);o.width=e.options.width||"";o.height=e.options.height||"";o.style="border:0;";o.class="ap-iframe";o["data-addon-key"]=e.addon_key;o["data-key"]=e.key;delete o.src;Object.getOwnPropertyNames(o).forEach((function(e){t.setAttribute(e,o[e])}));return t};function i(e){return void 0!==window[e]}function a(e,t,o){o=o||100;if(i(e))t(window[e]);else var n=setInterval((function(){if(i(e)){clearInterval(n);t(window[e])}}),o)}function d(e){window._AP.isSubHost=function(e,t){if("number"!=typeof e)return window.top;for(var o=t||window,n=0;n<e;n++)o=o.parent;return o}(e.hostFrameOffset)!==window;var t=window._AP._convertConnectOptions(e);window._AP.addonAttemptCounter[t.containerId]=0;if(window._AP.isSubHost){window.AP&&window.AP._data&&window.AP._data.options&&window.AP._data.options.globalOptions&&(t.options.globalOptions=window.AP._data.options.globalOptions);const e=window.AP&&window.AP._data&&window.AP._data.options&&window.AP._data.options.productContext?window.AP._data.options.productContext:{};t.options.productContext=function(e,t){const o={};["content.id","issue.id","issue.key","page.id","project.id","project.key","space.id","space.key"].forEach((t=>{e[t]&&(o[t]=e[t])}));return Object.assign({},o,t)}(e,t.options.productContext);r(window._AP._createSub(t),t)}else a("connectHost",(function(e){var o,n;(o=e,n={addon_key:t.addon_key,key:t.key},o.getExtensions(n).filter((function(e){return Boolean(document.getElementById(e.extension_id))}))).forEach((function(o){if(o.extension.options.uniqueKey===t.options.uniqueKey){var n=document.getElementById(o.extension_id);e.destroy(o.extension_id);n&&AJS.$(n).closest(".ap-iframe-container").remove()}}),this);r(e.create(t),t)}))}function r(t,o){var n=document.getElementById(o.containerId);window._AP.addonAttemptCounter[o.containerId]++;if(n){delete window._AP.addonAttemptCounter[o.containerId];if(window._AP.isSubHost){n.appendChild(t);!function(e,t){var o=e.contentDocument,n={type:"set_inner_iframe_url",iframeData:t,extension_id:JSON.parse(e.name).extension_id},i="(function(){ var w = window; for (var i=0; i<"+t.options.hostFrameOffset+"; i++){w = w.parent; } w.postMessage("+JSON.stringify(n)+', "*");}());';o.open();o.write("<script>"+i+"<\/script>");o.close()}(t,o)}else{var i=n.querySelector(".ap-iframe-container");if(i){i.parentNode.removeChild(i);AJS.log&&AJS.log("AJS: duplicate iframe removed",o,n)}t.appendTo(n);t.data("addon-key",o.addon_key);t.data("key",o.key)}}else window._AP.addonAttemptCounter[o.containerId]<=10&&e((function(){r(t,o)}))}window._AP.appendConnectAddon=function(e){var n=!1;try{window.top.karma&&(n=!0)}catch(e){}void 0===e.hostFrameOffset&&void 0!==window.connectHostFrameOffset&&(e.hostFrameOffset=window.connectHostFrameOffset);window.AJS&&window.AJS.Confluence?-1!==window.name.indexOf("embedded-confluence-iframe")&&(e.hostFrameOffset=0):window.connectHost&&!window.AP&&(e.hostFrameOffset=0);if(window===window.top||n||void 0!==e.hostFrameOffset){/^com\.atlassian\.(jira|confluence)\.emcee($|\.local|\.staging|\.development\..*)/g.test(e.addon_key)?t("ac/marketplace",(function(t){t&&a("connectHost",(function(e){e.defineModule("marketplace",t)}));d(e)}),20):"com.addonengine.analytics"===e.addon_key?a("connectHost",(function(t){o(t,"analytics",(function(){d(e)}))})):d(e)}else{var i=function(t){if(t.source===window.top&&t.data&&void 0!==t.data.hostFrameOffset){window.removeEventListener("message",i);e.hostFrameOffset=t.data.hostFrameOffset;d(e)}};window.addEventListener("message",i);window.top.postMessage({type:"get_host_offset"},"*")}}}();
}catch(e){WRMCB(e)};