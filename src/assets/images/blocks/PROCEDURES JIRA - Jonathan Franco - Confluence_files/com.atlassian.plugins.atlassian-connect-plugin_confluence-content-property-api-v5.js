WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:confluence-content-property-api-v5', location = 'v5/js/confluence/contentproperty/content-property.js' */
!function(t,e){"use strict";e("ac/confluence/content-property",["confluence/root","ajs"],(function(e,n){function o(t,o){var c=e.getContentId();return(o?"":n.contextPath())+"/rest/api/content/"+c+"/property/"+t}function c(t){n.log(t);n.flag({type:"error",title:t,body:"<p>There was a problem communicating with the server. Please refresh the page and try again</p>"})}function r(e,n){const r=window.connectHost&&window.connectHost.getBooleanFeatureFlag&&window.connectHost.getBooleanFeatureFlag("com.atlassian.connect.acjs.oc-2363-content-property-ap-request"),s=o(e,r);if(r){const t=function(t,o){let r;try{r=JSON.parse(o.responseText)}catch(e){t=e}t?404===o.status?n(null):c("Unable to check item state: "+e):n(r)};t._context=n._context;window.connectHostRequest.default.request({url:s},t)}else t.getJSON(s).done(n).fail((function(t){404===t.status?n(null):c("Unable to check item state: "+e)}))}function s(t,e){n.trigger("contentProperty.update",{contentProperty:t,extension:e})}return{getContentProperty:function(t,e){r(t,e)},syncPropertyFromServer:function(t,e){const n=function(t){s(t,e._context.extension);e(t)};window.connectHost&&window.connectHost.getBooleanFeatureFlag&&window.connectHost.getBooleanFeatureFlag("com.atlassian.connect.acjs.oc-2363-content-property-ap-request")&&(n._context=e._context);r(t,n)},setContentProperty:function(e,r){s(e,r._context.extension);!function(e,r){const s=window.connectHost&&window.connectHost.getBooleanFeatureFlag&&window.connectHost.getBooleanFeatureFlag("com.atlassian.connect.acjs.oc-2363-content-property-ap-request");var a=e.key,i={url:o(a,s),contentType:"application/json",data:JSON.stringify(e)};e.version&&e.version.number&&e.version.number>1?i.type="PUT":i.type="POST";if(s){const t=function(t,e){let o;try{o=JSON.parse(e.responseText)}catch(e){t=e}if(t){r({error:e.statusText});c("Unable to "+i.type+" item: "+a)}else{n.log("contentProperty "+a+" "+i.type+" successful");r(o)}};t._context=r._context;window.connectHostRequest.default.request(i,t)}else t.ajax(i).done((function(t){n.log("contentProperty "+a+" "+i.type+" successful");"function"==typeof r&&r(t)})).fail((function(t,e,n){c("Unable to "+i.type+" item: "+a);"function"==typeof r&&r({error:n})}))}(e,r)}}}))}(AJS.$,define);
}catch(e){WRMCB(e)};